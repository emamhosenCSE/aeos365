import{o as K,r,j as e,i as O,n as H,H as U,m as C,c as v,b as n,d as b,e as m,s as W,a as p}from"./app-CUKgmgkQ.js";import{M as q,A as G}from"./App-CvOoorjt.js";import{S as J}from"./StatsCards-_Ui2QLTw.js";import{s as Q}from"./toastUtils-BCw-PFPF.js";import{d as w}from"./dayjs.min-EDeHxeHl.js";import{F as f}from"./CalendarIcon-Csr73T5I.js";import{F as X}from"./CheckCircleIcon-BtkCgu8m.js";import{F as E}from"./UserGroupIcon-BOh_uzO9.js";import{e as S,F as R}from"./PlusIcon-B8O-76eD.js";import{F as Z}from"./MagnifyingGlassIcon-Cas8aWJF.js";import{F as ee}from"./MapPinIcon-BCZPO731.js";import{c as se}from"./chunk-C6WKGNND-Cd99O2LG.js";import{i as te}from"./chunk-SQIAVXJX-BSDoHEaZ.js";import{b as ae}from"./chunk-57V4RE7B-DLR7aw0M.js";import{s as N}from"./chunk-C3QHEOC2-CBY11Hc6.js";import{l as i}from"./chunk-Y5DMIIWQ-QT1gUwpI.js";import{p as re}from"./chunk-NL7EUJG2-f92Tm8j5.js";import"./app-C-p_Tn8z.js";import"./index-Dzu-b3U6.js";/* empty css                      */import"./chunk-CV4BWJDJ-BhkohVh_.js";import"./index-Ci2maQVh.js";import"./index-NVAh7aiH.js";import"./UserIcon-8pNwIG1U.js";import"./Cog6ToothIcon-Bd2U0cAU.js";import"./GlobeAltIcon-DWEN_FH4.js";import"./useBranding-pYw2Hzzv.js";import"./useDialog-DySdyj_3.js";import"./VisuallyHidden-CHV9OSia.js";import"./keyboard-DlCYvvGr.js";import"./useLabels-BrQlrx-g.js";import"./index-cKZ86Ybs.js";import"./XMarkIcon-D9mnutVy.js";import"./chunk-AUA5GDXN-C46Yqs3E.js";import"./chunk-WQVQ7P2I-BPjo0fU9.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BUrMXbuP.js";import"./useMediaQuery-D1T4P2tz.js";import"./chunk-IHO36JMK-Da6CysX7.js";import"./ShieldCheckIcon-BLPk1DHg.js";import"./AcademicCapIcon-oebKVwHX.js";import"./IdentificationIcon-C8gDKdht.js";import"./ArrowLeftIcon-Dj3RuXoT.js";import"./ArrowRightIcon-BJjTlz_O.js";import"./BriefcaseIcon-Bgg5MBD1.js";import"./BuildingOfficeIcon-CH8PKk1B.js";import"./CalendarDaysIcon-BYBK8ahe.js";import"./CircleStackIcon-BW9xW7cx.js";import"./ClipboardDocumentCheckIcon-DWTU-LPH.js";import"./DeviceTabletIcon-ymOs6GC-.js";import"./CpuChipIcon-mcbXnAg0.js";import"./CurrencyDollarIcon-CnTYtBXi.js";import"./DevicePhoneMobileIcon-BGVJ6NhH.js";import"./DocumentArrowUpIcon-i_-dGzbv.js";import"./DocumentIcon-H6SY8Apv.js";import"./EnvelopeIcon-F7b6B4-f.js";import"./EyeIcon-BkMrBF9T.js";import"./InformationCircleIcon-BJy93gUz.js";import"./KeyIcon-B79OyKRq.js";import"./LockClosedIcon-HF4CRMyG.js";import"./PlusCircleIcon-DZoA9ZJ-.js";import"./PrinterIcon-o8fN_3io.js";import"./UserCircleIcon-CZfyut7Z.js";import"./chunk-TW2E3XVA-COE9AJJ7.js";import"./useHasTabbableChild-CGrbfQoB.js";import"./useSelectableItem-l0pHZh0p.js";import"./SelectionManager-B6ixbygR.js";import"./Item-Bua0SRf7.js";import"./MaintenanceModeBanner-C_ymobah.js";import"./index-DFJtv7Cd.js";import"./useTreeState-CSPYaXmS.js";import"./useMenuTriggerState-B-lXHpyB.js";import"./chunk-KQW2TNLT-BJ9m50sz.js";import"./chunk-ICU6NNET-7RZ9nPEr.js";import"./useLabel-BCvojCgc.js";import"./chunk-7F3ZLNJ6-DjpfC3pM.js";import"./index-9IyGFsSn.js";import"./chunk-OH2E76JR-CEiKCNOE.js";const ie=({events:g,filters:u})=>{const{auth:j}=K().props,o=()=>{if(typeof window>"u")return"lg";const x=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",d=parseInt(x);return d===0?"none":d<=4?"sm":d<=8?"md":d<=16?"lg":"full"},[c,z]=r.useState(!1),[le,P]=r.useState(!1);r.useEffect(()=>{const s=()=>{z(window.innerWidth<640),P(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const[a,$]=r.useState(g||{data:[]}),[I,y]=r.useState(!1),[h,M]=r.useState(!1),[t,A]=r.useState({search:u?.search||"",status:u?.status||"all",registration:u?.registration||"all",timeline:u?.timeline||"all"}),_=j.permissions?.includes("event.create")||!1,k=j.permissions?.includes("event.registration.manage")||!1,T=r.useMemo(()=>[{title:"Total Events",value:a?.total||0,icon:e.jsx(f,{}),color:"text-primary",iconBg:"bg-primary/20",description:"All events"},{title:"Published",value:a?.data?.filter(s=>s.is_published).length||0,icon:e.jsx(X,{}),color:"text-success",iconBg:"bg-success/20",description:"Live events"},{title:"Upcoming",value:a?.data?.filter(s=>w(s.event_date).isAfter(w())).length||0,icon:e.jsx(O,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Future events"},{title:"Total Registrations",value:a?.data?.reduce((s,x)=>s+(x.registrations_count||0),0)||0,icon:e.jsx(E,{}),color:"text-warning",iconBg:"bg-warning/20",description:"All participants"}],[a]);r.useCallback(async()=>{y(!0);try{const s=await H.get(route("events.index"),{params:t});$(s.data.events)}catch(s){console.error("Error fetching events:",s),Q.error("Failed to load events")}finally{y(!1)}},[t]);const l=(s,x)=>{A(d=>({...d,[s]:x}))},V=s=>{p.get(route("events.index"),{...t,page:s},{preserveState:!0})},F=()=>{p.get(route("events.create"))},D=s=>{p.get(route("events.show",s.id))},L=s=>{p.get(route("events.edit",s.id))},Y=s=>{p.get(route("events.registrations.index",s.id))},B=s=>{p.get(route("events.analytics",s.id))};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Event Management"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"max-w-[1600px] mx-auto",children:e.jsx("div",{className:"p-6",children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(v,{className:"bg-content1/50 backdrop-blur-md border border-divider/30",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(se,{className:"pb-0",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-6 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 backdrop-blur-sm",children:e.jsx(f,{className:`${c?"w-6 h-6":"w-8 h-8"} text-primary`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`${c?"text-xl":"text-2xl"} font-bold text-foreground`,children:"Event Management"}),e.jsx("p",{className:`${c?"text-xs":"text-sm"} text-default-500`,children:"Manage events, sub-events, and registrations"})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:_&&e.jsx(n,{color:"primary",variant:"shadow",startContent:e.jsx(S,{className:"w-4 h-4"}),onPress:F,size:c?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Create Event"})})]})})}),e.jsxs(b,{className:"p-6",children:[e.jsx(J,{stats:T,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(te,{label:"Search Events",placeholder:"Search by title or description...",value:t.search,onChange:s=>l("search",s.target.value),startContent:e.jsx(Z,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(ae,{variant:"bordered",radius:o(),className:"bg-white/5",children:e.jsxs(n,{isIconOnly:c,color:h?"primary":"default",onPress:()=>M(!h),className:h?"bg-purple-500/20":"bg-white/5",children:[e.jsx(q,{className:"w-4 h-4"}),!c&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),h&&e.jsx(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(N,{label:"Status",placeholder:"Select status...",selectedKeys:[t.status],onChange:s=>l("status",s.target.value),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All Status"},"all"),e.jsx(i,{value:"published",children:"Published"},"published"),e.jsx(i,{value:"draft",children:"Draft"},"draft")]}),e.jsxs(N,{label:"Registration",placeholder:"Select registration status...",selectedKeys:[t.registration],onChange:s=>l("registration",s.target.value),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All"},"all"),e.jsx(i,{value:"open",children:"Open"},"open"),e.jsx(i,{value:"closed",children:"Closed"},"closed")]}),e.jsxs(N,{label:"Timeline",placeholder:"Select timeline...",selectedKeys:[t.timeline],onChange:s=>l("timeline",s.target.value),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All Events"},"all"),e.jsx(i,{value:"upcoming",children:"Upcoming"},"upcoming"),e.jsx(i,{value:"past",children:"Past"},"past")]})]}),(t.search||t.status!=="all"||t.registration!=="all"||t.timeline!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[t.search&&e.jsxs(m,{variant:"flat",color:"primary",size:"sm",onClose:()=>l("search",""),children:["Search: ",t.search]}),t.status!=="all"&&e.jsxs(m,{variant:"flat",color:"secondary",size:"sm",onClose:()=>l("status","all"),children:["Status: ",t.status]}),t.registration!=="all"&&e.jsxs(m,{variant:"flat",color:"warning",size:"sm",onClose:()=>l("registration","all"),children:["Registration: ",t.registration]}),t.timeline!=="all"&&e.jsxs(m,{variant:"flat",color:"success",size:"sm",onClose:()=>l("timeline","all"),children:["Timeline: ",t.timeline]})]})]})}),e.jsxs("div",{className:"min-h-96",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 font-semibold text-lg",children:[e.jsx(R,{className:"w-5 h-5"}),"Events Management"]}),I?e.jsx(v,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(b,{className:"text-center py-12",children:[e.jsx(W,{size:"lg"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading events..."})]})}):a?.data?.length>0?e.jsxs("div",{className:"space-y-4",children:[a.data.map(s=>e.jsx(v,{className:"hover:shadow-lg transition-shadow",children:e.jsx(b,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.banner_image&&e.jsx("div",{className:"w-full md:w-48 h-32 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:`/storage/${s.banner_image}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-default-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),w(s.event_date).format("MMM DD, YYYY")," at ",s.event_time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-4 h-4"}),s.venue]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{color:s.is_published?"success":"warning",size:"sm",variant:"flat",children:s.is_published?"Published":"Draft"}),e.jsx(m,{color:s.is_registration_open?"primary":"default",size:"sm",variant:"flat",children:s.is_registration_open?"Open":"Closed"})]})]}),e.jsx("p",{className:"text-sm text-default-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),s.approved_registrations_count||0," / ",s.max_participants||"âˆž"," participants"]}),e.jsxs("span",{children:[s.sub_events?.length||0," sub-events"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"flat",onPress:()=>D(s),children:"View"}),j.permissions?.includes("event.update")&&e.jsx(n,{size:"sm",color:"primary",variant:"flat",onPress:()=>L(s),children:"Edit"}),k&&e.jsxs(n,{size:"sm",color:"secondary",variant:"flat",onPress:()=>Y(s),children:["Registrations (",s.registrations_count||0,")"]}),e.jsx(n,{size:"sm",variant:"flat",startContent:e.jsx(R,{className:"w-4 h-4"}),onPress:()=>B(s),children:"Analytics"})]})]})]})]})})},s.id)),a?.last_page>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(re,{total:a.last_page,page:a.current_page,onChange:V,showControls:!0,radius:o()})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-default-500 mb-4",children:"No events match your search criteria."}),_&&e.jsx(n,{color:"primary",startContent:e.jsx(S,{className:"w-5 h-5"}),onPress:F,children:"Create Your First Event"})]})]})]})]})})})})})]})};ie.layout=g=>e.jsx(G,{children:g});export{ie as default};
