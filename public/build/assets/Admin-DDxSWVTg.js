import{r as d,j as e,H as y,c as N,d as S,b as x,a as h,f as R}from"./app-BkgCtHXO.js";import{s as g}from"./toastUtils-x3kUGVfR.js";import{F as I}from"./UserCircleIcon-BqKUdOjE.js";import{F}from"./ExclamationCircleIcon-CNYB3GSb.js";import{F as A}from"./CheckCircleIcon-BA11f32N.js";import{c as C}from"./chunk-C6WKGNND-MUA-e_xI.js";import{i as c}from"./chunk-SQIAVXJX-Byw4yFUd.js";import"./app-Bq-q9uAS.js";import"./index-B7m8hOZr.js";import"./chunk-KQW2TNLT-B1u5jByx.js";import"./index-n2HRE6J3.js";import"./chunk-ICU6NNET-CIX58cOD.js";import"./useLabel-fBkMOesA.js";import"./useLabels-4bh2Qhvc.js";function B({title:j,licenseEmail:f}){const[n,v]=d.useState("lg"),[l,w]=d.useState({admin_name:"",admin_email:f||"",admin_password:"",admin_password_confirmation:""}),[i,u]=d.useState({}),[o,p]=d.useState(!1);d.useEffect(()=>{v((()=>{const t=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",a=parseInt(t);return a===0?"none":a<=4?"sm":a<=8?"md":a<=12?"lg":"xl"})())},[]);const m=(s,r)=>{w(t=>({...t,[s]:r})),i[s]&&u(t=>({...t,[s]:""}))},_=async()=>{u({});const s=new Promise(async(r,t)=>{try{p(!0);const a=await R.post(route("install.save-admin"),l);a.data.success?(r([a.data.message]),setTimeout(()=>{b()},1e3)):t([a.data.message])}catch(a){a.response?.data?.errors&&u(a.response.data.errors),t(a.response?.data?.message?[a.response.data.message]:["Failed to save admin details"]),p(!1)}});g.promise(s,{loading:"Saving admin details...",success:r=>r.join(", "),error:r=>Array.isArray(r)?r.join(", "):r})},b=()=>{h.visit(route("install.process"),{method:"post",preserveState:!0,onSuccess:()=>{},onError:s=>{p(!1),g.error(s.message||"Installation failed")}})};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:j}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-content1 to-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-primary font-semibold",children:"Step 5 of 6"}),e.jsx("span",{className:"text-default-500",children:"Admin User"})]}),e.jsx("div",{className:"mt-2 h-2 bg-default-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:"83.33%"}})})]}),e.jsxs(N,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Create Admin User"}),e.jsx("p",{className:"text-sm text-default-600 mt-1",children:"Set up your administrator account"})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{label:"Full Name",placeholder:"John Doe",value:l.admin_name,onValueChange:s=>m("admin_name",s),isInvalid:!!i.admin_name,errorMessage:i.admin_name,isRequired:!0,radius:n,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(c,{type:"email",label:"Email Address",placeholder:"admin@example.com",value:l.admin_email,onValueChange:s=>m("admin_email",s),isInvalid:!!i.admin_email,errorMessage:i.admin_email,isRequired:!0,radius:n,classNames:{inputWrapper:"bg-default-100"},description:f?"Using license email. You can change this if needed.":"This will be your login email"}),e.jsx(c,{type:"password",label:"Password",placeholder:"Enter a strong password",value:l.admin_password,onValueChange:s=>m("admin_password",s),isInvalid:!!i.admin_password,errorMessage:i.admin_password,isRequired:!0,radius:n,classNames:{inputWrapper:"bg-default-100"},description:"Minimum 8 characters"}),e.jsx(c,{type:"password",label:"Confirm Password",placeholder:"Re-enter password",value:l.admin_password_confirmation,onValueChange:s=>m("admin_password_confirmation",s),isInvalid:!!i.admin_password_confirmation,errorMessage:i.admin_password_confirmation,isRequired:!0,radius:n,classNames:{inputWrapper:"bg-default-100"}}),e.jsx("div",{className:"p-4 bg-primary/10 border border-primary/20 rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-primary mb-1",children:"Administrator Privileges"}),e.jsxs("ul",{className:"space-y-1 text-default-700 dark:text-default-300",children:[e.jsx("li",{children:"• This user will have full system access (Super Admin role)"}),e.jsx("li",{children:"• You can create additional users after installation"}),e.jsx("li",{children:"• Keep your credentials secure"}),e.jsx("li",{children:"• You'll use these credentials to login after installation"})]})]})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(x,{variant:"flat",radius:n,onPress:()=>h.visit(route("install.application")),isDisabled:o,children:"Back"}),e.jsx(x,{color:"primary",size:"lg",radius:n,onPress:_,isLoading:o,endContent:!o&&e.jsx(A,{className:"w-5 h-5"}),children:o?"Starting Installation...":"Start Installation"})]})]})})]})]})})]})}export{B as default};
