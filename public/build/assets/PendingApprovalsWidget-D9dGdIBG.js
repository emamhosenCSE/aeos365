import{r as t,f as N,j as e,c as d,d as c,p as v,e as i,a as o,b as w}from"./app-B6wsOsaS.js";import{D as n}from"./index-3SaTkLKc.js";import{F as b}from"./CheckCircleIcon-DEtAvStx.js";import{F as y}from"./CalendarDaysIcon-CNGOJamk.js";import{F as _}from"./ArrowRightIcon-Q7iwOzQG.js";import{c as x}from"./chunk-C6WKGNND-_SL0ETSL.js";import{s as l}from"./chunk-P7ACKWSP-BNwvhvzP.js";import{d as m}from"./chunk-IHO36JMK-CuHsjaEa.js";import"./app-BB4fUsfm.js";function z(){const[p,f]=t.useState(!0),[r,u]=t.useState([]),[a,h]=t.useState({pending:0,approved:0,rejected:0,total:0});t.useEffect(()=>{g()},[]);const g=async()=>{try{const s=await N.get(n("leaves.pending-approvals"));s.data.success&&(u(s.data.pending_leaves||[]),h(s.data.stats||{pending:0,approved:0,rejected:0,total:0}))}catch(s){console.error("Failed to fetch pending approvals:",s)}finally{f(!1)}},j=()=>{o.visit(n("leaves"))};return p?e.jsxs(d,{className:"w-full h-full",children:[e.jsxs(x,{className:"flex justify-between items-center pb-2",children:[e.jsx(l,{className:"w-40 h-6 rounded"}),e.jsx(l,{className:"w-16 h-6 rounded-full"})]}),e.jsx(m,{}),e.jsx(c,{className:"space-y-3",children:[1,2,3].map(s=>e.jsx(l,{className:"w-full h-16 rounded"},s))})]}):e.jsxs(d,{className:"w-full h-full",children:[e.jsxs(x,{className:"flex justify-between items-center pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-warning"}),e.jsx("h3",{className:"text-base font-semibold",children:"Pending Approvals"})]}),e.jsx(i,{size:"sm",color:"warning",variant:"flat",children:a.pending})]}),e.jsx(m,{}),e.jsxs(c,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"text-center p-2 bg-warning-50 dark:bg-warning-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Pending"}),e.jsx("p",{className:"text-lg font-bold text-warning",children:a.pending})]}),e.jsxs("div",{className:"text-center p-2 bg-success-50 dark:bg-success-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Approved"}),e.jsx("p",{className:"text-lg font-bold text-success",children:a.approved})]}),e.jsxs("div",{className:"text-center p-2 bg-danger-50 dark:bg-danger-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Rejected"}),e.jsx("p",{className:"text-lg font-bold text-danger",children:a.rejected})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{className:"w-12 h-12 mx-auto text-success mb-2"}),e.jsx("p",{className:"text-sm text-default-500",children:"No pending approvals"})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.slice(0,5).map(s=>e.jsxs("div",{className:"p-3 border border-divider rounded-lg hover:bg-default-50 dark:hover:bg-default-100 transition-colors cursor-pointer",onClick:()=>o.visit(n("leaves")),children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:s.user?.name||"Unknown User"}),e.jsx(i,{size:"sm",color:"primary",variant:"flat",children:s.leave_setting?.type||"Leave"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-default-500",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(s.from_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - "," ",new Date(s.to_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),e.jsxs("span",{className:"ml-auto",children:[s.no_of_days," day",s.no_of_days!==1?"s":""]})]})]},s.id))}),r.length>0&&e.jsx(w,{color:"primary",variant:"flat",size:"sm",fullWidth:!0,endContent:e.jsx(_,{className:"w-4 h-4"}),onPress:j,children:"View All Approvals"})]})]})}export{z as default};
