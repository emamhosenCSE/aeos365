import{r as i,f as G,j as e,c as h,d as u,F as we,n as _e,p as J,a as Fe,e as F,H as ke,m as le,b as I,h as We,R as Se}from"./app-B6wsOsaS.js";import{D as Q}from"./index-3SaTkLKc.js";import{S as Ce}from"./StatsCards-CfadUbLo.js";import{F as Ae}from"./CalendarDaysIcon-CNGOJamk.js";import{F as k}from"./BuildingOfficeIcon-DnIJIovL.js";import{F as Re,c as Le}from"./PlusIcon-C9FvSUYH.js";import{s as X}from"./chunk-P7ACKWSP-BNwvhvzP.js";import{s as W,a as ie}from"./chunk-C3QHEOC2-CExZ-LMh.js";import{l as c}from"./chunk-Y5DMIIWQ-rOZjnGr-.js";import{c as M}from"./chunk-C6WKGNND-_SL0ETSL.js";import{u as H}from"./useMediaQuery-DZUWRbmB.js";import{P as de,m as ne,L as De,A as Pe}from"./App-CK2S0NSv.js";import{F as z}from"./UserGroupIcon-BnTYq6Wz.js";import{F as q}from"./CheckCircleIcon-DEtAvStx.js";import{F as Ee}from"./MagnifyingGlassIcon-DmsBlCH7.js";import{p as $e}from"./chunk-VFIJPDYX-BAUheveH.js";import{i as Ie}from"./chunk-SQIAVXJX-BKfxTp82.js";import{t as ze,a as K}from"./chunk-ML27DD5T-CzAcLsr8.js";import{t as oe,a as ce,b as me,c as y}from"./chunk-F3UDT23P-BA6MA9xb.js";import{t as xe,a as l}from"./chunk-YRZGWF2W-HdxvFUui.js";import{p as Me}from"./chunk-NL7EUJG2-TrgaiFKZ.js";import"./app-BB4fUsfm.js";import"./Item-yM1k0-R2.js";import"./SelectionManager-eawIzC-w.js";import"./keyboard-d_Cx4XEU.js";import"./index-DMeZYFdq.js";import"./index-773UVyf0.js";import"./useDialog-rBwgFJmV.js";import"./VisuallyHidden-DEnSGsKL.js";import"./useLabels-DVIweNe1.js";import"./chunk-WQVQ7P2I-DXEzOwOx.js";import"./number-CB4zbwAz.js";import"./index-C_o7Bf_A.js";import"./useSelectableItem-DpOenvUT.js";import"./chunk-IHO36JMK-CuHsjaEa.js";import"./useTreeState-BNMgu_i0.js";import"./useMenuTriggerState-Dvk1J6fz.js";import"./chunk-LGMZDQT5-DUzpVbXi.js";import"./chunk-KQW2TNLT-BeNS3Aal.js";import"./chunk-ICU6NNET-CzjpQ7vS.js";import"./useLabel-DTEaCOH9.js";import"./chunk-7F3ZLNJ6-CVIW-qTW.js";import"./index-Dj1DxqL-.js";import"./index-CIwQtxcj.js";/* empty css                      */import"./toastUtils-DmQakeEH.js";import"./chunk-CV4BWJDJ-sFKQZUA4.js";import"./index-C6MJzj-f.js";import"./UserIcon-zGrV1LXN.js";import"./Cog6ToothIcon-1p63ATJ9.js";import"./GlobeAltIcon-D9tP4Qv3.js";import"./useBranding-Cgbupwpf.js";import"./XMarkIcon-DSAMkR0J.js";import"./chunk-AUA5GDXN-D33GKj_3.js";import"./ShieldCheckIcon-DF7lbYzR.js";import"./AcademicCapIcon-c76c8V93.js";import"./IdentificationIcon-BSUeSBTx.js";import"./ArrowLeftIcon-CjhLcjy7.js";import"./ArrowRightIcon-Q7iwOzQG.js";import"./BriefcaseIcon-CfrA7uZL.js";import"./CalendarIcon-CypwPsvu.js";import"./CircleStackIcon-hc_OxvAS.js";import"./ClipboardDocumentCheckIcon-CEdkKJRr.js";import"./CogIcon-BdBOCRJh.js";import"./DeviceTabletIcon-BrLL8Uu0.js";import"./CpuChipIcon-Bfdnt9hm.js";import"./CurrencyDollarIcon-fSR_V4QE.js";import"./DevicePhoneMobileIcon-d0Zfm2Fn.js";import"./DocumentArrowUpIcon-BDLSt_mx.js";import"./DocumentIcon-Dyrjy08c.js";import"./EnvelopeIcon-BdlOEcSN.js";import"./ExclamationCircleIcon-CFmKLbEe.js";import"./EyeIcon-Bs5b_dRl.js";import"./InformationCircleIcon-5mmLyCUw.js";import"./KeyIcon-BtibGx6O.js";import"./LockClosedIcon-CrgI0ZvI.js";import"./MapPinIcon-DLvBLoQF.js";import"./PlusCircleIcon-eYEq8aLq.js";import"./PrinterIcon-B62kMcVA.js";import"./RocketLaunchIcon-CqcTuNxP.js";import"./ShoppingCartIcon-DMRwrhqY.js";import"./UserCircleIcon-CGWanMDr.js";import"./chunk-TW2E3XVA-BZhjrx-b.js";import"./chunk-I3A4XRYQ-Bvb62EOb.js";import"./useToggleState-C4IQRJez.js";import"./MaintenanceModeBanner-Bsokv2rf.js";import"./useProgressBar-BC81c7lH.js";import"./useNumberFormatter-9Tnh8M-m.js";import"./NumberFormatter-DNR9MAW-.js";import"./useHasTabbableChild-9XeiQEfl.js";import"./index-CokAva9Y.js";import"./chunk-PMMJMDBI-9SYdMhDV.js";import"./index-DRTMPV8J.js";import"./chunk-OH2E76JR-DYX-Z8Mk.js";function Ve({year:S,departmentId:V,departments:U=[]}){const[o,d]=i.useState(!0),[m,D]=i.useState(null),[C,Z]=i.useState(S),[f,P]=i.useState(V||"");i.useEffect(()=>{j()},[C,f]);const j=async()=>{d(!0);try{const t=await G.get(Q("leaves.analytics"),{params:{year:C,department_id:f||void 0}});t.data.success&&D(t.data.analytics)}catch(t){console.error("Failed to fetch analytics:",t)}finally{d(!1)}},x=i.useMemo(()=>{const t=new Date().getFullYear();return Array.from({length:5},(p,b)=>t-b)},[]);if(o)return e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(t=>e.jsx(h,{children:e.jsx(u,{className:"p-6",children:e.jsx(X,{className:"w-full h-64 rounded"})})},t))});if(!m)return e.jsx(h,{children:e.jsxs(u,{className:"p-6 text-center",children:[e.jsx(we,{className:"w-12 h-12 mx-auto text-warning mb-2"}),e.jsx("p",{className:"text-default-500",children:"No analytics data available"})]})});const A=Math.max(...m.monthly_trends.map(t=>Math.max(t.leaves_taken,t.leaves_approved)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(W,{label:"Year",selectedKeys:[String(C)],onChange:t=>Z(Number(t.target.value)),className:"w-full sm:w-48",size:"sm",children:x.map(t=>e.jsx(c,{value:t,children:t},t))}),U.length>0&&e.jsxs(W,{label:"Department",placeholder:"All Departments",selectedKeys:f?[String(f)]:[],onChange:t=>P(t.target.value),className:"w-full sm:w-64",size:"sm",children:[e.jsx(c,{value:"",children:"All Departments"},""),U.map(t=>e.jsx(c,{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{className:"col-span-1 lg:col-span-2",children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Monthly Leave Trends"})]})}),e.jsxs(u,{children:[e.jsx("div",{className:"space-y-3",children:m.monthly_trends.map((t,p)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:t.month}),e.jsxs("span",{className:"text-default-500",children:[t.leaves_taken," days / ",t.leaves_approved," requests"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 bg-default-100 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${t.leaves_taken/A*100}%`}})}),e.jsx("div",{className:"flex-1 bg-default-100 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-success rounded-full transition-all",style:{width:`${t.leaves_approved/A*100}%`}})})]})]},p))}),e.jsxs("div",{className:"flex justify-center gap-6 mt-4 pt-4 border-t border-divider",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-xs text-default-500",children:"Days Taken"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-success"}),e.jsx("span",{className:"text-xs text-default-500",children:"Requests Approved"})]})]})]})]}),e.jsxs(h,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Department Comparison"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[m.department_comparison.map((t,p)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:t.department}),e.jsxs("span",{className:"text-sm text-default-500",children:[t.average_days," days"]})]}),e.jsx("div",{className:"bg-default-100 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-warning rounded-full transition-all",style:{width:`${Math.min(t.average_days/20*100,100)}%`}})})]},p)),m.department_comparison.length===0&&e.jsx("p",{className:"text-center text-default-500 text-sm",children:"No data available"})]})})]}),e.jsxs(h,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Leave Type Distribution"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-3",children:[m.leave_type_distribution.map((t,p)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:t.type}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-32 bg-default-100 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-secondary rounded-full transition-all",style:{width:`${t.count/Math.max(...m.leave_type_distribution.map(b=>b.count))*100}%`}})}),e.jsx("span",{className:"text-sm text-default-500 w-8 text-right",children:t.count})]})]},p)),m.leave_type_distribution.length===0&&e.jsx("p",{className:"text-center text-default-500 text-sm",children:"No data available"})]})})]}),e.jsx(h,{className:"col-span-1 lg:col-span-2",children:e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-sm font-medium text-default-500 mb-3",children:"Absenteeism Rate"}),e.jsxs("div",{className:"text-5xl font-bold text-primary mb-2",children:[m.absenteeism_rate.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-default-500",children:"Current Year"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-default-500 mb-3",children:"Peak Leave Periods"}),e.jsxs("div",{className:"space-y-2",children:[m.peak_periods.slice(0,5).map((t,p)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-default-50 dark:bg-default-100 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:t.period}),e.jsxs("span",{className:"text-sm text-default-500",children:[t.count," requests"]})]},p)),m.peak_periods.length===0&&e.jsx("p",{className:"text-center text-default-500 text-sm",children:"No peak periods identified"})]})]})]})})})]})]})}const Ue=({title:S,summaryData:V})=>{const{theme:U}=_e(),o=H("(max-width: 640px)");H("(min-width: 1025px)"),H("(min-width: 641px) and (max-width: 1024px)");const d=()=>{if(typeof window>"u")return"lg";const a=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12");return a===0?"none":a<=4?"sm":a<=8?"md":a<=16?"lg":"full"},{users:m=[],departments:D=[],leave_types:C=[],columns:Z=[],data:f=[],department_summary:P=[],stats:j={},year:x=new Date().getFullYear(),filters:A={}}=V||{},[t,p]=i.useState(!1),[b,N]=i.useState(""),[w,pe]=i.useState(!1),[Y,he]=i.useState("employee"),[g,ee]=i.useState(""),[n,ae]=i.useState({year:x,department_id:"",status:"",...A}),[E,Ye]=i.useState({employee_name:"",department:[],start_date:"",end_date:"",...A}),[$,te]=i.useState(1),[R,ue]=i.useState(15),v=i.useMemo(()=>{let a=f;return g&&(a=a.filter(s=>s.employee_name?.toLowerCase().includes(g.toLowerCase())||s.department?.toLowerCase().includes(g.toLowerCase()))),E.department&&E.department.length>0&&(a=a.filter(s=>E.department.includes(s.department))),a},[f,g,E.department]),fe=i.useMemo(()=>{const a=($-1)*R,s=a+R;return v.slice(a,s)},[v,$,R]),T=Math.ceil(v.length/R),be=i.useMemo(()=>[{title:"Total Employees",value:j.total_employees||0,icon:e.jsx(z,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Active employees"},{title:"Approved Leaves",value:j.total_approved_leaves||0,icon:e.jsx(q,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Total approved days"},{title:"Pending Leaves",value:j.total_pending_leaves||0,icon:e.jsx(J,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Awaiting approval"},{title:"Departments",value:j.departments_count||0,icon:e.jsx(k,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Active departments"}],[j]),B=i.useCallback((a,s)=>{const r={...n,[a]:s};ae(r),se(r)},[n]),se=i.useCallback(a=>{p(!0),Fe.get(window.location.pathname,a,{preserveState:!0,replace:!0,onFinish:()=>p(!1)})},[]),ge=i.useCallback(()=>{const a={year:new Date().getFullYear()};ae(a),ee(""),se(a)},[]),je=i.useCallback(async()=>{N("excel");try{const a=await G.get(Q("leave.summary.exportExcel"),{params:n,responseType:"blob"}),s=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=s,r.setAttribute("download",`Leave_Summary_${n.year||x}.xlsx`),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(s),N("")}catch(a){console.error("Error downloading Excel:",a),alert("Failed to download leave summary excel."),N("")}},[n,x]),ve=i.useCallback(async()=>{N("pdf");try{const a=await G.get(Q("leave.summary.exportPdf"),{params:n,responseType:"blob"}),s=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=s,r.setAttribute("download",`Leave_Summary_${n.year||x}.pdf`),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(s),N("")}catch(a){console.error("Error downloading PDF:",a),alert("Failed to download leave summary PDF."),N("")}},[n,x]),re=({rows:a=8,columns:s=6})=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-default-100/80 backdrop-blur-md border-b border-divider rounded-t-lg",children:e.jsx("div",{className:"flex p-3",children:Array.from({length:s}).map((r,L)=>e.jsx("div",{className:"flex-1 px-3",children:e.jsx(X,{className:"w-20 h-4 rounded"})},L))})}),e.jsx("div",{className:"divide-y divide-divider border rounded-b-lg",children:Array.from({length:a}).map((r,L)=>e.jsx("div",{className:"flex hover:bg-default-50/50 transition-colors p-3",children:Array.from({length:s}).map((_,O)=>e.jsx("div",{className:"flex-1 px-3",children:e.jsx(X,{className:"w-full h-4 rounded"})},O))},L))})]}),ye=i.useCallback((a,s)=>{const r=a[s];switch(s){case"employee_name":return e.jsx("div",{className:"flex items-center gap-2 min-w-0 whitespace-nowrap",style:{maxWidth:"200px",width:"200px"},children:e.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-foreground truncate whitespace-nowrap",title:a.employee_name,children:a.employee_name}),a.department&&e.jsx("span",{className:"text-xs text-default-400 truncate whitespace-nowrap",title:a.department,children:a.department})]})});case"total_approved":case"total_pending":case"total_rejected":const L={total_approved:"success",total_pending:"warning",total_rejected:"danger"};return r>0?e.jsx(F,{size:"sm",variant:"flat",color:L[s],className:"min-w-12",children:r}):"";case"usage_percentage":const _=r||0,O=_>80?"danger":_>60?"warning":"success";return e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx($e,{size:"sm",value:_,color:O,className:"w-16","aria-label":`Leave usage percentage: ${_}%`}),e.jsxs("span",{className:"text-tiny",children:[_,"%"]})]});case"total_balance":return e.jsx("div",{className:"text-center",children:e.jsx("span",{className:r<5?"text-danger":"text-foreground",children:r})});default:return s.endsWith("_used")?r>0?e.jsx(F,{size:"sm",variant:"flat",color:"success",className:"min-w-10",children:r}):"":s.endsWith("_remaining")?r>0?e.jsx(F,{size:"sm",variant:"flat",color:"primary",className:"min-w-10",children:r}):e.jsx("span",{className:"text-xs text-danger",children:"0"}):r!=null&&r!==""?r:""}},[]),Ne=i.useMemo(()=>{const a=new Date().getFullYear();return Array.from({length:10},(s,r)=>a-r)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(ke,{title:S}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Leave Summary",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(le.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(h,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(M,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${o?"p-4":"p-6"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                                            ${o?"p-2":"p-3"} 
                                                            rounded-xl flex items-center justify-center
                                                        `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(de,{className:`
                                                                ${o?"w-6 h-6":"w-8 h-8"}
                                                            `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                                                ${o?"text-xl":"text-2xl"}
                                                                font-bold text-foreground
                                                                ${o?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Leave Summary"}),e.jsx("p",{className:`
                                                                ${o?"text-xs":"text-sm"} 
                                                                text-default-500
                                                                ${o?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee leave analytics and reporting"})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(I,{color:"success",variant:"flat",onPress:je,startContent:e.jsx(ne,{className:"w-4 h-4"}),size:o?"sm":"md",radius:d(),isDisabled:t||v.length===0||b!=="",isLoading:b==="excel",className:"font-semibold","aria-label":"Export leave summary as Excel file",style:{fontFamily:'var(--fontFamily, "Inter")'},children:o?"XLS":"Excel"}),e.jsx(I,{color:"danger",variant:"flat",onPress:ve,startContent:e.jsx(ne,{className:"w-4 h-4"}),size:o?"sm":"md",radius:d(),isDisabled:t||v.length===0||b!=="",isLoading:b==="pdf",className:"font-semibold","aria-label":"Export leave summary as PDF file",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"PDF"})]})]})})})}),e.jsxs(u,{className:"p-6",children:[e.jsx(Ce,{stats:be,className:"mb-6",isLoading:t}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ie,{label:"Search Employees",placeholder:"Search by name or department...",startContent:e.jsx(Ee,{className:"w-4 h-4 text-default-400"}),value:g,onChange:a=>ee(a.target.value),variant:"bordered",size:"sm",radius:d(),"aria-label":"Search employees by name or department",classNames:{base:"max-w-full",mainWrapper:"h-full",input:"text-xs",inputWrapper:"h-10 font-normal text-default-500 bg-default-50/50 border-default-200 hover:border-default-300 focus-within:border-primary-500 transition-colors",label:"text-xs text-default-600 font-medium"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-2 py-1 text-default-500",children:[e.jsx(Le,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:"Quick Filters:"})]}),e.jsx(I,{color:w?"primary":"default",variant:w?"flat":"bordered",onPress:()=>pe(!w),startContent:e.jsx(De,{className:"w-3 h-3"}),size:"sm",radius:d(),"aria-label":w?"Hide filters panel":"Show filters panel",className:w?"bg-primary-50 border-primary-200 text-primary-700 font-medium h-10 text-xs":"bg-default-50 border-default-200 text-default-600 hover:bg-default-100 font-medium h-10 text-xs",style:{fontFamily:'var(--fontFamily, "Inter")'},children:o?"":"Filters"})]})]}),w&&e.jsx(le.div,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"bg-default-50/50 backdrop-blur-sm border border-default-200 p-4 space-y-4",style:{borderRadius:"var(--borderRadius, 8px)"},children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx(W,{label:"Year",placeholder:"Select year",variant:"bordered",size:"sm",radius:d(),selectedKeys:[String(n.year||x)],onSelectionChange:a=>{const s=Array.from(a)[0];s&&B("year",parseInt(s))},"aria-label":"Filter by year",classNames:{base:"max-w-full",trigger:"h-9 bg-default-50/50 border-default-200 hover:border-default-300 focus:border-primary-500 transition-colors",label:"text-xs text-default-600 font-medium",value:"text-xs text-default-700 font-medium",popoverContent:"bg-background/95 backdrop-blur-lg border-default-200 shadow-sm",listbox:"text-xs"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:Ne.map(a=>e.jsx(c,{value:a,textValue:String(a),className:"text-xs font-medium",children:a},a))}),e.jsxs(W,{label:"Department",placeholder:"Select department",variant:"bordered",size:"sm",radius:d(),selectedKeys:n.department_id?[String(n.department_id)]:[],onSelectionChange:a=>{const s=Array.from(a)[0];B("department_id",s||null)},"aria-label":"Filter by department",classNames:{base:"max-w-full",trigger:"h-9 bg-default-50/50 border-default-200 hover:border-default-300 focus:border-primary-500 transition-colors",label:"text-xs text-default-600 font-medium",value:"text-xs text-default-700 font-medium",popoverContent:"bg-background/95 backdrop-blur-lg border-default-200 shadow-sm",listbox:"text-xs"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(c,{value:"",textValue:"All Departments",className:"text-xs font-medium",children:"All Departments"},""),D.map(a=>e.jsx(c,{value:a.id,textValue:a.name,className:"text-xs font-medium",children:a.name},a.id))]}),e.jsxs(W,{label:"Leave Status",placeholder:"Select status",variant:"bordered",size:"sm",radius:d(),selectedKeys:n.status?[n.status]:[],onSelectionChange:a=>{const s=Array.from(a)[0];B("status",s||null)},"aria-label":"Filter by leave status",classNames:{base:"max-w-full",trigger:"h-9 bg-default-50/50 border-default-200 hover:border-default-300 focus:border-primary-500 transition-colors",label:"text-xs text-default-600 font-medium",value:"text-xs text-default-700 font-medium",popoverContent:"bg-background/95 backdrop-blur-lg border-default-200 shadow-sm",listbox:"text-xs"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(c,{value:"",textValue:"All Status",className:"text-xs font-medium",children:"All Status"},""),e.jsx(c,{value:"Approved",textValue:"Approved",className:"text-xs font-medium",children:"Approved"},"Approved"),e.jsx(c,{value:"Pending",textValue:"Pending",className:"text-xs font-medium",children:"Pending"},"Pending"),e.jsx(c,{value:"Declined",textValue:"Declined",className:"text-xs font-medium",children:"Declined"},"Declined")]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-default-200",children:[e.jsxs("div",{className:"text-xs text-default-500 font-medium",children:["Showing filtered results for ",String(n.year||x)]}),e.jsx(I,{color:"primary",variant:"flat",onPress:ge,size:"sm",radius:d(),startContent:e.jsx(We,{className:"w-3 h-3"}),className:"bg-primary-50 text-primary-700 border-primary-200 font-medium hover:bg-primary-100 h-8 text-xs","aria-label":"Clear all applied filters",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Clear Filters"})]})]})})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-6",style:{border:"var(--borderWidth, 1px) solid var(--theme-divider, rgba(255, 255, 255, 0.1))",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx("div",{className:"mb-6",children:e.jsxs(ze,{selectedKey:Y,onSelectionChange:he,variant:"underlined",radius:d(),"aria-label":"Leave summary view options",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-primary",tab:"max-w-fit px-0 h-12"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(K,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:"Employee Summary"})]})},"employee"),e.jsx(K,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"Department Summary"})]})},"department"),e.jsx(K,{title:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),e.jsx("span",{children:"Analytics"})]})},"analytics")]})}),Y==="analytics"?e.jsx("div",{className:"mt-4",children:e.jsx(Ve,{year:x,departmentId:n.department_id,departments:D})}):Y==="employee"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-default-400 text-small",children:["Total ",v.length," employees",g&&` (filtered from ${f.length})`]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-tiny text-default-400",children:"Rows per page:"}),e.jsxs(W,{size:"sm",selectedKeys:[String(R)],onSelectionChange:a=>{const s=Number(Array.from(a)[0]);ue(s),te(1)},className:"w-20",classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:[e.jsx(c,{value:"10",textValue:"10",children:"10"},"10"),e.jsx(c,{value:"15",textValue:"15",children:"15"},"15"),e.jsx(c,{value:"25",textValue:"25",children:"25"},"25"),e.jsx(c,{value:"50",textValue:"50",children:"50"},"50")]})]})]}),t?e.jsx(re,{rows:10,columns:17}):v.length>0?e.jsx(e.Fragment,{children:e.jsxs(ie,{className:"max-h-[70vh]",children:[e.jsxs(oe,{selectionMode:"none",isCompact:!0,removeWrapper:!0,isStriped:!0,"aria-label":"Employee leave summary table",isHeaderSticky:!0,radius:d(),classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full table-fixed border border-default-200",thead:"z-10",tbody:"overflow-y-auto",th:"bg-default-100 text-default-700 font-semibold text-xs whitespace-nowrap border-b border-r border-default-200",td:"text-default-600 text-xs whitespace-nowrap px-2 py-1 border-b border-r border-default-200",tr:"hover:bg-default-50/50 transition-colors h-10"},style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs(xe,{children:[e.jsx(l,{align:"start",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"200px",maxWidth:"200px",width:"200px"},children:e.jsxs("div",{className:"flex items-center gap-1 justify-start",children:[e.jsx(z,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:"Employee"})]})},"employee_name"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"JAN"})},"JAN"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"FEB"})},"FEB"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"MAR"})},"MAR"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"APR"})},"APR"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"MAY"})},"MAY"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"JUN"})},"JUN"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"JUL"})},"JUL"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"AUG"})},"AUG"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"SEP"})},"SEP"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"OCT"})},"OCT"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"NOV"})},"NOV"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"60px",maxWidth:"60px",width:"60px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"DEC"})},"DEC"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(q,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:"Approved"})]})},"total_approved"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:"Pending"})]})},"total_pending"),C.map(a=>e.jsxs(Se.Fragment,{children:[e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"70px",maxWidth:"70px",width:"70px"},children:e.jsxs("div",{className:"flex flex-col items-center gap-0",children:[e.jsx("span",{className:"text-xs font-semibold",children:a.type}),e.jsx("span",{className:"text-xs text-success",children:"Used"})]})},`${a.type}_used`),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"70px",maxWidth:"70px",width:"70px"},children:e.jsxs("div",{className:"flex flex-col items-center gap-0",children:[e.jsx("span",{className:"text-xs font-semibold",children:a.type}),e.jsx("span",{className:"text-xs text-primary",children:"Remaining"})]})},`${a.type}_remaining`)]},a.id)),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"Balance"})},"total_balance"),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"Usage"})},"usage_percentage")]}),e.jsx(ce,{items:fe,children:a=>e.jsx(me,{children:s=>e.jsx(y,{className:"whitespace-nowrap",children:ye(a,s)})},a.id)})]}),T>1&&e.jsx("div",{className:"py-4 flex justify-center",children:e.jsx(Me,{showControls:!0,showShadow:!0,color:"primary",variant:"bordered",page:$,total:T,onChange:te,size:o?"sm":"md",radius:d(),"aria-label":`Pagination navigation for leave summary, page ${$} of ${T}`,classNames:{wrapper:"bg-content1/80 backdrop-blur-md border-divider/50",item:"bg-content1/50 border-divider/30",cursor:"bg-primary/20 backdrop-blur-md"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}):e.jsx(h,{className:"bg-white/5 backdrop-blur-md border-white/10",radius:d(),style:{border:"var(--borderWidth, 1px) solid var(--theme-divider, rgba(255, 255, 255, 0.1))",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(u,{className:"text-center py-12",children:[e.jsx(de,{className:"w-16 h-16 mx-auto mb-4 text-default-300"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No Leave Data Found"}),e.jsx("p",{className:"text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:g?`No employees found matching "${g}"`:`No leave summary data available for ${n.year||x}.`})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Department-wise Leave Summary"}),t?e.jsx(re,{rows:6,columns:6}):P.length>0?e.jsx(ie,{className:"max-h-[70vh]",children:e.jsxs(oe,{selectionMode:"none",isCompact:!0,removeWrapper:!0,isStriped:!0,"aria-label":"Department leave summary table",isHeaderSticky:!0,radius:d(),classNames:{base:"max-h-[520px] overflow-auto",table:"min-h-[200px] w-full table-fixed border border-default-200",thead:"z-10",tbody:"overflow-y-auto",th:"bg-default-100 text-default-700 font-semibold text-xs whitespace-nowrap border-b border-r border-default-200",td:"text-default-600 text-xs whitespace-nowrap px-2 py-1 border-b border-r border-default-200",tr:"hover:bg-default-50/50 transition-colors h-10"},style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs(xe,{children:[e.jsx(l,{align:"start",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"150px",maxWidth:"150px",width:"150px"},children:e.jsxs("div",{className:"flex items-center gap-1 justify-start",children:[e.jsx(k,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:"Department"})]})}),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(z,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:"Employees"})]})}),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"Total Leaves"})}),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(q,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:"Approved"})]})}),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"80px",maxWidth:"80px",width:"80px"},children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-semibold",children:"Pending"})]})}),e.jsx(l,{align:"center",className:"bg-default-100/80 backdrop-blur-md",style:{minWidth:"100px",maxWidth:"100px",width:"100px"},children:e.jsx("span",{className:"text-xs font-semibold",children:"Avg per Employee"})})]}),e.jsx(ce,{children:P.map((a,s)=>e.jsxs(me,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",style:{maxWidth:"150px"},children:[e.jsx(k,{className:"w-3 h-3 text-default-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium truncate",title:a.department,children:a.department})]})}),e.jsx(y,{className:"text-center",children:e.jsx(F,{size:"sm",variant:"flat",color:"default",children:a.employee_count})}),e.jsx(y,{className:"text-center",children:a.total_leaves}),e.jsx(y,{className:"text-center",children:e.jsx(F,{size:"sm",variant:"flat",color:"success",children:a.total_approved})}),e.jsx(y,{className:"text-center",children:e.jsx(F,{size:"sm",variant:"flat",color:"warning",children:a.total_pending})}),e.jsx(y,{className:"text-center",children:a.avg_leaves_per_employee})]},s))})]})}):e.jsx(h,{className:"bg-white/5 backdrop-blur-md border-white/10",children:e.jsxs(u,{className:"text-center py-8",children:[e.jsx(k,{className:"w-12 h-12 mx-auto mb-4 text-default-300"}),e.jsx("p",{className:"text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"No department data available"})]})})]})]})]})]})})})})})]})};Ue.layout=S=>e.jsx(Pe,{children:S});export{Ue as default};
