import{r,e as C,j as e,g as ze,p as Ee,H as Ie,m as De,c as ie,b as v,a as le,s as Me,f as Te,d as z}from"./app-C5lQX7UO.js";import{s as ne}from"./routeUtils-Dar4FrIb.js";import{F as B,c as Le,a3 as Oe,b as oe,m as Ve,ak as We,f as Be,M as He,u as Ke,al as ce,A as qe}from"./App-b0cSRXv4.js";import{S as Ge}from"./StatsCards-CTmpIHZm.js";import{A as de,I as Je,U as Qe}from"./InviteUserForm-B4OMm-Nd.js";import{s as f}from"./toastUtils-FOPlT_v5.js";import{F as Xe}from"./CheckCircleIcon-BDeABBju.js";import{F as me}from"./ShieldCheckIcon-Lr4RcW0o.js";import{F as pe}from"./BuildingOfficeIcon-DHDfq3Il.js";import{F as ue}from"./EnvelopeIcon-BV7JE3W8.js";import{F as Ye}from"./MagnifyingGlassIcon-FD9b4416.js";import{F as xe}from"./UserIcon-Bny3-uxA.js";import{F as ge}from"./LockClosedIcon-CBY3J_Eq.js";import{F as he}from"./DevicePhoneMobileIcon-CaXezoVt.js";import{F as Ze}from"./useMediaQuery-DKZmmC24.js";import{a as es,F as ss}from"./DeviceTabletIcon-DzmMmOeR.js";import{c as ts}from"./chunk-C6WKGNND-DE1NYqMQ.js";import{s as S}from"./chunk-P7ACKWSP-DGs9qwdH.js";import{i as as}from"./chunk-SQIAVXJX-JCrnSLUk.js";import{s as H}from"./chunk-C3QHEOC2-C4U64fsk.js";import{l as E}from"./chunk-Y5DMIIWQ-CcWrQJnK.js";import{b as rs}from"./chunk-57V4RE7B-Dfbapeer.js";import{p as is}from"./chunk-NL7EUJG2-DhVVxgtT.js";import{u as ls}from"./chunk-NGIUTAK3-qjc8dTaU.js";import{t as ve}from"./chunk-AUA5GDXN-BfGxDRDE.js";import{d as ns,a as os,b as cs,m as I}from"./PlusIcon-hCCa9Avo.js";import{s as ds}from"./chunk-I3A4XRYQ-DAco9gg9.js";import"./app-Bq-q9uAS.js";import"./index-BeiV6kVn.js";/* empty css                      */import"./chunk-CV4BWJDJ-C2siGNsy.js";import"./index-DhmF-6Cs.js";import"./index-BXRhekn9.js";import"./Cog6ToothIcon-BxIVzCrx.js";import"./GlobeAltIcon-DSSOsrBF.js";import"./useBranding-BdLeVaZK.js";import"./useDialog-CPcCu8EE.js";import"./VisuallyHidden-BIYdY5qX.js";import"./keyboard-BROQwhc4.js";import"./useLabels-BSPM8vAp.js";import"./index-CZEthvtF.js";import"./XMarkIcon-67ql1OSv.js";import"./chunk-IHO36JMK-C2CY5vR0.js";import"./AcademicCapIcon-qLTocPBU.js";import"./IdentificationIcon-DDN2LgD3.js";import"./ArrowLeftIcon-CEF9dMYC.js";import"./ArrowRightIcon-D5L4KbEU.js";import"./BriefcaseIcon-MCw9JH5Q.js";import"./CalendarDaysIcon-B0vwq9qL.js";import"./CalendarIcon-DLOXfZsM.js";import"./CircleStackIcon-Bn_usKCe.js";import"./ClipboardDocumentCheckIcon-DbCJJdKR.js";import"./CogIcon-Bp9coc2a.js";import"./CpuChipIcon-Do_08dh9.js";import"./CurrencyDollarIcon-BeQq8PBJ.js";import"./DocumentArrowUpIcon-CUP7Txvb.js";import"./DocumentIcon-BaxxzUaB.js";import"./ExclamationCircleIcon-FoF6j9gu.js";import"./EyeIcon-1Rngeclu.js";import"./InformationCircleIcon-CvrzIYvC.js";import"./KeyIcon-BkwPixaL.js";import"./MapPinIcon-C1ZKJRuX.js";import"./PlusCircleIcon-BOXDRGJR.js";import"./PrinterIcon-BkL3DXP0.js";import"./RocketLaunchIcon-oIcFgtS_.js";import"./ShoppingCartIcon-CTTedb3q.js";import"./UserCircleIcon-CGukKXVi.js";import"./UserGroupIcon-BUxfF95Y.js";import"./chunk-TW2E3XVA-BpqqyJRF.js";import"./MaintenanceModeBanner-WmsYYFVK.js";import"./chunk-PMMJMDBI-C-cH3j7I.js";import"./useToggleState-BJ_Q2hhA.js";import"./chunk-ICU6NNET-KTThvCTm.js";import"./index-CI4LZYcs.js";import"./chunk-LGMZDQT5-JOtjRivx.js";import"./chunk-F3UDT23P-CMYbTKRy.js";import"./useSelectableItem-D9HgBYPJ.js";import"./SelectionManager-DOykb5Zn.js";import"./useHasTabbableChild-B9fcPVL6.js";import"./chunk-7F3ZLNJ6-DwE1PLMW.js";import"./index-DeaY2kDj.js";import"./chunk-YRZGWF2W-CHYoo8uo.js";import"./camera-fayutV3b.js";import"./createLucideIcon-CeiLWy-R.js";import"./chunk-5LXTSPS7-5Ebaxja-.js";import"./chunk-WEIB4WXA-BmyE3jA2.js";import"./chunk-KQW2TNLT-FgiaJ7J5.js";import"./useLabel-BcTiTZIt.js";import"./useMenuTriggerState-Bm6SXfn-.js";import"./chunk-WQVQ7P2I-Das5P9Cf.js";import"./number-CB4zbwAz.js";import"./Item-Cf2efc_s.js";import"./index-DuvEf_dB.js";import"./index-CokAva9Y.js";import"./chunk-OH2E76JR-CNd1Dliv.js";import"./useTreeState-7-jX6Eit.js";const ms=_=>{const o=_==="admin";return{paginate:o?"admin.users.paginate":"users.paginate",stats:o?"admin.users.stats":"users.stats",store:o?"admin.users.store":"users.store",update:o?"admin.users.update":"users.update",destroy:o?"admin.users.destroy":"users.destroy",toggleStatus:o?"admin.users.toggle-status":"users.toggleStatus",updateRoles:o?"admin.users.update-roles":"users.updateRole",devicesToggle:"admin.users.devices.toggle",devicesReset:"admin.users.devices.reset",devices:"admin.users.devices",profile:o?"admin.users.show":"profile"}},ps=({title:_,roles:o,departments:D,designations:us,context:l="tenant"})=>{const d=r.useMemo(()=>ms(l),[l]),[c,fe]=r.useState(!1),[K,be]=r.useState(!1),[b,we]=r.useState(!1),[P,je]=r.useState(!1),[x,_e]=r.useState("lg"),ye=()=>{if(typeof window>"u")return"lg";const t=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",a=parseInt(t);return a===0?"none":a<=4?"sm":a<=8?"md":a<=12?"lg":"xl"};r.useEffect(()=>{typeof window<"u"&&_e(ye())},[]),r.useEffect(()=>{const s=()=>{fe(window.innerWidth<640),be(window.innerWidth<768),we(window.innerWidth>=1025),je(window.innerWidth>=641&&window.innerWidth<=1024)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const[M,p]=r.useState([]),[y,q]=r.useState(!0),[G,J]=r.useState(null),[Q,k]=r.useState(0),[X,$]=r.useState(1),[j,Y]=r.useState(null),[n,Ne]=r.useState({search:"",role:"all",status:"all",department:"all"}),[xs,gs]=r.useState(!1),[N,Z]=r.useState("table"),[m,T]=r.useState({currentPage:1,perPage:10,total:M.length}),[A,U]=r.useState({}),[u,Fe]=r.useState({overview:{total_users:0,active_users:0,inactive_users:0,deleted_users:0,total_roles:0,total_departments:0},distribution:{by_role:[],by_department:[],by_status:[]},activity:{recent_registrations:{new_users_30_days:0,new_users_90_days:0,new_users_year:0,recently_active:0},user_growth_rate:0,current_month_registrations:0},security:{access_metrics:{users_with_roles:0,users_without_roles:0,admin_users:0,regular_users:0},role_distribution:[]},health:{status_ratio:{active_percentage:0,inactive_percentage:0,deleted_percentage:0},system_metrics:{user_activation_rate:0,role_coverage:0,department_coverage:0}},quick_metrics:{total_users:0,active_ratio:0,role_diversity:0,department_diversity:0,recent_activity:0,system_health_score:0}}),h=r.useMemo(()=>({data:M,total:Q,current_page:m.currentPage,per_page:m.perPage,last_page:X}),[M,Q,m.currentPage,m.perPage,X]),g=r.useCallback(async()=>{try{const{data:s}=await C.get(route(d.stats));s.stats&&Fe(s.stats)}catch(s){console.error("Error fetching user stats:",s)}},[d.stats]),L=r.useCallback(async()=>{q(!0);try{const s=await C.get(route(d.paginate),{params:{page:m.currentPage,perPage:m.perPage,search:n.search||void 0,role:n.role!=="all"?n.role:void 0,status:n.status!=="all"?n.status:void 0,department:n.department!=="all"?n.department:void 0}});if(s.status===200){const{users:t}=s.data;t.data&&Array.isArray(t.data)?(p(t.data),t.meta?(k(t.meta.total||0),$(t.meta.last_page||1)):(k(t.total||t.data.length),$(t.last_page||1))):Array.isArray(t)?(p(t),k(t.length),$(1)):(console.error("Unexpected users data format:",t),p([]),k(0),$(1))}}catch(s){console.error("Error fetching users:",s),f.error("Failed to load users data"),p([])}finally{q(!1)}},[n,m.currentPage,m.perPage,d.paginate]);r.useEffect(()=>{L()},[L]),r.useEffect(()=>{g();const s=setInterval(g,6e4);return()=>clearInterval(s)},[g]);const F=(s,t)=>{Ne(a=>({...a,[s]:t})),T(a=>({...a,currentPage:1}))},ee=s=>{T(t=>({...t,currentPage:s})),window.scrollTo({top:0,behavior:"smooth"})},Re=s=>{T(t=>({...t,currentPage:1,perPage:s}))},R=r.useCallback((s,t=null)=>{Y(s),J(t)},[]),O=r.useCallback(()=>{Y(null),J(null)},[]),V=r.useCallback(s=>{p(s)},[]),Ce=r.useCallback(s=>{p(t=>t.map(a=>a.id===s.id?{...a,...s}:a))},[]),Se=r.useCallback(s=>{p(t=>t.filter(a=>a.id!==s)),g()},[g]),se=r.useCallback((s,t)=>{p(a=>a.map(i=>i.id===s?{...i,active:t}:i)),g()},[g]),Pe=r.useCallback((s,t)=>{p(a=>a.map(i=>i.id===s?{...i,roles:t}:i)),g()},[g]),te=r.useCallback(async(s,t)=>{U(a=>({...a,[s]:!0}));try{const a=await C.post(route(d.devicesToggle,{userId:s}));a.data.success&&(p(i=>i.map(w=>w.id===s?{...w,single_device_login_enabled:a.data.single_device_login_enabled}:w)),f.success(a.data.message))}catch(a){console.error("Error toggling single device login:",a),f.error(a.response?.data?.message||"Failed to toggle single device login")}finally{U(a=>({...a,[s]:!1}))}},[d.devicesToggle]),ae=r.useCallback(async s=>{U(t=>({...t,[s]:!0}));try{const t=await C.post(route(d.devicesReset,{userId:s}),{reason:"Admin reset via user management"});t.data.success&&(p(a=>a.map(i=>i.id===s?{...i,active_device:null}:i)),f.success(t.data.message||"User devices have been reset"))}catch(t){console.error("Error resetting user devices:",t),f.error("Failed to reset user devices")}finally{U(t=>({...t,[s]:!1}))}},[d.devicesReset]);r.useCallback(async s=>{try{const t=await C.get(route(d.devices,{userId:s}));if(t.data.success){const a=t.data.devices;if(a.length===0)f.info("User has no registered devices");else{const i=a.filter(w=>w.is_active).length;f.info(`User has ${a.length} device(s): ${i} active, ${a.length-i} inactive`)}}}catch(t){console.error("Error fetching user devices:",t),f.error("Failed to fetch device information")}},[d.devices]);const re=(s,t="w-4 h-4")=>{const a=s?.toLowerCase()||"";return a.includes("mobile")||a.includes("android")||a.includes("iphone")?e.jsx(he,{className:`${t} text-primary`}):a.includes("tablet")||a.includes("ipad")?e.jsx(es,{className:`${t} text-secondary`}):e.jsx(ss,{className:`${t} text-default-500`})},ke=s=>{const t=s?.toLowerCase()||"";return t.includes("mobile")||t.includes("android")||t.includes("iphone")?"Mobile":t.includes("tablet")||t.includes("ipad")?"Tablet":"Desktop"},$e=({user:s,index:t})=>e.jsx(ie,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 h-full min-h-[320px]",style:{background:`linear-gradient(135deg, 
          color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
          color-mix(in srgb, var(--theme-content2) 80%, transparent) 80%)`,borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsxs(le,{className:"p-3 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3 pb-2 border-b border-white/10",children:[e.jsx(ls,{avatarProps:{radius:"md",src:s?.profile_image_url||s?.profile_image,size:"sm",fallback:e.jsx(xe,{className:"w-4 h-4"}),style:{borderColor:"var(--theme-primary)",borderWidth:"2px"}},name:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-foreground text-sm line-clamp-1",children:s.name}),e.jsxs("span",{className:"text-default-500 text-xs line-clamp-1",children:["ID: ",s.id]})]}),classNames:{wrapper:"flex-1 min-w-0",name:"text-sm font-semibold",description:"text-xs text-default-500"}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ve,{content:"Edit User",size:"sm",children:e.jsx(v,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-primary min-w-6 w-6 h-6",onPress:()=>R("edit",s),children:e.jsx(He,{className:"w-3 h-3"})})}),e.jsxs(ns,{placement:"bottom-end",children:[e.jsx(os,{children:e.jsx(v,{isIconOnly:!0,size:"sm",variant:"ghost",radius:x,isDisabled:A[s.id],className:"min-w-6 w-6 h-6",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:e.jsx(Ke,{className:"w-3 h-3"})})}),e.jsxs(cs,{"aria-label":"Device management actions",variant:"bordered",className:"min-w-[180px]",style:{background:"color-mix(in srgb, var(--theme-content1) 95%, transparent)",backdropFilter:"blur(16px)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:[e.jsx(I,{startContent:s.single_device_login?e.jsx(ce,{className:"w-3 h-3"}):e.jsx(ge,{className:"w-3 h-3"}),onPress:()=>te(s.id,!s.single_device_login),isDisabled:A[s.id],className:"text-xs",children:s.single_device_login?"Disable Lock":"Enable Lock"},"toggle-device-lock"),s.single_device_login&&s.active_device&&e.jsx(I,{startContent:e.jsx(Te,{className:"w-3 h-3"}),onPress:()=>ae(s.id),isDisabled:A[s.id],className:"text-xs",children:"Reset Device"},"reset-device"),e.jsx(I,{startContent:e.jsx(he,{className:"w-3 h-3"}),onPress:()=>ne(d.devices,{userId:s.id}),className:"text-xs",children:"Device History"},"view-devices"),e.jsx(I,{startContent:e.jsx(xe,{className:"w-3 h-3"}),onPress:()=>ne(d.profile,{user:s.id}),className:"text-xs",children:"View Profile"},"view-profile")]})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ue,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1 flex-1",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(Ze,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1",children:s.phone})]}),(s.department||s.department_id)&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(pe,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1",children:typeof s.department=="string"?s.department:"N/A"})]})]}),e.jsxs("div",{className:"mb-3 p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-content2) 40%, transparent)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-default-700",children:"Device Status"}),s.single_device_login&&s.active_device&&e.jsx(ve,{content:e.jsxs("div",{className:"p-2 max-w-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[re(s.active_device.user_agent,"w-4 h-4"),e.jsx("span",{className:"font-medium text-xs",children:s.active_device.device_name||"Unknown Device"})]}),e.jsxs("div",{className:"text-xs text-default-500",children:[ke(s.active_device.user_agent)," â€¢",s.active_device.is_active?" Active":" Inactive"]})]}),size:"sm",children:e.jsx("div",{className:"cursor-help",children:re(s.active_device.user_agent,"w-4 h-4")})})]}),e.jsx(z,{size:"sm",variant:"flat",color:s.single_device_login?s.active_device?"warning":"success":"default",startContent:s.single_device_login?s.active_device?e.jsx(ge,{className:"w-3 h-3"}):e.jsx(ce,{className:"w-3 h-3"}):e.jsx(me,{className:"w-3 h-3"}),className:"text-xs",children:s.single_device_login?s.active_device?"Locked":"Free":"Disabled"})]}),e.jsxs("div",{className:"mt-auto space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-default-700",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{size:"sm",isSelected:s.active,onValueChange:a=>se(s.id,a),color:s.active?"success":"danger",classNames:{wrapper:"group-data-[selected=true]:bg-success",thumb:"group-data-[selected=true]:ml-4"}}),e.jsx("span",{className:`text-xs font-medium ${s.active?"text-success":"text-danger"}`,children:s.active?"Active":"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-default-700 mb-1 block",children:"Roles"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.roles&&s.roles.length>0?s.roles.slice(0,3).map((a,i)=>{const w=typeof a=="object"&&a!==null?a.name:a;return e.jsx(z,{size:"sm",variant:"flat",color:"secondary",className:"text-xs h-5",children:w},i)}):e.jsx(z,{size:"sm",variant:"bordered",color:"default",className:"text-xs h-5",children:"No Roles"}),s.roles&&s.roles.length>3&&e.jsxs(z,{size:"sm",variant:"bordered",color:"primary",className:"text-xs h-5",children:["+",s.roles.length-3]})]})]})]})]})}),Ae=r.useMemo(()=>[{title:"Total Users",value:u?.overview?.total_users||0,icon:e.jsx(B,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All users"},{title:"Active Users",value:u?.overview?.active_users||0,icon:e.jsx(Xe,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${u?.health?.status_ratio?.active_percentage||0}% Active`},{title:"Inactive Users",value:u?.overview?.inactive_users||0,icon:e.jsx(ze,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:`${u?.health?.status_ratio?.inactive_percentage||0}% Inactive`},{title:"Total Roles",value:u?.overview?.total_roles||0,icon:e.jsx(me,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Role diversity"},{title:"Role Coverage",value:`${u?.health?.system_metrics?.role_coverage||0}%`,icon:e.jsx(Le,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Users with roles"},{title:"Recent Activity",value:u?.activity?.recent_registrations?.recently_active||0,icon:e.jsx(Ee,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Active last 7 days"},{title:"System Health",value:`${u?.quick_metrics?.system_health_score||0}%`,icon:e.jsx(Oe,{className:"w-5 h-5"}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Overall health"},{title:l==="admin"?"Tenants":"Departments",value:u?.overview?.total_departments||0,icon:e.jsx(pe,{className:"w-5 h-5"}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:l==="admin"?"Platform tenants":"Department diversity"}],[u,l]),W=l==="admin"?"Platform Administrators":"Users Management",Ue=l==="admin"?"Manage platform administrator accounts and access":"Manage user accounts, roles and permissions";return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{title:_||W}),j==="add"&&e.jsx(de,{user:null,roles:o,open:j==="add",setUsers:V,closeModal:O,editMode:!1,context:l}),j==="edit"&&G&&e.jsx(de,{user:G,roles:o,open:j==="edit",setUsers:V,closeModal:O,editMode:!0,context:l}),j==="invite"&&l==="tenant"&&e.jsx(Je,{roles:o,open:j==="invite",closeModal:O,onInviteSent:()=>{L()}}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":W,children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(De.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(ie,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(ts,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${b?"p-6":P?"p-4":"p-3"} w-full`,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[y?e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx(S,{className:"w-12 h-12 rounded-xl"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(S,{className:"w-64 h-6 rounded mb-2"}),e.jsx(S,{className:"w-48 h-4 rounded"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                ${b?"p-3":P?"p-2.5":"p-2"} 
                                rounded-xl flex items-center justify-center
                              `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(B,{className:`
                                  ${b?"w-8 h-8":P?"w-6 h-6":"w-5 h-5"}
                                `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                  ${b?"text-2xl":P?"text-xl":"text-lg"}
                                  font-bold text-foreground
                                  ${b?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:W}),e.jsx("p",{className:`
                                  ${b?"text-sm":"text-xs"} 
                                  text-default-500
                                  ${b?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:Ue})]})]}),y?e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(S,{className:"w-24 h-8 rounded"}),e.jsx(S,{className:"w-20 h-8 rounded"})]}):e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(v,{size:c?"sm":"md",color:"primary",startContent:e.jsx(oe,{className:"w-4 h-4"}),onPress:()=>R("add"),radius:x,style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:c?"Add":l==="admin"?"Add Admin":"Add User"}),l==="tenant"&&e.jsx(v,{size:c?"sm":"md",variant:"bordered",startContent:e.jsx(ue,{className:"w-4 h-4"}),onPress:()=>R("invite"),radius:x,style:{background:"color-mix(in srgb, var(--theme-secondary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-secondary) 30%, transparent)",color:"var(--theme-secondary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:c?"Invite":"Invite User"}),e.jsx(v,{size:c?"sm":"md",variant:"bordered",startContent:e.jsx(Ve,{className:"w-4 h-4"}),radius:x,style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:c?"Export":"Export Users"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(as,{size:c?"sm":"md",placeholder:"Search users...",value:n.search,onValueChange:s=>F("search",s),startContent:e.jsx(Ye,{className:"w-4 h-4 text-default-400"}),isClearable:!0,onClear:()=>F("search",""),radius:x,classNames:{inputWrapper:"bg-default-100"},className:"flex-1"}),e.jsx(H,{size:c?"sm":"md",placeholder:"All Roles",selectedKeys:n.role!=="all"?[n.role]:[],onSelectionChange:s=>F("role",Array.from(s)[0]||"all"),radius:x,classNames:{trigger:"bg-default-100"},className:"w-full md:w-48",children:o?.map(s=>e.jsx(E,{textValue:s.name||s,children:s.name||s},s.name||s))}),e.jsxs(H,{size:c?"sm":"md",placeholder:"All Status",selectedKeys:n.status!=="all"?[n.status]:[],onSelectionChange:s=>F("status",Array.from(s)[0]||"all"),radius:x,classNames:{trigger:"bg-default-100"},className:"w-full md:w-40",children:[e.jsx(E,{textValue:"Active",children:"Active"},"active"),e.jsx(E,{textValue:"Inactive",children:"Inactive"},"inactive")]}),l==="tenant"&&D&&D.length>0&&e.jsx(H,{size:c?"sm":"md",placeholder:"All Departments",selectedKeys:n.department!=="all"?[n.department]:[],onSelectionChange:s=>F("department",Array.from(s)[0]||"all"),radius:x,classNames:{trigger:"bg-default-100"},className:"w-full md:w-48",children:D?.map(s=>e.jsx(E,{textValue:s.name,children:s.name},String(s.id)))}),e.jsxs(rs,{size:c?"sm":"md",radius:x,children:[e.jsx(v,{isIconOnly:!0,variant:N==="table"?"solid":"bordered",color:N==="table"?"primary":"default",onPress:()=>Z("table"),children:e.jsx(We,{className:"w-4 h-4"})}),e.jsx(v,{isIconOnly:!0,variant:N==="grid"?"solid":"bordered",color:N==="grid"?"primary":"default",onPress:()=>Z("grid"),children:e.jsx(Be,{className:"w-4 h-4"})})]})]})]})})}),e.jsxs(le,{className:"p-6",children:[e.jsx(Ge,{stats:Ae,className:"mb-6",isLoading:y}),e.jsx("div",{className:"overflow-hidden",children:y?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(Me,{size:"lg"})}):N==="table"?e.jsx(Qe,{allUsers:h.data,roles:o,setUsers:V,isMobile:c,isTablet:K,pagination:m,onPageChange:ee,onRowsPerPageChange:Re,totalUsers:h.total,loading:y,onEdit:s=>R("edit",s),updateUserOptimized:Ce,deleteUserOptimized:Se,toggleUserStatusOptimized:se,updateUserRolesOptimized:Pe,toggleSingleDeviceLogin:te,resetUserDevice:ae,deviceActions:A,context:l}):e.jsxs("div",{children:[h.data&&h.data.length>0?e.jsx("div",{className:`grid gap-4 ${c?"grid-cols-1":K?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:h.data.map((s,t)=>e.jsx($e,{user:s,index:t},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No users found"}),e.jsx("p",{className:"text-default-500 mb-4",children:"Try adjusting your search criteria or filters"}),e.jsx(v,{color:"primary",startContent:e.jsx(oe,{className:"w-4 h-4"}),onPress:()=>R("add"),children:l==="admin"?"Add First Admin":"Add First User"})]}),h.data&&h.data.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t pt-4",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsx(is,{total:Math.ceil(h.total/m.perPage),initialPage:m.currentPage,page:m.currentPage,onChange:ee,size:c?"sm":"md",variant:"bordered",showControls:!0,radius:x,style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})})})})})]})};ps.layout=_=>e.jsx(qe,{children:_});export{ps as default};
