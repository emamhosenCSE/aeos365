import{r as t,j as e,c as Z,d as ee,s as $e,b,g as Ce,e as H,p as be,F as Ee,f as K,h as Ue,u as ss,H as as,m as ts,a as rs}from"./app-C6D97yqs.js";import{v as is,m as ve,aA as ns,d as ls,F as je,c as os,b as Re,ak as ds,f as cs,M as ms,u as us,al as ps,A as xs}from"./App-CppTX59L.js";import{S as fs}from"./StatsCards-CgPdCOJD.js";import{A as Pe,I as hs,U as gs}from"./InviteUserForm-y2zSCDNi.js";import{s as L}from"./toastUtils-Q1Zu0YAs.js";import{F as ne}from"./EnvelopeIcon-BtD2wkOs.js";import{F as ye}from"./UserGroupIcon-LfazjqTo.js";import{F as De}from"./BuildingOfficeIcon-C302xB7i.js";import{F as ze}from"./BriefcaseIcon-Dydmf2Fo.js";import{f as js}from"./formatDistanceToNow-Ctx6mZEP.js";import{c as Me}from"./chunk-C6WKGNND-CbwkZjx-.js";import{d as vs}from"./chunk-IHO36JMK-CxVXvMT-.js";import{t as le}from"./chunk-AUA5GDXN-CAF2pY_4.js";import{m as de,a as ce,b as me,c as ue}from"./chunk-TW2E3XVA-D943xeze.js";import{m as pe}from"./chunk-5LXTSPS7-HxrtH6JM.js";import{F as Oe}from"./XMarkIcon-CWjb9fY_.js";import{s as z}from"./chunk-C3QHEOC2-lf46a7_w.js";import{l as _}from"./chunk-Y5DMIIWQ-B-31GKl8.js";import{i as q}from"./chunk-SQIAVXJX--voZooKX.js";import{F as oe}from"./LockClosedIcon-CS09e3nP.js";import{t as bs}from"./chunk-WEIB4WXA-DWVm6Cqr.js";import{O as ys}from"./OnboardEmployeeModal-BJGcOvOG.js";import{F as _s}from"./CalendarIcon-Dezk7dU5.js";import{F as ws}from"./CurrencyDollarIcon-BmLYNiz4.js";import{F as Ns}from"./MapPinIcon-Dk5iA0cU.js";import{F as Le}from"./CheckCircleIcon-MQdHbz3q.js";import{a as Ss}from"./chunk-CV4BWJDJ-Cxk64tzW.js";import{p as Fs}from"./chunk-VFIJPDYX-BG4mNQLS.js";import{F as Ae}from"./ShieldCheckIcon-taiWgr2T.js";import{F as ks}from"./MagnifyingGlassIcon-B6xsgkYd.js";import{b as Cs}from"./chunk-57V4RE7B-B3O9bBWr.js";import{F as Rs}from"./UserIcon-DclU2kn3.js";import{F as Ie}from"./DevicePhoneMobileIcon-CMwnQGC7.js";import{F as Ps}from"./useMediaQuery-DcqTnk8f.js";import{a as As,F as Is}from"./DeviceTabletIcon-c9AQEaHX.js";import{s as Y}from"./chunk-P7ACKWSP-C6mW2UXu.js";import{p as $s}from"./chunk-NL7EUJG2-DKEHut1P.js";import{u as Es}from"./chunk-NGIUTAK3-HgJcUyi-.js";import{d as Us,a as Ds,b as zs,m as Ms}from"./PlusIcon-CumkSnWO.js";import{s as Os}from"./chunk-I3A4XRYQ-_jSa-2MM.js";import"./app-Bq-q9uAS.js";import"./index-Bo6Zoxl-.js";/* empty css                      */import"./Cog6ToothIcon-Dacv3CZj.js";import"./GlobeAltIcon-rkDaOLZ2.js";import"./useBranding-Cw0mTfbx.js";import"./useDialog-D7o2a8kv.js";import"./VisuallyHidden-RYZn0THU.js";import"./keyboard-Cy2kFhRg.js";import"./useLabels-BCiPlEC-.js";import"./index-DrgTSH3Q.js";import"./index-77Z8rBn0.js";import"./AcademicCapIcon-zmoUCTUT.js";import"./IdentificationIcon-BEcRIM1U.js";import"./ArrowLeftIcon-CSysR1M9.js";import"./ArrowRightIcon-DLnXgYHF.js";import"./CalendarDaysIcon-nLQnmqo-.js";import"./CircleStackIcon-BTy0v52H.js";import"./ClipboardDocumentCheckIcon-H9LG9i1B.js";import"./CogIcon-BN0I3mMO.js";import"./CpuChipIcon-CS3aISp5.js";import"./DocumentArrowUpIcon-C7WlpLzu.js";import"./DocumentIcon-CgjSHdrZ.js";import"./ExclamationCircleIcon-DPY0IdyW.js";import"./EyeIcon-BBMMcyJt.js";import"./InformationCircleIcon-9EoSkUK6.js";import"./KeyIcon-CiKxvxTU.js";import"./PlusCircleIcon-SPTwaNHS.js";import"./PrinterIcon-DDkAZmwt.js";import"./RocketLaunchIcon-PU9SlT1o.js";import"./ShoppingCartIcon-DeawsoPe.js";import"./UserCircleIcon-CVX0hwvm.js";import"./MaintenanceModeBanner-TAygNxEH.js";import"./chunk-PMMJMDBI-YdSsa0dM.js";import"./useToggleState-El1QkeSl.js";import"./chunk-ICU6NNET-cKZ2ZpSt.js";import"./index-Cz0McWEQ.js";import"./chunk-LGMZDQT5-CqXKju-4.js";import"./chunk-F3UDT23P-DvrCzaG3.js";import"./useSelectableItem-Cp0nNgDa.js";import"./SelectionManager-B6BjaFIZ.js";import"./useHasTabbableChild-B5pREwQt.js";import"./chunk-7F3ZLNJ6-DHud_gBT.js";import"./index-XUtUDqAb.js";import"./chunk-YRZGWF2W-DeIVMXKW.js";import"./camera-aSopeIf_.js";import"./createLucideIcon-CuOEM_b5.js";import"./chunk-WQVQ7P2I-D2DOeqGm.js";import"./number-CB4zbwAz.js";import"./chunk-KQW2TNLT--RJJE_Tq.js";import"./useLabel-Igmv_cwO.js";import"./useMenuTriggerState-CSwbTj6p.js";import"./Item-B28lnRHm.js";import"./index-xzZqw-cE.js";import"./index-_tuaJw8O.js";import"./useProgressBar-DlQ0rtov.js";import"./useNumberFormatter-CWD5ZFM-.js";import"./NumberFormatter-DNR9MAW-.js";import"./index-CokAva9Y.js";import"./chunk-OH2E76JR-C7GyMsTq.js";import"./useTreeState-CXDG7JK8.js";const Ls=({onInvitationChange:S})=>{const[j,h]=t.useState([]),[C,u]=t.useState(!0),[o,d]=t.useState(null),[r,w]=t.useState({open:!1,invitation:null}),[k,y]=t.useState("lg"),n=()=>{if(typeof window>"u")return"lg";const v=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",g=parseInt(v);return g===0?"none":g<=4?"sm":g<=8?"md":g<=16?"lg":"full"};t.useEffect(()=>{typeof window<"u"&&y(n())},[]);const p=async()=>{u(!0);try{const l=await K.get(route("users.invitations.pending"));h(l.data.invitations||[])}catch(l){console.error("Error fetching invitations:",l),L.error("Failed to load invitations")}finally{u(!1)}};t.useEffect(()=>{p()},[]);const M=async l=>{d(`resend-${l.id}`);try{const v=await K.post(route("users.invitations.resend",{invitation:l.id}));L.success(`Invitation resent to ${l.email}`),p(),S?.()}catch(v){console.error("Error resending invitation:",v),L.error(v.response?.data?.message||"Failed to resend invitation")}finally{d(null)}},c=async()=>{if(r.invitation){d(`cancel-${r.invitation.id}`);try{await K.delete(route("users.invitations.cancel",{invitation:r.invitation.id})),L.success(`Invitation to ${r.invitation.email} cancelled`),w({open:!1,invitation:null}),p(),S?.()}catch(l){console.error("Error canceling invitation:",l),L.error("Failed to cancel invitation")}finally{d(null)}}},N=l=>{const E=(new Date(l.expires_at)-new Date)/(1e3*60*60*24);return E<1?"danger":E<3?"warning":"success"},R=l=>{try{return js(new Date(l),{addSuffix:!0})}catch{return l}};return C?e.jsx(Z,{className:"w-full",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(ee,{className:"flex items-center justify-center p-8",children:[e.jsx($e,{size:"lg"}),e.jsx("p",{className:"text-default-500 mt-4",children:"Loading invitations..."})]})}):j.length===0?e.jsx(Z,{className:"w-full",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:"color-mix(in srgb, var(--theme-content1) 50%, transparent)"},children:e.jsxs(ee,{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:"p-4 rounded-full mb-4",style:{background:"color-mix(in srgb, var(--theme-default-200) 30%, transparent)"},children:e.jsx(ne,{className:"w-8 h-8 text-default-400"})}),e.jsx("p",{className:"text-default-700 font-medium mb-1",children:"No Pending Invitations"}),e.jsx("p",{className:"text-default-500 text-sm",children:"All invitations have been accepted or expired"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{className:"w-full",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs(Me,{className:"flex justify-between items-center px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)"},children:e.jsx(ne,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Pending Invitations"}),e.jsxs("p",{className:"text-sm text-default-500",children:[j.length," invitation",j.length!==1?"s":""," awaiting acceptance"]})]})]}),e.jsx(b,{size:"sm",variant:"flat",startContent:e.jsx(Ce,{className:"w-4 h-4"}),onPress:p,radius:k,isLoading:C,children:"Refresh"})]}),e.jsx(vs,{}),e.jsx(ee,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-divider",children:j.map(l=>e.jsx("div",{className:"p-4 hover:bg-default-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-foreground truncate",children:l.email}),e.jsxs(H,{size:"sm",variant:"flat",color:N(l),startContent:e.jsx(be,{className:"w-3 h-3"}),children:["Expires ",R(l.expires_at)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-default-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"capitalize",children:l.role?.replace(/-/g," ")})]}),l.metadata?.department_id&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:"Department assigned"})]}),l.metadata?.designation_id&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:"Designation assigned"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-default-500",children:[e.jsxs("span",{children:["Sent ",R(l.created_at)]}),l.inviter&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["by ",l.inviter.name]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{content:"Resend invitation email",children:e.jsx(b,{size:"sm",variant:"flat",color:"primary",isIconOnly:!0,onPress:()=>M(l),isLoading:o===`resend-${l.id}`,radius:k,children:e.jsx(Ce,{className:"w-4 h-4"})})}),e.jsx(le,{content:"Cancel invitation",color:"danger",children:e.jsx(b,{size:"sm",variant:"flat",color:"danger",isIconOnly:!0,onPress:()=>w({open:!0,invitation:l}),isLoading:o===`cancel-${l.id}`,radius:k,children:e.jsx(is,{className:"w-4 h-4"})})})]})]})},l.id))})})]}),e.jsx(de,{isOpen:r.open,onClose:()=>w({open:!1,invitation:null}),size:"sm",backdrop:"blur",radius:k,children:e.jsxs(ce,{children:[e.jsx(me,{className:"flex flex-col gap-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-danger"}),e.jsx("span",{children:"Cancel Invitation"})]})}),e.jsxs(ue,{children:[e.jsxs("p",{className:"text-sm text-default-600",children:["Are you sure you want to cancel the invitation to"," ",e.jsx("strong",{children:r.invitation?.email}),"?"]}),e.jsx("p",{className:"text-sm text-default-500 mt-2",children:"The invitation link will no longer work, and they won't be able to join your organization using this invitation."})]}),e.jsxs(pe,{children:[e.jsx(b,{variant:"flat",onPress:()=>w({open:!1,invitation:null}),radius:k,children:"Keep Invitation"}),e.jsx(b,{color:"danger",onPress:c,isLoading:o!==null,radius:k,children:"Cancel Invitation"})]})]})})]})},Ts=({open:S,onClose:j,roles:h,departments:C,themeRadius:u="lg"})=>{const[o,d]=t.useState({role_id:"",active:"",department_id:"",from_date:"",to_date:""}),[r,w]=t.useState(!1),k=async()=>{w(!0);const n=new Promise(async(p,M)=>{try{const c=new URLSearchParams;o.role_id&&c.append("role_id",o.role_id),o.active!==""&&c.append("active",o.active),o.department_id&&c.append("department_id",o.department_id),o.from_date&&c.append("from_date",o.from_date),o.to_date&&c.append("to_date",o.to_date);const N=route("users.export")+"?"+c.toString(),R=document.createElement("a");R.href=N,R.setAttribute("download",`users_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(R),R.click(),document.body.removeChild(R),setTimeout(()=>{p(["Users exported successfully"]),j(),d({role_id:"",active:"",department_id:"",from_date:"",to_date:""})},1e3)}catch(c){M([c.message||"Failed to export users"])}finally{w(!1)}});L.promise(n,{loading:"Exporting users...",success:p=>p.join(", "),error:p=>Array.isArray(p)?p.join(", "):p})},y=()=>{r||(d({role_id:"",active:"",department_id:"",from_date:"",to_date:""}),j())};return e.jsx(de,{isOpen:S,onOpenChange:y,size:"2xl",scrollBehavior:"inside",classNames:{base:"bg-content1",header:"border-b border-divider",body:"py-6",footer:"border-t border-divider"},children:e.jsxs(ce,{children:[e.jsxs(me,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Export Users"})]}),e.jsx("p",{className:"text-sm text-default-500 font-normal",children:"Apply filters to export specific users to CSV"})]}),e.jsx(ue,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(z,{label:"Filter by Role",placeholder:"All Roles",selectedKeys:o.role_id?[o.role_id]:[],onSelectionChange:n=>d({...o,role_id:Array.from(n)[0]||""}),radius:u,classNames:{trigger:"bg-default-100"},children:[e.jsx(_,{children:"All Roles"},""),h?.map(n=>e.jsx(_,{value:String(n.id),children:n.name},String(n.id)))]}),e.jsxs(z,{label:"Filter by Status",placeholder:"All Statuses",selectedKeys:o.active!==""?[o.active]:[],onSelectionChange:n=>d({...o,active:Array.from(n)[0]||""}),radius:u,classNames:{trigger:"bg-default-100"},children:[e.jsx(_,{children:"All Statuses"},""),e.jsx(_,{children:"Active"},"1"),e.jsx(_,{children:"Inactive"},"0")]}),C&&C.length>0&&e.jsxs(z,{label:"Filter by Department",placeholder:"All Departments",selectedKeys:o.department_id?[o.department_id]:[],onSelectionChange:n=>d({...o,department_id:Array.from(n)[0]||""}),radius:u,classNames:{trigger:"bg-default-100"},children:[e.jsx(_,{children:"All Departments"},""),C.map(n=>e.jsx(_,{value:String(n.id),children:n.name},String(n.id)))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(q,{type:"date",label:"From Date",placeholder:"Select start date",value:o.from_date,onChange:n=>d({...o,from_date:n.target.value}),radius:u,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(q,{type:"date",label:"To Date",placeholder:"Select end date",value:o.to_date,onChange:n=>d({...o,to_date:n.target.value}),radius:u,classNames:{inputWrapper:"bg-default-100"}})]}),e.jsx("p",{className:"text-xs text-default-400",children:"* CSV file will include: ID, Name, Username, Email, Phone, Status, Roles, Email Verified, Created At"})]})}),e.jsxs(pe,{children:[e.jsx(b,{variant:"flat",onPress:y,isDisabled:r,radius:u,startContent:e.jsx(Oe,{className:"w-4 h-4"}),children:"Cancel"}),e.jsx(b,{color:"primary",onPress:k,isLoading:r,radius:u,startContent:!r&&e.jsx(ve,{className:"w-4 h-4"}),children:r?"Exporting...":"Export CSV"})]})]})})},Vs=({open:S,onClose:j,user:h,onSuccess:C,themeRadius:u="lg"})=>{const[o,d]=t.useState(""),[r,w]=t.useState(!1),k=async()=>{w(!0);const n=new Promise(async(p,M)=>{try{const c=await K.post(route("users.lock",h.id),{reason:o||void 0});c.status===200&&(p([c.data.message||"Account locked successfully"]),C?.(c.data.user),j(),d(""))}catch(c){M(c.response?.data?.errors||[c.response?.data?.error||c.response?.data?.message||"Failed to lock account"])}finally{w(!1)}});L.promise(n,{loading:"Locking account...",success:p=>p.join(", "),error:p=>Array.isArray(p)?p.join(", "):p})},y=()=>{r||(d(""),j())};return e.jsx(de,{isOpen:S,onOpenChange:y,size:"2xl",scrollBehavior:"inside",classNames:{base:"bg-content1",header:"border-b border-divider",body:"py-6",footer:"border-t border-divider"},children:e.jsxs(ce,{children:[e.jsxs(me,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-danger"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Lock Account"})]}),e.jsxs("p",{className:"text-sm text-default-500 font-normal",children:["Lock ",h?.name,"'s account and prevent access"]})]}),e.jsx(ue,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-danger-50 dark:bg-danger-100/10 border border-danger-200 dark:border-danger-200/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-danger-600 dark:text-danger-500",children:[e.jsx("strong",{children:"Warning:"})," This will immediately lock the user's account and prevent them from logging in. The user will be deactivated and will need an administrator to unlock their account."]})}),e.jsx(bs,{label:"Reason for Locking (Optional)",placeholder:"Enter the reason for locking this account...",value:o,onValueChange:d,minRows:3,maxRows:6,maxLength:500,radius:u,classNames:{inputWrapper:"bg-default-100"},description:`${o.length}/500 characters`})]})}),e.jsxs(pe,{children:[e.jsx(b,{variant:"flat",onPress:y,isDisabled:r,radius:u,startContent:e.jsx(Oe,{className:"w-4 h-4"}),children:"Cancel"}),e.jsx(b,{color:"danger",onPress:k,isLoading:r,radius:u,startContent:!r&&e.jsx(oe,{className:"w-4 h-4"}),children:r?"Locking...":"Lock Account"})]})]})})};function Ws({open:S,onClose:j,users:h=[],departments:C=[],designations:u=[],managers:o=[],onSuccess:d}){const[r,w]=t.useState({department_id:"",designation_id:"",date_of_joining:"",employment_type:"full_time",basic_salary:"",manager_id:"",work_location:"",probation_end_date:""}),[k,y]=t.useState([]),[n,p]=t.useState({}),[M,c]=t.useState(!1),[N,R]=t.useState(null),[l,v]=t.useState(!1),[g,E]=t.useState("md");t.useEffect(()=>{const x=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",f=parseInt(x);f===0?E("none"):f<=4?E("sm"):f<=8?E("md"):f<=12?E("lg"):E("xl")},[]),t.useEffect(()=>{if(r.department_id){const a=u.filter(x=>String(x.department_id)===String(r.department_id));y(a),r.designation_id&&!a.find(x=>String(x.id)===String(r.designation_id))&&w(x=>({...x,designation_id:""}))}else y([])},[r.department_id,u]),t.useEffect(()=>{S||(w({department_id:"",designation_id:"",date_of_joining:"",employment_type:"full_time",basic_salary:"",manager_id:"",work_location:"",probation_end_date:""}),p({}),R(null),v(!1))},[S]);const P=(a,x)=>{w(f=>({...f,[a]:x})),n[a]&&p(f=>{const A={...f};return delete A[a],A})},se=()=>{const a={};if(r.department_id||(a.department_id="Department is required"),r.designation_id||(a.designation_id="Designation is required"),r.date_of_joining||(a.date_of_joining="Date of joining is required"),r.employment_type||(a.employment_type="Employment type is required"),r.basic_salary||(a.basic_salary="Basic salary is required"),r.work_location||(a.work_location="Work location is required"),r.probation_end_date&&r.date_of_joining){const x=new Date(r.date_of_joining);new Date(r.probation_end_date)<=x&&(a.probation_end_date="Probation end date must be after date of joining")}return p(a),Object.keys(a).length===0},ae=async()=>{if(!se())return;const a=new Promise(async(x,f)=>{c(!0);try{const A={user_ids:h.map(J=>J.id),...r,basic_salary:parseFloat(r.basic_salary)},U=await K.post(route("hrm.employees.onboard-bulk"),A);U.status===200&&(R(U.data),v(!0),x([U.data.summary?`Successfully onboarded ${U.data.summary.succeeded} of ${U.data.summary.total} users`:"Bulk onboarding completed"]),setTimeout(()=>{d&&d()},2e3))}catch(A){console.error("Bulk onboarding error:",A);const U=A.response?.data?.message||"Failed to onboard users";f([U])}finally{c(!1)}});L.promise(a,{loading:`Onboarding ${h.length} users...`,success:x=>x.join(", "),error:x=>Array.isArray(x)?x.join(", "):x})},W=()=>{j()};return e.jsx(de,{isOpen:S,onOpenChange:W,size:"3xl",scrollBehavior:"inside",classNames:{base:"bg-content1",header:"border-b border-divider",body:"py-6",footer:"border-t border-divider"},children:e.jsxs(ce,{children:[e.jsxs(me,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-6 h-6 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Bulk Onboard Employees"})]}),e.jsxs("p",{className:"text-sm text-default-500 font-normal",children:["Onboard ",h.length," user",h.length!==1?"s":""," as employees"]})]}),e.jsx(ue,{children:N?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-default-100 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Onboarding Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:N.summary?.total||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:N.summary?.succeeded||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Succeeded"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-danger",children:N.summary?.failed||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Failed"})]})]}),e.jsx(Fs,{value:N.summary?.succeeded/N.summary?.total*100,color:"success",className:"mt-3"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>v(!l),className:"flex items-center justify-between w-full p-3 bg-default-100 rounded-lg hover:bg-default-200 transition",children:[e.jsx("span",{className:"text-sm font-medium",children:"View Detailed Results"}),l?e.jsx(ns,{className:"w-4 h-4"}):e.jsx(ls,{className:"w-4 h-4"})]}),l&&e.jsxs("div",{className:"mt-3 space-y-2 max-h-[300px] overflow-y-auto",children:[N.success?.map((a,x)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-success-50 dark:bg-success-100/10 rounded-lg",children:[e.jsx(Le,{className:"w-5 h-5 text-success flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:h.find(f=>f.id===a.user_id)?.name||`User ${a.user_id}`}),e.jsx("p",{className:"text-xs text-default-500",children:a.message})]})]},`success-${x}`)),N.failed?.map((a,x)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-danger-50 dark:bg-danger-100/10 rounded-lg",children:[e.jsx(Ue,{className:"w-5 h-5 text-danger flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:h.find(f=>f.id===a.user_id)?.name||`User ${a.user_id}`}),e.jsx("p",{className:"text-xs text-danger-600 dark:text-danger-400",children:a.message})]})]},`failed-${x}`))]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 p-4 bg-default-100 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium mb-3",children:["Selected Users (",h.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.slice(0,10).map(a=>e.jsxs("div",{className:"flex items-center gap-2 bg-content1 px-3 py-2 rounded-lg",children:[e.jsx(Ss,{src:a.avatar,name:a.name,size:"sm",className:"flex-shrink-0"}),e.jsx("span",{className:"text-sm truncate max-w-[150px]",children:a.name})]},a.id)),h.length>10&&e.jsxs(H,{color:"default",size:"sm",children:["+",h.length-10," more"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(z,{label:"Department",placeholder:"Select department",selectedKeys:r.department_id?[String(r.department_id)]:[],onSelectionChange:a=>P("department_id",Array.from(a)[0]||""),isInvalid:!!n.department_id,errorMessage:n.department_id,isRequired:!0,radius:g,startContent:e.jsx(ze,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-default-100"},children:C?.map(a=>e.jsx(_,{children:a.name},String(a.id)))}),e.jsx(z,{label:"Designation",placeholder:"Select designation",selectedKeys:r.designation_id?[String(r.designation_id)]:[],onSelectionChange:a=>P("designation_id",Array.from(a)[0]||""),isInvalid:!!n.designation_id,errorMessage:n.designation_id,isRequired:!0,isDisabled:!r.department_id,radius:g,classNames:{trigger:"bg-default-100"},children:k?.map(a=>e.jsx(_,{children:a.name},String(a.id)))}),e.jsx(q,{type:"date",label:"Date of Joining",placeholder:"Select date",value:r.date_of_joining,onValueChange:a=>P("date_of_joining",a),isInvalid:!!n.date_of_joining,errorMessage:n.date_of_joining,isRequired:!0,radius:g,startContent:e.jsx(_s,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}}),e.jsxs(z,{label:"Employment Type",placeholder:"Select type",selectedKeys:r.employment_type?[r.employment_type]:[],onSelectionChange:a=>P("employment_type",Array.from(a)[0]||""),isInvalid:!!n.employment_type,errorMessage:n.employment_type,isRequired:!0,radius:g,classNames:{trigger:"bg-default-100"},children:[e.jsx(_,{children:"Full Time"},"full_time"),e.jsx(_,{children:"Part Time"},"part_time"),e.jsx(_,{children:"Contract"},"contract"),e.jsx(_,{children:"Intern"},"intern")]}),e.jsx(q,{type:"number",label:"Basic Salary",placeholder:"Enter amount",value:r.basic_salary,onValueChange:a=>P("basic_salary",a),isInvalid:!!n.basic_salary,errorMessage:n.basic_salary,isRequired:!0,radius:g,startContent:e.jsx(ws,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}}),e.jsx(z,{label:"Manager",placeholder:"Select manager (optional)",selectedKeys:r.manager_id?[String(r.manager_id)]:[],onSelectionChange:a=>P("manager_id",Array.from(a)[0]||""),radius:g,classNames:{trigger:"bg-default-100"},children:o?.map(a=>e.jsx(_,{children:a.name},String(a.id)))}),e.jsx(q,{label:"Work Location",placeholder:"Enter work location",value:r.work_location,onValueChange:a=>P("work_location",a),isInvalid:!!n.work_location,errorMessage:n.work_location,isRequired:!0,radius:g,startContent:e.jsx(Ns,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}}),e.jsx(q,{type:"date",label:"Probation End Date",placeholder:"Select date (optional)",value:r.probation_end_date,onValueChange:a=>P("probation_end_date",a),isInvalid:!!n.probation_end_date,errorMessage:n.probation_end_date,radius:g,startContent:e.jsx(be,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}})]})]})}),e.jsxs(pe,{children:[e.jsx(b,{variant:"flat",onPress:W,radius:g,children:N?"Close":"Cancel"}),!N&&e.jsxs(b,{color:"primary",onPress:ae,isLoading:M,radius:g,children:["Onboard ",h.length," User",h.length!==1?"s":""]})]})]})})}const Bs=S=>({paginate:"users.paginate",stats:"users.stats",store:"users.store",update:"users.update",destroy:"users.destroy",toggleStatus:"users.toggleStatus",updateRoles:"users.updateRole",invite:"users.invite",export:"users.export",restore:"users.restore",lock:"users.lock",unlock:"users.unlock",forcePasswordReset:"users.forcePasswordReset",resendVerification:"users.resendVerification",devices:"devices.admin.list",devicesToggle:"devices.admin.toggle",devicesReset:"devices.admin.reset"}),qs=({title:S,roles:j,departments:h,designations:C,context:u="tenant"})=>{const o=t.useMemo(()=>Bs(),[u]),[d,r]=t.useState(!1),[w,k]=t.useState(!1),[y,n]=t.useState(!1),[p,M]=t.useState(!1),[c,N]=t.useState("lg"),R=()=>{if(typeof window>"u")return"lg";const i=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",m=parseInt(i);return m===0?"none":m<=4?"sm":m<=8?"md":m<=12?"lg":"xl"};t.useEffect(()=>{typeof window<"u"&&N(R())},[]),t.useEffect(()=>{const s=()=>{r(window.innerWidth<640),k(window.innerWidth<768),n(window.innerWidth>=1025),M(window.innerWidth>=641&&window.innerWidth<=1024)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const[l,v]=t.useState([]),[g,E]=t.useState(!0),[P,se]=t.useState(null),[ae,W]=t.useState(0),[a,x]=t.useState(1),[f,A]=t.useState(null),[U,J]=t.useState(null),[te,xe]=t.useState([]),[_e,fe]=t.useState(!1),{modules:Te}=ss().props,re=Te?.hrm||!1,[F,Ve]=t.useState({search:"",role:"all",status:"all",department:"all"}),[Ks,Hs]=t.useState(!1),[G,we]=t.useState("table"),[I,he]=t.useState({currentPage:1,perPage:10,total:l.length}),[Ne,Js]=t.useState({}),[$,We]=t.useState({total_users:0,active_users:0,inactive_users:0,deleted_users:0,verified_users:0,unverified_users:0,locked_accounts:0,users_with_roles:0,users_without_roles:0,recent_users_30_days:0,active_percentage:0,verified_percentage:0,roles_coverage:0,total_roles:0}),T=t.useMemo(()=>({data:l,total:ae,current_page:I.currentPage,per_page:I.perPage,last_page:a}),[l,ae,I.currentPage,I.perPage,a]),D=t.useCallback(async()=>{try{const{data:s}=await K.get(route(o.stats));s.stats&&We(s.stats)}catch(s){console.error("Error fetching user stats:",s)}},[o.stats]),V=t.useCallback(async()=>{E(!0);try{const s=await K.get(route(o.paginate),{params:{page:I.currentPage,perPage:I.perPage,search:F.search||void 0,role:F.role!=="all"?F.role:void 0,status:F.status!=="all"?F.status:void 0,department:F.department!=="all"?F.department:void 0}});if(s.status===200){const{users:i}=s.data;i.data&&Array.isArray(i.data)?(v(i.data),i.meta?(W(i.meta.total||0),x(i.meta.last_page||1)):(W(i.total||i.data.length),x(i.last_page||1))):Array.isArray(i)?(v(i),W(i.length),x(1)):(console.error("Unexpected users data format:",i),v([]),W(0),x(1))}}catch(s){console.error("Error fetching users:",s),L.error("Failed to load users data"),v([])}finally{E(!1)}},[F,I.currentPage,I.perPage,o.paginate]);t.useEffect(()=>{V()},[V]),t.useEffect(()=>{D();const s=setInterval(D,6e4);return()=>clearInterval(s)},[D]);const Q=(s,i)=>{Ve(m=>({...m,[s]:i})),he(m=>({...m,currentPage:1}))},Se=s=>{he(i=>({...i,currentPage:s})),window.scrollTo({top:0,behavior:"smooth"})},Be=s=>{he(i=>({...i,currentPage:1,perPage:s}))},B=t.useCallback((s,i=null)=>{A(s),se(i)},[]),X=t.useCallback(()=>{A(null),se(null)},[]),ie=t.useCallback(s=>{v(s)},[]),qe=t.useCallback(s=>{v(i=>i.map(m=>m.id===s.id?{...m,...s}:m))},[]),Ke=t.useCallback(s=>{v(i=>i.filter(m=>m.id!==s)),D()},[D]),Fe=t.useCallback((s,i)=>{v(m=>m.map(O=>O.id===s?{...O,active:i}:O)),D()},[D]),He=t.useCallback(s=>{J(s),A("onboard")},[]),Je=t.useCallback(s=>{V(),J(null),A(null)},[V]),Ge=t.useCallback((s,i)=>{v(m=>m.map(O=>O.id===s?{...O,roles:i}:O)),D()},[D]),ke=(s,i="w-4 h-4")=>{const m=s?.toLowerCase()||"";return m.includes("mobile")||m.includes("android")||m.includes("iphone")?e.jsx(Ie,{className:`${i} text-primary`}):m.includes("tablet")||m.includes("ipad")?e.jsx(As,{className:`${i} text-secondary`}):e.jsx(Is,{className:`${i} text-default-500`})},Qe=s=>{const i=s?.toLowerCase()||"";return i.includes("mobile")||i.includes("android")||i.includes("iphone")?"Mobile":i.includes("tablet")||i.includes("ipad")?"Tablet":"Desktop"},Xe=({user:s,index:i})=>e.jsx(Z,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 h-full min-h-[320px]",style:{background:`linear-gradient(135deg, 
          color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
          color-mix(in srgb, var(--theme-content2) 80%, transparent) 80%)`,borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsxs(ee,{className:"p-3 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3 pb-2 border-b border-white/10",children:[e.jsx(Es,{avatarProps:{radius:"md",src:s?.profile_image_url||s?.profile_image,size:"sm",fallback:e.jsx(Rs,{className:"w-4 h-4"}),style:{borderColor:"var(--theme-primary)",borderWidth:"2px"}},name:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-foreground text-sm line-clamp-1",children:s.name}),e.jsxs("span",{className:"text-default-500 text-xs line-clamp-1",children:["ID: ",s.id]})]}),classNames:{wrapper:"flex-1 min-w-0",name:"text-sm font-semibold",description:"text-xs text-default-500"}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{content:"Edit User",size:"sm",children:e.jsx(b,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-primary min-w-6 w-6 h-6",onPress:()=>B("edit",s),children:e.jsx(ms,{className:"w-3 h-3"})})}),e.jsxs(Us,{placement:"bottom-end",children:[e.jsx(Ds,{children:e.jsx(b,{isIconOnly:!0,size:"sm",variant:"ghost",radius:c,isDisabled:Ne[s.id],className:"min-w-6 w-6 h-6",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:e.jsx(us,{className:"w-3 h-3"})})}),e.jsx(zs,{"aria-label":"Device management actions",variant:"bordered",className:"min-w-[180px]",style:{background:"color-mix(in srgb, var(--theme-content1) 95%, transparent)",backdropFilter:"blur(16px)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(Ms,{startContent:e.jsx(Ie,{className:"w-3 h-3"}),onPress:()=>rs.visit(route(o.devices,{userId:s.id})),className:"text-xs",children:"Device History"},"view-devices")})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ne,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1 flex-1",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(Ps,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1",children:s.phone})]}),(s.department||s.department_id)&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(De,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1",children:typeof s.department=="string"?s.department:"N/A"})]})]}),e.jsxs("div",{className:"mb-3 p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-content2) 40%, transparent)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-default-700",children:"Device Status"}),s.single_device_login&&s.active_device&&e.jsx(le,{content:e.jsxs("div",{className:"p-2 max-w-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[ke(s.active_device.user_agent,"w-4 h-4"),e.jsx("span",{className:"font-medium text-xs",children:s.active_device.device_name||"Unknown Device"})]}),e.jsxs("div",{className:"text-xs text-default-500",children:[Qe(s.active_device.user_agent)," •",s.active_device.is_active?" Active":" Inactive"]})]}),size:"sm",children:e.jsx("div",{className:"cursor-help",children:ke(s.active_device.user_agent,"w-4 h-4")})})]}),e.jsx(H,{size:"sm",variant:"flat",color:s.single_device_login?s.active_device?"warning":"success":"default",startContent:s.single_device_login?s.active_device?e.jsx(oe,{className:"w-3 h-3"}):e.jsx(ps,{className:"w-3 h-3"}):e.jsx(Ae,{className:"w-3 h-3"}),className:"text-xs",children:s.single_device_login?s.active_device?"Locked":"Free":"Disabled"})]}),e.jsxs("div",{className:"mt-auto space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-default-700",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{size:"sm",isSelected:s.active,onValueChange:m=>Fe(s.id,m),color:s.active?"success":"danger",classNames:{wrapper:"group-data-[selected=true]:bg-success",thumb:"group-data-[selected=true]:ml-4"}}),e.jsx("span",{className:`text-xs font-medium ${s.active?"text-success":"text-danger"}`,children:s.active?"Active":"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-default-700 mb-1 block",children:"Roles"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.roles&&s.roles.length>0?s.roles.slice(0,3).map((m,O)=>{const es=typeof m=="object"&&m!==null?m.name:m;return e.jsx(H,{size:"sm",variant:"flat",color:"secondary",className:"text-xs h-5",children:es},O)}):e.jsx(H,{size:"sm",variant:"bordered",color:"default",className:"text-xs h-5",children:"No Roles"}),s.roles&&s.roles.length>3&&e.jsxs(H,{size:"sm",variant:"bordered",color:"primary",className:"text-xs h-5",children:["+",s.roles.length-3]})]})]})]})]})}),Ye=t.useMemo(()=>[{title:"Total Users",value:$?.total_users||0,icon:e.jsx(je,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All registered users"},{title:"Active Users",value:$?.active_users||0,icon:e.jsx(Le,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${$?.active_percentage||0}% of total`},{title:"Inactive Users",value:$?.inactive_users||0,icon:e.jsx(Ue,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Deactivated accounts"},{title:"Email Verified",value:$?.verified_users||0,icon:e.jsx(Ae,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:`${$?.verified_percentage||0}% verified`},{title:"Unverified",value:$?.unverified_users||0,icon:e.jsx(Ee,{className:"w-5 h-5"}),color:"text-yellow-400",iconBg:"bg-yellow-500/20",description:"Pending verification"},{title:"Locked Accounts",value:$?.locked_accounts||0,icon:e.jsx(oe,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Security locked"},{title:"With Roles",value:$?.users_with_roles||0,icon:e.jsx(os,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:`${$?.roles_coverage||0}% coverage`},{title:"New Users (30d)",value:$?.recent_users_30_days||0,icon:e.jsx(be,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 days"}],[$]),ge=u==="admin"?"Platform Administrators":"Users Management",Ze=u==="admin"?"Manage platform administrator accounts and access":"Manage user accounts, roles and permissions";return e.jsxs(e.Fragment,{children:[e.jsx(as,{title:S||ge}),f==="add"&&e.jsx(Pe,{user:null,roles:j,open:f==="add",setUsers:ie,closeModal:X,editMode:!1,context:u}),f==="edit"&&P&&e.jsx(Pe,{user:P,roles:j,open:f==="edit",setUsers:ie,closeModal:X,editMode:!0,context:u}),f==="invite"&&u==="tenant"&&e.jsx(hs,{roles:j,open:f==="invite",closeModal:X,onInviteSent:()=>{V()}}),f==="export"&&e.jsx(Ts,{open:f==="export",onClose:X,roles:j,departments:h,themeRadius:c}),f==="lock"&&P&&e.jsx(Vs,{open:f==="lock",onClose:X,user:P,onSuccess:s=>{ie(s),V()},themeRadius:c}),f==="onboard"&&U&&re&&e.jsx(ys,{open:f==="onboard",onClose:()=>{A(null),J(null)},user:U,departments:h||[],designations:C||[],managers:l.filter(s=>s.employee_id)||[],onSuccess:Je}),_e&&re&&e.jsx(Ws,{open:_e,onClose:()=>{fe(!1),xe([])},users:te,departments:h||[],designations:C||[],managers:l.filter(s=>s.employee_id)||[],onSuccess:()=>{V(),fe(!1),xe([])}}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":ge,children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(ts.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(Z,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Me,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${y?"p-6":p?"p-4":"p-3"} w-full`,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[g?e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx(Y,{className:"w-12 h-12 rounded-xl"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(Y,{className:"w-64 h-6 rounded mb-2"}),e.jsx(Y,{className:"w-48 h-4 rounded"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                ${y?"p-3":p?"p-2.5":"p-2"} 
                                rounded-xl flex items-center justify-center
                              `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(je,{className:`
                                  ${y?"w-8 h-8":p?"w-6 h-6":"w-5 h-5"}
                                `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                  ${y?"text-2xl":p?"text-xl":"text-lg"}
                                  font-bold text-foreground
                                  ${y?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:ge}),e.jsx("p",{className:`
                                  ${y?"text-sm":"text-xs"} 
                                  text-default-500
                                  ${y?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:Ze})]})]}),g?e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(Y,{className:"w-24 h-8 rounded"}),e.jsx(Y,{className:"w-20 h-8 rounded"})]}):e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(b,{size:d?"sm":"md",color:"primary",startContent:e.jsx(Re,{className:"w-4 h-4"}),onPress:()=>B("add"),radius:c,style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Add":u==="admin"?"Add Admin":"Add User"}),u==="tenant"&&e.jsx(b,{size:d?"sm":"md",variant:"bordered",startContent:e.jsx(ne,{className:"w-4 h-4"}),onPress:()=>B("invite"),radius:c,style:{background:"color-mix(in srgb, var(--theme-secondary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-secondary) 30%, transparent)",color:"var(--theme-secondary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Invite":"Invite User"}),re&&te.length>0&&e.jsx(b,{size:d?"sm":"md",color:"success",startContent:e.jsx(ye,{className:"w-4 h-4"}),onPress:()=>fe(!0),radius:c,style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Onboard":`Onboard Selected (${te.length})`}),e.jsx(b,{size:d?"sm":"md",variant:"bordered",startContent:e.jsx(ve,{className:"w-4 h-4"}),onPress:()=>B("export"),radius:c,style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Export":"Export Users"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(q,{size:d?"sm":"md",placeholder:"Search users...",value:F.search,onValueChange:s=>Q("search",s),startContent:e.jsx(ks,{className:"w-4 h-4 text-default-400"}),isClearable:!0,onClear:()=>Q("search",""),radius:c,classNames:{inputWrapper:"bg-default-100"},className:"flex-1"}),e.jsx(z,{size:d?"sm":"md",placeholder:"All Roles",selectedKeys:F.role!=="all"?[F.role]:[],onSelectionChange:s=>Q("role",Array.from(s)[0]||"all"),radius:c,classNames:{trigger:"bg-default-100"},className:"w-full md:w-48",children:j?.map(s=>e.jsx(_,{children:s.name||s},s.name||s))}),e.jsxs(z,{size:d?"sm":"md",placeholder:"All Status",selectedKeys:F.status!=="all"?[F.status]:[],onSelectionChange:s=>Q("status",Array.from(s)[0]||"all"),radius:c,classNames:{trigger:"bg-default-100"},className:"w-full md:w-40",children:[e.jsx(_,{children:"Active"},"active"),e.jsx(_,{children:"Inactive"},"inactive")]}),u==="tenant"&&h&&h.length>0&&e.jsx(z,{size:d?"sm":"md",placeholder:"All Departments",selectedKeys:F.department!=="all"?[F.department]:[],onSelectionChange:s=>Q("department",Array.from(s)[0]||"all"),radius:c,classNames:{trigger:"bg-default-100"},className:"w-full md:w-48",children:h?.map(s=>e.jsx(_,{children:s.name},String(s.id)))}),e.jsxs(Cs,{size:d?"sm":"md",radius:c,children:[e.jsx(b,{isIconOnly:!0,variant:G==="table"?"solid":"bordered",color:G==="table"?"primary":"default",onPress:()=>we("table"),children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx(b,{isIconOnly:!0,variant:G==="grid"?"solid":"bordered",color:G==="grid"?"primary":"default",onPress:()=>we("grid"),children:e.jsx(cs,{className:"w-4 h-4"})})]})]})]})})}),e.jsxs(ee,{className:"p-6",children:[e.jsx(fs,{stats:Ye,className:"mb-6",isLoading:g}),u==="tenant"&&e.jsx(Ls,{className:"mb-6",onInvitationAction:()=>{V(),D()}}),e.jsx("div",{className:"overflow-hidden",children:g?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx($e,{size:"lg"})}):G==="table"?e.jsx(gs,{allUsers:T.data,roles:j,setUsers:ie,isMobile:d,isTablet:w,pagination:I,onPageChange:Se,onRowsPerPageChange:Be,totalUsers:T.total,loading:g,onEdit:(s,i)=>{B(i==="lock"?"lock":"edit",s)},updateUserOptimized:qe,deleteUserOptimized:Ke,toggleUserStatusOptimized:Fe,updateUserRolesOptimized:Ge,deviceActions:Ne,context:u,onOnboardEmployee:He,hrmModuleInstalled:re,selectedUsers:te,onSelectionChange:xe}):e.jsxs("div",{children:[T.data&&T.data.length>0?e.jsx("div",{className:`grid gap-4 ${d?"grid-cols-1":w?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:T.data.map((s,i)=>e.jsx(Xe,{user:s,index:i},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(je,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No users found"}),e.jsx("p",{className:"text-default-500 mb-4",children:"Try adjusting your search criteria or filters"}),e.jsx(b,{color:"primary",startContent:e.jsx(Re,{className:"w-4 h-4"}),onPress:()=>B("add"),children:u==="admin"?"Add First Admin":"Add First User"})]}),T.data&&T.data.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t pt-4",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsx($s,{total:Math.ceil(T.total/I.perPage),initialPage:I.currentPage,page:I.currentPage,onChange:Se,size:d?"sm":"md",variant:"bordered",showControls:!0,radius:c,style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})})})})})]})};qs.layout=S=>e.jsx(xs,{children:S});export{qs as default};
