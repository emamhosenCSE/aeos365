import{r as T,n as L,j as e,x as H,m,o as U,u as q,H as D,c as $,a as _,d as A,b as K}from"./app-DLWZL5EI.js";import{S as O}from"./SafeLink-CXDUN-Am.js";import{s as d}from"./toastUtils-CQ8tPw7l.js";import{A as V}from"./AuthCard-bptGkKXI.js";import{R as G}from"./RegisterLayout-B-p4LDca.js";import{F as J,P as Q}from"./ProgressSteps-CfbD2vVm.js";import{u as X}from"./useBranding-C98uB2bk.js";import"./app-BI-xrU3s.js";import"./routeUtils-C6MiLID5.js";import"./chunk-AUA5GDXN-DgHZKZnK.js";import"./index-B5MKI_DQ.js";import"./index-Dz459_my.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./index-lAyyVki8.js";/* empty css                      */import"./MaintenanceModeBanner-CpiCdC4n.js";import"./ArrowLeftIcon-a6q7R3tQ.js";const C=T.forwardRef(({label:p,description:x,error:o,checked:i=!1,className:g="",...c},v)=>{const{themeSettings:j}=L(),h=j?.mode==="dark",s={palette:{primary:{main:"#3b82f6",contrastText:"#ffffff"},secondary:{main:"#64748b"},error:{main:"#ef4444"},text:{primary:h?"#ffffff":"#0f172a",secondary:h?"#94a3b8":"#475569"}},mode:h?"dark":"light"};return e.jsxs("div",{className:H("space-y-1",g),children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:v,type:"checkbox",checked:i,className:"sr-only",...c}),e.jsxs(m.div,{className:"w-5 h-5 rounded-lg cursor-pointer transition-all duration-300 flex items-center justify-center relative overflow-hidden",style:{background:i?`linear-gradient(135deg, ${s.palette.primary.main}, ${s.palette.secondary.main})`:s.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px) saturate(180%)",border:i?`2px solid ${s.palette.primary.main}`:o?`2px solid ${s.palette.error.main}40`:`2px solid ${s.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}`,boxShadow:i?`0 2px 8px ${s.palette.primary.main}30, 0 0 0 3px ${s.palette.primary.main}15`:"0 2px 4px rgba(0, 0, 0, 0.05)"},whileHover:{scale:1.05,boxShadow:i?`0 4px 12px ${s.palette.primary.main}40, 0 0 0 4px ${s.palette.primary.main}20`:`0 4px 8px rgba(0, 0, 0, 0.1), 0 0 0 3px ${s.palette.primary.main}15`},whileTap:{scale:.95},onClick:()=>{c.onChange&&c.onChange({target:{checked:!i}})},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsx(m.div,{initial:!1,animate:{scale:i?1:0,opacity:i?1:0,rotate:i?0:180},transition:{duration:.3,type:"spring",stiffness:500,damping:30},children:e.jsx(J,{className:"w-3 h-3",style:{color:s.palette.primary.contrastText}})}),i&&e.jsx(m.div,{className:"absolute inset-0 bg-linear-to-r from-transparent via-white/30 to-transparent rounded-lg",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1,repeat:1/0,repeatDelay:2,ease:"easeInOut"}})]})]})}),(p||x)&&e.jsxs(m.div,{className:"ml-3",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},children:[p&&e.jsx("label",{className:"text-sm font-medium cursor-pointer transition-colors duration-200",style:{color:s.palette.text.primary},onClick:()=>{c.onChange&&c.onChange({target:{checked:!i}})},children:p}),x&&e.jsx(m.p,{className:"text-sm mt-1",style:{color:s.palette.text.secondary},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.2},children:x})]})]}),o&&e.jsxs(m.p,{className:"text-sm ml-8 flex items-center gap-2",style:{color:s.palette.error.main},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),o]})]})});C.displayName="Checkbox";function fe({steps:p=[],currentStep:x,savedData:o={},trialDays:i=14,baseDomain:g="platform.test",plans:c=[],modules:v=[],modulePricing:j={}}){const h=o.account??{},s=o.details??{},b=o.plan??{},n=c.find(t=>t.id===b.plan_id),M=Array.isArray(b.modules)?b.modules:[],k=v.filter(t=>M.includes(t.id)),u=b.billing_cycle==="yearly",P=u?j.yearly??200:j.monthly??20;let N=0,r=[],w="";if(n){const t=u?n.yearly_price||0:n.monthly_price||0;N=parseFloat(t)||0,r=Array.isArray(n.modules)?n.modules.map(l=>l.name||l):[],w="plan",console.log("Plan pricing:",{selectedPlan:n,isAnnual:u,planPrice:t,estimate:N})}else k.length>0&&(N=k.length*P,r=k.map(t=>t.name),w="custom");const{data:S,setData:R,post:z,processing:F,errors:I}=U({accept_terms:!1,notify_updates:!0}),{siteName:W}=X(),{flash:y}=q().props;T.useEffect(()=>{y?.error&&d.error(y.error),y?.success&&d.success(y.success)},[y]);const E=t=>{t.preventDefault(),z(route("platform.register.trial.activate"),{onError:l=>{console.error("Activation failed:",l),l.subdomain?d.error(l.subdomain):l.email?d.error(l.email):l.error?d.error(l.error):d.error("Please check the form and try again.")}})},{themeSettings:B}=L(),f=B?.mode==="dark",a={heading:f?"text-white":"text-slate-900",copy:f?"text-slate-300":"text-slate-600",badge:f?"text-slate-300":"text-slate-500",surface:f?"bg-white/5 border border-white/10":"bg-white border border-slate-200 shadow-sm",link:f?"text-white/80 hover:text-white":"text-slate-600 hover:text-slate-900"};return e.jsxs(G,{children:[e.jsx(D,{title:`Review & launch - ${W}`}),e.jsxs("section",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 sm:py-12 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3 text-center",children:[e.jsx("p",{className:`text-[10px] sm:text-sm uppercase tracking-[0.3em] ${a.badge}`,children:"Step 5"}),e.jsx("h1",{className:`text-2xl sm:text-4xl font-semibold ${a.heading} px-2`,children:"Review and start your trial."}),e.jsxs("p",{className:`${a.copy} text-sm sm:text-base px-2`,children:["Payments go live later. Today we just launch your ",i,"-day sandbox and wire up the modules you picked."]})]}),e.jsx(Q,{steps:p,currentStep:x}),e.jsx(V,{children:e.jsxs("form",{onSubmit:E,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid gap-3 sm:gap-5 md:grid-cols-2",children:[e.jsx($,{className:`${a.surface} text-xs sm:text-sm`,children:e.jsxs(_,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`uppercase tracking-[0.3em] text-[10px] sm:text-xs ${a.badge}`,children:"Workspace"}),e.jsx(A,{size:"sm",color:"secondary",variant:"flat",className:"text-[10px] sm:text-xs",children:h.type??"company"})]}),e.jsx("p",{className:`text-base sm:text-lg font-semibold ${a.heading} break-words`,children:s.name}),e.jsx("p",{className:`${a.copy} break-all`,children:s.email}),s.phone&&e.jsx("p",{className:a.copy,children:s.phone}),e.jsxs("p",{className:`text-xs sm:text-sm ${a.copy} break-all`,children:["URL: ",e.jsxs("span",{className:"font-mono",children:["https://",s.subdomain,".",g]})]})]})}),e.jsx($,{className:`${a.surface} text-xs sm:text-sm`,children:e.jsxs(_,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`uppercase tracking-[0.3em] text-[10px] sm:text-xs ${a.badge}`,children:"Activation"}),e.jsxs(A,{size:"sm",color:"success",variant:"flat",className:"text-[10px] sm:text-xs",children:[i,"-day trial"]})]}),e.jsxs("p",{className:`text-2xl sm:text-3xl font-semibold ${a.heading}`,children:["$",N.toLocaleString()]}),e.jsxs("p",{className:a.copy,children:["Projected per ",u?"year":"month"," once billing is enabled."]}),w==="plan"&&n&&e.jsxs("p",{className:`text-xs ${a.badge}`,children:[e.jsxs("strong",{children:[n.name," Plan"]})," • ",r.length," module",r.length!==1?"s":""," included"]}),w==="custom"&&r.length>0&&e.jsxs("p",{className:`text-xs ${a.badge}`,children:[e.jsx("strong",{children:"Custom Selection"})," • ",r.length," module",r.length!==1?"s":""," at $",P,"/",u?"year":"month"," each"]}),e.jsxs("ul",{className:`space-y-1 ${a.copy}`,children:[r.map((t,l)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-emerald-400 shrink-0"}),e.jsx("span",{className:"break-words",children:t})]},l)),r.length===0&&e.jsx("li",{className:`text-xs ${a.badge}`,children:"No modules selected"})]})]})})]}),e.jsx($,{className:`${a.surface} text-xs sm:text-sm`,children:e.jsxs(_,{className:"space-y-2 sm:space-y-3",children:[e.jsx("p",{className:`font-semibold ${a.heading}`,children:"What happens next?"}),e.jsxs("ol",{className:`list-decimal list-inside space-y-2 ${a.copy}`,children:[e.jsx("li",{children:"We provision your isolated database + files."}),e.jsxs("li",{className:"break-words",children:["Workspace URL (",s.subdomain,".",g,") goes live with default themes."]}),e.jsx("li",{children:"Within 5 minutes you will be redirected to your new workspace."}),e.jsx("li",{children:"At any time during the trial you can add payment details to continue seamlessly."})]})]})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx(C,{checked:S.accept_terms,onChange:t=>R("accept_terms",t.target.checked),error:I.accept_terms,label:"I agree to the Terms of Service and Privacy Policy.",description:"Required before spinning up the workspace."}),e.jsx(C,{checked:S.notify_updates,onChange:t=>R("notify_updates",t.target.checked),label:"Keep me posted about rollout templates and module launches."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsx(O,{route:"platform.register.plan",className:`text-xs sm:text-sm transition-colors text-center sm:text-left ${a.link}`,children:"← Back to modules"}),e.jsx(K,{type:"submit",color:"success",className:"px-6 w-full sm:w-auto",isLoading:F,children:"Launch trial workspace"})]})]})})]})]})}export{fe as default};
