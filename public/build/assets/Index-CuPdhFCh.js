import{u as K,r,j as e,p as O,e as H,H as U,m as C,c as v,b as o,a as b,d,s as W,h as p}from"./app-DLWZL5EI.js";import{s as q}from"./toastUtils-CQ8tPw7l.js";import{E as G,A as J}from"./App-CPiN04Y0.js";import{S as Q}from"./StatsCards-ClOhNM4n.js";import{d as w}from"./dayjs.min-CPixHBtN.js";import{F as f}from"./CalendarIcon-BTj7Nn7B.js";import{F as X}from"./CheckCircleIcon-CaJShsm_.js";import{F as E}from"./UserGroupIcon-DLyCB4U6.js";import{F as S}from"./PlusIcon-CgcHryUb.js";import{F as Z}from"./MagnifyingGlassIcon-C9l2NPQE.js";import{F as R}from"./ChartBarIcon-CnSK0enl.js";import{F as ee}from"./MapPinIcon-CoSq0ZKP.js";import{c as se}from"./chunk-C6WKGNND-Dq1nEPC1.js";import{i as te}from"./chunk-SQIAVXJX-C5zDfxFa.js";import{b as ae}from"./chunk-57V4RE7B-kgS1ny0L.js";import{s as N}from"./chunk-C3QHEOC2-Bmp2Jpe_.js";import{l as i}from"./chunk-Y5DMIIWQ-zhqLBGLU.js";import{p as re}from"./chunk-NL7EUJG2-cD5brqfz.js";import"./app-BI-xrU3s.js";import"./index-lAyyVki8.js";/* empty css                      */import"./routeUtils-C6MiLID5.js";import"./chunk-CV4BWJDJ-C645uC3W.js";import"./index-DD7PnbC4.js";import"./index-Dz459_my.js";import"./UserIcon-DiPxEy9e.js";import"./Cog6ToothIcon-CI3NiAkm.js";import"./GlobeAltIcon-CFAl4tmE.js";import"./useBranding-C98uB2bk.js";import"./useDialog-LKdJQ55I.js";import"./getScrollParent-B27hviGV.js";import"./keyboard-CSKkBtIV.js";import"./useLabels-CKC_NELL.js";import"./VisuallyHidden-Dslt4DE9.js";import"./index-B5MKI_DQ.js";import"./XMarkIcon-C9tv-sqJ.js";import"./chunk-AUA5GDXN-DgHZKZnK.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./useMediaQuery-CZ_V8brP.js";import"./chunk-IHO36JMK-DYeauZfe.js";import"./ShieldCheckIcon-BxwQA0uM.js";import"./AcademicCapIcon-Bs9t2qow.js";import"./IdentificationIcon-6E2VOCK1.js";import"./ArrowLeftIcon-a6q7R3tQ.js";import"./ArrowRightIcon-BZNmx9ah.js";import"./UsersIcon-CpsA-xGl.js";import"./BoltIcon-BRTqiOqL.js";import"./BriefcaseIcon-CunjT5yU.js";import"./BuildingOfficeIcon-BJoAl2gF.js";import"./CalendarDaysIcon-BR4QgBq8.js";import"./CircleStackIcon-20fpj2M5.js";import"./ClipboardDocumentCheckIcon-Bwahsg1t.js";import"./CogIcon-CQIGGanJ.js";import"./DeviceTabletIcon-CR6eyvHQ.js";import"./CpuChipIcon-Dkmm6hKt.js";import"./CurrencyDollarIcon-DK6JNn4H.js";import"./DevicePhoneMobileIcon-DzKKUXAD.js";import"./DocumentArrowUpIcon-CdnT1l-_.js";import"./PencilIcon-Da-ZoIco.js";import"./TrashIcon-C6DesZfk.js";import"./DocumentIcon-YVJ_odhG.js";import"./EnvelopeIcon-BNQywoLu.js";import"./ExclamationCircleIcon-D-5waelr.js";import"./EyeSlashIcon-C7uJqcIF.js";import"./EyeIcon-Ds6DAjR7.js";import"./FunnelIcon-D8WHt0li.js";import"./InformationCircleIcon-2sIUPx4E.js";import"./KeyIcon-Dl6jmBIi.js";import"./LockClosedIcon-DWSbAAT6.js";import"./PlusCircleIcon-borTRmVT.js";import"./PrinterIcon-jsVlFWpL.js";import"./RocketLaunchIcon-C1ofXZeY.js";import"./ShoppingCartIcon-DijpYrUE.js";import"./UserCircleIcon-D9Bl7hMN.js";import"./chunk-TW2E3XVA-dNGvEz5r.js";import"./chunk-I3A4XRYQ-CbmreU5k.js";import"./useToggleState-C1tJJPv7.js";import"./chunk-ICU6NNET-BuoRM2Mj.js";import"./MaintenanceModeBanner-CpiCdC4n.js";import"./Item-hnCJOaQ5.js";import"./SelectionManager-UhxaObWG.js";import"./index-D3fxkw17.js";import"./useSelectableItem-Qild1lMf.js";import"./useTreeState-CsNDLaZy.js";import"./useMenuTriggerState-CpMESG3a.js";import"./chunk-KQW2TNLT-BxZBj3py.js";import"./useField-CN4URFK6.js";import"./useLabel-BC4q2FsI.js";import"./chunk-7F3ZLNJ6-BH294qJ7.js";import"./index-CGn2JJsk.js";import"./index-CokAva9Y.js";import"./chunk-OH2E76JR-Bg0Or-mv.js";const ie=({events:g,filters:u})=>{const{auth:j}=K().props,n=()=>{if(typeof window>"u")return"lg";const x=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",c=parseInt(x);return c===0?"none":c<=4?"sm":c<=8?"md":c<=16?"lg":"full"},[m,z]=r.useState(!1),[le,P]=r.useState(!1);r.useEffect(()=>{const s=()=>{z(window.innerWidth<640),P(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const[a,$]=r.useState(g||{data:[]}),[I,y]=r.useState(!1),[h,A]=r.useState(!1),[t,M]=r.useState({search:u?.search||"",status:u?.status||"all",registration:u?.registration||"all",timeline:u?.timeline||"all"}),_=j.permissions?.includes("event.create")||!1,k=j.permissions?.includes("event.registration.manage")||!1,T=r.useMemo(()=>[{title:"Total Events",value:a?.total||0,icon:e.jsx(f,{}),color:"text-primary",iconBg:"bg-primary/20",description:"All events"},{title:"Published",value:a?.data?.filter(s=>s.is_published).length||0,icon:e.jsx(X,{}),color:"text-success",iconBg:"bg-success/20",description:"Live events"},{title:"Upcoming",value:a?.data?.filter(s=>w(s.event_date).isAfter(w())).length||0,icon:e.jsx(O,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Future events"},{title:"Total Registrations",value:a?.data?.reduce((s,x)=>s+(x.registrations_count||0),0)||0,icon:e.jsx(E,{}),color:"text-warning",iconBg:"bg-warning/20",description:"All participants"}],[a]);r.useCallback(async()=>{y(!0);try{const s=await H.get(route("events.index"),{params:t});$(s.data.events)}catch(s){console.error("Error fetching events:",s),q.error("Failed to load events")}finally{y(!1)}},[t]);const l=(s,x)=>{M(c=>({...c,[s]:x}))},V=s=>{p.get(route("events.index"),{...t,page:s},{preserveState:!0})},F=()=>{p.get(route("events.create"))},D=s=>{p.get(route("events.show",s.id))},L=s=>{p.get(route("events.edit",s.id))},Y=s=>{p.get(route("events.registrations.index",s.id))},B=s=>{p.get(route("events.analytics",s.id))};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Event Management"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"max-w-[1600px] mx-auto",children:e.jsx("div",{className:"p-6",children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(v,{className:"bg-content1/50 backdrop-blur-md border border-divider/30",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(se,{className:"pb-0",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-6 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 backdrop-blur-sm",children:e.jsx(f,{className:`${m?"w-6 h-6":"w-8 h-8"} text-primary`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`${m?"text-xl":"text-2xl"} font-bold text-foreground`,children:"Event Management"}),e.jsx("p",{className:`${m?"text-xs":"text-sm"} text-default-500`,children:"Manage events, sub-events, and registrations"})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:_&&e.jsx(o,{color:"primary",variant:"shadow",startContent:e.jsx(S,{className:"w-4 h-4"}),onPress:F,size:m?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Create Event"})})]})})}),e.jsxs(b,{className:"p-6",children:[e.jsx(Q,{stats:T,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(te,{label:"Search Events",placeholder:"Search by title or description...",value:t.search,onChange:s=>l("search",s.target.value),startContent:e.jsx(Z,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:n(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(ae,{variant:"bordered",radius:n(),className:"bg-white/5",children:e.jsxs(o,{isIconOnly:m,color:h?"primary":"default",onPress:()=>A(!h),className:h?"bg-purple-500/20":"bg-white/5",children:[e.jsx(G,{className:"w-4 h-4"}),!m&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),h&&e.jsx(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(N,{label:"Status",placeholder:"Select status...",selectedKeys:[t.status],onChange:s=>l("status",s.target.value),variant:"bordered",size:"sm",radius:n(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All Status"},"all"),e.jsx(i,{value:"published",children:"Published"},"published"),e.jsx(i,{value:"draft",children:"Draft"},"draft")]}),e.jsxs(N,{label:"Registration",placeholder:"Select registration status...",selectedKeys:[t.registration],onChange:s=>l("registration",s.target.value),variant:"bordered",size:"sm",radius:n(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All"},"all"),e.jsx(i,{value:"open",children:"Open"},"open"),e.jsx(i,{value:"closed",children:"Closed"},"closed")]}),e.jsxs(N,{label:"Timeline",placeholder:"Select timeline...",selectedKeys:[t.timeline],onChange:s=>l("timeline",s.target.value),variant:"bordered",size:"sm",radius:n(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All Events"},"all"),e.jsx(i,{value:"upcoming",children:"Upcoming"},"upcoming"),e.jsx(i,{value:"past",children:"Past"},"past")]})]}),(t.search||t.status!=="all"||t.registration!=="all"||t.timeline!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[t.search&&e.jsxs(d,{variant:"flat",color:"primary",size:"sm",onClose:()=>l("search",""),children:["Search: ",t.search]}),t.status!=="all"&&e.jsxs(d,{variant:"flat",color:"secondary",size:"sm",onClose:()=>l("status","all"),children:["Status: ",t.status]}),t.registration!=="all"&&e.jsxs(d,{variant:"flat",color:"warning",size:"sm",onClose:()=>l("registration","all"),children:["Registration: ",t.registration]}),t.timeline!=="all"&&e.jsxs(d,{variant:"flat",color:"success",size:"sm",onClose:()=>l("timeline","all"),children:["Timeline: ",t.timeline]})]})]})}),e.jsxs("div",{className:"min-h-96",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 font-semibold text-lg",children:[e.jsx(R,{className:"w-5 h-5"}),"Events Management"]}),I?e.jsx(v,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(b,{className:"text-center py-12",children:[e.jsx(W,{size:"lg"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading events..."})]})}):a?.data?.length>0?e.jsxs("div",{className:"space-y-4",children:[a.data.map(s=>e.jsx(v,{className:"hover:shadow-lg transition-shadow",children:e.jsx(b,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.banner_image&&e.jsx("div",{className:"w-full md:w-48 h-32 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:`/storage/${s.banner_image}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-default-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),w(s.event_date).format("MMM DD, YYYY")," at ",s.event_time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-4 h-4"}),s.venue]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{color:s.is_published?"success":"warning",size:"sm",variant:"flat",children:s.is_published?"Published":"Draft"}),e.jsx(d,{color:s.is_registration_open?"primary":"default",size:"sm",variant:"flat",children:s.is_registration_open?"Open":"Closed"})]})]}),e.jsx("p",{className:"text-sm text-default-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),s.approved_registrations_count||0," / ",s.max_participants||"âˆž"," participants"]}),e.jsxs("span",{children:[s.sub_events?.length||0," sub-events"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{size:"sm",variant:"flat",onPress:()=>D(s),children:"View"}),j.permissions?.includes("event.update")&&e.jsx(o,{size:"sm",color:"primary",variant:"flat",onPress:()=>L(s),children:"Edit"}),k&&e.jsxs(o,{size:"sm",color:"secondary",variant:"flat",onPress:()=>Y(s),children:["Registrations (",s.registrations_count||0,")"]}),e.jsx(o,{size:"sm",variant:"flat",startContent:e.jsx(R,{className:"w-4 h-4"}),onPress:()=>B(s),children:"Analytics"})]})]})]})]})})},s.id)),a?.last_page>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(re,{total:a.last_page,page:a.current_page,onChange:V,showControls:!0,radius:n()})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-default-500 mb-4",children:"No events match your search criteria."}),_&&e.jsx(o,{color:"primary",startContent:e.jsx(S,{className:"w-5 h-5"}),onPress:F,children:"Create Your First Event"})]})]})]})]})})})})})]})};ie.layout=g=>e.jsx(J,{children:g});export{ie as default};
