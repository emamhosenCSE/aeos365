import{o as D,r as w,j as e,H as Y,b as h,a as q,p as O,c as n,d as c,e as f}from"./app-C6D97yqs.js";import{d as j}from"./dayjs.min-CEPn919t.js";import{s as y}from"./toastUtils-Q1Zu0YAs.js";import{F as I}from"./ArrowLeftIcon-CSysR1M9.js";import{F as $}from"./CalendarIcon-Dezk7dU5.js";import{F as E}from"./MapPinIcon-Dk5iA0cU.js";import{F as T}from"./CheckCircleIcon-MQdHbz3q.js";import{d as m}from"./chunk-IHO36JMK-CxVXvMT-.js";import{c as A}from"./chunk-C6WKGNND-CbwkZjx-.js";import{i as x}from"./chunk-SQIAVXJX--voZooKX.js";import{s as H}from"./chunk-C3QHEOC2-lf46a7_w.js";import{l as u}from"./chunk-Y5DMIIWQ-B-31GKl8.js";import{t as L}from"./chunk-WEIB4WXA-DWVm6Cqr.js";import{c as V}from"./chunk-7LVYGA7G-C5uUp3u0.js";import{c as U}from"./chunk-PMMJMDBI-YdSsa0dM.js";import"./app-Bq-q9uAS.js";import"./index-Bo6Zoxl-.js";import"./chunk-KQW2TNLT--RJJE_Tq.js";import"./index-77Z8rBn0.js";import"./chunk-ICU6NNET-cKZ2ZpSt.js";import"./useLabel-Igmv_cwO.js";import"./useLabels-BCiPlEC-.js";import"./useMenuTriggerState-CSwbTj6p.js";import"./chunk-WQVQ7P2I-D2DOeqGm.js";import"./number-CB4zbwAz.js";import"./index-DrgTSH3Q.js";import"./useDialog-D7o2a8kv.js";import"./VisuallyHidden-RYZn0THU.js";import"./keyboard-Cy2kFhRg.js";import"./useSelectableItem-Cp0nNgDa.js";import"./SelectionManager-B6BjaFIZ.js";import"./Item-B28lnRHm.js";import"./chunk-7F3ZLNJ6-DHud_gBT.js";import"./index-xzZqw-cE.js";import"./index-XUtUDqAb.js";import"./useToggleState-El1QkeSl.js";import"./index-Cz0McWEQ.js";import"./chunk-LGMZDQT5-CqXKju-4.js";const r=()=>getComputedStyle(document.documentElement).getPropertyValue("--borderRadius").trim()||"md",Me=({event:s,canRegister:g,registrationStatus:R,remainingSlots:F})=>{const{data:i,setData:o,post:P,processing:z,errors:d}=D({name:"",email:"",phone:"",address:"",organization_or_department:"",gender:"prefer_not_to_say",sub_event_ids:[],payment_proof:null,custom_fields:{}}),[_,M]=w.useState(null),[b,N]=w.useState(!1),S=a=>{const t=a.target.files[0];t&&(o("payment_proof",t),M(URL.createObjectURL(t)))},C=a=>{a.preventDefault();const t=new FormData;Object.keys(i).forEach(l=>{l==="sub_event_ids"?i[l].forEach(p=>t.append("sub_event_ids[]",p)):l==="custom_fields"?Object.keys(i[l]).forEach(p=>{t.append(`custom_fields[${p}]`,i[l][p])}):(l==="payment_proof"&&i[l]||i[l])&&t.append(l,i[l])}),P(route("public.events.register",s.slug),{data:t,forceFormData:!0,onSuccess:()=>{y.success("Registration submitted successfully!")},onError:l=>{y.error("Failed to submit registration. Please check the form."),console.error(l)}})},v=s.sub_events?.filter(a=>i.sub_event_ids.includes(a.id.toString())).reduce((a,t)=>a+parseFloat(t.joining_fee||0),0)||0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-secondary-50 to-background",children:[e.jsx(Y,{title:s.title}),s.banner_image&&e.jsxs("div",{className:"relative h-96 bg-black",children:[e.jsx("img",{src:`/storage/${s.banner_image}`,alt:s.title,className:"w-full h-full object-cover opacity-80"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 w-full",children:[e.jsx(h,{variant:"flat",startContent:e.jsx(I,{className:"w-4 h-4"}),onPress:()=>q.get(route("public.events.index")),className:"mb-4",radius:r(),children:"Back to Events"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-white/90",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{children:j(s.event_date).format("MMMM DD, YYYY")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:s.event_time})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:s.venue})]})]})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(n,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"About This Event"}),e.jsx("p",{className:"text-default-700 whitespace-pre-line",children:s.description})]})}),s.sub_events&&s.sub_events.length>0&&e.jsx(n,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sub-Events"}),e.jsx("div",{className:"space-y-4",children:s.sub_events.map(a=>e.jsx("div",{className:"p-4 bg-default-100 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.title}),e.jsx("p",{className:"text-sm text-default-600 mt-1",children:a.description}),a.schedule&&e.jsxs("p",{className:"text-sm text-default-500 mt-2",children:[e.jsx("span",{className:"font-medium",children:"Schedule:"})," ",a.schedule]}),a.prize_details&&e.jsxs("p",{className:"text-sm text-success mt-1",children:[e.jsx("span",{className:"font-medium",children:"Prize:"})," ",a.prize_details]})]}),e.jsxs("div",{className:"text-right ml-4",children:[parseFloat(a.joining_fee)>0&&e.jsxs(f,{color:"primary",variant:"flat",radius:r(),children:["৳",a.joining_fee]}),a.max_participants&&e.jsxs("p",{className:"text-xs text-default-500 mt-2",children:["Max: ",a.max_participants]})]})]})},a.id))})]})}),(s.food_details||s.rules)&&e.jsx(n,{radius:r(),children:e.jsxs(c,{children:[s.food_details&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Food & Refreshments"}),e.jsx("p",{className:"text-default-700",children:s.food_details})]}),s.food_details&&s.rules&&e.jsx(m,{}),s.rules&&e.jsxs("div",{className:s.food_details?"mt-6":"",children:[e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Rules & Regulations"}),e.jsx("p",{className:"text-default-700 whitespace-pre-line",children:s.rules})]})]})}),b&&g&&e.jsxs(n,{radius:r(),children:[e.jsx(A,{children:e.jsx("h2",{className:"text-2xl font-bold",children:"Register for Event"})}),e.jsx(c,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(x,{label:"Full Name",placeholder:"Enter your full name",value:i.name,onChange:a=>o("name",a.target.value),errorMessage:d.name,isInvalid:!!d.name,isRequired:!0,radius:r()}),e.jsx(x,{type:"email",label:"Email",placeholder:"your@email.com",value:i.email,onChange:a=>o("email",a.target.value),errorMessage:d.email,isInvalid:!!d.email,isRequired:!0,radius:r()}),e.jsx(x,{label:"Phone",placeholder:"Enter phone number",value:i.phone,onChange:a=>o("phone",a.target.value),errorMessage:d.phone,isInvalid:!!d.phone,isRequired:!0,radius:r()}),e.jsxs(H,{label:"Gender",selectedKeys:[i.gender],onChange:a=>o("gender",a.target.value),isRequired:!0,radius:r(),children:[e.jsx(u,{value:"male",children:"Male"},"male"),e.jsx(u,{value:"female",children:"Female"},"female"),e.jsx(u,{value:"other",children:"Other"},"other"),e.jsx(u,{value:"prefer_not_to_say",children:"Prefer not to say"},"prefer_not_to_say")]})]}),e.jsx(L,{label:"Address",placeholder:"Enter your address",value:i.address,onChange:a=>o("address",a.target.value),errorMessage:d.address,isInvalid:!!d.address,rows:2,isRequired:!0,radius:r()}),e.jsx(x,{label:"Organization/Department",placeholder:"Your organization or department",value:i.organization_or_department,onChange:a=>o("organization_or_department",a.target.value),radius:r()}),s.sub_events&&s.sub_events.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Sub-Events to Participate *"}),e.jsx(V,{value:i.sub_event_ids,onValueChange:a=>o("sub_event_ids",a),errorMessage:d.sub_event_ids,isInvalid:!!d.sub_event_ids,radius:r(),children:s.sub_events.map(a=>e.jsxs(U,{value:a.id.toString(),children:[a.title,parseFloat(a.joining_fee)>0&&e.jsxs("span",{className:"text-primary ml-2",children:["(৳",a.joining_fee,")"]})]},a.id))})]}),s.custom_fields&&s.custom_fields.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{}),e.jsx("h3",{className:"font-semibold",children:"Additional Information"}),s.custom_fields.map(a=>e.jsx(x,{label:a.field_label,placeholder:a.placeholder||"",description:a.help_text||"",isRequired:a.is_required,onChange:t=>o("custom_fields",{...i.custom_fields,[a.field_name]:t.target.value}),radius:r()},a.id))]}),v>0&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Payment Proof (Total: ৳",v,")"]}),e.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:S,className:"block w-full text-sm"}),_&&e.jsx("img",{src:_,alt:"Payment proof",className:"mt-3 max-h-32 rounded"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(h,{variant:"flat",onPress:()=>N(!1),radius:r(),children:"Cancel"}),e.jsx(h,{type:"submit",color:"primary",isLoading:z,radius:r(),children:"Submit Registration"})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Event Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Date & Time"}),e.jsx("p",{className:"font-medium",children:j(s.event_date).format("MMM DD, YYYY")}),e.jsx("p",{className:"font-medium",children:s.event_time})]}),e.jsx(m,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Venue"}),e.jsx("p",{className:"font-medium",children:s.venue})]}),s.registration_deadline&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Registration Deadline"}),e.jsx("p",{className:"font-medium",children:j(s.registration_deadline).format("MMM DD, YYYY HH:mm")})]})]}),s.max_participants&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-default-500",children:"Available Slots"}),e.jsxs("p",{className:"font-medium",children:[F," / ",s.max_participants]})]})]})]})]})}),e.jsx(n,{radius:r(),children:e.jsx(c,{children:g?e.jsxs(e.Fragment,{children:[e.jsxs(f,{color:"success",variant:"flat",className:"mb-4",radius:r(),children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Registration Open"]}),!b&&e.jsx(h,{color:"primary",size:"lg",fullWidth:!0,onPress:()=>N(!0),radius:r(),children:"Register Now"})]}):e.jsxs("div",{children:[e.jsx(f,{color:"default",variant:"flat",className:"mb-2",radius:r(),children:"Registration Closed"}),e.jsx("p",{className:"text-sm text-default-500",children:R})]})})}),(s.organizer_name||s.organizer_email||s.organizer_phone)&&e.jsx(n,{radius:r(),children:e.jsxs(c,{children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Contact Organizer"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[s.organizer_name&&e.jsxs("p",{children:[e.jsx("span",{className:"text-default-500",children:"Name:"})," ",s.organizer_name]}),s.organizer_email&&e.jsxs("p",{children:[e.jsx("span",{className:"text-default-500",children:"Email:"})," ",s.organizer_email]}),s.organizer_phone&&e.jsxs("p",{children:[e.jsx("span",{className:"text-default-500",children:"Phone:"})," ",s.organizer_phone]})]})]})})]})]})})]})};export{Me as default};
