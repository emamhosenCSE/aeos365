import{r as g,u as it,j as e,s as le,L as lt,f as de,b as Z,d as me,e as M,a_ as fe,a$ as Te,b0 as $e,b1 as dt,b2 as pe,b3 as ne,b4 as ct,b5 as be,b6 as ut,b7 as se}from"./app-DLWZL5EI.js";import{s as D}from"./toastUtils-CQ8tPw7l.js";import{av as mt,ac as ft,au as pt,F as ht,ah as xt}from"./App-CPiN04Y0.js";import{F as vt}from"./UserIcon-DiPxEy9e.js";import{F as Q}from"./EnvelopeIcon-BNQywoLu.js";import{F as je}from"./useMediaQuery-CZ_V8brP.js";import{F as we}from"./BuildingOfficeIcon-BJoAl2gF.js";import{F as Fe}from"./DevicePhoneMobileIcon-DzKKUXAD.js";import{F as yt}from"./CheckCircleIcon-CaJShsm_.js";import{F as gt}from"./ShieldCheckIcon-BxwQA0uM.js";import{F as Ne,a as ce}from"./TrashIcon-C6DesZfk.js";import{F as Le}from"./UserGroupIcon-DLyCB4U6.js";import{F as Ee}from"./LockClosedIcon-DWSbAAT6.js";import{F as bt}from"./PencilIcon-Da-ZoIco.js";import{c as Re}from"./chunk-PMMJMDBI-DH4qNxn7.js";import{t as jt,a as wt,b as Ft,c as Nt}from"./chunk-F3UDT23P-iuiXDnoX.js";import{t as Et,a as Rt}from"./chunk-YRZGWF2W-C3idaI1g.js";import{p as Ct}from"./chunk-NL7EUJG2-cD5brqfz.js";import{m as O,d as Ce,a as _e,b as Se}from"./PlusIcon-CgcHryUb.js";import{t as ue}from"./chunk-AUA5GDXN-DgHZKZnK.js";import{u as _t}from"./chunk-NGIUTAK3-BIjgviLU.js";import{C as St}from"./camera-CJ_kjyiK.js";import{c as Be}from"./createLucideIcon-DKR2YbRb.js";import{m as ze,a as Ue,b as Oe,c as qe}from"./chunk-TW2E3XVA-dNGvEz5r.js";import{i as K}from"./chunk-SQIAVXJX-C5zDfxFa.js";import{s as Me}from"./chunk-C3QHEOC2-Bmp2Jpe_.js";import{l as We}from"./chunk-Y5DMIIWQ-zhqLBGLU.js";import{m as He}from"./chunk-5LXTSPS7-CJuDP5FM.js";import{t as Pt}from"./chunk-WEIB4WXA-BkR_II6X.js";function At({title:t,titleId:o,...i},w){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:w,"aria-labelledby":o},i),t?g.createElement("title",{id:o},t):null,g.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const It=g.forwardRef(At),G=()=>"var(--borderRadius, 12px)",kt=t=>({devices:"devices.admin.list",devicesToggle:"devices.admin.toggle",devicesReset:"devices.admin.reset",devicesDeactivate:"devices.admin.deactivate",toggleStatus:"users.toggleStatus",updateRoles:"users.updateRole",destroy:"users.destroy",restore:"users.restore",lock:"users.lock",unlock:"users.unlock",forcePasswordReset:"users.forcePasswordReset",resendVerification:"users.resendVerification"}),wr=({allUsers:t,roles:o,isMobile:i,isTablet:w,setUsers:y,pagination:p,onPageChange:b,onRowsPerPageChange:z,totalUsers:F=0,onEdit:R,loading:P=!1,updateUserOptimized:E,deleteUserOptimized:T,toggleUserStatusOptimized:$,updateUserRolesOptimized:L,context:B="tenant",onOnboardEmployee:_,hrmModuleInstalled:V=!1,selectedUsers:A=[],onSelectionChange:s=()=>{}})=>{const N=kt(),{auth:m}=it().props,S=r=>r?r.is_super_admin===!0||r.is_platform_super_admin===!0?!0:r.roles&&Array.isArray(r.roles)?r.roles.map(l=>typeof l=="object"?l.name:l).some(l=>l.toLowerCase().includes("super")&&l.toLowerCase().includes("admin")):r.role&&typeof r.role=="string"?r.role.toLowerCase().includes("super")&&r.role.toLowerCase().includes("admin"):!1:!1,C=g.useMemo(()=>m?.isSuperAdmin===!0||m?.isPlatformSuperAdmin===!0?!0:S(m?.user),[m?.user,m?.isSuperAdmin,m?.isPlatformSuperAdmin]),u=g.useMemo(()=>(t||[]).filter(r=>S(r)).length,[t]),x=r=>{const f=S(r),l=r.id===m?.user?.id;return f&&!C?!1:l&&C?u>1:!0},[c,a]=g.useState({}),n=(r,f,l)=>{a(j=>({...j,[`${r}-${f}`]:l}))},d=(r,f)=>c[`${r}-${f}`]||!1;async function v(r,f){n(r,"role",!0);const l=new Promise(async(j,h)=>{try{const J=B==="admin",te=J?route("admin.users.update-roles",{user:r}):route("users.updateRole",{id:r}),re=J?await M.patch(te,{roles:f}):await M.post(te,{roles:f});re.status===200&&(L&&L(r,f),j([re.data.message||"Role updated successfully"]))}catch(J){J.response?.status===422?h(J.response.data.errors||["Failed to update user role."]):h(["An unexpected error occurred. Please try again later."])}finally{n(r,"role",!1)}});return D.promise(l,{loading:"Updating user role...",success:j=>j.join(", "),error:j=>Array.isArray(j)?j.join(", "):j}),l}const q=async r=>{n(r,"delete",!0);const f=new Promise(async(l,j)=>{try{const h=await M.delete(route(N.destroy,{id:r}),{data:{user_id:r}});h.status===200&&(T&&T(r),l([h.data.message||"User deleted successfully"]))}catch(h){h.response?.status===422?j(h.response.data.errors||["Validation failed"]):j([h.response?.data?.message||"An error occurred while deleting user. Please try again."])}finally{n(r,"delete",!1)}});D.promise(f,{loading:"Deleting user...",success:l=>l.join(", "),error:l=>Array.isArray(l)?l.join(", "):l})},k=async r=>{const f=new Promise(async(l,j)=>{try{const h=await M.post(route("users.restore",{id:r.id}));h.status===200&&(E&&E(h.data.user),l([h.data.message||"User restored successfully"]))}catch(h){j(h.response?.data?.errors||[h.response?.data?.error||"Failed to restore user"])}});D.promise(f,{loading:"Restoring user...",success:l=>l.join(", "),error:l=>Array.isArray(l)?l.join(", "):l})},H=r=>{R&&R(r,"lock")},ie=async r=>{const f=new Promise(async(l,j)=>{try{const h=await M.post(route("users.unlock",{id:r.id}));h.status===200&&(E&&E(h.data.user),l([h.data.message||"Account unlocked successfully"]))}catch(h){j(h.response?.data?.errors||[h.response?.data?.error||"Failed to unlock account"])}});D.promise(f,{loading:"Unlocking account...",success:l=>l.join(", "),error:l=>Array.isArray(l)?l.join(", "):l})},Je=async r=>{const f=new Promise(async(l,j)=>{try{const h=await M.post(route("users.forcePasswordReset",{id:r.id}));h.status===200&&(E&&E(h.data.user),l([h.data.message||"Password reset forced successfully"]))}catch(h){j(h.response?.data?.errors||[h.response?.data?.error||"Failed to force password reset"])}});D.promise(f,{loading:"Setting password reset...",success:l=>l.join(", "),error:l=>Array.isArray(l)?l.join(", "):l})},Qe=async r=>{const f=new Promise(async(l,j)=>{try{const h=await M.post(route("users.resendVerification",{id:r.id}));h.status===200&&l([h.data.message||"Verification email sent successfully"])}catch(h){j(h.response?.data?.errors||[h.response?.data?.error||"Failed to resend verification email"])}});D.promise(f,{loading:"Sending verification email...",success:l=>l.join(", "),error:l=>Array.isArray(l)?l.join(", "):l})},ve=r=>A.some(f=>f.id===r.id),Xe=r=>{r.employee_id||(ve(r)?s(A.filter(f=>f.id!==r.id)):s([...A,r]))},Ye=()=>{const r=t.filter(f=>!f.employee_id);A.length===r.length?s([]):s(r)},et=g.useMemo(()=>V?[{name:e.jsx(Re,{isSelected:A.length>0&&A.length===t.filter(f=>!f.employee_id).length,onChange:Ye,isIndeterminate:A.length>0&&A.length<t.filter(f=>!f.employee_id).length}),uid:"select"},{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}]:[{name:"#",uid:"sl"},{name:"USER",uid:"user"},{name:"EMAIL",uid:"email"},{name:"STATUS",uid:"status"},{name:"ROLES",uid:"roles"},{name:"ACTIONS",uid:"actions"}],[i,w,B,V,A,t]),tt=async(r,f)=>{if(!d(r,"status")){n(r,"status",!0);try{$?($(r,!f),D.success(`User status ${f?"deactivated":"activated"} successfully`)):y&&(y(l=>l.map(j=>j.id===r?{...j,active:!f}:j)),D.success(`User status ${f?"deactivated":"activated"} successfully`))}catch(l){console.error("Error toggling user status:",l),D.error("Failed to update user status")}finally{n(r,"status",!1)}}},rt=(r,f,l)=>{const j=r[f];switch(f){case"select":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Re,{isSelected:ve(r),onChange:()=>Xe(r),isDisabled:r.employee_id,"aria-label":`Select ${r.name}`})});case"sl":const te=(p?.currentPage&&p?.perPage?Number((p.currentPage-1)*p.perPage):0)+(typeof l=="number"?l:0)+1;return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 border shadow-sm",style:{background:"var(--theme-content2, #F4F4F5)",borderColor:"var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 8px)",color:"var(--theme-foreground, #000000)"},children:e.jsx("span",{className:"text-sm font-bold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:te})})});case"user":return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(_t,{className:"w-fit max-w-full",avatarProps:{src:r?.profile_image_url||r?.profile_image,name:r?.name||"Unnamed User",size:"sm",...pt({name:r?.name||"Unnamed User",size:"sm"})},name:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-sm font-semibold whitespace-nowrap text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:r?.name||"Unnamed User"}),r.account_locked_at&&e.jsx(ue,{content:"Account Locked",children:e.jsx(Ee,{className:"w-4 h-4 text-danger"})})]}),description:e.jsxs("span",{className:"text-xs text-default-500",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["ID: ",r?.id]})})});case"email":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:e.jsx(Q,{className:"w-3.5 h-3.5"})}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:r.email}),!r.email_verified_at&&e.jsx(ue,{content:"Email not verified",children:e.jsx(me,{size:"sm",variant:"flat",color:"warning",className:"h-5 px-1.5",children:e.jsx("span",{className:"text-xs font-medium",children:"Unverified"})})})]})]});case"phone":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:e.jsx(je,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:r.phone||"N/A"})]});case"department":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-md",style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)"},children:e.jsx(we,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"text-sm font-medium text-default-900",style:{fontFamily:'var(--fontFamily, "Inter")'},children:r?.department?.name||"N/A"})]});case"status":return r.deleted_at?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(me,{size:"sm",variant:"flat",color:"danger",startContent:e.jsx(ce,{className:"w-3.5 h-3.5"}),children:"Deleted"})}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r.active,onChange:()=>tt(r.id,r.active),disabled:d(r.id,"status")}),e.jsx("div",{className:"w-11 h-6 peer-focus:outline-hidden peer-focus:ring-4 peer-focus:ring-opacity-30 rounded-full peer transition-all duration-300 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:r.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)"}}),d(r.id,"status")&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(le,{size:"sm",color:"default"})})]}),e.jsx("span",{className:"text-xs font-medium",style:{color:r.active?"var(--theme-success, #10B981)":"var(--theme-danger, #EF4444)",fontFamily:'var(--fontFamily, "Inter")'},children:r.active?"Active":"Inactive"})]});case"roles":const re=r.roles?.map(I=>typeof I=="object"&&I!==null?I.name:I)||[],ye=new Set(re),ge=Array.from(ye).join(", ")||"No Roles";return(S(r)?C:!0)?e.jsx("div",{className:"flex items-center",children:e.jsxs(Ce,{isDisabled:d(r.id,"role"),className:"max-w-[220px]","aria-label":`Role selection for ${r.name||"user"}`,children:[e.jsx(_e,{children:e.jsx(Z,{className:"capitalize",variant:"solid",size:"sm",radius:G(),startContent:d(r.id,"role")?e.jsx(le,{size:"sm"}):null,style:{background:"var(--theme-primary, #3B82F6)",color:"white",fontFamily:'var(--fontFamily, "Inter")',borderRadius:G(),cursor:"pointer"},children:ge})}),e.jsx(Se,{disallowEmptySelection:!1,"aria-label":"Role selection",closeOnSelect:!1,selectedKeys:ye,selectionMode:"multiple",variant:"flat",onSelectionChange:I=>{const ot=Array.from(I);v(r.id,ot)},children:(o||[]).map(I=>e.jsx(O,{children:typeof I=="object"&&I!==null?I.name:I},typeof I=="object"&&I!==null?I.name:I))})]})}):e.jsx("div",{className:"flex items-center",children:e.jsx(ue,{content:"Only Super Administrators can modify Super Admin roles",children:e.jsx(Z,{className:"capitalize",variant:"solid",size:"sm",isDisabled:!0,radius:G(),style:{background:"var(--theme-default-200, #E5E7EB)",color:"var(--theme-default-500, #6B7280)",fontFamily:'var(--fontFamily, "Inter")',borderRadius:G()},children:ge})})});case"actions":const U=[];U.push(e.jsx(O,{onPress:()=>{R&&R(r)},className:"text-amber-500",startContent:e.jsx(bt,{className:"w-4 h-4"}),children:"Edit"},"edit")),V&&_&&!r.employee_id&&U.push(e.jsx(O,{onPress:()=>{_&&_(r)},className:"text-success",startContent:e.jsx(ht,{className:"w-4 h-4"}),children:"Onboard as Employee"},"onboard-employee")),U.push(e.jsx(O,{href:route(N.devices,{userId:r.id}),as:lt,startContent:e.jsx(Fe,{className:"w-4 h-4"}),className:"text-blue-500",children:"View Device History"},"view-devices")),r.account_locked_at?U.push(e.jsx(O,{onPress:()=>ie(r),className:"text-success",startContent:e.jsx(ft,{className:"w-4 h-4"}),children:"Unlock Account"},"unlock")):r.id!==m?.user?.id&&U.push(e.jsx(O,{onPress:()=>H(r),className:"text-warning",startContent:e.jsx(Ee,{className:"w-4 h-4"}),children:"Lock Account"},"lock")),r.id!==m?.user?.id&&U.push(e.jsx(O,{onPress:()=>Je(r),className:"text-purple-500",startContent:e.jsx(de,{className:"w-4 h-4"}),children:"Force Password Reset"},"force-password-reset")),r.email_verified_at||U.push(e.jsx(O,{onPress:()=>Qe(r),className:"text-cyan-500",startContent:e.jsx(Q,{className:"w-4 h-4"}),children:"Resend Verification"},"resend-verification")),r.deleted_at&&U.push(e.jsx(O,{onPress:()=>k(r),className:"text-success",startContent:e.jsx(de,{className:"w-4 h-4"}),children:"Restore User"},"restore"));const at=r.id===m?.user?.id,nt=S(r);if(x(r))U.push(e.jsx(O,{onPress:()=>q(r.id),className:"text-danger",color:"danger",startContent:d(r.id,"delete")?e.jsx("div",{className:"animate-spin",children:e.jsx(de,{className:"w-4 h-4"})}):e.jsx(ce,{className:"w-4 h-4"}),isDisabled:d(r.id,"delete"),children:d(r.id,"delete")?"Deleting...":"Delete"},"delete"));else{let I="Delete (Super Admin Only)";at&&C&&u<=1?I="Cannot delete (Last Super Admin)":nt&&!C&&(I="Delete (Super Admin Only)"),U.push(e.jsx(O,{isDisabled:!0,className:"text-default-400",startContent:e.jsx(ce,{className:"w-4 h-4"}),children:I},"delete-disabled"))}return e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs(Ce,{"aria-label":`Actions for ${r.name||"user"}`,children:[e.jsx(_e,{children:e.jsx(Z,{isIconOnly:!0,size:"sm",variant:"solid",radius:G(),style:{background:"var(--theme-content2, #F4F4F5)",color:"var(--theme-default-500, #6B7280)",fontFamily:'var(--fontFamily, "Inter")',borderRadius:G()},className:"hover:opacity-80 transition-opacity",children:e.jsx(Ne,{className:"w-4 h-4"})})}),e.jsx(Se,{"aria-label":"User Actions",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E5E7EB)",borderRadius:G()},children:U})]})});default:return j}},st=()=>!t||!F||P?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-6 py-4 border-t",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content2, #F4F4F5)",borderRadius:"0 0 var(--borderRadius, 12px) var(--borderRadius, 12px)"},children:[e.jsxs("span",{className:"text-sm text-default-600 mb-3 sm:mb-0 font-medium",style:{fontFamily:'var(--fontFamily, "Inter")'},children:["Showing"," ",e.jsx("span",{className:"font-semibold text-default-900",children:(p.currentPage-1)*p.perPage+1})," ","to"," ",e.jsx("span",{className:"font-semibold text-default-900",children:Math.min(p.currentPage*p.perPage,F)})," ","of"," ",e.jsx("span",{className:"font-semibold text-default-900",children:F})," ","users"]}),e.jsx(Ct,{total:Math.ceil(F/p.perPage),initialPage:p.currentPage,page:p.currentPage,onChange:b,size:i?"sm":"md",variant:"flat",showControls:!0,radius:G(),style:{fontFamily:'var(--fontFamily, "Inter")'},classNames:{wrapper:"gap-1",item:"bg-default-100 hover:bg-default-200 text-default-700 font-medium border border-default-200",cursor:"bg-primary text-primary-foreground font-semibold shadow-md",prev:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200",next:"bg-default-100 hover:bg-default-200 text-default-700 border border-default-200"}})]});return e.jsxs("div",{className:"w-full flex flex-col border rounded-lg shadow-lg",style:{maxHeight:"calc(100vh - 240px)",borderColor:"var(--theme-divider, #E4E4E7)",background:"var(--theme-content1, #FFFFFF)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx("div",{className:"flex-1 overflow-auto",style:{scrollbarWidth:"thin",scrollbarColor:"var(--theme-divider, #E4E4E7) transparent"},children:e.jsxs(jt,{removeWrapper:!0,selectionMode:"none",isCompact:i,classNames:{base:"min-w-[900px]",wrapper:"p-0 shadow-none",th:"text-default-600 border-b font-semibold text-xs sticky top-0 z-30",td:"border-b py-4 px-3",table:"border-collapse w-full",thead:"sticky top-0 z-30",tbody:"",tr:"hover:bg-default-50 transition-colors duration-150",emptyWrapper:"text-center h-32",loadingWrapper:"h-32"},style:{"--table-border-color":"var(--theme-divider, #E4E4E7)","--table-header-bg":"var(--theme-content2, #F4F4F5)","--table-row-hover":"var(--theme-default-50, #F9FAFB)"},children:[e.jsx(Et,{columns:et,children:r=>e.jsx(Rt,{align:r.uid==="actions"||r.uid==="sl"?"center":"start",width:r.uid==="user"?280:r.uid==="email"?240:r.uid==="phone"?140:r.uid==="department"||r.uid==="device_status"?160:r.uid==="status"?120:r.uid==="roles"?180:r.uid==="actions"?120:void 0,style:{background:"var(--table-header-bg)",borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',fontSize:"0.75rem",fontWeight:"600"},children:e.jsxs("div",{className:"flex items-center gap-2 py-1",children:[r.uid==="sl"&&e.jsx(mt,{className:"w-3 h-3 text-default-400"}),r.uid==="user"&&e.jsx(vt,{className:"w-3 h-3 text-default-400"}),r.uid==="email"&&e.jsx(Q,{className:"w-3 h-3 text-default-400"}),r.uid==="phone"&&e.jsx(je,{className:"w-3 h-3 text-default-400"}),r.uid==="department"&&e.jsx(we,{className:"w-3 h-3 text-default-400"}),r.uid==="device_status"&&e.jsx(Fe,{className:"w-3 h-3 text-default-400"}),r.uid==="status"&&e.jsx(yt,{className:"w-3 h-3 text-default-400"}),r.uid==="roles"&&e.jsx(gt,{className:"w-3 h-3 text-default-400"}),r.uid==="actions"&&e.jsx(Ne,{className:"w-3 h-3 text-default-400"}),e.jsx("span",{children:r.name})]})},r.uid)}),e.jsx(wt,{items:t||[],emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(Le,{className:"w-12 h-12 text-default-300 mb-3"}),e.jsx("p",{className:"text-default-500 font-medium",children:"No users found"}),e.jsx("p",{className:"text-default-400 text-sm",children:"Try adjusting your search or filters"})]}),loadingContent:e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(le,{size:"lg",color:"primary"})}),isLoading:P,children:(r,f)=>{const l=t?t.findIndex(j=>j.id===r.id):f;return e.jsx(Ft,{className:"group",style:{background:"var(--theme-content1, #FFFFFF)"},children:j=>e.jsx(Nt,{style:{borderColor:"var(--table-border-color)",fontFamily:'var(--fontFamily, "Inter")',background:"inherit"},children:rt(r,j,l)})},r.id)}})]})}),st()]})};const Pe=Be("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Ae=Be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);let ee=M.create(),Ge=(t,o)=>`${t.method}:${t.baseURL??o.defaults.baseURL??""}${t.url}`,Ke=t=>t.status===204&&t.headers["precognition-success"]==="true";const oe={},W={get:(t,o={},i={})=>Y(X("get",t,o,i)),post:(t,o={},i={})=>Y(X("post",t,o,i)),patch:(t,o={},i={})=>Y(X("patch",t,o,i)),put:(t,o={},i={})=>Y(X("put",t,o,i)),delete:(t,o={},i={})=>Y(X("delete",t,o,i)),use(t){return ee=t,W},axios(){return ee},fingerprintRequestsUsing(t){return Ge=t===null?()=>null:t,W},determineSuccessUsing(t){return Ke=t,W}},X=(t,o,i,w)=>({url:o,method:t,...w,...["get","delete"].includes(t)?{params:fe({},i,w?.params)}:{data:fe({},i,w?.data)}}),Y=(t={})=>{const o=[Vt,Tt,$t].reduce((i,w)=>w(i),t);return(o.onBefore??(()=>!0))()===!1?Promise.resolve(null):((o.onStart??(()=>null))(),ee.request(o).then(async i=>{o.precognitive&&Ie(i);const w=i.status;let y=i;return o.precognitive&&o.onPrecognitionSuccess&&Ke(y)&&(y=await Promise.resolve(o.onPrecognitionSuccess(y)??y)),o.onSuccess&&Dt(w)&&(y=await Promise.resolve(o.onSuccess(y)??y)),(ke(o,w)??(b=>b))(y)??y},i=>Lt(i)?Promise.reject(i):(o.precognitive&&Ie(i.response),(ke(o,i.response.status)??((y,p)=>Promise.reject(p)))(i.response,i))).finally(o.onFinish??(()=>null)))},Vt=t=>{const o=t.only??t.validate;return{...t,timeout:t.timeout??ee.defaults.timeout??3e4,precognitive:t.precognitive!==!1,fingerprint:typeof t.fingerprint>"u"?Ge(t,ee):t.fingerprint,headers:{...t.headers,"Content-Type":Bt(t),...t.precognitive!==!1?{Precognition:!0}:{},...o?{"Precognition-Validate-Only":Array.from(o).join()}:{}}}},Dt=t=>t>=200&&t<300,Tt=t=>(typeof t.fingerprint!="string"||(oe[t.fingerprint]?.abort(),delete oe[t.fingerprint]),t),$t=t=>typeof t.fingerprint!="string"||t.signal||t.cancelToken||!t.precognitive?t:(oe[t.fingerprint]=new AbortController,{...t,signal:oe[t.fingerprint].signal}),Ie=t=>{if(t.headers?.precognition!=="true")throw Error("Did not receive a Precognition response. Ensure you have the Precognition middleware in place for the route.")},Lt=t=>!$e(t)||typeof t.response?.status!="number"||Te(t),ke=(t,o)=>({401:t.onUnauthorized,403:t.onForbidden,404:t.onNotFound,409:t.onConflict,422:t.onValidationError,423:t.onLocked})[o],Bt=t=>t.headers?.["Content-Type"]??t.headers?.["Content-type"]??t.headers?.["content-type"]??(Ze(t.data)?"multipart/form-data":"application/json"),Ze=t=>xe(t)||typeof t=="object"&&t!==null&&Object.values(t).some(o=>Ze(o)),xe=t=>typeof File<"u"&&t instanceof File||t instanceof Blob||typeof FileList<"u"&&t instanceof FileList&&t.length>0,Ve=t=>typeof t=="string"?t:t(),De=t=>typeof t=="string"?t.toLowerCase():t(),zt=(t,o={})=>{const i={errorsChanged:[],touchedChanged:[],validatingChanged:[],validatedChanged:[]};let w=!1,y=!1;const p=a=>a!==y?(y=a,i.validatingChanged):[];let b=[];const z=a=>{const n=[...new Set(a)];return b.length!==n.length||!n.every(d=>b.includes(d))?(b=n,i.validatedChanged):[]},F=()=>b.filter(a=>typeof E[a]>"u");let R=[];const P=a=>{const n=[...new Set(a)];return R.length!==n.length||!n.every(d=>R.includes(d))?(R=n,i.touchedChanged):[]};let E={};const T=a=>{const n=Ot(a);return ut(E,n)?[]:(E=n,i.errorsChanged)},$=a=>{const n={...E};return delete n[ae(a)],T(n)},L=()=>Object.keys(E).length>0;let B=1500;const _=a=>{B=a,S.cancel(),S=m()};let V=o,A=null,s=[],N=null;const m=()=>dt(a=>{t({get:(n,d={},v={})=>W.get(n,x(d),C(v,a,d)),post:(n,d={},v={})=>W.post(n,x(d),C(v,a,d)),patch:(n,d={},v={})=>W.patch(n,x(d),C(v,a,d)),put:(n,d={},v={})=>W.put(n,x(d),C(v,a,d)),delete:(n,d={},v={})=>W.delete(n,x(d),C(v,a,d))}).catch(n=>Te(n)||$e(n)&&n.response?.status===422?null:Promise.reject(n))},B,{leading:!0,trailing:!0});let S=m();const C=(a,n,d={})=>{const v={...a,...n},q=Array.from(v.only??v.validate??R);return{...n,...ct(a,n),only:q,timeout:v.timeout??5e3,onValidationError:(k,H)=>([...z([...b,...q]),...T(fe(be({...E},q),k.data.errors))].forEach(ie=>ie()),v.onValidationError?v.onValidationError(k,H):Promise.reject(H)),onSuccess:k=>(z([...b,...q]).forEach(H=>H()),v.onSuccess?v.onSuccess(k):k),onPrecognitionSuccess:k=>([...z([...b,...q]),...T(be({...E},q))].forEach(H=>H()),v.onPrecognitionSuccess?v.onPrecognitionSuccess(k):k),onBefore:()=>v.onBeforeValidation&&v.onBeforeValidation({data:d,touched:R},{data:V,touched:s})===!1||(v.onBefore||(()=>!0))()===!1?!1:(N=R,A=d,!0),onStart:()=>{p(!0).forEach(k=>k()),(v.onStart??(()=>null))()},onFinish:()=>{p(!1).forEach(k=>k()),s=N,V=A,N=A=null,(v.onFinish??(()=>null))()}}},u=(a,n,d)=>{if(typeof a>"u"){const v=Array.from(d?.only??d?.validate??[]);P([...R,...v]).forEach(q=>q()),S(d??{});return}if(xe(n)&&!w){console.warn('Precognition file validation is not active. Call the "validateFiles" function on your form to enable it.');return}a=ae(a),ne(V,a)!==n&&(P([a,...R]).forEach(v=>v()),S(d??{}))},x=a=>w===!1?he(a):a,c={touched:()=>R,validate(a,n,d){return typeof a=="object"&&!("target"in a)&&(d=a,a=n=void 0),u(a,n,d),c},touch(a){const n=Array.isArray(a)?a:[ae(a)];return P([...R,...n]).forEach(d=>d()),c},validating:()=>y,valid:F,errors:()=>E,hasErrors:L,setErrors(a){return T(a).forEach(n=>n()),c},forgetError(a){return $(a).forEach(n=>n()),c},reset(...a){if(a.length===0)P([]).forEach(n=>n());else{const n=[...R];a.forEach(d=>{n.includes(d)&&n.splice(n.indexOf(d),1),pe(V,d,ne(o,d))}),P(n).forEach(d=>d())}return c},setTimeout(a){return _(a),c},on(a,n){return i[a].push(n),c},validateFiles(){return w=!0,c}};return c},Ut=t=>Object.keys(t).reduce((o,i)=>({...o,[i]:Array.isArray(t[i])?t[i][0]:t[i]}),{}),Ot=t=>Object.keys(t).reduce((o,i)=>({...o,[i]:typeof t[i]=="string"?[t[i]]:t[i]}),{}),ae=t=>typeof t!="string"?t.target.name:t,he=t=>{const o={...t};return Object.keys(o).forEach(i=>{const w=o[i];if(w!==null){if(xe(w)){delete o[i];return}if(Array.isArray(w)){o[i]=Object.values(he({...w}));return}if(typeof w=="object"){o[i]=he(o[i]);return}}}),o},qt=(t,o,i,w={})=>{const y=g.useRef(null);y.current===null&&(y.current=se(i));const p=g.useRef(null);p.current===null&&(p.current=Object.keys(y));const b=g.useRef(y.current),[z,F]=g.useState([]),[R,P]=g.useState([]),[E,T]=g.useState(!1),[$,L]=g.useState(!1),[B,_]=g.useState({}),[V,A]=g.useState(!1),[s,N]=g.useState(()=>se(y.current)),m=g.useRef(null);m.current===null&&(m.current=zt(u=>u[De(t)](Ve(o),b.current,w),i).on("validatingChanged",()=>{T(m.current.validating())}).on("validatedChanged",()=>{F(m.current.valid())}).on("touchedChanged",()=>{P(m.current.touched())}).on("errorsChanged",()=>{A(m.current.hasErrors()),_(Ut(m.current.errors())),F(m.current.valid())}));const S=u=>({...u,precognitive:!1,onStart:()=>{L(!0),(u.onStart??(()=>null))()},onFinish:()=>{L(!1),(u.onFinish??(()=>null))()},onValidationError:(x,c)=>(m.current.setErrors(x.data.errors),u.onValidationError?u.onValidationError(x):Promise.reject(c))}),C={data:s,setData(u,x){if(typeof u=="object")b.current=u,N(u);else{const c=se(b.current);b.current=pe(c,u,x),N(b.current)}return C},touched(u){return typeof u=="string"?R.includes(u):R.length>0},touch(u){return m.current.touch(u),C},validate(u,x){return typeof u=="object"&&!("target"in u)&&(x=u,u=void 0),typeof u>"u"?m.current.validate(x):(u=ae(u),m.current.validate(u,ne(b.current,u),x)),C},validating:E,valid(u){return z.includes(u)},invalid(u){return typeof B[u]<"u"},errors:B,hasErrors:V,setErrors(u){return m.current.setErrors(u),C},forgetError(u){return m.current.forgetError(u),C},reset(...u){const x=se(y.current);return u.length===0?(b.current=x,N(x)):(u.forEach(c=>pe(b.current,c,ne(x,c))),N(b.current)),m.current.reset(...u),C},setValidationTimeout(u){return m.current.setTimeout(u),C},processing:$,async submit(u={}){return W[De(t)](Ve(o),b.current,S(u))},validateFiles(){return m.current.validateFiles(),C},validator(){return m.current}};return C},Mt=t=>{const o=t==="admin";return{store:o?"admin.users.store":"users.store",update:o?"admin.users.update":"users.update"}},Fr=({user:t,roles:o,setUsers:i,open:w,closeModal:y,editMode:p=!1,context:b="tenant"})=>{const z=Mt(b),[F,R]=g.useState(!1),[P,E]=g.useState(!1),[T,$]=g.useState(t?.profile_image_url||t?.profile_image||null),[L,B]=g.useState(null),[_,V]=g.useState("lg"),A=()=>{if(typeof window>"u")return"lg";const c=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",a=parseInt(c);return a===0?"none":a<=4?"sm":a<=8?"md":a<=16?"lg":"full"};g.useEffect(()=>{typeof window<"u"&&V(A())},[]);const s=qt(p?"put":"post",p&&t?.id?route(z.update,{user:t.id}):route(z.store),{id:t?.id||"",name:t?.name||"",user_name:t?.user_name||"",phone:t?.phone||"",email:t?.email||"",password:"",password_confirmation:"",roles:t?.roles?.map(x=>typeof x=="object"?x.name:x)||[],profile_image:null});g.useEffect(()=>{(t?.profile_image_url||t?.profile_image)&&$(t.profile_image_url||t.profile_image)},[t]);const N=async()=>{if(L){const c=L.type;if(!["image/jpeg","image/jpg","image/png"].includes(c)){D.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"ðŸ”´"});return}s.setData("profile_image",L)}const x=new Promise(async(c,a)=>{try{await s.submit({preserveScroll:!0,transform:n=>({...n}),onSuccess:n=>{i&&i(p?d=>d.map(v=>v.id===n.data.user.id?n.data.user:v):d=>[...d,n.data.user]),y(),c([n.data.message||`User ${p?"updated":"created"} successfully`])},onError:n=>{const d=Object.values(n).flat();d.length>0?a(d.join(", ")):a(`Failed to ${p?"update":"create"} user. Please check the form for errors.`)}})}catch(n){if(console.error("Form submission error:",n),n.response)if(n.response.status===422){const d=n.response.data.errors||{},v=Object.values(d).flat();a(v.length>0?v.join(", "):"Validation failed. Please check the form.")}else n.response.status===500?a(n.response.data.message||"Server error occurred. Please try again later."):a(`HTTP Error ${n.response.status}: ${n.response.data.message||"An unexpected error occurred."}`);else n.request?a("No response received from the server. Please check your internet connection."):a("An error occurred while setting up the request.")}});D.promise(x,{pending:`${p?"Updating":"Creating"} user...`,success:{render({data:c}){return c.join(", ")}},error:{render({data:c}){return c}}})},m=x=>{const c=x.target.files[0];if(c){const a=URL.createObjectURL(c);$(a),B(c)}},S=(x,c)=>{s.setData(x,c),s.touched(x)&&s.validate(x)},C=()=>{R(!F)},u=()=>{if(p)return s.isDirty&&!s.processing;{const x=s.data.name?.trim()&&s.data.user_name?.trim()&&s.data.email?.trim()&&s.data.password?.trim()&&s.data.password_confirmation?.trim(),c=s.data.password===s.data.password_confirmation;return x&&c&&!s.processing}};return e.jsx(ze,{isOpen:w,onClose:y,size:"3xl",radius:_,scrollBehavior:"inside",classNames:{base:"backdrop-blur-md max-h-[95vh] my-2",backdrop:"bg-black/50 backdrop-blur-sm",header:"border-b border-divider flex-shrink-0",body:"overflow-y-auto max-h-[calc(95vh-160px)]",footer:"border-t border-divider flex-shrink-0",closeButton:"hover:bg-white/5 active:bg-white/10"},style:{border:"var(--borderWidth, 2px) solid var(--theme-divider, #E4E4E7)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:e.jsx(Ue,{children:x=>e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"flex flex-col gap-1 py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-5 h-5 sm:w-6 sm:h-6",style:{color:"var(--theme-primary)"}}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:p?"Edit User":"Add New User"}),e.jsx("p",{className:"text-sm text-default-500 mt-0.5",style:{fontFamily:'var(--fontFamily, "Inter")'},children:p?"Update user information":"Create a new user account"})]})]})}),e.jsx(qe,{className:"py-4 px-4 sm:py-6 sm:px-6 overflow-y-auto",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative group cursor-pointer",onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:[e.jsx(xt,{src:T,name:s.data.name,size:"xl",className:"w-32 h-32 text-2xl transition-all duration-300",style:{border:"4px solid var(--theme-divider, #E4E4E7)",filter:P?"brightness(70%)":"brightness(100%)"}}),e.jsxs("label",{htmlFor:"icon-button-file",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-opacity duration-300",style:{opacity:P?1:0},children:[e.jsx("input",{accept:"image/*",id:"icon-button-file",type:"file",className:"hidden",onChange:m}),e.jsx(St,{className:"w-8 h-8 text-white"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(K,{label:"Full Name",placeholder:"Enter full name",value:s.data.name,onChange:c=>S("name",c.target.value),onBlur:()=>s.validate("name"),isInvalid:s.invalid("name"),errorMessage:s.errors.name,isRequired:!0,variant:"bordered",size:"sm",radius:_,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(K,{label:"Username",placeholder:"Enter username",value:s.data.user_name,onChange:c=>S("user_name",c.target.value),onBlur:()=>s.validate("user_name"),isInvalid:s.invalid("user_name"),errorMessage:s.errors.user_name,isRequired:!0,variant:"bordered",size:"sm",radius:_,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(K,{label:"Email",type:"email",placeholder:"Enter email address",value:s.data.email,onChange:c=>S("email",c.target.value),onBlur:()=>s.validate("email"),isInvalid:s.invalid("email"),errorMessage:s.errors.email,isRequired:!0,variant:"bordered",size:"sm",radius:_,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(K,{label:"Phone",placeholder:"Enter phone number",value:s.data.phone,onChange:c=>S("phone",c.target.value),onBlur:()=>s.validate("phone"),isInvalid:s.invalid("phone"),errorMessage:s.errors.phone,variant:"bordered",size:"sm",radius:_,classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})]}),e.jsx("div",{className:"col-span-full",children:e.jsx(Me,{label:"Roles",placeholder:"Select user roles",selectionMode:"multiple",selectedKeys:new Set(s.data.roles),onSelectionChange:c=>{const a=Array.from(c);S("roles",a)},onClose:()=>s.validate("roles"),isInvalid:s.invalid("roles"),errorMessage:s.errors.roles,variant:"bordered",size:"sm",radius:_,classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},renderValue:c=>e.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(a=>e.jsx(me,{size:"sm",color:"secondary",variant:"flat",children:a.textValue},a.key))}),children:o?.map(c=>{const a=typeof c=="object"?c.name:c;return e.jsx(We,{value:a,children:a},a)})})}),!p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(K,{label:"Password",type:F?"text":"password",placeholder:"Enter password",value:s.data.password,onChange:c=>S("password",c.target.value),onBlur:()=>s.validate("password"),isInvalid:s.invalid("password"),errorMessage:s.errors.password,isRequired:!p,variant:"bordered",size:"sm",radius:_,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:C,children:F?e.jsx(Pe,{className:"w-4 h-4 text-default-400"}):e.jsx(Ae,{className:"w-4 h-4 text-default-400"})}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}}),e.jsx(K,{label:"Confirm Password",type:F?"text":"password",placeholder:"Confirm password",value:s.data.password_confirmation,onChange:c=>S("password_confirmation",c.target.value),onBlur:()=>s.validate("password_confirmation"),isInvalid:s.invalid("password_confirmation")||s.data.password!==s.data.password_confirmation&&s.data.password_confirmation,errorMessage:s.errors.password_confirmation||(s.data.password!==s.data.password_confirmation&&s.data.password_confirmation?"Passwords do not match":""),isRequired:!p,variant:"bordered",size:"sm",radius:_,endContent:e.jsx("button",{className:"focus:outline-none",type:"button",onClick:C,children:F?e.jsx(Pe,{className:"w-4 h-4 text-default-400"}):e.jsx(Ae,{className:"w-4 h-4 text-default-400"})}),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})]})]})}),e.jsxs(He,{className:"flex justify-between px-4 sm:px-6 py-3 sm:py-4",style:{borderColor:"var(--theme-divider, #E4E4E7)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(Z,{variant:"light",onPress:y,isDisabled:s.processing,radius:_,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(Z,{variant:"solid",color:"primary",onPress:N,isLoading:s.processing,isDisabled:!u(),radius:_,style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:p?"Update User":"Add User"})]})]})})})},Nr=({roles:t=[],open:o,closeModal:i,onInviteSent:w})=>{const[y,p]=g.useState(!1),[b,z]=g.useState("lg"),[F,R]=g.useState({email:"",role:"",message:""}),[P,E]=g.useState({}),T=()=>{if(typeof window>"u")return"lg";const N=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",m=parseInt(N);return m===0?"none":m<=4?"sm":m<=8?"md":m<=16?"lg":"full"};g.useEffect(()=>{typeof window<"u"&&z(T())},[]);const $=(s,N)=>{R(m=>({...m,[s]:N})),P[s]&&E(m=>({...m,[s]:""}))},L=()=>{const s={};return F.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F.email)||(s.email="Please enter a valid email address"):s.email="Email address is required",F.role||(s.role="Please select a role for the invited user"),E(s),Object.keys(s).length===0},B=()=>{R({email:"",role:"",message:""}),E({})},_=()=>{B(),i()},V=async s=>{if(s?.preventDefault(),!!L()){p(!0);try{const N=await M.post(route("users.invite"),F);(N.status===200||N.status===201)&&(D.success("Invitation sent successfully!"),B(),w?.(),i())}catch(N){console.error("Error sending invitation:",N),N.response?.data?.errors?E(N.response.data.errors):N.response?.data?.message?D.error(N.response.data.message):D.error("Failed to send invitation. Please try again.")}finally{p(!1)}}},A=g.useMemo(()=>F.email&&F.role,[F.email,F.role]);return e.jsx(ze,{isOpen:o,onClose:_,size:"lg",backdrop:"blur",radius:b,scrollBehavior:"inside",classNames:{base:"border-[1px] border-divider bg-content1",header:"border-b-[1px] border-divider",footer:"border-t-[1px] border-divider"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(Ue,{children:[e.jsx(Oe,{className:"flex flex-col gap-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)"},children:e.jsx(Q,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Invite Team Member"}),e.jsx("p",{className:"text-sm text-default-500",children:"Send an invitation to join your organization"})]})]})}),e.jsxs(qe,{className:"gap-4 py-4",children:[e.jsx(K,{label:"Email Address",placeholder:"colleague@example.com",type:"email",value:F.email,onChange:s=>$("email",s.target.value),variant:"bordered",radius:b,isRequired:!0,isInvalid:!!P.email,errorMessage:P.email,startContent:e.jsx(Q,{className:"w-4 h-4 text-default-400"}),classNames:{input:"text-sm"}}),e.jsx(Me,{label:"Role",placeholder:"Select a role",selectedKeys:F.role?[F.role]:[],onChange:s=>$("role",s.target.value),variant:"bordered",radius:b,isRequired:!0,isInvalid:!!P.role,errorMessage:P.role,startContent:e.jsx(Le,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"text-sm"},children:t.map(s=>e.jsx(We,{value:s.name,textValue:s.name,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:s.name.replace(/-/g," ")}),s.description&&e.jsx("span",{className:"text-xs text-default-400",children:s.description})]})},s.name))}),e.jsx(Pt,{label:"Personal Message (Optional)",placeholder:"Add a personal note to the invitation email...",value:F.message,onChange:s=>$("message",s.target.value),variant:"bordered",radius:b,minRows:3,maxRows:5,classNames:{input:"text-sm"}}),e.jsx("div",{className:"p-3 rounded-lg text-sm",style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderWidth:"1px",borderRadius:"var(--borderRadius, 8px)"},children:e.jsxs("p",{className:"text-default-600",children:[e.jsx("strong",{children:"Note:"})," The invited user will receive an email with a link to complete their registration. After registration, you can onboard them as an employee from the Users list to assign department, designation, and other job details. The invitation will expire in 7 days."]})})]}),e.jsxs(He,{children:[e.jsx(Z,{variant:"flat",onPress:_,isDisabled:y,radius:b,children:"Cancel"}),e.jsx(Z,{color:"primary",onPress:V,isLoading:y,isDisabled:!A||y,startContent:y?null:e.jsx(Q,{className:"w-4 h-4"}),radius:b,children:"Send Invitation"})]})]})})};export{Fr as A,Nr as I,wr as U};
