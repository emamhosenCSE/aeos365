import{u as _,r as p,f as R,n as $,j as e,H as L,s as B,k as M,L as T,b as I}from"./app-B1idACz3.js";import{A as P}from"./AuthCard-V0y7lyru.js";import{R as D}from"./RegisterLayout-nh_GC2aT.js";import{u as F}from"./useBranding-BpzGYNdv.js";import{P as q}from"./ProgressSteps-npLoq7WU.js";import{F as A}from"./CheckCircleIcon-znT6UY48.js";import{i as o}from"./chunk-SQIAVXJX-BmeQe73H.js";import"./app-BmhO9GrS.js";import"./index-B22Xm-65.js";/* empty css                      */import"./MaintenanceModeBanner-BuwtjklV.js";import"./chunk-AUA5GDXN-Dy7XAS6o.js";import"./index-BvG5LGgQ.js";import"./index-BvevyAVm.js";import"./chunk-WQVQ7P2I-BDe9YmDI.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BFW_lSqD.js";import"./ArrowLeftIcon-B39h7gxR.js";import"./chunk-KQW2TNLT-Cz1cLYHm.js";import"./chunk-ICU6NNET-CXrsm0Bw.js";import"./useLabel-BWLgnRON.js";import"./useLabels-xtEGP3rr.js";function ne({steps:g=[],currentStep:h,savedData:f={},accountType:x="company",baseDomain:v="platform.test"}){const l=f?.details??{},{data:t,setData:m,post:j,processing:y,errors:s}=_({name:l.name??"",email:l.email??"",phone:l.phone??"",subdomain:l.subdomain??"",team_size:l.team_size??""}),[i,r]=p.useState({checking:!1,available:null,message:""}),[b,k]=p.useState(null),{themeSettings:N}=R(),n=N?.mode==="dark",{siteName:w}=F(),c={heading:n?"text-white":"text-slate-900",copy:n?"text-slate-300":"text-slate-600",badge:n?"text-slate-300":"text-slate-500",link:n?"text-white/80 hover:text-white":"text-slate-600 hover:text-slate-900"};p.useEffect(()=>{b&&clearTimeout(b);const a=t.subdomain.trim().toLowerCase();if(!a||a.length<3||!/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(a)){r({checking:!1,available:null,message:""});return}const d=setTimeout(async()=>{r({checking:!0,available:null,message:""});try{const u=await $.post("/api/platform/v1/check-subdomain",{subdomain:a});r({checking:!1,available:u.data.available,message:u.data.message||(u.data.available?"Subdomain is available":"Subdomain is taken")})}catch{r({checking:!1,available:null,message:""})}},500);return k(d),()=>clearTimeout(d)},[t.subdomain]);const S=a=>{a.preventDefault(),j(route("platform.register.details.store"))},C=x==="individual"?"Your name":"Organization name",z=a=>a.replace(/[^\d+]/g,"");return e.jsxs(D,{children:[e.jsx(L,{title:`Workspace details - ${w}`}),e.jsxs("section",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-12 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center",children:[e.jsx("p",{className:`text-[10px] sm:text-sm uppercase tracking-[0.3em] ${c.badge}`,children:"Step 2"}),e.jsxs("h1",{className:`text-2xl sm:text-4xl font-semibold ${c.heading} px-2`,children:["Tell us about ",x==="individual"?"you":"your company","."]}),e.jsx("p",{className:`${c.copy} text-sm sm:text-base px-2`,children:"We will use this to pre-configure branding, subdomain, and trial communications."})]}),e.jsx(q,{steps:g,currentStep:h}),e.jsx(P,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4 sm:space-y-5",children:[e.jsx(o,{label:C,placeholder:"Acme Manufacturing",value:t.name,onChange:a=>m("name",a.target.value),isInvalid:!!s.name,errorMessage:s.name,isRequired:!0,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2",children:[e.jsx(o,{type:"email",label:"Work email",placeholder:"ops@acme.com",value:t.email,onChange:a=>m("email",a.target.value),isInvalid:!!s.email,errorMessage:s.email,isRequired:!0,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}}),e.jsx(o,{label:"Phone (optional)",placeholder:"+1 415 555 0110",value:t.phone,onChange:a=>m("phone",z(a.target.value)),isInvalid:!!s.phone,errorMessage:s.phone,description:"International format recommended (e.g., +1 234 567 8900)",classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base",description:"text-xs sm:text-sm"}})]}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-[2fr,1fr]",children:[e.jsx(o,{label:"Preferred subdomain",placeholder:"acme",value:t.subdomain,onChange:a=>m("subdomain",a.target.value.toLowerCase()),isInvalid:!!s.subdomain||i.available===!1,errorMessage:s.subdomain||(i.available===!1?i.message:""),description:`Your workspace URL will be https://${t.subdomain||"team"}.${v}`,isRequired:!0,endContent:i.checking?e.jsx(B,{size:"sm"}):i.available===!0?e.jsx(A,{className:"w-5 h-5 text-success"}):i.available===!1?e.jsx(M,{className:"w-5 h-5 text-danger"}):null,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base",description:"text-xs sm:text-sm"}}),e.jsx(o,{type:"number",label:"Team size",placeholder:"120",value:t.team_size,onChange:a=>m("team_size",a.target.value),isInvalid:!!s.team_size,errorMessage:s.team_size,min:1,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsx(T,{href:route("platform.register.index"),className:`text-xs sm:text-sm transition-colors text-center sm:text-left ${c.link}`,children:"‚Üê Back to account type"}),e.jsx(I,{color:"primary",className:"bg-gradient-to-r from-blue-500 to-purple-600 w-full sm:w-auto",type:"submit",isLoading:y,children:"Continue to modules"})]})]})})]})]})}export{ne as default};
