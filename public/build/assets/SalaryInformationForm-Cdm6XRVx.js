import{r as f,j as e,m as Z,c as J,d as X,F as ae,b as B,a as le,R as de,s as Y}from"./app-BAXRlJ48.js";import{C as fe,aq as ce,M as te,aE as be}from"./App-DPyYvU15.js";import{F as ye}from"./BriefcaseIcon-7DLvdql-.js";import{F as me}from"./CheckCircleIcon-DpGmT_VL.js";import{F as ge}from"./CalendarIcon-C7z-hHui.js";import{F as ve}from"./EnvelopeIcon-oHQ3-eEU.js";import{F as _e}from"./useMediaQuery-DMFH0ee8.js";import{F as je}from"./MapPinIcon-Dwf-7_N3.js";import{c as se}from"./chunk-C6WKGNND-CJZl1JMF.js";import{p as Fe}from"./chunk-VFIJPDYX-CnqB3wTu.js";import{d as ee}from"./chunk-IHO36JMK-DE6UccOS.js";import{F as Ie}from"./XMarkIcon-CT-5AVBL.js";import{s as S}from"./toastUtils-CgpXtHQI.js";import{X as ne,a as Ne,U as Ce,P as pe}from"./x-D16D3-wE.js";import{C as Se}from"./camera-AHJZLt_h.js";import{m as U,a as G,b as q,c as V}from"./chunk-TW2E3XVA-YKxZpKyZ.js";import{i as _}from"./chunk-SQIAVXJX-DHcD0NdT.js";import{s as $}from"./chunk-C3QHEOC2-CWWALGR_.js";import{l as L}from"./chunk-Y5DMIIWQ-7yisM25U.js";import{m as H}from"./chunk-5LXTSPS7-D1xxNIgs.js";import{U as ke}from"./user-dO8KnxCa.js";import{c as ue}from"./createLucideIcon-Cg-NULby.js";import{B as we}from"./briefcase-CJIQFrlD.js";const Re=ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Pe=ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),rr=({user:r,departments:w=[],designations:u=[],onEditClick:I,profileStats:s={},canEdit:b=!1})=>{const[k,d]=f.useState(!1),p=w.find(g=>g.id===r.department_id||g.id===r.department),h=u.find(g=>g.id===r.designation_id||g.id===r.designation),C=()=>r.active?"success":"danger",o=()=>{const g=s.completion_percentage||0;return g>=80?"success":g>=50?"warning":"danger"};return e.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(J,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsx(se,{className:"flex gap-4 pb-0",children:e.jsxs("div",{className:"flex gap-4 items-start w-full",children:[e.jsx("div",{className:"relative",children:e.jsx(fe,{content:e.jsx("div",{className:`w-4 h-4 rounded-full ${r.active?"bg-success-500":"bg-danger-500"} border-2 border-background`}),placement:"bottom-right",className:"border-0",children:e.jsx(ce,{src:r.profile_image_url||r.profile_image,name:r.name,size:"lg",className:"ring-2 ring-white/20 hover:ring-white/40 transition-all duration-300"})})}),e.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:r.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[p&&e.jsx(X,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(ye,{className:"w-3 h-3"}),children:p.name}),h&&e.jsx(X,{size:"sm",variant:"flat",color:"secondary",children:h.title}),e.jsx(X,{size:"sm",variant:"flat",color:C(),startContent:r.active?e.jsx(me,{className:"w-3 h-3"}):e.jsx(ae,{className:"w-3 h-3"}),children:r.active?"Active":"Inactive"})]})]}),b&&e.jsx(Z.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(B,{color:"primary",variant:"bordered",size:"sm",startContent:e.jsx(te,{className:"w-4 h-4"}),onPress:I,className:"bg-white/10 hover:bg-white/20 border-white/20",children:"Edit Profile"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm font-semibold text-foreground",children:[s.completion_percentage||0,"%"]})]}),e.jsx(Fe,{value:s.completion_percentage||0,color:o(),size:"sm",className:"max-w-full"}),e.jsxs("p",{className:"text-xs text-default-500 mt-1",children:[s.completed_sections||0," of ",s.total_sections||8," sections completed"]})]})]})]})}),e.jsxs(le,{className:"pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(be,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Employee ID"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.employee_id||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(ge,{className:"w-4 h-4 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Date of Joining"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.date_of_joining?new Date(r.date_of_joining).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(ve,{className:"w-4 h-4 text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:r.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:e.jsx(_e,{className:"w-4 h-4 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.phone||"N/A"})]})]})]}),r.address&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mb-4"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-500/20 rounded-lg",children:e.jsx(je,{className:"w-4 h-4 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Address"}),e.jsx("p",{className:"text-sm text-foreground",children:r.address})]})]})]}),(s.profile_views||s.last_updated)&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"my-4"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-default-500",children:[s.profile_views&&e.jsxs("span",{children:["Views: ",s.profile_views]}),s.last_updated&&e.jsxs("span",{children:["Updated: ",new Date(s.last_updated).toLocaleDateString()]})]})]})]})]})})},ar=({title:r,icon:w,children:u,onEdit:I,canEdit:s=!1,isEmpty:b=!1,isCompleted:k=!1,className:d="",headerAction:p=null,...h})=>{const o=b?{color:"danger",icon:Ie,text:"Empty"}:k?{color:"success",icon:me,text:"Complete"}:{color:"warning",icon:ae,text:"Incomplete"},g=o.icon;return e.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{y:-2},className:d,children:e.jsxs(J,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300 h-full",...h,children:[e.jsx(se,{className:"flex gap-3 pb-3",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[w&&e.jsx("div",{className:"p-2 bg-primary-500/20 rounded-lg",children:de.cloneElement(w,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground",children:r}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(X,{size:"sm",variant:"flat",color:o.color,startContent:e.jsx(g,{className:"w-3 h-3"}),children:o.text})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[p,s&&I&&e.jsx(Z.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(B,{isIconOnly:!0,size:"sm",variant:"bordered",color:"primary",onPress:I,className:"bg-white/10 hover:bg-white/20 border-white/20",children:e.jsx(te,{className:"w-4 h-4"})})})]})]})}),e.jsx(le,{className:"pt-0",children:b?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"p-4 bg-default-100/50 rounded-lg",children:[e.jsx(ae,{className:"w-8 h-8 text-default-400 mx-auto mb-2"}),e.jsx("p",{className:"text-default-500 text-sm",children:"No information available"}),s&&I&&e.jsx(B,{size:"sm",color:"primary",variant:"bordered",className:"mt-3",onPress:I,startContent:e.jsx(te,{className:"w-4 h-4"}),children:"Add Information"})]})}):u})]})})},tr=({label:r,value:w,icon:u,type:I="text",className:s="",valueClassName:b="",labelClassName:k="",showDivider:d=!0})=>{const p=(C,o)=>{if(!C||C==="N/A")return"N/A";switch(o){case"date":return new Date(C).toLocaleDateString();case"email":return C;case"phone":return C;case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C);default:return C}},h=()=>!w||w==="N/A"?"text-default-400":"text-foreground";return e.jsxs("div",{className:`flex items-center justify-between py-3 ${d?"border-b border-white/10 last:border-b-0":""} ${s}`,children:[e.jsxs("div",{className:`flex items-center gap-2 text-sm text-default-600 ${k}`,children:[u&&de.cloneElement(u,{className:"w-4 h-4"}),e.jsx("span",{children:r})]}),e.jsx("div",{className:`text-sm font-medium ${h()} text-right ${b}`,children:I==="chip"&&w&&w!=="N/A"?e.jsx(X,{size:"sm",variant:"flat",color:"primary",children:p(w,I)}):e.jsx("span",{children:p(w,I)})})]})},sr=({user:r,allUsers:w,departments:u,designations:I,setUser:s,open:b,closeModal:k})=>{const[d,p]=f.useState({id:r.id,name:r.name||"",gender:r.gender||"",birthday:r.birthday||"",date_of_joining:r.date_of_joining||"",address:r.address||"",employee_id:r.employee_id||"",phone:r.phone||"",email:r.email||"",department:r.department_id||r.department||"",designation:r.designation_id||r.designation||"",report_to:r.report_to_id||r.report_to||""}),[h,C]=f.useState({id:r.id}),[o,g]=f.useState(!1),[v,l]=f.useState({}),[m,E]=f.useState(!1),[t,n]=f.useState(!1),[i,a]=f.useState(null),[c,P]=f.useState(I),[F,D]=f.useState(w),y=x=>{const N=x.target.files[0];if(N){const A=N.type;if(!["image/jpeg","image/jpg","image/png"].includes(A)){S.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}});return}const T=URL.createObjectURL(N);a(T);const Q=new Promise(async(W,K)=>{try{const z=new FormData;z.append("id",r.id),z.append("profile_image",N),z.append("ruleSet","profile_image");const O=await axios.post(route("profile.update"),z,{headers:{"Content-Type":"multipart/form-data"}});O.data.user?(s(O.data.user),a(null),W(O.data.messages||["Profile image updated successfully"])):K("Failed to update profile image")}catch(z){if(a(null),z.response?.status===422){const O=z.response.data.errors,M=Object.values(O).flat();K(M.join(". "))}else z.response?.data?.error?K(z.response.data.error):K(z.message||"Failed to update profile image")}});S.promise(Q,{pending:{render(){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{children:"Uploading image..."})]})},icon:!1,style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}},success:{render({data:W}){return Array.isArray(W)?W.join(". "):W},icon:"âœ…",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-success, #17C964)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}},error:{render({data:W}){return W||"Failed to update profile image"},icon:"âŒ",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}})}},R=(x,N)=>{p(A=>{const T={...A,[x]:N};return N===""&&delete T[x],x==="department"&&N!==A.department&&(T.designation="",T.report_to=""),T}),C(A=>{const T={...A,[x]:N};return N===""&&delete T[x],x==="department"&&N!==d.department&&(T.designation="",T.report_to=""),T})};f.useEffect(()=>{const x=h.department||d.department,N=h.designation||d.designation,A=x?parseInt(x):null,T=N?parseInt(N):null;P(I.filter(M=>{const re=parseInt(M.department_id);return A&&re===A}));const Q=I.find(M=>parseInt(M.id)===T),W=Q?parseInt(Q.hierarchy_level):999,K=w.filter(M=>{const re=parseInt(M.department_id||M.department),he=parseInt(M.designation_id||M.designation),ie=I.find(xe=>parseInt(xe.id)===he),oe=ie?parseInt(ie.hierarchy_level):999;return re===A&&oe<W&&oe>0||M.id===d.report_to||M.id===h.report_to});D(K);const z={...h};for(const M in z)M!=="id"&&z[M]===r[M]&&delete z[M];const O=Object.keys(z).length>1;g(O)},[d,h]);const j=async x=>{x.preventDefault(),E(!0);try{const N=await axios.post(route("profile.update"),{ruleSet:"profile",...d});N.status===200&&(s(N.data.user),S.success(N.data.messages?.length>0?N.data.messages.join(" "):"Profile information updated successfully",{icon:"ðŸŸ¢",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-success, #17C964)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),k())}catch(N){E(!1),N.response?(N.response.status===422?(l(N.response.data.errors||{}),S.error(N.response.data.error||"Failed to update profile information.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})):S.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error(N.response.data)):N.request?(S.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error(N.request)):(S.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error("Error",N.message))}finally{E(!1)}};return e.jsx(U,{isOpen:b,onOpenChange:k,size:"5xl",scrollBehavior:"inside",backdrop:"blur",hideCloseButton:!0,classNames:{backdrop:"bg-black/30",base:"max-h-[90vh]",body:"p-0",header:"p-0",footer:"p-0"},children:e.jsxs(G,{style:{background:`linear-gradient(135deg, 
                        var(--theme-content1, #FAFAFA) 20%, 
                        var(--theme-content2, #F4F4F5) 10%, 
                        var(--theme-content3, #F1F3F4) 20%)`,borderColor:"var(--theme-divider, #E4E4E7)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:[e.jsx(q,{className:"p-0",children:e.jsxs("div",{className:"flex items-center justify-between p-6 border-b w-full",style:{borderColor:"var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #11181C)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--theme-foreground, #11181C)",fontFamily:'var(--fontFamily, "Inter")'},children:"Profile Information"}),e.jsx(B,{isIconOnly:!0,variant:"light",onPress:k,style:{color:"var(--theme-foreground-600, #71717A)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(ne,{size:20})})]})}),e.jsx(V,{className:"p-0",children:e.jsxs("form",{onSubmit:j,children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-full flex items-center justify-center",children:e.jsxs("div",{className:"relative inline-block",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx(ce,{src:i||r.profile_image,name:h.name||d.name,size:"lg",className:"w-24 h-24"}),t&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full flex justify-center items-center cursor-pointer",style:{background:"color-mix(in srgb, var(--theme-default, #71717A) 50%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(B,{isIconOnly:!0,variant:"light",className:"text-white",children:e.jsx(Se,{size:20})})})}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:y}),e.jsx("label",{htmlFor:"upload-button",children:e.jsx("div",{className:"absolute w-full h-full top-0 left-0 rounded-full cursor-pointer"})})]})}),e.jsx("div",{children:e.jsx(_,{label:"Name",value:h.name||d.name||"",onChange:x=>R("name",x.target.value),isInvalid:!!v.name,errorMessage:v.name,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsxs($,{label:"Gender",selectedKeys:h.gender||d.gender?[h.gender||d.gender]:[],onSelectionChange:x=>R("gender",Array.from(x)[0]),isInvalid:!!v.gender,errorMessage:v.gender,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(L,{value:"Male",children:"Male"},"Male"),e.jsx(L,{value:"Female",children:"Female"},"Female")]})}),e.jsx("div",{children:e.jsx(_,{label:"Birth Date",type:"date",value:h.birthday||d.birthday||"",onChange:x=>R("birthday",x.target.value),isInvalid:!!v.birthday,errorMessage:v.birthday,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Joining Date",type:"date",value:h.date_of_joining||d.date_of_joining||"",onChange:x=>R("date_of_joining",x.target.value),isInvalid:!!v.date_of_joining,errorMessage:v.date_of_joining,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-full",children:e.jsx(_,{label:"Address",value:h.address||d.address,onChange:x=>R("address",x.target.value),isInvalid:!!v.address,errorMessage:v.address,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Employee ID",value:h.employee_id||d.employee_id||"",onChange:x=>R("employee_id",x.target.value),isInvalid:!!v.employee_id,errorMessage:v.employee_id,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Phone Number",value:h.phone||d.phone,onChange:x=>R("phone",x.target.value),isInvalid:!!v.phone,errorMessage:v.phone,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Email Address",value:h.email||d.email,onChange:x=>R("email",x.target.value),isInvalid:!!v.email,errorMessage:v.email,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx($,{label:"Department",selectedKeys:h.department||d.department?[String(h.department||d.department)]:[],onSelectionChange:x=>R("department",Array.from(x)[0]),isInvalid:!!v.department,errorMessage:v.department,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:u.map(x=>e.jsx(L,{value:x.id,children:x.name},x.id))})}),e.jsx("div",{children:e.jsx($,{label:"Designation",selectedKeys:h.designation||d.designation?[String(h.designation||d.designation)]:[],onSelectionChange:x=>R("designation",Array.from(x)[0]),isInvalid:!!v.designation,errorMessage:v.designation,isDisabled:!(h.department||d.department),variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:c.map(x=>e.jsx(L,{value:x.id,children:x.title},x.id))})}),e.jsx("div",{children:e.jsxs($,{label:"Reports To",selectedKeys:h.report_to||d.report_to?[String(h.report_to||d.report_to)]:[],onSelectionChange:x=>R("report_to",Array.from(x)[0]),isInvalid:!!v.report_to,errorMessage:v.report_to,isDisabled:r.report_to==="na",variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(L,{value:"na",children:"--"},"na"),F.map(x=>e.jsx(L,{value:x.id,children:x.name},x.id))]})})]})}),e.jsx(H,{className:"p-0",children:e.jsx("div",{className:"flex items-center justify-center p-6 border-t w-full",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsx(B,{isDisabled:!o,className:"rounded-full px-6",variant:"bordered",color:"primary",type:"submit",isLoading:m,style:{borderColor:"var(--theme-primary, #006FEE)",color:"var(--theme-primary, #006FEE)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})})})]})})]})})},nr=({user:r,setUser:w,open:u,closeModal:I})=>{const s=()=>{if(typeof window>"u")return"lg";const n=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",i=parseInt(n);return i===0?"none":i<=4?"sm":i<=8?"md":i<=16?"lg":"full"},[b,k]=f.useState({id:r.id,passport_no:r.passport_no||"",passport_exp_date:r.passport_exp_date||"",nationality:r.nationality||"",religion:r.religion||"",marital_status:r.marital_status||"",employment_of_spouse:r.employment_of_spouse||"",number_of_children:r.number_of_children||"",nid:r.nid||""}),[d,p]=f.useState({id:r.id}),[h,C]=f.useState(!1),[o,g]=f.useState({}),[v,l]=f.useState(!1),m=(t,n)=>{k(i=>{const a={...i,[t]:n};return n===""&&delete a[t],t==="marital_status"&&n==="Single"&&(a.employment_of_spouse="",a.number_of_children=""),a}),p(i=>{const a={...i,[t]:n};return n===""&&delete a[t],t==="marital_status"&&n==="Single"&&(a.employment_of_spouse=null,a.number_of_children=null),a})};f.useEffect(()=>{for(const n in d)n!=="id"&&d[n]===r[n]&&delete d[n];const t=Object.keys(d).filter(n=>n!=="id").length>0;C(t)},[b,d,r]);const E=async t=>{t.preventDefault(),l(!0);try{const n=await axios.post(route("profile.update"),{ruleSet:"personal",...b});n.status===200&&(w(n.data.user),S.success(n.data.messages?.length>0?n.data.messages.join(" "):"Personal information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(n){l(!1),n.response?(n.response.status===422?(g(n.response.data.errors||{}),S.error(n.response.data.error||"Failed to update personal information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):S.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(n.response.data)):n.request?(S.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(n.request)):(S.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",n.message))}finally{l(!1)}};return e.jsx(U,{isOpen:u,onOpenChange:v?void 0:I,size:"2xl",radius:s(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(ke,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Personal Information"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Passport No",value:d.passport_no||b.passport_no||"",onChange:t=>m("passport_no",t.target.value),isInvalid:!!o.passport_no,errorMessage:o.passport_no,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Passport Expiry Date",type:"date",value:d.passport_exp_date||b.passport_exp_date||"",onChange:t=>m("passport_exp_date",t.target.value),isInvalid:!!o.passport_exp_date,errorMessage:o.passport_exp_date,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"NID No",value:d.nid||b.nid||"",onChange:t=>m("nid",t.target.value),isInvalid:!!o.nid,errorMessage:o.nid,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Nationality",value:d.nationality||b.nationality||"",onChange:t=>m("nationality",t.target.value),isInvalid:!!o.nationality,errorMessage:o.nationality,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Religion",value:d.religion||b.religion||"",onChange:t=>m("religion",t.target.value),isInvalid:!!o.religion,errorMessage:o.religion,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsxs($,{label:"Marital Status",selectedKeys:d.marital_status||b.marital_status?[d.marital_status||b.marital_status]:[],onSelectionChange:t=>m("marital_status",Array.from(t)[0]),isInvalid:!!o.marital_status,errorMessage:o.marital_status,variant:"bordered",size:"sm",radius:s(),classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(L,{value:"na",children:"-"},"na"),e.jsx(L,{value:"Single",children:"Single"},"Single"),e.jsx(L,{value:"Married",children:"Married"},"Married")]})}),e.jsx("div",{children:e.jsx(_,{label:"Employment of spouse",value:d.marital_status==="Single"?"":d.employment_of_spouse||b.employment_of_spouse,onChange:t=>m("employment_of_spouse",t.target.value),isInvalid:!!o.employment_of_spouse,errorMessage:o.employment_of_spouse,isDisabled:d.marital_status==="Single"||b.marital_status==="Single",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"No. of children",type:"number",value:d.marital_status==="Single"?"":d.number_of_children||b.number_of_children,onChange:t=>m("number_of_children",t.target.value),isInvalid:!!o.number_of_children,errorMessage:o.number_of_children,isDisabled:d.marital_status==="Single"||b.marital_status==="Single",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:I,isDisabled:v,variant:"light",radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!h,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},ir=({user:r,setUser:w,open:u,closeModal:I})=>{const s=()=>{if(typeof window>"u")return"lg";const n=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",i=parseInt(n);return i===0?"none":i<=4?"sm":i<=8?"md":i<=16?"lg":"full"},[b,k]=f.useState({id:r.id,emergency_contact_primary_name:r.emergency_contact_primary_name||"",emergency_contact_primary_relationship:r.emergency_contact_primary_relationship||"",emergency_contact_primary_phone:r.emergency_contact_primary_phone||"",emergency_contact_secondary_name:r.emergency_contact_secondary_name||"",emergency_contact_secondary_relationship:r.emergency_contact_secondary_relationship||"",emergency_contact_secondary_phone:r.emergency_contact_secondary_phone||""}),[d,p]=f.useState({id:r.id}),[h,C]=f.useState(!1),[o,g]=f.useState({}),[v,l]=f.useState(!1),m=(t,n)=>{k(i=>{const a={...i,[t]:n};return n===""&&delete a[t],a}),p(i=>{const a={...i,[t]:n};return n===""&&delete a[t],a})};f.useEffect(()=>{for(const n in d)n!=="id"&&d[n]===r[n]&&delete d[n];const t=Object.keys(d).filter(n=>n!=="id").length>0;C(t)},[b,d,r]);const E=async t=>{t.preventDefault(),l(!0);try{const n=await axios.post(route("profile.update"),{ruleSet:"emergency",...b});n.status===200&&(w(n.data.user),S.success(n.data.messages?.length>0?n.data.messages.join(" "):"Emergency contact updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(n){l(!1),n.response?(n.response.status===422?(g(n.response.data.errors||{}),S.error(n.response.data.error||"Failed to update emergency contact.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):S.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(n.response.data)):n.request?(S.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(n.request)):(S.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",n.message))}finally{l(!1)}};return e.jsx(U,{isOpen:u,onOpenChange:v?void 0:I,size:"2xl",radius:s(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Ne,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Emergency Contact Information"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(J,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Primary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Name",isRequired:!0,value:d.emergency_contact_primary_name||b.emergency_contact_primary_name||"",onChange:t=>m("emergency_contact_primary_name",t.target.value),isInvalid:!!o.emergency_contact_primary_name,errorMessage:o.emergency_contact_primary_name,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Relationship",isRequired:!0,value:d.emergency_contact_primary_relationship||b.emergency_contact_primary_relationship||"",onChange:t=>m("emergency_contact_primary_relationship",t.target.value),isInvalid:!!o.emergency_contact_primary_relationship,errorMessage:o.emergency_contact_primary_relationship,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Phone",isRequired:!0,value:d.emergency_contact_primary_phone||b.emergency_contact_primary_phone||"",onChange:t=>m("emergency_contact_primary_phone",t.target.value),isInvalid:!!o.emergency_contact_primary_phone,errorMessage:o.emergency_contact_primary_phone,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})}),e.jsx("div",{children:e.jsx(J,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Secondary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Name",value:d.emergency_contact_secondary_name||b.emergency_contact_secondary_name||"",onChange:t=>m("emergency_contact_secondary_name",t.target.value),isInvalid:!!o.emergency_contact_secondary_name,errorMessage:o.emergency_contact_secondary_name,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Relationship",value:d.emergency_contact_secondary_relationship||b.emergency_contact_secondary_relationship||"",onChange:t=>m("emergency_contact_secondary_relationship",t.target.value),isInvalid:!!o.emergency_contact_secondary_relationship,errorMessage:o.emergency_contact_secondary_relationship,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Phone",value:d.emergency_contact_secondary_phone||b.emergency_contact_secondary_phone||"",onChange:t=>m("emergency_contact_secondary_phone",t.target.value),isInvalid:!!o.emergency_contact_secondary_phone,errorMessage:o.emergency_contact_secondary_phone,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:I,isDisabled:v,variant:"light",radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!h,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},or=({user:r,setUser:w,open:u,closeModal:I})=>{const s=()=>{if(typeof window>"u")return"lg";const n=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",i=parseInt(n);return i===0?"none":i<=4?"sm":i<=8?"md":i<=16?"lg":"full"},[b,k]=f.useState({id:r.id,bank_name:r.bank_name||"",bank_account_no:r.bank_account_no||"",ifsc_code:r.ifsc_code||"",pan_no:r.pan_no||""}),[d,p]=f.useState({id:r.id}),[h,C]=f.useState(!1),[o,g]=f.useState({}),[v,l]=f.useState(!1),m=(t,n)=>{k(i=>{const a={...i,[t]:n};return n===""&&delete a[t],a}),p(i=>{const a={...i,[t]:n};return n===""&&delete a[t],a})};f.useEffect(()=>{for(const n in d)n!=="id"&&d[n]===r[n]&&delete d[n];const t=Object.keys(d).filter(n=>n!=="id").length>0;C(t)},[b,d,r]);const E=async t=>{t.preventDefault(),l(!0);const n=new Promise(async(i,a)=>{try{const c=await axios.post(route("profile.update"),{ruleSet:"bank",...b});c.status===200&&(w(c.data.user),g({}),I(),i([c.data.messages?.length>0?c.data.messages.join(" "):"Bank information updated successfully"]))}catch(c){console.error("Bank info update error:",c),c.response?.status===422?(g(c.response.data.errors||{}),a([c.response.data.error||"Validation failed. Please check your input."])):c.request?a(["No response from server. Check your connection."]):a([c.response?.data?.message||"Failed to update bank information"])}finally{l(!1)}});S.promise(n,{loading:"Updating bank information...",success:i=>i[0],error:i=>i[0]})};return e.jsx(U,{isOpen:u,onOpenChange:v?void 0:I,size:"2xl",radius:s(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Re,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Bank Information"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Bank Name",value:d.bank_name||b.bank_name||"",onChange:t=>m("bank_name",t.target.value),isInvalid:!!o.bank_name,errorMessage:o.bank_name,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Bank Account No.",value:d.bank_account_no||b.bank_account_no||"",onChange:t=>m("bank_account_no",t.target.value),isInvalid:!!o.bank_account_no,errorMessage:o.bank_account_no,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"IFSC Code",value:d.ifsc_code||b.ifsc_code||"",onChange:t=>m("ifsc_code",t.target.value),isInvalid:!!o.ifsc_code,errorMessage:o.ifsc_code,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"PAN No.",value:d.pan_no||b.pan_no||"",onChange:t=>m("pan_no",t.target.value),isInvalid:!!o.pan_no,errorMessage:o.pan_no,variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:I,isDisabled:v,variant:"light",radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!h,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},lr=({user:r,open:w,closeModal:u,handleDelete:I,setUser:s})=>{const b=()=>{if(typeof window>"u")return"lg";const i=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",a=parseInt(i);return a===0?"none":a<=4?"sm":a<=8?"md":a<=16?"lg":"full"},[k,d]=f.useState({id:r.id,family_member_name:r.family_member_name||"",family_member_relationship:r.family_member_relationship||"",family_member_dob:r.family_member_dob||"",family_member_phone:r.family_member_phone||""}),[p,h]=f.useState({id:r.id}),[C,o]=f.useState(!1),[g,v]=f.useState({}),[l,m]=f.useState(!1),E=(n,i)=>{d(a=>{const c={...a,[n]:i};return i===""&&delete c[n],c}),h(a=>{const c={...a,[n]:i};return i===""&&delete c[n],c})};f.useEffect(()=>{for(const i in p)i!=="id"&&p[i]===r[i]&&delete p[i];const n=Object.keys(p).filter(i=>i!=="id").length>0;o(n)},[k,p,r]);const t=async n=>{n.preventDefault(),m(!0);try{const i=await axios.post(route("profile.update"),{ruleSet:"family",...k});i.status===200&&(s(i.data.user),S.success(i.data.messages?.length>0?i.data.messages.join(" "):"Family information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),u())}catch(i){m(!1),i.response?(i.response.status===422?(v(i.response.data.errors||{}),S.error(i.response.data.error||"Failed to update family information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):S.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(i.response.data)):i.request?(S.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(i.request)):(S.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",i.message))}finally{m(!1)}};return e.jsx(U,{isOpen:w,onOpenChange:l?void 0:u,size:"2xl",radius:b(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Ce,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Family Member"})]}),e.jsxs("form",{onSubmit:t,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Name",variant:"bordered",value:p.family_member_name||k.family_member_name||"",onChange:n=>E("family_member_name",n.target.value),isInvalid:!!g.family_member_name,errorMessage:g.family_member_name,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Relationship",variant:"bordered",value:p.family_member_relationship||k.family_member_relationship||"",onChange:n=>E("family_member_relationship",n.target.value),isInvalid:!!g.family_member_relationship,errorMessage:g.family_member_relationship,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Date of Birth",variant:"bordered",type:"date",value:p.family_member_dob||k.family_member_dob||"",onChange:n=>E("family_member_dob",n.target.value),isInvalid:!!g.family_member_dob,errorMessage:g.family_member_dob,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Phone",variant:"bordered",value:p.family_member_phone||k.family_member_phone||"",onChange:n=>E("family_member_phone",n.target.value),isInvalid:!!g.family_member_phone,errorMessage:g.family_member_phone,size:"sm",radius:b(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:u,isDisabled:l,variant:"light",radius:b(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!C,variant:"bordered",color:"primary",type:"submit",isLoading:l,radius:b(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},dr=({user:r,open:w,closeModal:u,setUser:I})=>{const s=()=>{if(typeof window>"u")return"lg";const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",c=parseInt(a);return c===0?"none":c<=4?"sm":c<=8?"md":c<=16?"lg":"full"},[b,k]=f.useState({id:r.id}),[d,p]=f.useState(!1),[h,C]=f.useState(r.educations&&r.educations.length>0?r.educations:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),[o,g]=f.useState({}),[v,l]=f.useState(!1),m=(i,a,c)=>{const P=[...h];P[i]={...P[i],[a]:c},C(P);const F=P.filter((y,R)=>{const j=r.educations[R]||{},x=!j.id||y.institution!==j.institution||y.subject!==j.subject||y.degree!==j.degree||y.starting_date!==j.starting_date||y.complete_date!==j.complete_date||y.grade!==j.grade,N=j.id&&y.institution===j.institution&&y.subject===j.subject&&y.degree===j.degree&&y.starting_date===j.starting_date&&y.complete_date===j.complete_date&&y.grade===j.grade;return x&&!N});k(y=>({...y,educations:[...F]}));const D=F.length>0;p(D)},E=async i=>{const a=h[i],c=h.filter((P,F)=>F!==i);if(C(c.length>0?c:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),a.id){const P=new Promise(async(F,D)=>{try{const y=await fetch("/education/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:a.id,user_id:r.id})}),R=await y.json();y.ok?(k(j=>({...j,educations:R.educations})),I(j=>({...j,educations:R.educations})),F(R.message||"Education record deleted successfully.")):(g(R.errors),console.error(R.errors),D(R.error||"Failed to delete education record."))}catch(y){D(y)}});S.promise(P,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Deleting education record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})}},t=async i=>{i.preventDefault(),l(!0);const a=new Promise(async(c,P)=>{try{const F=await fetch("/education/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({educations:h.map(y=>({...y,user_id:r.id}))})}),D=await F.json();F.ok?(I(y=>({...y,educations:D.educations})),l(!1),u(),c([...D.messages])):(l(!1),g(D.errors),console.error(D.errors),P(D.error||"Failed to update education records."))}catch(F){l(!1),P(F.message||"An unexpected error occurred while updating education records.")}});S.promise(a,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Updating education records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:c}){return e.jsx(e.Fragment,{children:c.map((P,F)=>e.jsx("div",{children:P},F))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:c}){return e.jsx(e.Fragment,{children:c})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},n=async()=>{C([...h,{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}])};return e.jsx(U,{isOpen:w,onOpenChange:v?void 0:u,size:"3xl",radius:s(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Pe,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Education Information"})]}),e.jsxs("form",{onSubmit:t,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-4",children:[h.map((i,a)=>e.jsx("div",{children:e.jsx(Card,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["Education #",a+1]}),e.jsx(B,{isIconOnly:!0,variant:"light",onPress:()=>E(a),className:"text-red-500 hover:text-red-700",size:"sm",radius:s(),children:e.jsx(ne,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Institution",value:i.institution||"",onChange:c=>m(a,"institution",c.target.value),isInvalid:!!o[`educations.${a}.institution`],errorMessage:o[`educations.${a}.institution`]?o[`educations.${a}.institution`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Degree",value:i.degree||"",onChange:c=>m(a,"degree",c.target.value),isInvalid:!!o[`educations.${a}.degree`],errorMessage:o[`educations.${a}.degree`]?o[`educations.${a}.degree`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Subject",value:i.subject||"",onChange:c=>m(a,"subject",c.target.value),isInvalid:!!o[`educations.${a}.subject`],errorMessage:o[`educations.${a}.subject`]?o[`educations.${a}.subject`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Started in",type:"month",value:i.starting_date||"",onChange:c=>m(a,"starting_date",c.target.value),isInvalid:!!o[`educations.${a}.starting_date`],errorMessage:o[`educations.${a}.starting_date`]?o[`educations.${a}.starting_date`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Completed in",type:"month",value:i.complete_date||"",onChange:c=>m(a,"complete_date",c.target.value),isInvalid:!!o[`educations.${a}.complete_date`],errorMessage:o[`educations.${a}.complete_date`]?o[`educations.${a}.complete_date`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Grade",value:i.grade||"",onChange:c=>m(a,"grade",c.target.value),isInvalid:!!o[`educations.${a}.grade`],errorMessage:o[`educations.${a}.grade`]?o[`educations.${a}.grade`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})},a)),e.jsx("div",{className:"mt-4",children:e.jsx(B,{size:"sm",color:"danger",variant:"bordered",onPress:n,startContent:e.jsx(pe,{size:16}),radius:s(),children:"Add More"})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:u,isDisabled:v,variant:"light",radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!d,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},cr=({user:r,open:w,closeModal:u,setUser:I})=>{const s=()=>{if(typeof window>"u")return"lg";const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",c=parseInt(a);return c===0?"none":c<=4?"sm":c<=8?"md":c<=16?"lg":"full"},[b,k]=f.useState({id:r.id}),[d,p]=f.useState(!1),[h,C]=f.useState(r.experiences.length>0?r.experiences:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),[o,g]=f.useState({}),[v,l]=f.useState(!1),m=(i,a,c)=>{const P=[...h];P[i]={...P[i],[a]:c},C(P);const F=P.filter((y,R)=>{const j=r.experiences[R]||{},x=!j.id||y.company_name!==j.company_name||y.location!==j.location||y.job_position!==j.job_position||y.period_from!==j.period_from||y.period_to!==j.period_to||y.description!==j.description,N=j.id&&y.company_name===j.company_name&&y.location===j.location&&y.job_position===j.job_position&&y.period_from===j.period_from&&y.period_to===j.period_to&&y.description===j.description;return x&&!N});k(y=>({...y,experiences:[...F]}));const D=F.length>0;p(D)},E=async i=>{const a=h[i],c=h.filter((P,F)=>F!==i);if(C(c.length>0?c:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),a.id){const P=new Promise(async(F,D)=>{try{const y=await fetch("/experience/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:a.id,user_id:r.id})}),R=await y.json();y.ok?(k(j=>({...j,experiences:R.experiences})),I(j=>({...j,experiences:R.experiences})),F(R.message||"Experience record deleted successfully."),u()):(g([...R.errors]),D(R.error||"Failed to delete experience record."))}catch(y){D(y)}});S.promise(P,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Deleting experience record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})}},t=async i=>{i.preventDefault(),l(!0);const a=new Promise(async(c,P)=>{try{const F=await fetch("/experience/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({experiences:h.map(y=>({...y,user_id:r.id}))})}),D=await F.json();F.ok?(I(y=>({...y,experiences:D.experiences})),l(!1),u(),c([...D.messages])):(l(!1),g(D.errors),console.error(D.errors),P(D.error||"Failed to update experience records."))}catch(F){l(!1),P(F.message||"An unexpected error occurred while updating experience records.")}});S.promise(a,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Updating experience records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:c}){return e.jsx(e.Fragment,{children:c.map((P,F)=>e.jsx("div",{children:P},F))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:c}){return e.jsx(e.Fragment,{children:c})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},n=async()=>{C([...h,{company:"",role:"",start_date:"",end_date:"",responsibilities:""}])};return e.jsx(U,{isOpen:w,onOpenChange:v?void 0:u,size:"3xl",radius:s(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(we,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Experience Information"})]}),e.jsxs("form",{onSubmit:t,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-4",children:[h.map((i,a)=>e.jsx("div",{children:e.jsx(J,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["Experience #",a+1]}),e.jsx(B,{isIconOnly:!0,variant:"light",onPress:()=>E(a),className:"text-red-500 hover:text-red-700",size:"sm",radius:s(),children:e.jsx(ne,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Company",value:i.company_name||"",onChange:c=>m(a,"company_name",c.target.value),isInvalid:!!o[`experiences.${a}.company_name`],errorMessage:o[`experiences.${a}.company_name`]?o[`experiences.${a}.company_name`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Location",value:i.location||"",onChange:c=>m(a,"location",c.target.value),isInvalid:!!o[`experiences.${a}.location`],errorMessage:o[`experiences.${a}.location`]?o[`experiences.${a}.location`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Role",value:i.job_position||"",onChange:c=>m(a,"job_position",c.target.value),isInvalid:!!o[`experiences.${a}.job_position`],errorMessage:o[`experiences.${a}.job_position`]?o[`experiences.${a}.job_position`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Started From",type:"date",value:i.period_from||"",onChange:c=>m(a,"period_from",c.target.value),isInvalid:!!o[`experiences.${a}.period_from`],errorMessage:o[`experiences.${a}.period_from`]?o[`experiences.${a}.period_from`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Ended On",type:"date",value:i.period_to||"",onChange:c=>m(a,"period_to",c.target.value),isInvalid:!!o[`experiences.${a}.period_to`],errorMessage:o[`experiences.${a}.period_to`]?o[`experiences.${a}.period_to`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-full",children:e.jsx(_,{label:"Responsibilities",value:i.description||"",onChange:c=>m(a,"description",c.target.value),isInvalid:!!o[`experiences.${a}.description`],errorMessage:o[`experiences.${a}.description`]?o[`experiences.${a}.description`][0]:"",variant:"bordered",size:"sm",radius:s(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})},a)),e.jsx(B,{size:"sm",color:"danger",variant:"bordered",onPress:n,startContent:e.jsx(pe,{size:16}),radius:s(),children:"Add More"})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:u,isDisabled:v,variant:"light",radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!d,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:s(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},mr=({user:r,setUser:w})=>{const[u,I]=f.useState({id:r.id,salary_basis:r.salary_basis||"",salary_amount:r.salary_amount||"",payment_type:r.payment_type||"",pf_contribution:r.pf_contribution??!1,pf_no:r.pf_no||"",employee_pf_rate:r.employee_pf_rate||0,additional_pf_rate:r.additional_pf_rate||0,total_pf_rate:r.total_pf_rate||0,esi_contribution:r.esi_contribution??!1,esi_no:r.esi_no||"",employee_esi_rate:r.employee_esi_rate||0,additional_esi_rate:r.additional_esi_rate||0,total_esi_rate:r.total_esi_rate||0}),[s,b]=f.useState({id:r.id}),[k,d]=f.useState(!1),[p,h]=f.useState({}),[C,o]=f.useState(!1),g=(l,m)=>{I(E=>{const t={...E,[l]:m};return m===""&&delete t[l],l==="pf_contribution"&&m===0?(t.pf_no="",t.employee_pf_rate=0,t.additional_pf_rate=0,t.total_pf_rate=0):(l==="employee_pf_rate"||l==="additional_pf_rate")&&(t.total_pf_rate=t.employee_pf_rate+t.additional_pf_rate),l==="esi_contribution"&&m===0?(t.esi_no="",t.employee_esi_rate=0,t.additional_esi_rate=0,t.total_esi_rate=0):(l==="employee_esi_rate"||l==="additional_esi_rate")&&(t.total_esi_rate=t.employee_esi_rate+t.additional_esi_rate),t}),b(E=>{const t={...E,[l]:m};return m===""&&delete t[l],l==="pf_contribution"&&m===0?(t.pf_no="",t.employee_pf_rate=0,t.additional_pf_rate=0,t.total_pf_rate=0):(l==="employee_pf_rate"||l==="additional_pf_rate")&&(t.total_pf_rate=t.employee_pf_rate+t.additional_pf_rate),l==="esi_contribution"&&m===0?(t.esi_no="",t.employee_esi_rate=0,t.additional_esi_rate=0,t.total_esi_rate=0):(l==="employee_esi_rate"||l==="additional_esi_rate")&&(t.total_esi_rate=t.employee_esi_rate+t.additional_esi_rate),t})};f.useEffect(()=>{for(const m in s)m!=="id"&&s[m]===r[m]&&delete s[m];const l=Object.keys(s).filter(m=>m!=="id").length>0;d(l)},[u,s,r]);const v=async l=>{l.preventDefault(),o(!0);try{const m=await axios.post(route("profile.update"),{ruleSet:"salary",...u});m.status===200?(w(m.data.user),o(!1),S.success(m.data.messages?.length>0?m.data.messages.join(" "):"Salary information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):(o(!1),h(m.data.errors),S.error(m.data.error||"Failed to update salary information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}))}catch(m){o(!1),S.error(m.response?.data?.message||"An unexpected error occurred.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(m)}};return e.jsx(Grid,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:e.jsx(Grid,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column"},children:e.jsxs(J,{className:"shadow-lg",children:[e.jsx(se,{title:"Salary & Statutory Information"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs(CardContent,{children:[e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"Salary Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"salary-basis-label",children:"Salary basis"}),e.jsxs($,{labelId:"salary-basis-label",value:s.salary_basis||u.salary_basis||"na",onChange:l=>g("salary_basis",l.target.value),error:!!p.salary_basis,helperText:p.salary_basis,label:"Salary basis",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select salary basis type"}),e.jsx(MenuItem,{value:"Hourly",children:"Hourly"}),e.jsx(MenuItem,{value:"Daily",children:"Daily"}),e.jsx(MenuItem,{value:"Weekly",children:"Weekly"}),e.jsx(MenuItem,{value:"Monthly",children:"Monthly"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{label:"Salary amount",type:"number",fullWidth:!0,placeholder:"Type your salary amount",value:s.salary_amount||u.salary_amount||"",onChange:l=>g("salary_amount",l.target.value),InputProps:{startAdornment:e.jsx(InputAdornment,{position:"start",children:"$"})},error:!!p.salary_amount,helperText:p.salary_amount})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"payment-type-label",children:"Payment type"}),e.jsxs($,{labelId:"payment-type-label",label:"Payment type",id:`gender-select-${r.id}`,value:s.payment_type||u.payment_type||"na",onChange:l=>g("payment_type",l.target.value),error:!!p.payment_type,helperText:p.payment_type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select payment type"}),e.jsx(MenuItem,{value:"Bank transfer",children:"Bank transfer"}),e.jsx(MenuItem,{value:"Check",children:"Check"}),e.jsx(MenuItem,{value:"Cash",children:"Cash"})]})]})})]}),e.jsx(ee,{sx:{my:3}}),e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"PF Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"pf-contribution-label",children:"PF contribution"}),e.jsxs($,{labelId:"pf-contribution-label",label:"PF contribution",id:`gender-select-${r.id}`,value:s.pf_contribution!==void 0?s.pf_contribution:u.pf_contribution!==void 0?u.pf_contribution:"na",onChange:l=>g("pf_contribution",l.target.value),error:!!p.pf_contribution,helperText:p.pf_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select PF contribution"}),e.jsx(MenuItem,{value:1,children:"Yes"}),e.jsx(MenuItem,{value:0,children:"No"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(s.pf_contribution||u.pf_contribution),InputLabelProps:{shrink:!0},label:"PF No.",fullWidth:!0,type:"text",placeholder:"Enter PF No.",value:s.pf_no||u.pf_no,onChange:l=>g("pf_no",l.target.value),error:!!p.pf_no,helperText:p.pf_no})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"employee-pf-rate-label",children:"Employee PF rate"}),e.jsxs($,{disabled:!(s.pf_contribution||u.pf_contribution),labelId:"employee-pf-rate-label",label:"Employee PF rate",value:s.employee_pf_rate||u.employee_pf_rate||"na",onChange:l=>g("employee_pf_rate",l.target.value),error:!!p.employee_pf_rate,helperText:p.employee_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select pf rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"additional-rate-label",children:"Additional rate"}),e.jsxs($,{disabled:!(s.pf_contribution||u.pf_contribution),labelId:"additional-rate-label",label:"Additional rate",id:`gender-select-${r.id}`,value:s.additional_pf_rate||u.additional_pf_rate||"na",onChange:l=>g("additional_pf_rate",l.target.value),error:!!p.additional_pf_rate,helperText:p.additional_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(s.pf_contribution||u.pf_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:s.total_pf_rate||u.total_pf_rate?`${s.total_pf_rate||u.total_pf_rate}%`:"",InputProps:{readOnly:!0},error:!!p.total_pf_rate,helperText:p.total_pf_rate})})]}),e.jsx(ee,{sx:{my:3}}),e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"ESI Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"ESI contribution"}),e.jsxs($,{labelId:"esi-contribution-label",label:"ESI contribution",value:s.esi_contribution!==void 0?s.esi_contribution:u.esi_contribution!==void 0?u.esi_contribution:"na",onChange:l=>g("esi_contribution",l.target.value),error:!!p.esi_contribution,helperText:p.esi_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select ESI contribution"}),e.jsx(MenuItem,{value:1,children:"Yes"}),e.jsx(MenuItem,{value:0,children:"No"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(s.esi_contribution||u.esi_contribution),InputLabelProps:{shrink:!0},label:"ESI No.",fullWidth:!0,type:"text",placeholder:"Enter ESI No.",value:s.esi_no||u.esi_no,onChange:l=>g("esi_no",l.target.value),error:!!p.esi_no,helperText:p.esi_no})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"Employee ESI rate"}),e.jsxs($,{disabled:!(s.esi_contribution||u.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:s.employee_esi_rate||u.employee_esi_rate||"na",onChange:l=>g("employee_esi_rate",l.target.value),error:!!p.employee_esi_rate,helperText:p.employee_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select esi rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"Additional rate"}),e.jsxs($,{disabled:!(s.esi_contribution||u.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:s.additional_esi_rate||u.additional_esi_rate||"na",onChange:l=>g("additional_esi_rate",l.target.value),error:!!p.additional_esi_rate,helperText:p.additional_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(s.esi_contribution||u.esi_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:s.total_esi_rate||u.total_esi_rate?`${s.total_esi_rate||u.total_esi_rate}%`:"",InputProps:{readOnly:!0},error:!!p.total_esi_rate,helperText:p.total_esi_rate})})]})]}),e.jsx(CardActions,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(LoadingButton,{disabled:!k,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:C,children:"Submit"})})]})]})})})};export{or as B,ir as E,lr as F,tr as I,sr as P,mr as S,nr as a,dr as b,cr as c,rr as d,ar as e};
