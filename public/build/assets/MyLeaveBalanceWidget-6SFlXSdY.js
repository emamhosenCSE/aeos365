import{r as l,f as y,j as e,c,d as n,F as w,e as v,a as b}from"./app-C6D97yqs.js";import{D as f}from"./index-3SaTkLKc.js";import{F as i}from"./CalendarDaysIcon-nLQnmqo-.js";import{F as g}from"./ArrowRightIcon-DLnXgYHF.js";import{c as o}from"./chunk-C6WKGNND-CbwkZjx-.js";import{s as d}from"./chunk-P7ACKWSP-C6mW2UXu.js";import{t as _}from"./chunk-AUA5GDXN-CAF2pY_4.js";import{p as F}from"./chunk-VFIJPDYX-BG4mNQLS.js";import"./app-Bq-q9uAS.js";import"./index-DrgTSH3Q.js";import"./index-77Z8rBn0.js";import"./chunk-WQVQ7P2I-D2DOeqGm.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-CqXKju-4.js";import"./useProgressBar-DlQ0rtov.js";import"./useLabel-Igmv_cwO.js";import"./useLabels-BCiPlEC-.js";import"./useNumberFormatter-CWD5ZFM-.js";import"./NumberFormatter-DNR9MAW-.js";function K({data:a,meta:k}){const[u,m]=l.useState(!a),[t,p]=l.useState(a||null);l.useEffect(()=>{if(a){p(a),m(!1);return}h()},[a]);const h=async()=>{try{const s=await y.get(f("leaves.my-balance"));s.data.success&&p(s.data.balance)}catch(s){console.error("Failed to fetch leave balance:",s)}finally{m(!1)}},x=()=>{b.visit(f("leaves.employee"))},j=s=>({annual:"primary",sick:"warning",casual:"success",maternity:"secondary",paternity:"secondary",unpaid:"default"})[s?.toLowerCase()]||"default";if(u)return e.jsxs(c,{children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-primary"}),e.jsx(d,{className:"w-24 h-5 rounded"})]})}),e.jsx(n,{className:"p-4 space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(d,{className:"w-20 h-4 rounded"}),e.jsx(d,{className:"w-12 h-6 rounded-full"})]},s))})]});if(!t||!t.breakdown||t.breakdown.length===0)return e.jsxs(c,{children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Leave Balance"})]})}),e.jsxs(n,{className:"p-4 text-center text-default-500",children:[e.jsx(w,{className:"w-8 h-8 mx-auto mb-2 text-default-300"}),e.jsx("p",{className:"text-sm",children:"No leave allocation found"})]})]});const{totalRemaining:N,breakdown:r}=t;return e.jsxs(c,{className:"cursor-pointer hover:shadow-md",isPressable:!0,onPress:x,children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Leave Balance"})]}),e.jsxs(v,{color:"primary",size:"sm",variant:"flat",children:[N," days"]})]})}),e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"space-y-3",children:r.slice(0,4).map(s=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-default-600 capitalize",children:s.type}),e.jsxs("span",{className:"font-medium",children:[s.remaining,"/",s.total]})]}),e.jsx(_,{content:`${s.used} used of ${s.total}`,children:e.jsx(F,{size:"sm",value:s.remaining/s.total*100,color:j(s.type),className:"h-1.5"})})]},s.type))}),r.length>4&&e.jsx("div",{className:"mt-3 pt-3 border-t border-divider",children:e.jsxs("button",{onClick:x,className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["View all ",r.length," types",e.jsx(g,{className:"w-4 h-4"})]})})]})]})}export{K as default};
