import{o as _,r as x,n as $,e as L,j as e,H as B,s as M,g as T,b as I}from"./app-D_-WVEdp.js";import{h as P,c as D}from"./routeUtils-Ck7DPZCW.js";import{S as F}from"./SafeLink-Ca0TPwQX.js";import{A as q}from"./AuthCard-bTJnZP5-.js";import{R as A}from"./RegisterLayout-2-vg5pQQ.js";import{u as E}from"./useBranding-FxIvTb8a.js";import{P as W}from"./ProgressSteps-BEgPJrRU.js";import{F as H}from"./CheckCircleIcon-BLFfNgko.js";import{i as m}from"./chunk-SQIAVXJX-BbTP8Q49.js";import"./app-Bq-q9uAS.js";import"./toastUtils-ycRu2wJH.js";import"./index-C2EWbGBu.js";import"./chunk-AUA5GDXN-DN3ZdlyW.js";import"./index-D0ogoVNn.js";import"./index-C-9Wnuxw.js";import"./chunk-WQVQ7P2I-CH5xj4JM.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-CaoNqm2A.js";/* empty css                      */import"./MaintenanceModeBanner-Ced2Il-8.js";import"./ArrowLeftIcon-CvMFTAF3.js";import"./chunk-KQW2TNLT-CWiQ5bkd.js";import"./chunk-ICU6NNET-CTByTmgN.js";import"./useLabel-sAk_8DNM.js";import"./useLabels-CUZ0Yc-W.js";function be({steps:h=[],currentStep:f,savedData:v={},accountType:b="company",baseDomain:j="platform.test",existingSubdomain:p=null}){const r=v?.details??{},{data:t,setData:l,post:y,processing:k,errors:s}=_({name:r.name??"",email:r.email??"",phone:r.phone??"",subdomain:r.subdomain??"",team_size:r.team_size??""}),[i,o]=x.useState({checking:!1,available:null,message:""}),[g,N]=x.useState(null),{themeSettings:w}=$(),n=w?.mode==="dark",{siteName:C}=E(),c={heading:n?"text-white":"text-slate-900",copy:n?"text-slate-300":"text-slate-600",badge:n?"text-slate-300":"text-slate-500",link:n?"text-white/80 hover:text-white":"text-slate-600 hover:text-slate-900"};x.useEffect(()=>{g&&clearTimeout(g);const a=t.subdomain.trim().toLowerCase();if(!a||a.length<3||!/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(a)){o({checking:!1,available:null,message:""});return}if(p&&a===p.toLowerCase()){o({checking:!1,available:!0,message:"Reserved for your registration"});return}const d=setTimeout(async()=>{o({checking:!0,available:null,message:""});try{const u=await L.post("/api/platform/v1/check-subdomain",{subdomain:a});o({checking:!1,available:u.data.available,message:u.data.message||(u.data.available?"Subdomain is available":"Subdomain is taken")})}catch{o({checking:!1,available:null,message:""})}},500);return N(d),()=>clearTimeout(d)},[t.subdomain,p]);const R=a=>{if(a.preventDefault(),!P("platform.register.details.store")){console.error("Registration route not available");return}y(D("platform.register.details.store"))},S=b==="individual"?"Your name":"Organization name",z=a=>a.replace(/[^\d+]/g,"");return e.jsxs(A,{children:[e.jsx(B,{title:`Workspace details - ${C}`}),e.jsxs("section",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-12 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center",children:[e.jsx("p",{className:`text-[10px] sm:text-sm uppercase tracking-[0.3em] ${c.badge}`,children:"Step 2"}),e.jsxs("h1",{className:`text-2xl sm:text-4xl font-semibold ${c.heading} px-2`,children:["Tell us about ",b==="individual"?"you":"your company","."]}),e.jsx("p",{className:`${c.copy} text-sm sm:text-base px-2`,children:"We will use this to pre-configure branding, subdomain, and trial communications."})]}),e.jsx(W,{steps:h,currentStep:f}),e.jsx(q,{children:e.jsxs("form",{onSubmit:R,className:"space-y-4 sm:space-y-5",children:[e.jsx(m,{label:S,placeholder:"Acme Manufacturing",value:t.name,onChange:a=>l("name",a.target.value),isInvalid:!!s.name,errorMessage:s.name,isRequired:!0,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2",children:[e.jsx(m,{type:"email",label:"Work email",placeholder:"ops@acme.com",value:t.email,onChange:a=>l("email",a.target.value),isInvalid:!!s.email,errorMessage:s.email,isRequired:!0,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}}),e.jsx(m,{label:"Phone (optional)",placeholder:"+1 415 555 0110",value:t.phone,onChange:a=>l("phone",z(a.target.value)),isInvalid:!!s.phone,errorMessage:s.phone,description:"International format recommended (e.g., +1 234 567 8900)",classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base",description:"text-xs sm:text-sm"}})]}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-[2fr,1fr]",children:[e.jsx(m,{label:"Preferred subdomain",placeholder:"acme",value:t.subdomain,onChange:a=>l("subdomain",a.target.value.toLowerCase()),isInvalid:!!s.subdomain||i.available===!1,errorMessage:s.subdomain||(i.available===!1?i.message:""),description:`Your workspace URL will be https://${t.subdomain||"team"}.${j}`,isRequired:!0,endContent:i.checking?e.jsx(M,{size:"sm"}):i.available===!0?e.jsx(H,{className:"w-5 h-5 text-success"}):i.available===!1?e.jsx(T,{className:"w-5 h-5 text-danger"}):null,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base",description:"text-xs sm:text-sm"}}),e.jsx(m,{type:"number",label:"Team size",placeholder:"120",value:t.team_size,onChange:a=>l("team_size",a.target.value),isInvalid:!!s.team_size,errorMessage:s.team_size,min:1,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsx(F,{route:"platform.register.index",className:`text-xs sm:text-sm transition-colors text-center sm:text-left ${c.link}`,children:"‚Üê Back to account type"}),e.jsx(I,{color:"primary",className:"bg-gradient-to-r from-blue-500 to-purple-600 w-full sm:w-auto",type:"submit",isLoading:k,children:"Continue to modules"})]})]})})]})]})}export{be as default};
