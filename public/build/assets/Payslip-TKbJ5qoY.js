import{r as k,j as e,H as I,b,e as C}from"./app-C6D97yqs.js";import{d}from"./dayjs.min-CEPn919t.js";import{F as B,b as M,a as U}from"./IdentificationIcon-BEcRIM1U.js";import{F as H}from"./PrinterIcon-DDkAZmwt.js";import{F as Y}from"./BuildingOfficeIcon-C302xB7i.js";import{F as q}from"./UserIcon-DclU2kn3.js";import{F as G}from"./BriefcaseIcon-Dydmf2Fo.js";import{F as D}from"./CalendarIcon-Dezk7dU5.js";import{d as F}from"./chunk-IHO36JMK-CxVXvMT-.js";import"./app-Bq-q9uAS.js";const ee=({payroll:s,company:A,employee:P,payPeriod:i,attendance:$,earnings:f,deductions:j,summary:h,organization:o})=>{const c=(t,a="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(t||0),S=t=>{if(!t)return"N/A";const a=String(t);return a.length<=4?a:"****"+a.slice(-4)},n=A||o||{},r=P||s?.employee||s?.user||{},u=r.bank_details||r.employeeBankDetail||{},g=k.useMemo(()=>i?.start?d(i.start).format("MMMM YYYY"):s?.month&&s?.year?d().month(s.month-1).year(s.year).format("MMMM YYYY"):s?.pay_period_start?d(s.pay_period_start).format("MMMM YYYY"):"N/A",[s,i]),{earnings:p,deductions:l,totalEarnings:E,totalDeductions:R,netSalary:T}=k.useMemo(()=>{if(f&&j)return{earnings:f,deductions:j,totalEarnings:h?.gross_salary||0,totalDeductions:h?.total_deductions||0,netSalary:h?.net_salary||0};const t=s?.items||s?.payroll_items||[],a=t.filter(m=>m.type==="earning"),_=t.filter(m=>m.type==="deduction"),v=a.reduce((m,N)=>m+parseFloat(N.amount||0),0),w=_.reduce((m,N)=>m+parseFloat(N.amount||0),0);return{earnings:a,deductions:_,totalEarnings:s?.total_earnings||s?.gross_salary||v,totalDeductions:s?.total_deductions||w,netSalary:s?.net_salary||v-w}},[s,f,j,h]),x=$||{working_days:s?.working_days||0,present_days:s?.present_days||0,absent_days:s?.absent_days||0,leave_days:s?.leave_days||0,overtime_hours:s?.overtime_hours||0,late_days:s?.late_days||0},y=()=>{window.print()};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:`Payslip - ${g}`}),e.jsx("style",{children:`
                @media print {
                    body { 
                        margin: 0; 
                        padding: 0;
                        background: white !important;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                    .no-print { display: none !important; }
                    .print-only { display: block !important; }
                    .payslip-container {
                        box-shadow: none !important;
                        margin: 0 !important;
                        padding: 20mm !important;
                        max-width: none !important;
                    }
                    @page { 
                        size: A4; 
                        margin: 0;
                    }
                }
                @media screen {
                    .print-only { display: none; }
                }
            `}),e.jsxs("div",{className:"min-h-screen bg-default-100 dark:bg-default-50 p-4 md:p-8",children:[e.jsx("div",{className:"max-w-4xl mx-auto mb-6 no-print",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Payslip"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{color:"primary",variant:"flat",startContent:e.jsx(B,{className:"w-5 h-5"}),onPress:y,children:"Download PDF"}),e.jsx(b,{color:"primary",startContent:e.jsx(H,{className:"w-5 h-5"}),onPress:y,children:"Print"})]})]})}),e.jsx("div",{className:"payslip-container max-w-4xl mx-auto bg-white dark:bg-content1 shadow-xl rounded-lg overflow-hidden",children:e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"flex items-start justify-between mb-8",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[n?.logo?e.jsx("img",{src:n.logo,alt:n.name||"Company",className:"h-16 w-auto object-contain"}):e.jsx("div",{className:"h-16 w-16 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(Y,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:n?.name||n?.company_name||"Company Name"}),n?.address&&e.jsx("p",{className:"text-sm text-default-500 mt-1",children:n.address}),(n?.phone||n?.email)&&e.jsx("p",{className:"text-sm text-default-500",children:[n.phone,n.email].filter(Boolean).join(" | ")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"PAYSLIP"}),e.jsx("p",{className:"text-lg font-semibold text-foreground mt-1",children:g}),e.jsx(C,{size:"sm",variant:"flat",color:s.status==="paid"?"success":s.status==="processed"?"primary":"warning",className:"mt-2",children:s.status?.toUpperCase()||"DRAFT"})]})]}),e.jsx(F,{className:"my-6"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-default-500 uppercase tracking-wider mb-4",children:"Employee Information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Employee Name"})]}),e.jsx("p",{className:"font-semibold text-foreground",children:r.name||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Employee ID"})]}),e.jsx("p",{className:"font-semibold text-foreground",children:r.employee_id||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Designation"})]}),e.jsx("p",{className:"font-semibold text-foreground",children:r.designation?.name||r.designation||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Department"})]}),e.jsx("p",{className:"font-semibold text-foreground",children:r.department?.name||r.department||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Bank Account"})]}),e.jsx("p",{className:"font-semibold text-foreground font-mono",children:S(u.account_number||r.account_number||r.bank_account_no)}),(u.bank_name||r.bank_name)&&e.jsx("p",{className:"text-xs text-default-400",children:u.bank_name||r.bank_name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"PAN/Tax ID"})]}),e.jsx("p",{className:"font-semibold text-foreground font-mono",children:u.tax_id||r.pan_no||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Pay Period"})]}),e.jsx("p",{className:"font-semibold text-foreground",children:i?.start&&i?.end?`${d(i.start).format("DD MMM")} - ${d(i.end).format("DD MMM YYYY")}`:s?.pay_period_start&&s?.pay_period_end?`${d(s.pay_period_start).format("DD MMM")} - ${d(s.pay_period_end).format("DD MMM YYYY")}`:g})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-400",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Payment Date"})]}),e.jsx("p",{className:"font-semibold text-foreground",children:s.payment_date?d(s.payment_date).format("DD MMM YYYY"):"Pending"})]})]})]}),(x.working_days||x.present_days)&&e.jsxs("div",{className:"mb-8 p-4 bg-default-50 dark:bg-default-100 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-default-500 uppercase tracking-wider mb-3",children:"Attendance Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x.working_days||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Working Days"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:x.present_days||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Present Days"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-danger",children:x.absent_days||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Absent Days"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-warning",children:x.leave_days||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Leave Days"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:x.overtime_hours||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Overtime Hours"})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-success-50 dark:bg-success-900/20 rounded-t-lg px-4 py-3",children:e.jsx("h3",{className:"font-semibold text-success-700 dark:text-success-400",children:"Earnings"})}),e.jsx("div",{className:"border border-t-0 border-default-200 rounded-b-lg",children:e.jsxs("table",{className:"w-full",children:[e.jsxs("tbody",{children:[p.map((t,a)=>e.jsxs("tr",{className:"border-b border-default-100 last:border-b-0",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-foreground",children:[t.name,t.is_taxable===!1&&e.jsx("span",{className:"ml-2 text-xs text-default-400",children:"(Non-taxable)"})]}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-right text-foreground",children:c(t.amount)})]},t.id||a)),s.overtime_amount>0&&e.jsxs("tr",{className:"border-b border-default-100",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-foreground",children:"Overtime"}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-right text-foreground",children:c(s.overtime_amount)})]}),p.length<l.length&&Array(l.length-p.length).fill(0).map((t,a)=>e.jsxs("tr",{className:"border-b border-default-100 last:border-b-0",children:[e.jsx("td",{className:"px-4 py-3",children:" "}),e.jsx("td",{className:"px-4 py-3",children:" "})]},`empty-earn-${a}`))]}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-success-50 dark:bg-success-900/30",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-success-700 dark:text-success-400",children:"Total Earnings"}),e.jsx("td",{className:"px-4 py-3 font-bold text-right text-success-700 dark:text-success-400",children:c(E)})]})})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-danger-50 dark:bg-danger-900/20 rounded-t-lg px-4 py-3",children:e.jsx("h3",{className:"font-semibold text-danger-700 dark:text-danger-400",children:"Deductions"})}),e.jsx("div",{className:"border border-t-0 border-default-200 rounded-b-lg",children:e.jsxs("table",{className:"w-full",children:[e.jsxs("tbody",{children:[l.map((t,a)=>e.jsxs("tr",{className:"border-b border-default-100 last:border-b-0",children:[e.jsxs("td",{className:"px-4 py-3 text-sm text-foreground",children:[t.name,t.is_statutory&&e.jsx("span",{className:"ml-2 text-xs text-default-400",children:"(Statutory)"})]}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-right text-foreground",children:c(t.amount)})]},t.id||a)),s?.tax_amount>0&&!l.some(t=>t.code==="TDS")&&e.jsxs("tr",{className:"border-b border-default-100",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-foreground",children:"Income Tax (TDS)"}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-right text-foreground",children:c(s.tax_amount)})]}),l.length===0&&!s?.tax_amount&&e.jsx("tr",{className:"border-b border-default-100",children:e.jsx("td",{colSpan:"2",className:"px-4 py-3 text-sm text-default-400 text-center italic",children:"No deductions"})}),l.length<p.length&&Array(p.length-l.length).fill(0).map((t,a)=>e.jsxs("tr",{className:"border-b border-default-100 last:border-b-0",children:[e.jsx("td",{className:"px-4 py-3",children:" "}),e.jsx("td",{className:"px-4 py-3",children:" "})]},`empty-ded-${a}`))]}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-danger-50 dark:bg-danger-900/30",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-danger-700 dark:text-danger-400",children:"Total Deductions"}),e.jsx("td",{className:"px-4 py-3 font-bold text-right text-danger-700 dark:text-danger-400",children:c(R)})]})})]})})]})]})}),e.jsx("div",{className:"bg-primary/5 dark:bg-primary/10 border-2 border-primary/20 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-default-500 uppercase tracking-wider",children:"Net Pay"}),e.jsx("p",{className:"text-xs text-default-400 mt-1",children:"Gross Earnings - Total Deductions"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-4xl font-bold text-primary",children:c(T)}),s?.payment_method&&e.jsxs("p",{className:"text-sm text-default-500 mt-1",children:["via ",s.payment_method.replace("_"," ").replace(/\b\w/g,t=>t.toUpperCase())]})]})]})}),s.remarks&&e.jsxs("div",{className:"mt-6 p-4 bg-warning-50 dark:bg-warning-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-warning-700 dark:text-warning-400 mb-2",children:"Remarks"}),e.jsx("p",{className:"text-sm text-warning-600 dark:text-warning-300",children:s.remarks})]}),e.jsx(F,{className:"my-8"}),e.jsxs("div",{className:"text-center text-xs text-default-400",children:[e.jsx("p",{children:"This is a computer-generated payslip and does not require a signature."}),e.jsxs("p",{className:"mt-1",children:["Generated on ",d().format("DD MMMM YYYY, hh:mm A")]}),o?.support_email&&e.jsxs("p",{className:"mt-2",children:["For queries, contact: ",o.support_email,o.support_phone&&` | ${o.support_phone}`]})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto mt-6 text-center no-print",children:e.jsx(b,{variant:"light",color:"default",onPress:()=>window.history.back(),children:"← Back to Payroll"})})]})]})};export{ee as default};
