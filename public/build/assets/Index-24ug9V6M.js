import{u as K,r,j as e,p as O,f as H,H as U,m as C,c as v,b as n,d as b,e as m,s as W,a as p}from"./app-B6wsOsaS.js";import{L as q,A as G}from"./App-CK2S0NSv.js";import{S as J}from"./StatsCards-BIzUM8n3.js";import{s as Q}from"./toastUtils-DmQakeEH.js";import{d as w}from"./dayjs.min-3pOIRhRA.js";import{F as f}from"./CalendarIcon-CypwPsvu.js";import{F as X}from"./CheckCircleIcon-DEtAvStx.js";import{F as E}from"./UserGroupIcon-BnTYq6Wz.js";import{e as S,F as R}from"./PlusIcon-C9FvSUYH.js";import{F as Z}from"./MagnifyingGlassIcon-DmsBlCH7.js";import{F as ee}from"./MapPinIcon-DLvBLoQF.js";import{c as se}from"./chunk-C6WKGNND-_SL0ETSL.js";import{i as te}from"./chunk-SQIAVXJX-BKfxTp82.js";import{b as ae}from"./chunk-57V4RE7B-BG8Ez0Gd.js";import{s as N}from"./chunk-C3QHEOC2-CExZ-LMh.js";import{l as i}from"./chunk-Y5DMIIWQ-rOZjnGr-.js";import{p as re}from"./chunk-NL7EUJG2-TrgaiFKZ.js";import"./app-BB4fUsfm.js";import"./index-CIwQtxcj.js";/* empty css                      */import"./chunk-CV4BWJDJ-sFKQZUA4.js";import"./index-C6MJzj-f.js";import"./index-773UVyf0.js";import"./UserIcon-zGrV1LXN.js";import"./Cog6ToothIcon-1p63ATJ9.js";import"./GlobeAltIcon-D9tP4Qv3.js";import"./useBranding-Cgbupwpf.js";import"./useDialog-rBwgFJmV.js";import"./VisuallyHidden-DEnSGsKL.js";import"./keyboard-d_Cx4XEU.js";import"./useLabels-DVIweNe1.js";import"./index-DMeZYFdq.js";import"./XMarkIcon-DSAMkR0J.js";import"./chunk-AUA5GDXN-D33GKj_3.js";import"./chunk-WQVQ7P2I-DXEzOwOx.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-DUzpVbXi.js";import"./useMediaQuery-DZUWRbmB.js";import"./chunk-IHO36JMK-CuHsjaEa.js";import"./ShieldCheckIcon-DF7lbYzR.js";import"./AcademicCapIcon-c76c8V93.js";import"./IdentificationIcon-BSUeSBTx.js";import"./ArrowLeftIcon-CjhLcjy7.js";import"./ArrowRightIcon-Q7iwOzQG.js";import"./BriefcaseIcon-CfrA7uZL.js";import"./BuildingOfficeIcon-DnIJIovL.js";import"./CalendarDaysIcon-CNGOJamk.js";import"./CircleStackIcon-hc_OxvAS.js";import"./ClipboardDocumentCheckIcon-CEdkKJRr.js";import"./CogIcon-BdBOCRJh.js";import"./DeviceTabletIcon-BrLL8Uu0.js";import"./CpuChipIcon-Bfdnt9hm.js";import"./CurrencyDollarIcon-fSR_V4QE.js";import"./DevicePhoneMobileIcon-d0Zfm2Fn.js";import"./DocumentArrowUpIcon-BDLSt_mx.js";import"./DocumentIcon-Dyrjy08c.js";import"./EnvelopeIcon-BdlOEcSN.js";import"./ExclamationCircleIcon-CFmKLbEe.js";import"./EyeIcon-Bs5b_dRl.js";import"./InformationCircleIcon-5mmLyCUw.js";import"./KeyIcon-BtibGx6O.js";import"./LockClosedIcon-CrgI0ZvI.js";import"./PlusCircleIcon-eYEq8aLq.js";import"./PrinterIcon-B62kMcVA.js";import"./RocketLaunchIcon-CqcTuNxP.js";import"./ShoppingCartIcon-DMRwrhqY.js";import"./UserCircleIcon-CGWanMDr.js";import"./chunk-TW2E3XVA-BZhjrx-b.js";import"./chunk-I3A4XRYQ-Bvb62EOb.js";import"./useToggleState-C4IQRJez.js";import"./chunk-ICU6NNET-CzjpQ7vS.js";import"./MaintenanceModeBanner-Bsokv2rf.js";import"./Item-yM1k0-R2.js";import"./SelectionManager-eawIzC-w.js";import"./index-C_o7Bf_A.js";import"./useSelectableItem-DpOenvUT.js";import"./useTreeState-BNMgu_i0.js";import"./useMenuTriggerState-Dvk1J6fz.js";import"./chunk-KQW2TNLT-BeNS3Aal.js";import"./useLabel-DTEaCOH9.js";import"./chunk-7F3ZLNJ6-CVIW-qTW.js";import"./index-Dj1DxqL-.js";import"./index-CokAva9Y.js";import"./chunk-OH2E76JR-DYX-Z8Mk.js";const ie=({events:g,filters:u})=>{const{auth:j}=K().props,o=()=>{if(typeof window>"u")return"lg";const x=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",d=parseInt(x);return d===0?"none":d<=4?"sm":d<=8?"md":d<=16?"lg":"full"},[c,z]=r.useState(!1),[le,P]=r.useState(!1);r.useEffect(()=>{const s=()=>{z(window.innerWidth<640),P(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const[a,$]=r.useState(g||{data:[]}),[I,y]=r.useState(!1),[h,A]=r.useState(!1),[t,M]=r.useState({search:u?.search||"",status:u?.status||"all",registration:u?.registration||"all",timeline:u?.timeline||"all"}),_=j.permissions?.includes("event.create")||!1,k=j.permissions?.includes("event.registration.manage")||!1,T=r.useMemo(()=>[{title:"Total Events",value:a?.total||0,icon:e.jsx(f,{}),color:"text-primary",iconBg:"bg-primary/20",description:"All events"},{title:"Published",value:a?.data?.filter(s=>s.is_published).length||0,icon:e.jsx(X,{}),color:"text-success",iconBg:"bg-success/20",description:"Live events"},{title:"Upcoming",value:a?.data?.filter(s=>w(s.event_date).isAfter(w())).length||0,icon:e.jsx(O,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Future events"},{title:"Total Registrations",value:a?.data?.reduce((s,x)=>s+(x.registrations_count||0),0)||0,icon:e.jsx(E,{}),color:"text-warning",iconBg:"bg-warning/20",description:"All participants"}],[a]);r.useCallback(async()=>{y(!0);try{const s=await H.get(route("events.index"),{params:t});$(s.data.events)}catch(s){console.error("Error fetching events:",s),Q.error("Failed to load events")}finally{y(!1)}},[t]);const l=(s,x)=>{M(d=>({...d,[s]:x}))},V=s=>{p.get(route("events.index"),{...t,page:s},{preserveState:!0})},F=()=>{p.get(route("events.create"))},L=s=>{p.get(route("events.show",s.id))},D=s=>{p.get(route("events.edit",s.id))},Y=s=>{p.get(route("events.registrations.index",s.id))},B=s=>{p.get(route("events.analytics",s.id))};return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Event Management"}),e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("div",{className:"max-w-[1600px] mx-auto",children:e.jsx("div",{className:"p-6",children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(v,{className:"bg-content1/50 backdrop-blur-md border border-divider/30",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(se,{className:"pb-0",children:e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-6 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 backdrop-blur-sm",children:e.jsx(f,{className:`${c?"w-6 h-6":"w-8 h-8"} text-primary`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`${c?"text-xl":"text-2xl"} font-bold text-foreground`,children:"Event Management"}),e.jsx("p",{className:`${c?"text-xs":"text-sm"} text-default-500`,children:"Manage events, sub-events, and registrations"})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:_&&e.jsx(n,{color:"primary",variant:"shadow",startContent:e.jsx(S,{className:"w-4 h-4"}),onPress:F,size:c?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Create Event"})})]})})}),e.jsxs(b,{className:"p-6",children:[e.jsx(J,{stats:T,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(te,{label:"Search Events",placeholder:"Search by title or description...",value:t.search,onChange:s=>l("search",s.target.value),startContent:e.jsx(Z,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(ae,{variant:"bordered",radius:o(),className:"bg-white/5",children:e.jsxs(n,{isIconOnly:c,color:h?"primary":"default",onPress:()=>A(!h),className:h?"bg-purple-500/20":"bg-white/5",children:[e.jsx(q,{className:"w-4 h-4"}),!c&&e.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),h&&e.jsx(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(N,{label:"Status",placeholder:"Select status...",selectedKeys:[t.status],onChange:s=>l("status",s.target.value),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All Status"},"all"),e.jsx(i,{value:"published",children:"Published"},"published"),e.jsx(i,{value:"draft",children:"Draft"},"draft")]}),e.jsxs(N,{label:"Registration",placeholder:"Select registration status...",selectedKeys:[t.registration],onChange:s=>l("registration",s.target.value),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All"},"all"),e.jsx(i,{value:"open",children:"Open"},"open"),e.jsx(i,{value:"closed",children:"Closed"},"closed")]}),e.jsxs(N,{label:"Timeline",placeholder:"Select timeline...",selectedKeys:[t.timeline],onChange:s=>l("timeline",s.target.value),variant:"bordered",size:"sm",radius:o(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(i,{value:"all",children:"All Events"},"all"),e.jsx(i,{value:"upcoming",children:"Upcoming"},"upcoming"),e.jsx(i,{value:"past",children:"Past"},"past")]})]}),(t.search||t.status!=="all"||t.registration!=="all"||t.timeline!=="all")&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[t.search&&e.jsxs(m,{variant:"flat",color:"primary",size:"sm",onClose:()=>l("search",""),children:["Search: ",t.search]}),t.status!=="all"&&e.jsxs(m,{variant:"flat",color:"secondary",size:"sm",onClose:()=>l("status","all"),children:["Status: ",t.status]}),t.registration!=="all"&&e.jsxs(m,{variant:"flat",color:"warning",size:"sm",onClose:()=>l("registration","all"),children:["Registration: ",t.registration]}),t.timeline!=="all"&&e.jsxs(m,{variant:"flat",color:"success",size:"sm",onClose:()=>l("timeline","all"),children:["Timeline: ",t.timeline]})]})]})}),e.jsxs("div",{className:"min-h-96",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 font-semibold text-lg",children:[e.jsx(R,{className:"w-5 h-5"}),"Events Management"]}),I?e.jsx(v,{className:"bg-white/10 backdrop-blur-md border-white/20",children:e.jsxs(b,{className:"text-center py-12",children:[e.jsx(W,{size:"lg"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading events..."})]})}):a?.data?.length>0?e.jsxs("div",{className:"space-y-4",children:[a.data.map(s=>e.jsx(v,{className:"hover:shadow-lg transition-shadow",children:e.jsx(b,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.banner_image&&e.jsx("div",{className:"w-full md:w-48 h-32 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:`/storage/${s.banner_image}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-default-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),w(s.event_date).format("MMM DD, YYYY")," at ",s.event_time]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-4 h-4"}),s.venue]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{color:s.is_published?"success":"warning",size:"sm",variant:"flat",children:s.is_published?"Published":"Draft"}),e.jsx(m,{color:s.is_registration_open?"primary":"default",size:"sm",variant:"flat",children:s.is_registration_open?"Open":"Closed"})]})]}),e.jsx("p",{className:"text-sm text-default-600 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),s.approved_registrations_count||0," / ",s.max_participants||"âˆž"," participants"]}),e.jsxs("span",{children:[s.sub_events?.length||0," sub-events"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"flat",onPress:()=>L(s),children:"View"}),j.permissions?.includes("event.update")&&e.jsx(n,{size:"sm",color:"primary",variant:"flat",onPress:()=>D(s),children:"Edit"}),k&&e.jsxs(n,{size:"sm",color:"secondary",variant:"flat",onPress:()=>Y(s),children:["Registrations (",s.registrations_count||0,")"]}),e.jsx(n,{size:"sm",variant:"flat",startContent:e.jsx(R,{className:"w-4 h-4"}),onPress:()=>B(s),children:"Analytics"})]})]})]})]})})},s.id)),a?.last_page>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(re,{total:a.last_page,page:a.current_page,onChange:V,showControls:!0,radius:o()})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Events Found"}),e.jsx("p",{className:"text-default-500 mb-4",children:"No events match your search criteria."}),_&&e.jsx(n,{color:"primary",startContent:e.jsx(S,{className:"w-5 h-5"}),onPress:F,children:"Create Your First Event"})]})]})]})]})})})})})]})};ie.layout=g=>e.jsx(G,{children:g});export{ie as default};
