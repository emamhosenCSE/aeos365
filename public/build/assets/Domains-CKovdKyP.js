import{r as i,e as L,j as e,p as w,H as z,m as I,c as M,b as j,f as v,a as P,h as b,d as l}from"./app-DLWZL5EI.js";import{s as k}from"./toastUtils-CQ8tPw7l.js";import{A as V}from"./App-CPiN04Y0.js";import{S as W}from"./StatsCards-Wc45_pXA.js";import{F as m}from"./GlobeAltIcon-CFAl4tmE.js";import{F as p}from"./ShieldCheckIcon-BxwQA0uM.js";import{F as B}from"./MagnifyingGlassIcon-C9l2NPQE.js";import{F as O}from"./TrashIcon-C6DesZfk.js";import{F as H}from"./EyeIcon-Ds6DAjR7.js";import{F as Y}from"./CheckCircleIcon-CaJShsm_.js";import{F as q}from"./ExclamationCircleIcon-D-5waelr.js";import{c as G}from"./chunk-C6WKGNND-Dq1nEPC1.js";import{i as J}from"./chunk-SQIAVXJX-C5zDfxFa.js";import{s as K}from"./chunk-C3QHEOC2-Bmp2Jpe_.js";import{l as f}from"./chunk-Y5DMIIWQ-zhqLBGLU.js";import{s as Q}from"./chunk-P7ACKWSP-C7P2-EIz.js";import{t as U,a as X,b as Z,c as ee}from"./chunk-F3UDT23P-iuiXDnoX.js";import{t as te,a as se}from"./chunk-YRZGWF2W-C3idaI1g.js";import{d as ae,a as re,b as ie,m as h}from"./PlusIcon-CgcHryUb.js";import"./app-BI-xrU3s.js";import"./index-lAyyVki8.js";/* empty css                      */import"./routeUtils-C6MiLID5.js";import"./chunk-CV4BWJDJ-C645uC3W.js";import"./index-DD7PnbC4.js";import"./index-Dz459_my.js";import"./UserIcon-DiPxEy9e.js";import"./Cog6ToothIcon-CI3NiAkm.js";import"./useBranding-C98uB2bk.js";import"./useDialog-LKdJQ55I.js";import"./getScrollParent-B27hviGV.js";import"./keyboard-CSKkBtIV.js";import"./useLabels-CKC_NELL.js";import"./VisuallyHidden-Dslt4DE9.js";import"./index-B5MKI_DQ.js";import"./XMarkIcon-C9tv-sqJ.js";import"./chunk-AUA5GDXN-DgHZKZnK.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./useMediaQuery-CZ_V8brP.js";import"./chunk-IHO36JMK-DYeauZfe.js";import"./AcademicCapIcon-Bs9t2qow.js";import"./IdentificationIcon-6E2VOCK1.js";import"./ArrowLeftIcon-a6q7R3tQ.js";import"./ArrowRightIcon-BZNmx9ah.js";import"./UsersIcon-CpsA-xGl.js";import"./BoltIcon-BRTqiOqL.js";import"./BriefcaseIcon-CunjT5yU.js";import"./BuildingOfficeIcon-BJoAl2gF.js";import"./CalendarDaysIcon-BR4QgBq8.js";import"./CalendarIcon-BTj7Nn7B.js";import"./ChartBarIcon-CnSK0enl.js";import"./CircleStackIcon-20fpj2M5.js";import"./ClipboardDocumentCheckIcon-Bwahsg1t.js";import"./CogIcon-CQIGGanJ.js";import"./DeviceTabletIcon-CR6eyvHQ.js";import"./CpuChipIcon-Dkmm6hKt.js";import"./CurrencyDollarIcon-DK6JNn4H.js";import"./DevicePhoneMobileIcon-DzKKUXAD.js";import"./DocumentArrowUpIcon-CdnT1l-_.js";import"./PencilIcon-Da-ZoIco.js";import"./DocumentIcon-YVJ_odhG.js";import"./EnvelopeIcon-BNQywoLu.js";import"./EyeSlashIcon-C7uJqcIF.js";import"./FunnelIcon-D8WHt0li.js";import"./InformationCircleIcon-2sIUPx4E.js";import"./KeyIcon-Dl6jmBIi.js";import"./LockClosedIcon-DWSbAAT6.js";import"./MapPinIcon-CoSq0ZKP.js";import"./PlusCircleIcon-borTRmVT.js";import"./PrinterIcon-jsVlFWpL.js";import"./RocketLaunchIcon-C1ofXZeY.js";import"./ShoppingCartIcon-DijpYrUE.js";import"./UserCircleIcon-D9Bl7hMN.js";import"./UserGroupIcon-DLyCB4U6.js";import"./chunk-TW2E3XVA-dNGvEz5r.js";import"./chunk-I3A4XRYQ-CbmreU5k.js";import"./useToggleState-C1tJJPv7.js";import"./chunk-ICU6NNET-BuoRM2Mj.js";import"./MaintenanceModeBanner-CpiCdC4n.js";import"./chunk-KQW2TNLT-BxZBj3py.js";import"./useField-CN4URFK6.js";import"./useLabel-BC4q2FsI.js";import"./useMenuTriggerState-CpMESG3a.js";import"./useSelectableItem-Qild1lMf.js";import"./SelectionManager-UhxaObWG.js";import"./Item-hnCJOaQ5.js";import"./chunk-7F3ZLNJ6-BH294qJ7.js";import"./index-D3fxkw17.js";import"./index-CGn2JJsk.js";import"./chunk-PMMJMDBI-DH4qNxn7.js";import"./index-BJ8QHXMy.js";import"./useHasTabbableChild-DwAon3z_.js";import"./useTreeState-CsNDLaZy.js";const ne=({auth:x,title:y})=>{const d=()=>{if(typeof window>"u")return"lg";const s=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",r=parseInt(s);return r===0?"none":r<=4?"sm":r<=8?"md":r<=16?"lg":"full"},[n,N]=i.useState(!1),[oe,F]=i.useState(!1);i.useEffect(()=>{const t=()=>{N(window.innerWidth<640),F(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const[o,S]=i.useState([]),[C,g]=i.useState(!0),[a,_]=i.useState({search:"",type:"all",ssl_status:"all"}),c=i.useCallback(async()=>{g(!0);try{const t=await L.get(route("api.v1.tenants.index"),{params:{per_page:100,with_domains:!0}}),s=[];(t.data.data||[]).forEach(r=>{(r.domains||[]).forEach(T=>{s.push({...T,tenant_id:r.id,tenant_name:r.name,tenant_status:r.status})})}),S(s)}catch{k.error("Failed to load domains")}finally{g(!1)}},[]);i.useEffect(()=>{c()},[c]);const R=o.filter(t=>{if(a.search&&!t.domain.toLowerCase().includes(a.search.toLowerCase())&&!t.tenant_name?.toLowerCase().includes(a.search.toLowerCase()))return!1;if(a.type!=="all"){const s=!t.domain.includes(".")||t.is_custom;if(a.type==="custom"&&!s||a.type==="subdomain"&&s)return!1}return!(a.ssl_status!=="all"&&t.ssl_status!==a.ssl_status)}),D=i.useMemo(()=>[{title:"Total Domains",value:o.length,color:"text-primary",iconBg:"bg-primary/20",icon:e.jsx(m,{className:"w-5 h-5"})},{title:"SSL Active",value:o.filter(t=>t.ssl_enabled||t.ssl_status==="valid").length,color:"text-success",iconBg:"bg-success/20",icon:e.jsx(p,{className:"w-5 h-5"})},{title:"Custom Domains",value:o.filter(t=>t.is_custom||t.is_primary===!1).length,color:"text-secondary",iconBg:"bg-secondary/20",icon:e.jsx(m,{className:"w-5 h-5"})},{title:"Pending DNS",value:o.filter(t=>t.dns_status==="pending"||t.verification_status==="pending").length,color:"text-warning",iconBg:"bg-warning/20",icon:e.jsx(w,{className:"w-5 h-5"})}],[o]),$=[{uid:"domain",name:"DOMAIN"},{uid:"tenant",name:"TENANT"},{uid:"type",name:"TYPE"},{uid:"dns",name:"DNS"},{uid:"ssl",name:"SSL"},{uid:"actions",name:"ACTIONS"}],E=t=>t.ssl_enabled||t.ssl_status==="valid"?"success":t.ssl_status==="pending"?"warning":t.ssl_status==="failed"||t.ssl_status==="expired"?"danger":"default",u=t=>t.dns_verified||t.verification_status==="verified"?"success":t.verification_status==="pending"||t.dns_status==="pending"?"warning":t.verification_status==="failed"?"danger":"default",A=(t,s)=>{switch(s){case"domain":return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"font-medium",children:t.domain}),t.is_primary&&e.jsx(l,{size:"sm",color:"primary",variant:"flat",children:"Primary"})]});case"tenant":return e.jsx("div",{className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>b.visit(route("admin.tenants.show",{tenant:t.tenant_id})),children:e.jsx("span",{className:"text-primary font-medium",children:t.tenant_name})});case"type":return e.jsx(l,{size:"sm",variant:"flat",color:t.is_custom?"secondary":"default",children:t.is_custom?"Custom":"Subdomain"});case"dns":return e.jsx(l,{size:"sm",color:u(t),variant:"flat",startContent:u(t)==="success"?e.jsx(Y,{className:"w-3 h-3"}):u(t)==="warning"?e.jsx(w,{className:"w-3 h-3"}):e.jsx(q,{className:"w-3 h-3"}),children:t.dns_verified||t.verification_status==="verified"?"Verified":t.verification_status||"Pending"});case"ssl":return e.jsx(l,{size:"sm",color:E(t),variant:"flat",startContent:e.jsx(p,{className:"w-3 h-3"}),children:t.ssl_enabled||t.ssl_status==="valid"?"Valid":t.ssl_status||"Pending"});case"actions":return e.jsxs(ae,{children:[e.jsx(re,{children:e.jsx(j,{isIconOnly:!0,size:"sm",variant:"light",children:e.jsx(O,{className:"w-5 h-5"})})}),e.jsxs(ie,{"aria-label":"Domain actions",children:[e.jsx(h,{startContent:e.jsx(H,{className:"w-4 h-4"}),onPress:()=>b.visit(route("admin.tenants.show",{tenant:t.tenant_id})),children:"View Tenant"},"view"),e.jsx(h,{startContent:e.jsx(v,{className:"w-4 h-4"}),children:"Verify DNS"},"verify"),e.jsx(h,{startContent:e.jsx(p,{className:"w-4 h-4"}),children:"Renew SSL"},"renew")]})]});default:return t[s]}};return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:y||"Domain Management"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Domain Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(I.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(M,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(G,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${n?"p-4":"p-6"} w-full`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`${n?"p-2":"p-3"} rounded-xl flex items-center justify-center`,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(m,{className:`${n?"w-6 h-6":"w-8 h-8"}`,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`${n?"text-xl":"text-2xl"} font-bold text-foreground ${n?"truncate":""}`,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Domain Management"}),e.jsx("p",{className:`${n?"text-xs":"text-sm"} text-default-500 ${n?"truncate":""}`,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage tenant domains, custom domains, and SSL certificates"})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:e.jsx(j,{variant:"flat",startContent:e.jsx(v,{className:"w-4 h-4"}),radius:d(),onPress:c,size:n?"sm":"md",children:"Refresh"})})]})})}),e.jsxs(P,{className:"p-6",children:[e.jsx(W,{stats:D,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[e.jsx(J,{placeholder:"Search domains...",value:a.search,onValueChange:t=>_(s=>({...s,search:t})),startContent:e.jsx(B,{className:"w-4 h-4 text-default-400"}),radius:d(),classNames:{inputWrapper:"bg-default-100"},className:"flex-1"}),e.jsxs(K,{placeholder:"All Types",selectedKeys:[a.type],onSelectionChange:t=>_(s=>({...s,type:Array.from(t)[0]})),radius:d(),classNames:{trigger:"bg-default-100"},className:"w-full sm:w-36",children:[e.jsx(f,{children:"All Types"},"all"),e.jsx(f,{children:"Subdomain"},"subdomain"),e.jsx(f,{children:"Custom"},"custom")]})]}),C?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((t,s)=>e.jsx(Q,{className:"h-12 rounded-lg"},s))}):e.jsxs(U,{"aria-label":"Domains table",classNames:{wrapper:"shadow-none border border-divider rounded-lg",th:"bg-default-100 text-default-600 font-semibold",td:"py-3"},children:[e.jsx(te,{columns:$,children:t=>e.jsx(se,{children:t.name},t.uid)}),e.jsx(X,{items:R,emptyContent:"No domains found",children:t=>e.jsx(Z,{children:s=>e.jsx(ee,{children:A(t,s)})},t.id||t.domain)})]})]})]})})})})})]})};ne.layout=x=>e.jsx(V,{children:x});export{ne as default};
