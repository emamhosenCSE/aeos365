import{r as S,j as e,H as C,c as d,a as c,b}from"./app-DLWZL5EI.js";import{s as _}from"./toastUtils-CQ8tPw7l.js";import{P as k}from"./PageHeader-CiRohPv4.js";import{c as m}from"./chunk-C6WKGNND-Dq1nEPC1.js";import{s as f}from"./chunk-4MPZBIMX-C-0XXrsR.js";import{i as n}from"./chunk-SQIAVXJX-C5zDfxFa.js";import{s as h}from"./chunk-I3A4XRYQ-CbmreU5k.js";import"./app-BI-xrU3s.js";import"./index-lAyyVki8.js";import"./chunk-IHO36JMK-DYeauZfe.js";import"./chunk-ICU6NNET-BuoRM2Mj.js";import"./number-CB4zbwAz.js";import"./useLabel-BC4q2FsI.js";import"./useLabels-CKC_NELL.js";import"./useNumberFormatter-DOVyNCK1.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-AUA5GDXN-DgHZKZnK.js";import"./index-B5MKI_DQ.js";import"./index-Dz459_my.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./VisuallyHidden-Dslt4DE9.js";import"./chunk-KQW2TNLT-BxZBj3py.js";import"./useField-CN4URFK6.js";import"./useToggleState-C1tJJPv7.js";function ee({title:j,settings:y}){const[t,o]=S.useState(y||{users:{warning_threshold:80,block_threshold:100,grace_period_days:10},storage:{warning_threshold:80,block_threshold:100,grace_period_days:10},api_calls:{warning_threshold:80,block_threshold:100,grace_period_days:10},employees:{warning_threshold:80,block_threshold:100,grace_period_days:10},projects:{warning_threshold:80,block_threshold:100,grace_period_days:10},notifications:{email:!0,sms:!0,slack:!1},escalation:{daily_at:90,hourly_at:95,realtime_at:99},throttling:{enabled:!0,delay_95:1,delay_99:2},retention:90}),l=(()=>{const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",r=parseInt(a);return r===0?"none":r<=4?"sm":r<=8?"md":r<=12?"lg":"xl"})(),N=["users","storage","api_calls","employees","projects"],u=(s,a,r)=>{o(i=>({...i,[s]:{...i[s],[a]:r}}))},g=s=>{o(a=>({...a,notifications:{...a.notifications,[s]:!a.notifications[s]}}))},p=(s,a)=>{o(r=>({...r,escalation:{...r.escalation,[s]:a}}))},x=(s,a)=>{o(r=>({...r,throttling:{...r.throttling,[s]:a}}))},v=async()=>{const s=new Promise(async(a,r)=>{try{const i=await axios.post(route("admin.quotas.settings.update"),t);i.status===200&&a([i.data.message||"Settings saved successfully"])}catch(i){r(i.response?.data?.errors||["Failed to save settings"])}});_.promise(s,{loading:"Saving settings...",success:a=>a.join(", "),error:a=>Array.isArray(a)?a.join(", "):a})},w=()=>{o({users:{warning_threshold:80,block_threshold:100,grace_period_days:10},storage:{warning_threshold:80,block_threshold:100,grace_period_days:10},api_calls:{warning_threshold:80,block_threshold:100,grace_period_days:10},employees:{warning_threshold:80,block_threshold:100,grace_period_days:10},projects:{warning_threshold:80,block_threshold:100,grace_period_days:10},notifications:{email:!0,sms:!0,slack:!1},escalation:{daily_at:90,hourly_at:95,realtime_at:99},throttling:{enabled:!0,delay_95:1,delay_99:2},retention:90}),_.success("Settings reset to defaults")};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:j||"Quota Enforcement Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{title:"Quota Enforcement Settings",subtitle:"Configure warning thresholds, grace periods, and notification channels"}),e.jsxs(d,{className:"transition-all duration-200",style:getThemedCardStyle(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Quota Thresholds & Grace Periods"})}),e.jsx(c,{className:"p-6 space-y-6",children:N.map(s=>e.jsxs("div",{className:"space-y-4 pb-6 border-b border-divider last:border-0 last:pb-0",children:[e.jsx("h4",{className:"font-medium capitalize",children:s.replace("_"," ")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-default-600 mb-2 block",children:"Warning Threshold (%)"}),e.jsx(f,{value:t[s]?.warning_threshold||80,onChange:a=>u(s,"warning_threshold",a),min:50,max:100,step:5,className:"max-w-md",color:"warning"}),e.jsxs("span",{className:"text-xs text-default-500 mt-1",children:[t[s]?.warning_threshold||80,"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-default-600 mb-2 block",children:"Block Threshold (%)"}),e.jsx(f,{value:t[s]?.block_threshold||100,onChange:a=>u(s,"block_threshold",a),min:80,max:100,step:5,className:"max-w-md",color:"danger"}),e.jsxs("span",{className:"text-xs text-default-500 mt-1",children:[t[s]?.block_threshold||100,"%"]})]}),e.jsx(n,{type:"number",label:"Grace Period (days)",value:t[s]?.grace_period_days||10,onChange:a=>u(s,"grace_period_days",parseInt(a.target.value)),min:1,max:90,radius:l,classNames:{inputWrapper:"bg-default-100"}})]})]},s))})]}),e.jsxs(d,{className:"transition-all duration-200",style:getThemedCardStyle(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Notification Channels"})}),e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-default-100 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Email"}),e.jsx(h,{isSelected:t.notifications?.email,onValueChange:()=>g("email"),color:"primary"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-default-100 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"SMS"}),e.jsx(h,{isSelected:t.notifications?.sms,onValueChange:()=>g("sms"),color:"primary"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-default-100 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Slack"}),e.jsx(h,{isSelected:t.notifications?.slack,onValueChange:()=>g("slack"),color:"primary"})]})]})})]}),e.jsxs(d,{className:"transition-all duration-200",style:getThemedCardStyle(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Warning Escalation Schedule"})}),e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{type:"number",label:"Daily Alerts At (%)",value:t.escalation?.daily_at||90,onChange:s=>p("daily_at",parseInt(s.target.value)),min:80,max:100,radius:l,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(n,{type:"number",label:"Hourly Alerts At (%)",value:t.escalation?.hourly_at||95,onChange:s=>p("hourly_at",parseInt(s.target.value)),min:80,max:100,radius:l,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(n,{type:"number",label:"Real-time Alerts At (%)",value:t.escalation?.realtime_at||99,onChange:s=>p("realtime_at",parseInt(s.target.value)),min:80,max:100,radius:l,classNames:{inputWrapper:"bg-default-100"}})]})})]}),e.jsxs(d,{className:"transition-all duration-200",style:getThemedCardStyle(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:"API Throttling Configuration"})}),e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Enable Progressive Throttling"}),e.jsx(h,{isSelected:t.throttling?.enabled,onValueChange:s=>x("enabled",s),color:"primary"})]}),t.throttling?.enabled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(n,{type:"number",label:"Delay at 95% (seconds)",value:t.throttling?.delay_95||1,onChange:s=>x("delay_95",parseInt(s.target.value)),min:0,max:10,radius:l,classNames:{inputWrapper:"bg-default-100"},description:"75% speed reduction"}),e.jsx(n,{type:"number",label:"Delay at 99% (seconds)",value:t.throttling?.delay_99||2,onChange:s=>x("delay_99",parseInt(s.target.value)),min:0,max:10,radius:l,classNames:{inputWrapper:"bg-default-100"},description:"50% speed reduction"})]})]})})]}),e.jsxs(d,{className:"transition-all duration-200",style:getThemedCardStyle(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Warning History Retention"})}),e.jsx(c,{className:"p-6",children:e.jsx(n,{type:"number",label:"Retain warnings for (days)",value:t.retention||90,onChange:s=>o(a=>({...a,retention:parseInt(s.target.value)})),min:30,max:365,radius:l,classNames:{inputWrapper:"bg-default-100"},description:"Warnings older than this will be automatically deleted"})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(b,{variant:"flat",onPress:w,radius:l,children:"Reset to Defaults"}),e.jsx(b,{color:"primary",onPress:v,radius:l,children:"Save Settings"})]})]})]})}export{ee as default};
