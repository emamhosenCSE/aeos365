import{r as t,e as j,j as e,c as l,a as d,p as N,d as c,b as v}from"./app-DInl32dX.js";import{s as i}from"./routeUtils-C1ntbTNy.js";import{D as w}from"./index-3SaTkLKc.js";import{F as b}from"./CheckCircleIcon-CBemRlBB.js";import{F as y}from"./CalendarDaysIcon-C0QniVM8.js";import{F as _}from"./ArrowRightIcon-B8tzotBf.js";import{c as o}from"./chunk-C6WKGNND-BNiYL7Dh.js";import{s as n}from"./chunk-P7ACKWSP-8b9-fXrc.js";import{d as m}from"./chunk-IHO36JMK-D4pDtZyX.js";import"./app-Bq-q9uAS.js";import"./toastUtils-Dk6tac5H.js";import"./index-DPMKIREV.js";function C(){const[x,p]=t.useState(!0),[r,f]=t.useState([]),[a,u]=t.useState({pending:0,approved:0,rejected:0,total:0});t.useEffect(()=>{h()},[]);const h=async()=>{try{const s=await j.get(w("leaves.pending-approvals"));s.data.success&&(f(s.data.pending_leaves||[]),u(s.data.stats||{pending:0,approved:0,rejected:0,total:0}))}catch(s){console.error("Failed to fetch pending approvals:",s)}finally{p(!1)}},g=()=>{i("leaves")};return x?e.jsxs(l,{className:"w-full h-full",children:[e.jsxs(o,{className:"flex justify-between items-center pb-2",children:[e.jsx(n,{className:"w-40 h-6 rounded"}),e.jsx(n,{className:"w-16 h-6 rounded-full"})]}),e.jsx(m,{}),e.jsx(d,{className:"space-y-3",children:[1,2,3].map(s=>e.jsx(n,{className:"w-full h-16 rounded"},s))})]}):e.jsxs(l,{className:"w-full h-full",children:[e.jsxs(o,{className:"flex justify-between items-center pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-warning"}),e.jsx("h3",{className:"text-base font-semibold",children:"Pending Approvals"})]}),e.jsx(c,{size:"sm",color:"warning",variant:"flat",children:a.pending})]}),e.jsx(m,{}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"text-center p-2 bg-warning-50 dark:bg-warning-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Pending"}),e.jsx("p",{className:"text-lg font-bold text-warning",children:a.pending})]}),e.jsxs("div",{className:"text-center p-2 bg-success-50 dark:bg-success-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Approved"}),e.jsx("p",{className:"text-lg font-bold text-success",children:a.approved})]}),e.jsxs("div",{className:"text-center p-2 bg-danger-50 dark:bg-danger-900/20 rounded-lg",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Rejected"}),e.jsx("p",{className:"text-lg font-bold text-danger",children:a.rejected})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{className:"w-12 h-12 mx-auto text-success mb-2"}),e.jsx("p",{className:"text-sm text-default-500",children:"No pending approvals"})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:r.slice(0,5).map(s=>e.jsxs("div",{className:"p-3 border border-divider rounded-lg hover:bg-default-50 dark:hover:bg-default-100 transition-colors cursor-pointer",onClick:()=>i("leaves"),children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:s.user?.name||"Unknown User"}),e.jsx(c,{size:"sm",color:"primary",variant:"flat",children:s.leave_setting?.type||"Leave"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-default-500",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsxs("span",{children:[new Date(s.from_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - "," ",new Date(s.to_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),e.jsxs("span",{className:"ml-auto",children:[s.no_of_days," day",s.no_of_days!==1?"s":""]})]})]},s.id))}),r.length>0&&e.jsx(v,{color:"primary",variant:"flat",size:"sm",fullWidth:!0,endContent:e.jsx(_,{className:"w-4 h-4"}),onPress:g,children:"View All Approvals"})]})]})}export{C as default};
