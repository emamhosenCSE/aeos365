import{u as D,r as l,j as e,p as M,H as T,m as U,c,b as x,h as j,d as u,a as o,e as v}from"./app-DLWZL5EI.js";import{s as k}from"./toastUtils-CQ8tPw7l.js";import{u as g,a2 as L,K as O,A as B}from"./App-CPiN04Y0.js";import{S as W}from"./StatsCards-Wc45_pXA.js";import{F as Y}from"./UserGroupIcon-DLyCB4U6.js";import{F as y}from"./CurrencyDollarIcon-DK6JNn4H.js";import{F as H}from"./ArrowLeftIcon-a6q7R3tQ.js";import{F as J}from"./PencilIcon-Da-ZoIco.js";import{b as V}from"./TrashIcon-C6DesZfk.js";import{F as G}from"./ChartBarIcon-CnSK0enl.js";import{F as w}from"./CheckCircleIcon-CaJShsm_.js";import{a as K}from"./UsersIcon-CpsA-xGl.js";import{c as d}from"./chunk-C6WKGNND-Dq1nEPC1.js";import{s as _}from"./chunk-P7ACKWSP-C7P2-EIz.js";import{d as F}from"./chunk-IHO36JMK-DYeauZfe.js";import{t as q,a as Q,b as X,c as N}from"./chunk-F3UDT23P-iuiXDnoX.js";import{t as Z,a as b}from"./chunk-YRZGWF2W-C3idaI1g.js";import"./app-BI-xrU3s.js";import"./index-lAyyVki8.js";/* empty css                      */import"./routeUtils-C6MiLID5.js";import"./chunk-CV4BWJDJ-C645uC3W.js";import"./index-DD7PnbC4.js";import"./index-Dz459_my.js";import"./UserIcon-DiPxEy9e.js";import"./PlusIcon-CgcHryUb.js";import"./Item-hnCJOaQ5.js";import"./SelectionManager-UhxaObWG.js";import"./keyboard-CSKkBtIV.js";import"./index-B5MKI_DQ.js";import"./useDialog-LKdJQ55I.js";import"./getScrollParent-B27hviGV.js";import"./useLabels-CKC_NELL.js";import"./VisuallyHidden-Dslt4DE9.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./number-CB4zbwAz.js";import"./index-D3fxkw17.js";import"./useSelectableItem-Qild1lMf.js";import"./useTreeState-CsNDLaZy.js";import"./useMenuTriggerState-CpMESG3a.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./Cog6ToothIcon-CI3NiAkm.js";import"./GlobeAltIcon-CFAl4tmE.js";import"./useBranding-C98uB2bk.js";import"./XMarkIcon-C9tv-sqJ.js";import"./chunk-SQIAVXJX-C5zDfxFa.js";import"./chunk-KQW2TNLT-BxZBj3py.js";import"./useField-CN4URFK6.js";import"./useLabel-BC4q2FsI.js";import"./chunk-ICU6NNET-BuoRM2Mj.js";import"./MagnifyingGlassIcon-C9l2NPQE.js";import"./chunk-AUA5GDXN-DgHZKZnK.js";import"./useMediaQuery-CZ_V8brP.js";import"./chunk-C3QHEOC2-Bmp2Jpe_.js";import"./chunk-Y5DMIIWQ-zhqLBGLU.js";import"./index-CGn2JJsk.js";import"./chunk-7F3ZLNJ6-BH294qJ7.js";import"./ShieldCheckIcon-BxwQA0uM.js";import"./AcademicCapIcon-Bs9t2qow.js";import"./IdentificationIcon-6E2VOCK1.js";import"./ArrowRightIcon-BZNmx9ah.js";import"./BoltIcon-BRTqiOqL.js";import"./BriefcaseIcon-CunjT5yU.js";import"./BuildingOfficeIcon-BJoAl2gF.js";import"./CalendarDaysIcon-BR4QgBq8.js";import"./CalendarIcon-BTj7Nn7B.js";import"./CircleStackIcon-20fpj2M5.js";import"./ClipboardDocumentCheckIcon-Bwahsg1t.js";import"./CogIcon-CQIGGanJ.js";import"./DeviceTabletIcon-CR6eyvHQ.js";import"./CpuChipIcon-Dkmm6hKt.js";import"./DevicePhoneMobileIcon-DzKKUXAD.js";import"./DocumentArrowUpIcon-CdnT1l-_.js";import"./DocumentIcon-YVJ_odhG.js";import"./EnvelopeIcon-BNQywoLu.js";import"./ExclamationCircleIcon-D-5waelr.js";import"./EyeSlashIcon-C7uJqcIF.js";import"./EyeIcon-Ds6DAjR7.js";import"./FunnelIcon-D8WHt0li.js";import"./InformationCircleIcon-2sIUPx4E.js";import"./KeyIcon-Dl6jmBIi.js";import"./LockClosedIcon-DWSbAAT6.js";import"./MapPinIcon-CoSq0ZKP.js";import"./PlusCircleIcon-borTRmVT.js";import"./PrinterIcon-jsVlFWpL.js";import"./RocketLaunchIcon-C1ofXZeY.js";import"./ShoppingCartIcon-DijpYrUE.js";import"./UserCircleIcon-D9Bl7hMN.js";import"./chunk-TW2E3XVA-dNGvEz5r.js";import"./chunk-I3A4XRYQ-CbmreU5k.js";import"./useToggleState-C1tJJPv7.js";import"./MaintenanceModeBanner-CpiCdC4n.js";import"./chunk-PMMJMDBI-DH4qNxn7.js";import"./index-BJ8QHXMy.js";import"./useHasTabbableChild-DwAon3z_.js";const ee=({plan:h,modules:se=[],title:S="Plan Details"})=>{const{auth:te}=D().props,[s,R]=l.useState(h),[n,$]=l.useState(null),[re,ae]=l.useState(!1),a=()=>{if(typeof window>"u")return"lg";const r=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",p=parseInt(r);return p===0?"none":p<=4?"sm":p<=8?"md":p<=16?"lg":"full"},[i,P]=l.useState(!1),[ie,A]=l.useState(!1);l.useEffect(()=>{const t=()=>{P(window.innerWidth<640),A(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),l.useEffect(()=>{(async()=>{try{const r=await v.get(route("admin.plans.stats",s.id));r.data.success&&$(r.data.stats)}catch(r){console.error("Failed to fetch plan stats:",r)}})()},[s.id]);const m=(t,r="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:r,minimumFractionDigits:2}).format(t||0),E=t=>({free:"default",starter:"primary",professional:"success",enterprise:"warning"})[t?.toLowerCase()]||"default",I=async()=>{const t=v.post(route("admin.plans.archive",s.id),{archived:s.is_active});k.promise(t,{loading:s.is_active?"Archiving plan...":"Activating plan...",success:r=>(R(r.data.plan),r.data.message),error:"Failed to update plan status"})},C=l.useMemo(()=>n?[{title:"Active Subscribers",value:n.subscribers_count||0,icon:e.jsx(Y,{className:"w-5 h-5"}),color:"text-primary",iconBg:"bg-primary/20"},{title:"Monthly Revenue",value:m(n.mrr),icon:e.jsx(y,{className:"w-5 h-5"}),color:"text-success",iconBg:"bg-success/20"},{title:"Trial Users",value:n.trial_count||0,icon:e.jsx(M,{className:"w-5 h-5"}),color:"text-warning",iconBg:"bg-warning/20"},{title:"Modules Included",value:n.modules_count||0,icon:e.jsx(g,{className:"w-5 h-5"}),color:"text-secondary",iconBg:"bg-secondary/20"}]:[],[n]),f=Array.isArray(s.features)?s.features:typeof s.features=="string"?JSON.parse(s.features||"[]"):[],z=typeof s.limits=="object"&&s.limits!==null?s.limits:typeof s.limits=="string"?JSON.parse(s.limits||"{}"):{};return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:`${s.name} - ${S}`}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Plan Details",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(U.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(c,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(d,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${i?"p-4":"p-6"} w-full`,children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx(x,{isIconOnly:!0,variant:"light",radius:a(),onPress:()=>j.visit(route("admin.plans.index")),className:"shrink-0",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("div",{className:`${i?"p-2":"p-3"} rounded-xl`,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(L,{className:`${i?"w-6 h-6":"w-8 h-8"}`,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("h4",{className:`${i?"text-xl":"text-2xl"} font-bold`,children:s.name}),e.jsx(u,{color:E(s.tier),size:"sm",variant:"flat",children:s.tier||"Standard"}),s.is_featured&&e.jsx(u,{color:"warning",size:"sm",variant:"dot",children:"Featured"}),e.jsx(u,{color:s.is_active?"success":"default",size:"sm",variant:"flat",children:s.is_active?"Active":"Archived"})]}),e.jsx("p",{className:`${i?"text-xs":"text-sm"} text-default-500 mt-1`,children:s.description||"No description provided"})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(x,{color:"primary",variant:"shadow",startContent:e.jsx(J,{className:"w-4 h-4"}),onPress:()=>j.visit(route("admin.plans.edit",s.id)),size:i?"sm":"md",radius:a(),children:"Edit Plan"}),e.jsx(x,{color:"secondary",variant:"flat",startContent:e.jsx(V,{className:"w-4 h-4"}),onPress:()=>j.visit(route("admin.plans.clone",s.id)),size:i?"sm":"md",radius:a(),children:"Clone"}),e.jsx(x,{color:s.is_active?"warning":"success",variant:"flat",startContent:e.jsx(O,{className:"w-4 h-4"}),onPress:I,size:i?"sm":"md",radius:a(),children:s.is_active?"Archive":"Activate"})]})]})})}),e.jsxs(o,{className:"p-6 space-y-6",children:[n?e.jsx(W,{stats:C}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"p-4 rounded-lg bg-default-100",children:[e.jsx(_,{className:"h-4 w-20 mb-2 rounded"}),e.jsx(_,{className:"h-8 w-16 rounded"})]},t))}),e.jsx(F,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(c,{radius:a(),children:[e.jsx(d,{className:"border-b border-divider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Pricing"})]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Monthly Price"}),e.jsx("span",{className:"text-xl font-bold",children:m(s.monthly_price,s.currency)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Yearly Price"}),e.jsx("span",{className:"text-xl font-bold",children:m(s.yearly_price,s.currency)})]}),s.setup_fee>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Setup Fee"}),e.jsx("span",{className:"text-lg font-semibold text-warning",children:m(s.setup_fee,s.currency)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Trial Period"}),e.jsx("span",{className:"font-semibold",children:s.trial_days?`${s.trial_days} days`:"No trial"})]})]})]}),e.jsxs(c,{radius:a(),children:[e.jsx(d,{className:"border-b border-divider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-secondary"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Limits"})]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Max Users"}),e.jsx("span",{className:"font-semibold",children:s.max_users===0?"Unlimited":s.max_users})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Storage"}),e.jsx("span",{className:"font-semibold",children:s.max_storage_gb?`${s.max_storage_gb} GB`:"Unlimited"})]}),Object.entries(z).map(([t,r])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600 capitalize",children:t.replace(/_/g," ")}),e.jsx("span",{className:"font-semibold",children:r})]},t))]})]})]}),e.jsx(F,{}),e.jsxs(c,{radius:a(),children:[e.jsx(d,{className:"border-b border-divider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-success"}),e.jsxs("h3",{className:"text-lg font-semibold",children:["Features (",f.length,")"]})]})}),e.jsx(o,{children:f.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:f.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-success/10",children:[e.jsx(w,{className:"w-5 h-5 text-success shrink-0"}),e.jsx("span",{className:"text-sm",children:t})]},r))}):e.jsx("p",{className:"text-default-500 text-center py-4",children:"No features defined for this plan"})})]}),e.jsxs(c,{radius:a(),children:[e.jsx(d,{className:"border-b border-divider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-primary"}),e.jsxs("h3",{className:"text-lg font-semibold",children:["Included Modules (",s.modules?.length||0,")"]})]})}),e.jsx(o,{children:s.modules&&s.modules.length>0?e.jsxs(q,{"aria-label":"Included modules",removeWrapper:!0,classNames:{th:"bg-default-100 text-default-600 font-semibold",td:"py-3"},children:[e.jsxs(Z,{children:[e.jsx(b,{children:"MODULE"}),e.jsx(b,{children:"CODE"}),e.jsx(b,{children:"TYPE"})]}),e.jsx(Q,{children:s.modules.map(t=>e.jsxs(X,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-medium",children:t.name})]})}),e.jsx(N,{children:e.jsx("code",{className:"text-sm bg-default-100 px-2 py-1 rounded",children:t.code})}),e.jsx(N,{children:e.jsx(u,{size:"sm",color:t.is_core?"primary":"default",variant:"flat",children:t.is_core?"Core":"Add-on"})})]},t.id||t.code))})]}):e.jsx("p",{className:"text-default-500 text-center py-4",children:"No modules assigned to this plan"})})]}),(s.stripe_product_id||s.stripe_monthly_price_id||s.stripe_yearly_price_id)&&e.jsxs(c,{radius:a(),children:[e.jsx(d,{className:"border-b border-divider",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-warning"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Stripe Integration"})]})}),e.jsxs(o,{className:"space-y-3",children:[s.stripe_product_id&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Product ID"}),e.jsx("code",{className:"text-sm bg-default-100 px-2 py-1 rounded",children:s.stripe_product_id})]}),s.stripe_monthly_price_id&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Monthly Price ID"}),e.jsx("code",{className:"text-sm bg-default-100 px-2 py-1 rounded",children:s.stripe_monthly_price_id})]}),s.stripe_yearly_price_id&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-default-600",children:"Yearly Price ID"}),e.jsx("code",{className:"text-sm bg-default-100 px-2 py-1 rounded",children:s.stripe_yearly_price_id})]})]})]})]})]})})})})})]})};ee.layout=h=>e.jsx(B,{children:h});export{ee as default};
