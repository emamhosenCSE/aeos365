import{r as i,u as w,n as k,j as a,s as D,e as x,b as o}from"./app-BrpQ0UwM.js";import{s as d}from"./toastUtils-DmXWeOL1.js";import{c}from"./chunk-7LVYGA7G-LJZ5SG45.js";import{c as u}from"./chunk-PMMJMDBI-DQ2xIUcD.js";import{i as r}from"./chunk-SQIAVXJX-d0efAK_x.js";import{t as h}from"./chunk-WEIB4WXA-DikSLtkc.js";import{s as _}from"./chunk-I3A4XRYQ-CfGUc_10.js";import"./app-Dxe9AM1M.js";import"./index-DGjdlXV7.js";import"./chunk-KQW2TNLT-Ex180OOD.js";import"./index-DRhHtkcR.js";import"./chunk-ICU6NNET-JgRCpHuB.js";import"./useLabel-CGwDFWJ-.js";import"./useLabels-DLWWaVRl.js";import"./useToggleState-B-2VEJIj.js";import"./index-CCfM7oky.js";import"./chunk-LGMZDQT5-CSsa5DzI.js";const A=["Advanced Analytics","API Access","Custom Branding","Priority Support"],F=["Marketplace","Sales playbook","Beta cohort","Landing page"],W=({plan:t=null,mode:m="create"})=>{const[f,g]=i.useState([]),[v,j]=i.useState(!0),b=w({name:t?.name??"",headline:t?.headline??"",price:t?.price??2e3,currency:t?.currency??"USD",cadence:t?.cadence??"month",seatsIncluded:t?.seatsIncluded??100,storage:t?.storage??"1 TB",trialDays:t?.trialDays??14,provisioningSla:t?.provisioningSla??"24 hours",modules:t?.modules?.map(e=>e.id)??[],addOns:t?.addOns??[],targetProfile:t?.target??"Operations + HR partnership",rolloutChannels:t?.rolloutChannels??["Sales playbook"],description:t?.description??"",availability:t?.availability??!0,features:t?.features??["AI assisted onboarding","Compliance-ready automation templates"]}),{data:s,setData:l,reset:y}=b,[n,p]=i.useState("");i.useEffect(()=>{k.get("/modules/catalog").then(e=>{e.data.success&&g(e.data.modules)}).catch(e=>{console.error("Failed to load modules:",e),d.error("Failed to load module catalog")}).finally(()=>{j(!1)})},[]);const N=e=>{e.preventDefault(),console.table(s),d.success(m==="create"?"Plan draft stored locally.":"Plan update staged.")},C=()=>{n.trim()&&(l("features",[...s.features,n.trim()]),p(""))},S=e=>{l("features",s.features.filter(P=>P!==e))};return a.jsxs("form",{onSubmit:N,className:"space-y-8",children:[a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx(r,{label:"Plan name",value:s.name,onChange:e=>l("name",e.target.value),isRequired:!0}),a.jsx(r,{label:"Narrative headline",description:"Used on landing pages and procurement decks.",value:s.headline,onChange:e=>l("headline",e.target.value)}),a.jsx(h,{label:"Value promise",minRows:3,value:s.description,onChange:e=>l("description",e.target.value),placeholder:"How this plan solves pains for specific personas."})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsx(r,{type:"number",label:"Price",startContent:a.jsx("span",{className:"text-sm text-default-500",children:s.currency}),value:s.price,onChange:e=>l("price",Number(e.target.value)),min:0}),a.jsxs("label",{className:"text-sm font-medium text-default-600 dark:text-default-300",children:["Cadence",a.jsxs("select",{value:s.cadence,onChange:e=>l("cadence",e.target.value),className:"mt-1 w-full rounded-xl border border-default-200 bg-white/80 px-3 py-2 text-sm focus:border-primary focus:outline-none",children:[a.jsx("option",{value:"month",children:"Monthly"}),a.jsx("option",{value:"year",children:"Annual"})]})]}),a.jsx(r,{type:"number",label:"Seats included",value:s.seatsIncluded,onChange:e=>l("seatsIncluded",Number(e.target.value)),min:1}),a.jsx(r,{label:"Storage allocation",value:s.storage,onChange:e=>l("storage",e.target.value)}),a.jsx(r,{type:"number",label:"Trial days",value:s.trialDays,onChange:e=>l("trialDays",Number(e.target.value)),min:0}),a.jsx(r,{label:"Provisioning SLA",value:s.provisioningSla,onChange:e=>l("provisioningSla",e.target.value)})]})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-default-600 dark:text-default-300",children:"Included modules"}),v?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(D,{size:"sm"}),a.jsx("span",{className:"ml-2 text-sm text-default-500",children:"Loading modules..."})]}):a.jsx(c,{value:s.modules,onChange:e=>l("modules",e),children:f.map(e=>a.jsx(u,{value:e.id,children:a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:e.name}),e.is_core&&a.jsx(x,{size:"sm",color:"success",variant:"flat",className:"ml-2",children:"Core"}),e.description&&a.jsx("p",{className:"text-xs text-default-500",children:e.description})]})},e.id))})]}),a.jsx(c,{label:"Bundled add-ons",value:s.addOns,onChange:e=>l("addOns",e),children:A.map(e=>a.jsx(u,{value:e,children:e},e))})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsx(h,{label:"Target profile",description:"Capture persona/job-to-be-done context.",minRows:3,value:s.targetProfile,onChange:e=>l("targetProfile",e.target.value)}),a.jsx(c,{label:"Launch channels",value:s.rolloutChannels,onChange:e=>l("rolloutChannels",e),children:F.map(e=>a.jsx(u,{value:e,children:e},e))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-default-600 dark:text-default-300",children:"Signature capabilities"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.map(e=>a.jsx(x,{color:"primary",variant:"flat",onClose:()=>S(e),children:e},e))}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(r,{label:"Add capability",placeholder:"Describe the promise (press add)",value:n,onChange:e=>p(e.target.value),className:"flex-1 min-w-[220px]"}),a.jsx(o,{variant:"flat",color:"primary",onPress:C,children:"Add"})]})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-dashed border-default-200 p-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-default-900 dark:text-white",children:"Public availability"}),a.jsx("p",{className:"text-xs text-default-500",children:"Toggle when the plan should appear in platform checkout."})]}),a.jsx(_,{isSelected:s.availability,onValueChange:e=>l("availability",e),children:s.availability?"Listed":"Hidden"})]}),a.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx(o,{variant:"light",onPress:()=>{y(),d.info("Plan form reset.")},children:"Reset"}),a.jsx(o,{color:"primary",type:"submit",children:m==="create"?"Save draft":"Update plan"})]})]})};export{W as default};
