import{Y as Ie,Z as We,E as Be,am as Ee,w as pe,y as v,r as l,a0 as ze,a2 as I,a3 as S,v as Te,j as e,i as me,e as W,F as Le,H as Ue,m as ue,c as qe,b as B,n as ie}from"./app-BrpQ0UwM.js";import{N as Ge,z as Ve,A as Ke}from"./App-BzZwRIf3.js";import{P as Ze}from"./PageHeader-BPpBswTP.js";import{S as Je}from"./StatsCards-C4zQ_vty.js";import{s as V}from"./toastUtils-DmXWeOL1.js";import{F as fe}from"./GlobeAltIcon-DxtqcOi2.js";import{F as Qe}from"./CalendarDaysIcon-BkAEztIS.js";import{F as Xe}from"./BuildingOfficeIcon-CoZNcGsq.js";import{F as ea}from"./CheckCircleIcon-BURezXLP.js";import{F as aa}from"./MagnifyingGlassIcon-DhzJZJr3.js";import{c as ta,e as sa}from"./PlusIcon-CA_x2Or_.js";import{d as he,$ as xe,a as ra,b as be,c as oa,e as la,D as ia,f as na}from"./useDateFieldState-GzEJuPiQ.js";import{a as da}from"./chunk-KQW2TNLT-Ex180OOD.js";import{u as ca,F as pa}from"./chunk-ICU6NNET-JgRCpHuB.js";import{u as ne}from"./index-CWTul9Eo.js";import{t as ge}from"./chunk-AUA5GDXN-BodSRBst.js";import{i as ye}from"./chunk-SQIAVXJX-d0efAK_x.js";import{s as ve}from"./chunk-C3QHEOC2-D4QcJqup.js";import{l as de}from"./chunk-Y5DMIIWQ-ilm6UE0q.js";import{t as ma,a as ua,b as fa,c as ha}from"./chunk-F3UDT23P-Ct2uUAEU.js";import{t as xa,a as ba}from"./chunk-YRZGWF2W-w_pv8JHK.js";import{m as je,a as we,b as _e,c as Ne}from"./chunk-TW2E3XVA-Cq0DGGbI.js";import{t as ga}from"./chunk-WEIB4WXA-DikSLtkc.js";import{m as Pe}from"./chunk-5LXTSPS7-CZESlYuq.js";import"./app-Dxe9AM1M.js";import"./index-DGjdlXV7.js";/* empty css                      */import"./chunk-CV4BWJDJ-C96VZW1N.js";import"./index-CQwslooR.js";import"./index-DRhHtkcR.js";import"./UserIcon-D8kY1ZwS.js";import"./Cog6ToothIcon-BMMbAZpA.js";import"./useBranding-qv63WW7j.js";import"./useDialog-fti0_t2P.js";import"./VisuallyHidden-DwXjZBP5.js";import"./keyboard-BhtLdWlC.js";import"./useLabels-DLWWaVRl.js";import"./index-CpUThtir.js";import"./XMarkIcon-C1WIqP6o.js";import"./useMediaQuery-CFaF2uqM.js";import"./chunk-IHO36JMK-xRSFIery.js";import"./ShieldCheckIcon-bFtvfWXE.js";import"./AcademicCapIcon-D20Gi9a_.js";import"./IdentificationIcon-BGfsu79d.js";import"./ArrowLeftIcon-Cdc1HrjB.js";import"./ArrowRightIcon-Cz66Tf3s.js";import"./BriefcaseIcon-BCesjFgA.js";import"./CalendarIcon-DNQOCB8b.js";import"./CircleStackIcon-CrHNZK6m.js";import"./ClipboardDocumentCheckIcon-BxDTls2I.js";import"./DeviceTabletIcon-B_IoiQm8.js";import"./CpuChipIcon-CSICtRFQ.js";import"./CurrencyDollarIcon-DhjPgWHi.js";import"./DevicePhoneMobileIcon-j_Cw2KiO.js";import"./DocumentArrowUpIcon-Is7TjkFb.js";import"./DocumentIcon-CqhqrUyF.js";import"./EnvelopeIcon-CF1Xt110.js";import"./EyeIcon-DHXN5WDi.js";import"./InformationCircleIcon-B-LSZjy2.js";import"./KeyIcon-DBJJhxUd.js";import"./LockClosedIcon-CDMX3egb.js";import"./MapPinIcon-D1Pi-EC7.js";import"./PlusCircleIcon-BYeJHQrD.js";import"./PrinterIcon-Cxf-38ZP.js";import"./UserCircleIcon-CUGyxbk3.js";import"./UserGroupIcon-h979AJVu.js";import"./useHasTabbableChild-BCB9SlDy.js";import"./chunk-LGMZDQT5-CSsa5DzI.js";import"./useSelectableItem-xFnwZFq2.js";import"./SelectionManager-BDqxcBRc.js";import"./Item-Bz9nEl3J.js";import"./MaintenanceModeBanner-Cxhu4lEL.js";import"./chunk-P7ACKWSP-C--uPpFg.js";import"./chunk-C6WKGNND-CkI8tRvQ.js";import"./chunk-WQVQ7P2I-hHnQawC0.js";import"./number-CB4zbwAz.js";import"./index-DPUAKS60.js";import"./useTreeState-SZseE4UO.js";import"./useMenuTriggerState-C8Me9E6c.js";import"./NumberFormatter-DNR9MAW-.js";import"./useLabel-CGwDFWJ-.js";import"./index-CCfM7oky.js";import"./chunk-7F3ZLNJ6-DliCQ3uz.js";import"./index-CTla63m4.js";import"./chunk-PMMJMDBI-DQ2xIUcD.js";import"./useToggleState-B-2VEJIj.js";function ya(i){var j,d,b,F,f,g,c;const o=Ie(),{validationBehavior:p}=ca(pa)||{},[E,H]=We(i,he.variantKeys),{locale:z}=Be(),$=xe(new ra(z).resolvedOptions().calendar),T=Ee($.identifier),{ref:K,as:Z,label:w,inputRef:J,description:Q,startContent:L,endContent:_,className:n,classNames:s,validationState:u,groupProps:h={},labelProps:U,fieldProps:N,innerWrapperProps:X,errorMessageProps:O,descriptionProps:ee,validationBehavior:P=(j=p??o?.validationBehavior)!=null?j:"native",shouldForceLeadingZeros:ae=!0,minValue:te=(b=(d=o?.defaultDates)==null?void 0:d.minDate)!=null?b:new be($,1900+T,1,1),maxValue:R=(f=(F=o?.defaultDates)==null?void 0:F.maxDate)!=null?f:new be($,2099+T,12,31),createCalendar:k=(g=o?.createCalendar)!=null?g:null,isInvalid:se=u?u==="invalid":!1,errorMessage:re}=E,A=pe(K),a=pe(J),t=(c=i.disableAnimation)!=null?c:o?.disableAnimation,m=oa({...i,label:w,locale:z,minValue:te,maxValue:R,validationBehavior:P,shouldForceLeadingZeros:ae,createCalendar:!k||typeof k!="function"?xe:k}),{labelProps:y,fieldProps:C,inputProps:q,validationErrors:M,validationDetails:Y,descriptionProps:G,errorMessageProps:oe,isInvalid:De}=la({...i,label:w,validationBehavior:P,inputRef:a},m,A),Se=v(s?.base,n),ce=se||De,D=da({labelPlacement:i.labelPlacement,label:w}),Fe=D==="outside"||D==="outside-left"||D==="outside-top",x=l.useMemo(()=>he({...H,disableAnimation:t,labelPlacement:D}),[ze(H),t,D]),He=r=>({...I(y,U,r),"data-slot":"label",className:x.label({class:v(s?.label,void 0)})}),$e=r=>({...r,...q,ref:a}),Oe=(r={})=>({ref:A,"data-slot":"input-field",...I(C,N,r),className:x.input({class:v(s?.input,r?.className)})}),Re=(r={})=>({...r,...h,"data-slot":"input-wrapper",className:x.inputWrapper({class:s?.inputWrapper}),onClick:C.onClick}),ke=r=>{const le=I(X,r);return{...le,"data-slot":"inner-wrapper",className:x.innerWrapper({class:v(s?.innerWrapper,le?.className)})}},Ae=r=>({...r,"data-slot":"helper-wrapper",className:x.helperWrapper({class:v(s?.helperWrapper,void 0)})}),Me=(r={})=>({...I(oe,O,r),"data-slot":"error-message",className:x.errorMessage({class:v(s?.errorMessage,r?.className)})}),Ye=(r={})=>({...I(G,ee,r),"data-slot":"description",className:x.description({class:v(s?.description,r?.className)})});return{state:m,domRef:A,slots:x,classNames:s,labelPlacement:D,getBaseGroupProps:()=>({as:Z,label:w,description:Q,endContent:_,errorMessage:re,isInvalid:ce,startContent:L,validationDetails:Y,validationErrors:M,shouldLabelBeOutside:Fe,"data-slot":"base","data-required":S(i.isRequired),"data-disabled":S(i.isDisabled),"data-readonly":S(i.isReadOnly),"data-invalid":S(ce),"data-has-start-content":S(!!L),"data-has-end-content":S(!!_),descriptionProps:Ye(),errorMessageProps:Me(),groupProps:Re(),helperWrapperProps:Ae(),labelProps:He(),wrapperProps:ke(),className:x.base({class:Se})}),getFieldProps:Oe,getInputProps:$e}}var va=Te(function(j,d){const{state:b,slots:F,classNames:f,getBaseGroupProps:g,getInputProps:c,getFieldProps:o}=ya({...j,ref:d});return e.jsx(ia,{...g(),children:e.jsx(na,{classNames:f,inputProps:c(),slots:F,state:b,...o()})})}),Ce=va;const ja=({title:i,holidays:j,stats:d})=>{const[b]=l.useState(window.innerWidth<640),[F]=l.useState(window.innerWidth<768),[f,g]=l.useState(j),[c,o]=l.useState(""),[p,E]=l.useState(new Date().getFullYear().toString()),[H,z]=l.useState(!1),{isOpen:$,onOpen:T,onClose:K}=ne(),{isOpen:Z,onOpen:w,onClose:J}=ne(),{isOpen:Q,onOpen:L,onClose:_}=ne(),[n,s]=l.useState(null),[u,h]=l.useState({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1}),[U,N]=l.useState(!1),X=l.useMemo(()=>[{title:"Total Holidays",value:d.total_holidays,icon:e.jsx(fe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All company holidays",trend:`${d.this_year_holidays} this year`},{title:"Upcoming",value:d.upcoming_holidays,icon:e.jsx(me,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Next holidays",trend:"Next 90 days"},{title:"This Month",value:d.this_month_holidays,icon:e.jsx(Qe,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current month",trend:"Ongoing & upcoming"},{title:"Working Days",value:365-d.total_holidays,icon:e.jsx(Xe,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Business days",trend:`${Math.round((365-d.total_holidays)/365*100)}% of year`}],[d]),O=l.useMemo(()=>f.filter(a=>{const t=a.title.toLowerCase().includes(c.toLowerCase()),m=p==="all"||new Date(a.from_date).getFullYear().toString()===p;return t&&m}),[f,c,p]),ee=l.useMemo(()=>[...new Set(f.map(t=>new Date(t.from_date).getFullYear()))].sort((t,m)=>m-t),[f]),P=[{key:"public",label:"Public Holiday",color:"primary"},{key:"religious",label:"Religious Holiday",color:"secondary"},{key:"national",label:"National Holiday",color:"success"},{key:"company",label:"Company Holiday",color:"warning"},{key:"optional",label:"Optional Holiday",color:"default"}],ae=async()=>{N(!0);try{const a=n?await ie.put(route("holiday.update",n.id),u):await ie.post(route("holiday.store"),u);a.data.success&&(g(n?t=>t.map(m=>m.id===n.id?a.data.holiday:m):t=>[...t,a.data.holiday]),V.success(n?"Holiday updated successfully!":"Holiday created successfully!"),R())}catch{V.error("Failed to save holiday. Please try again.")}finally{N(!1)}},te=async()=>{if(n){N(!0);try{await ie.delete(route("holiday.destroy",n.id)),g(a=>a.filter(t=>t.id!==n.id)),V.success("Holiday deleted successfully!"),_(),s(null)}catch{V.error("Failed to delete holiday. Please try again.")}finally{N(!1)}}},R=()=>{K(),J(),s(null),h({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1})},k=a=>{s(a),h({title:a.title,from_date:a.from_date,to_date:a.to_date,description:a.description||"",type:a.type||"public",is_recurring:a.is_recurring||!1}),w()},se=a=>{s(a),L()},re=[{name:"Holiday",uid:"title"},{name:"Date",uid:"dates"},{name:"Duration",uid:"duration"},{name:"Type",uid:"type"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],A=l.useCallback((a,t)=>{const m=a[t],y=new Date(a.from_date),C=new Date(a.to_date),q=Math.ceil((C-y)/(1e3*60*60*24))+1,M=y>new Date,Y=y<=new Date&&C>=new Date;switch(t){case"title":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:a.title}),a.description&&e.jsx("p",{className:"text-bold text-tiny capitalize text-default-400",children:a.description})]});case"dates":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:y.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),a.from_date!==a.to_date&&e.jsxs("span",{className:"text-tiny text-default-400",children:["to ",C.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]});case"duration":return e.jsxs(W,{size:"sm",variant:"flat",children:[q," ",q===1?"day":"days"]});case"type":const G=P.find(oe=>oe.key===a.type)||P[0];return e.jsx(W,{size:"sm",color:G.color,variant:"flat",children:G.label});case"status":return e.jsx(W,{size:"sm",color:Y?"success":M?"warning":"default",variant:"flat",startContent:Y?e.jsx(ea,{className:"w-3 h-3"}):M?e.jsx(me,{className:"w-3 h-3"}):e.jsx(Le,{className:"w-3 h-3"}),children:Y?"Ongoing":M?"Upcoming":"Past"});case"actions":return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(ge,{content:"Edit holiday",children:e.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>k(a),children:e.jsx(Ge,{className:"w-4 h-4"})})}),e.jsx(ge,{color:"danger",content:"Delete holiday",children:e.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>se(a),children:e.jsx(Ve,{className:"w-4 h-4"})})})]});default:return m}},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{title:i}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsx(qe,{className:"shadow-lg",children:e.jsx(Ze,{title:"Company Holidays",subtitle:"Manage company-wide holidays and special occasions",icon:e.jsx(fe,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:b?"Add":"Add Holiday",icon:e.jsx(sa,{className:"w-4 h-4"}),onClick:T,className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Je,{stats:X,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ye,{label:"Search Holidays",placeholder:"Search by holiday name...",value:c,onChange:a=>o(a.target.value),startContent:e.jsx(aa,{className:"w-4 h-4 text-default-400"})})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(ve,{label:"Year",selectedKeys:[p],onSelectionChange:a=>E(Array.from(a)[0]),className:"w-32",children:[e.jsx(de,{value:"all",children:"All Years"},"all"),ee.map(a=>e.jsx(de,{value:a.toString(),children:a},a.toString()))]}),e.jsxs(B,{isIconOnly:b,variant:"bordered",onPress:()=>z(!H),className:H?"bg-purple-500/20":"bg-white/5",children:[e.jsx(ta,{className:"w-4 h-4"}),!b&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),(c||p!==new Date().getFullYear().toString())&&e.jsxs(ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-4 flex flex-wrap gap-2",children:[c&&e.jsxs(W,{variant:"flat",color:"primary",size:"sm",onClose:()=>o(""),children:["Search: ",c]}),p!==new Date().getFullYear().toString()&&e.jsxs(W,{variant:"flat",color:"secondary",size:"sm",onClose:()=>E(new Date().getFullYear().toString()),children:["Year: ",p==="all"?"All Years":p]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Company Holidays",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",O.length," ",O.length===1?"holiday":"holidays",")"]})]})}),e.jsxs(ma,{isStriped:!0,removeWrapper:!0,"aria-label":"Holidays table",classNames:{th:"bg-white/5 text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsx(xa,{columns:re,children:a=>e.jsx(ba,{align:a.uid==="actions"?"center":"start",children:a.name},a.uid)}),e.jsx(ua,{items:O,children:a=>e.jsx(fa,{children:t=>e.jsx(ha,{children:A(a,t)})},a.id)})]})]})]})})})})}),e.jsx(je,{isOpen:$||Z,onClose:R,size:"2xl",backdrop:"blur",classNames:{backdrop:"bg-linear-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20",base:"border-[#292f46] bg-linear-to-br from-white/10 to-white/5 backdrop-blur-md",header:"border-b border-[#292f46]",footer:"border-t border-[#292f46]"},children:e.jsxs(we,{children:[e.jsx(_e,{className:"flex flex-col gap-1",children:n?"Edit Holiday":"Add New Holiday"}),e.jsxs(Ne,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ye,{label:"Holiday Title",placeholder:"Enter holiday name",value:u.title,onChange:a=>h(t=>({...t,title:a.target.value})),isRequired:!0}),e.jsx(ve,{label:"Holiday Type",selectedKeys:[u.type],onSelectionChange:a=>h(t=>({...t,type:Array.from(a)[0]})),children:P.map(a=>e.jsx(de,{value:a.key,children:a.label},a.key))}),e.jsx(Ce,{label:"From Date",value:u.from_date,onChange:a=>h(t=>({...t,from_date:a})),isRequired:!0}),e.jsx(Ce,{label:"To Date",value:u.to_date,onChange:a=>h(t=>({...t,to_date:a})),isRequired:!0})]}),e.jsx(ga,{label:"Description (Optional)",placeholder:"Enter holiday description or additional notes",value:u.description,onChange:a=>h(t=>({...t,description:a.target.value})),rows:3})]}),e.jsxs(Pe,{children:[e.jsx(B,{color:"danger",variant:"light",onPress:R,children:"Cancel"}),e.jsx(B,{color:"primary",onPress:ae,isLoading:U,children:n?"Update Holiday":"Add Holiday"})]})]})}),e.jsx(je,{isOpen:Q,onClose:_,size:"md",backdrop:"blur",children:e.jsxs(we,{children:[e.jsx(_e,{className:"flex flex-col gap-1",children:"Confirm Delete"}),e.jsxs(Ne,{children:[e.jsxs("p",{children:['Are you sure you want to delete the holiday "',n?.title,'"?']}),e.jsx("p",{className:"text-small text-danger",children:"This action cannot be undone."})]}),e.jsxs(Pe,{children:[e.jsx(B,{color:"default",variant:"light",onPress:_,children:"Cancel"}),e.jsx(B,{color:"danger",onPress:te,isLoading:U,children:"Delete Holiday"})]})]})})]})};ja.layout=i=>e.jsx(Ke,{children:i});export{ja as default};
