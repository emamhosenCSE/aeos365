import{r as l,e as N,j as e,c,a as n,F as y,d as w}from"./app-DInl32dX.js";import{s as v}from"./routeUtils-C1ntbTNy.js";import{D as b}from"./index-3SaTkLKc.js";import{F as i}from"./CalendarDaysIcon-C0QniVM8.js";import{F as g}from"./ArrowRightIcon-B8tzotBf.js";import{c as o}from"./chunk-C6WKGNND-BNiYL7Dh.js";import{s as m}from"./chunk-P7ACKWSP-8b9-fXrc.js";import{t as _}from"./chunk-AUA5GDXN-D3hqgLS_.js";import{p as F}from"./chunk-VFIJPDYX-CGLJS4zn.js";import"./app-Bq-q9uAS.js";import"./toastUtils-Dk6tac5H.js";import"./index-DPMKIREV.js";import"./index-C19oxd6b.js";import"./index-CSng9BnJ.js";import"./chunk-WQVQ7P2I-CFFCRwf1.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-AEtpri7C.js";import"./useProgressBar-DFqNCtAi.js";import"./useLabel-CkOStKP1.js";import"./useLabels-DRQXF7iz.js";import"./useNumberFormatter-DySMALVF.js";import"./NumberFormatter-DNR9MAW-.js";function U({data:a,meta:k}){const[f,d]=l.useState(!a),[t,p]=l.useState(a||null);l.useEffect(()=>{if(a){p(a),d(!1);return}h()},[a]);const h=async()=>{try{const s=await N.get(b("leaves.my-balance"));s.data.success&&p(s.data.balance)}catch(s){console.error("Failed to fetch leave balance:",s)}finally{d(!1)}},x=()=>{v("leaves.employee")},u=s=>({annual:"primary",sick:"warning",casual:"success",maternity:"secondary",paternity:"secondary",unpaid:"default"})[s?.toLowerCase()]||"default";if(f)return e.jsxs(c,{children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-primary"}),e.jsx(m,{className:"w-24 h-5 rounded"})]})}),e.jsx(n,{className:"p-4 space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(m,{className:"w-20 h-4 rounded"}),e.jsx(m,{className:"w-12 h-6 rounded-full"})]},s))})]});if(!t||!t.breakdown||t.breakdown.length===0)return e.jsxs(c,{children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Leave Balance"})]})}),e.jsxs(n,{className:"p-4 text-center text-default-500",children:[e.jsx(y,{className:"w-8 h-8 mx-auto mb-2 text-default-300"}),e.jsx("p",{className:"text-sm",children:"No leave allocation found"})]})]});const{totalRemaining:j,breakdown:r}=t;return e.jsxs(c,{className:"cursor-pointer hover:shadow-md",isPressable:!0,onPress:x,children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Leave Balance"})]}),e.jsxs(w,{color:"primary",size:"sm",variant:"flat",children:[j," days"]})]})}),e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"space-y-3",children:r.slice(0,4).map(s=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-default-600 capitalize",children:s.type}),e.jsxs("span",{className:"font-medium",children:[s.remaining,"/",s.total]})]}),e.jsx(_,{content:`${s.used} used of ${s.total}`,children:e.jsx(F,{size:"sm",value:s.remaining/s.total*100,color:u(s.type),className:"h-1.5"})})]},s.type))}),r.length>4&&e.jsx("div",{className:"mt-3 pt-3 border-t border-divider",children:e.jsxs("button",{onClick:x,className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["View all ",r.length," types",e.jsx(g,{className:"w-4 h-4"})]})})]})]})}export{U as default};
