import{X as Ie,Y as We,D as Be,as as Ee,t as pe,w as v,r as l,a5 as Te,a7 as I,a6 as F,q as ze,j as e,p as me,d as W,F as Le,H as qe,m as ue,c as Ue,b as B,e as ie}from"./app-DLWZL5EI.js";import{A as Ge}from"./App-CPiN04Y0.js";import{P as Ve}from"./PageHeader-CiRohPv4.js";import{S as Ke}from"./StatsCards-Wc45_pXA.js";import{s as V}from"./toastUtils-CQ8tPw7l.js";import{F as fe}from"./GlobeAltIcon-CFAl4tmE.js";import{F as Xe}from"./CalendarDaysIcon-BR4QgBq8.js";import{F as Ze}from"./BuildingOfficeIcon-BJoAl2gF.js";import{F as Je}from"./PencilIcon-Da-ZoIco.js";import{a as Qe}from"./TrashIcon-C6DesZfk.js";import{F as et}from"./CheckCircleIcon-CaJShsm_.js";import{F as tt}from"./MagnifyingGlassIcon-C9l2NPQE.js";import{F as at}from"./FunnelIcon-D8WHt0li.js";import{F as rt}from"./PlusIcon-CgcHryUb.js";import{d as he,$ as xe,a as st,b as be,c as ot,e as lt,D as it,f as nt}from"./useDateFieldState-C3pizMCR.js";import{u as dt}from"./useField-CN4URFK6.js";import{u as ct,F as pt}from"./chunk-ICU6NNET-BuoRM2Mj.js";import{u as ne}from"./index-rgMU3Ab7.js";import{t as ge}from"./chunk-AUA5GDXN-DgHZKZnK.js";import{i as ye}from"./chunk-SQIAVXJX-C5zDfxFa.js";import{s as ve}from"./chunk-C3QHEOC2-Bmp2Jpe_.js";import{l as de}from"./chunk-Y5DMIIWQ-zhqLBGLU.js";import{t as mt,a as ut,b as ft,c as ht}from"./chunk-F3UDT23P-iuiXDnoX.js";import{t as xt,a as bt}from"./chunk-YRZGWF2W-C3idaI1g.js";import{m as je,a as we,b as _e,c as Ne}from"./chunk-TW2E3XVA-dNGvEz5r.js";import{t as gt}from"./chunk-WEIB4WXA-BkR_II6X.js";import{m as Pe}from"./chunk-5LXTSPS7-CJuDP5FM.js";import"./app-BI-xrU3s.js";import"./index-lAyyVki8.js";/* empty css                      */import"./routeUtils-C6MiLID5.js";import"./chunk-CV4BWJDJ-C645uC3W.js";import"./index-DD7PnbC4.js";import"./index-Dz459_my.js";import"./UserIcon-DiPxEy9e.js";import"./Cog6ToothIcon-CI3NiAkm.js";import"./useBranding-C98uB2bk.js";import"./useDialog-LKdJQ55I.js";import"./getScrollParent-B27hviGV.js";import"./keyboard-CSKkBtIV.js";import"./useLabels-CKC_NELL.js";import"./VisuallyHidden-Dslt4DE9.js";import"./index-B5MKI_DQ.js";import"./XMarkIcon-C9tv-sqJ.js";import"./useMediaQuery-CZ_V8brP.js";import"./chunk-IHO36JMK-DYeauZfe.js";import"./ShieldCheckIcon-BxwQA0uM.js";import"./AcademicCapIcon-Bs9t2qow.js";import"./IdentificationIcon-6E2VOCK1.js";import"./ArrowLeftIcon-a6q7R3tQ.js";import"./ArrowRightIcon-BZNmx9ah.js";import"./UsersIcon-CpsA-xGl.js";import"./BoltIcon-BRTqiOqL.js";import"./BriefcaseIcon-CunjT5yU.js";import"./CalendarIcon-BTj7Nn7B.js";import"./ChartBarIcon-CnSK0enl.js";import"./CircleStackIcon-20fpj2M5.js";import"./ClipboardDocumentCheckIcon-Bwahsg1t.js";import"./CogIcon-CQIGGanJ.js";import"./DeviceTabletIcon-CR6eyvHQ.js";import"./CpuChipIcon-Dkmm6hKt.js";import"./CurrencyDollarIcon-DK6JNn4H.js";import"./DevicePhoneMobileIcon-DzKKUXAD.js";import"./DocumentArrowUpIcon-CdnT1l-_.js";import"./DocumentIcon-YVJ_odhG.js";import"./EnvelopeIcon-BNQywoLu.js";import"./ExclamationCircleIcon-D-5waelr.js";import"./EyeSlashIcon-C7uJqcIF.js";import"./EyeIcon-Ds6DAjR7.js";import"./InformationCircleIcon-2sIUPx4E.js";import"./KeyIcon-Dl6jmBIi.js";import"./LockClosedIcon-DWSbAAT6.js";import"./MapPinIcon-CoSq0ZKP.js";import"./PlusCircleIcon-borTRmVT.js";import"./PrinterIcon-jsVlFWpL.js";import"./RocketLaunchIcon-C1ofXZeY.js";import"./ShoppingCartIcon-DijpYrUE.js";import"./UserCircleIcon-D9Bl7hMN.js";import"./UserGroupIcon-DLyCB4U6.js";import"./chunk-I3A4XRYQ-CbmreU5k.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./useToggleState-C1tJJPv7.js";import"./MaintenanceModeBanner-CpiCdC4n.js";import"./chunk-P7ACKWSP-C7P2-EIz.js";import"./chunk-C6WKGNND-Dq1nEPC1.js";import"./Item-hnCJOaQ5.js";import"./SelectionManager-UhxaObWG.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./number-CB4zbwAz.js";import"./index-D3fxkw17.js";import"./useSelectableItem-Qild1lMf.js";import"./useTreeState-CsNDLaZy.js";import"./useMenuTriggerState-CpMESG3a.js";import"./NumberFormatter-DNR9MAW-.js";import"./useLabel-BC4q2FsI.js";import"./index-BJ8QHXMy.js";import"./chunk-KQW2TNLT-BxZBj3py.js";import"./chunk-7F3ZLNJ6-BH294qJ7.js";import"./index-CGn2JJsk.js";import"./chunk-PMMJMDBI-DH4qNxn7.js";import"./useHasTabbableChild-DwAon3z_.js";function yt(i){var j,d,b,S,f,g,c;const o=Ie(),{validationBehavior:p}=ct(pt)||{},[E,H]=We(i,he.variantKeys),{locale:T}=Be(),$=xe(new st(T).resolvedOptions().calendar),z=Ee($.identifier),{ref:K,as:X,label:w,inputRef:Z,description:J,startContent:L,endContent:_,className:n,classNames:r,validationState:u,groupProps:h={},labelProps:q,fieldProps:N,innerWrapperProps:Q,errorMessageProps:O,descriptionProps:ee,validationBehavior:P=(j=p??o?.validationBehavior)!=null?j:"native",shouldForceLeadingZeros:te=!0,minValue:ae=(b=(d=o?.defaultDates)==null?void 0:d.minDate)!=null?b:new be($,1900+z,1,1),maxValue:R=(f=(S=o?.defaultDates)==null?void 0:S.maxDate)!=null?f:new be($,2099+z,12,31),createCalendar:k=(g=o?.createCalendar)!=null?g:null,isInvalid:re=u?u==="invalid":!1,errorMessage:se}=E,A=pe(K),t=pe(Z),a=(c=i.disableAnimation)!=null?c:o?.disableAnimation,m=ot({...i,label:w,locale:T,minValue:ae,maxValue:R,validationBehavior:P,shouldForceLeadingZeros:te,createCalendar:!k||typeof k!="function"?xe:k}),{labelProps:y,fieldProps:C,inputProps:U,validationErrors:M,validationDetails:Y,descriptionProps:G,errorMessageProps:oe,isInvalid:De}=lt({...i,label:w,validationBehavior:P,inputRef:t},m,A),Fe=v(r?.base,n),ce=re||De,D=dt({labelPlacement:i.labelPlacement,label:w}),Se=D==="outside"||D==="outside-left"||D==="outside-top",x=l.useMemo(()=>he({...H,disableAnimation:a,labelPlacement:D}),[Te(H),a,D]),He=s=>({...I(y,q,s),"data-slot":"label",className:x.label({class:v(r?.label,void 0)})}),$e=s=>({...s,...U,ref:t}),Oe=(s={})=>({ref:A,"data-slot":"input-field",...I(C,N,s),className:x.input({class:v(r?.input,s?.className)})}),Re=(s={})=>({...s,...h,"data-slot":"input-wrapper",className:x.inputWrapper({class:r?.inputWrapper}),onClick:C.onClick}),ke=s=>{const le=I(Q,s);return{...le,"data-slot":"inner-wrapper",className:x.innerWrapper({class:v(r?.innerWrapper,le?.className)})}},Ae=s=>({...s,"data-slot":"helper-wrapper",className:x.helperWrapper({class:v(r?.helperWrapper,void 0)})}),Me=(s={})=>({...I(oe,O,s),"data-slot":"error-message",className:x.errorMessage({class:v(r?.errorMessage,s?.className)})}),Ye=(s={})=>({...I(G,ee,s),"data-slot":"description",className:x.description({class:v(r?.description,s?.className)})});return{state:m,domRef:A,slots:x,classNames:r,labelPlacement:D,getBaseGroupProps:()=>({as:X,label:w,description:J,endContent:_,errorMessage:se,isInvalid:ce,startContent:L,validationDetails:Y,validationErrors:M,shouldLabelBeOutside:Se,"data-slot":"base","data-required":F(i.isRequired),"data-disabled":F(i.isDisabled),"data-readonly":F(i.isReadOnly),"data-invalid":F(ce),"data-has-start-content":F(!!L),"data-has-end-content":F(!!_),descriptionProps:Ye(),errorMessageProps:Me(),groupProps:Re(),helperWrapperProps:Ae(),labelProps:He(),wrapperProps:ke(),className:x.base({class:Fe})}),getFieldProps:Oe,getInputProps:$e}}var vt=ze(function(j,d){const{state:b,slots:S,classNames:f,getBaseGroupProps:g,getInputProps:c,getFieldProps:o}=yt({...j,ref:d});return e.jsx(it,{...g(),children:e.jsx(nt,{classNames:f,inputProps:c(),slots:S,state:b,...o()})})}),Ce=vt;const jt=({title:i,holidays:j,stats:d})=>{const[b]=l.useState(window.innerWidth<640),[S]=l.useState(window.innerWidth<768),[f,g]=l.useState(j),[c,o]=l.useState(""),[p,E]=l.useState(new Date().getFullYear().toString()),[H,T]=l.useState(!1),{isOpen:$,onOpen:z,onClose:K}=ne(),{isOpen:X,onOpen:w,onClose:Z}=ne(),{isOpen:J,onOpen:L,onClose:_}=ne(),[n,r]=l.useState(null),[u,h]=l.useState({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1}),[q,N]=l.useState(!1),Q=l.useMemo(()=>[{title:"Total Holidays",value:d.total_holidays,icon:e.jsx(fe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All company holidays",trend:`${d.this_year_holidays} this year`},{title:"Upcoming",value:d.upcoming_holidays,icon:e.jsx(me,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:"Next holidays",trend:"Next 90 days"},{title:"This Month",value:d.this_month_holidays,icon:e.jsx(Xe,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Current month",trend:"Ongoing & upcoming"},{title:"Working Days",value:365-d.total_holidays,icon:e.jsx(Ze,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Business days",trend:`${Math.round((365-d.total_holidays)/365*100)}% of year`}],[d]),O=l.useMemo(()=>f.filter(t=>{const a=t.title.toLowerCase().includes(c.toLowerCase()),m=p==="all"||new Date(t.from_date).getFullYear().toString()===p;return a&&m}),[f,c,p]),ee=l.useMemo(()=>[...new Set(f.map(a=>new Date(a.from_date).getFullYear()))].sort((a,m)=>m-a),[f]),P=[{key:"public",label:"Public Holiday",color:"primary"},{key:"religious",label:"Religious Holiday",color:"secondary"},{key:"national",label:"National Holiday",color:"success"},{key:"company",label:"Company Holiday",color:"warning"},{key:"optional",label:"Optional Holiday",color:"default"}],te=async()=>{N(!0);try{const t=n?await ie.put(route("holiday.update",n.id),u):await ie.post(route("holiday.store"),u);t.data.success&&(g(n?a=>a.map(m=>m.id===n.id?t.data.holiday:m):a=>[...a,t.data.holiday]),V.success(n?"Holiday updated successfully!":"Holiday created successfully!"),R())}catch{V.error("Failed to save holiday. Please try again.")}finally{N(!1)}},ae=async()=>{if(n){N(!0);try{await ie.delete(route("holiday.destroy",n.id)),g(t=>t.filter(a=>a.id!==n.id)),V.success("Holiday deleted successfully!"),_(),r(null)}catch{V.error("Failed to delete holiday. Please try again.")}finally{N(!1)}}},R=()=>{K(),Z(),r(null),h({title:"",from_date:"",to_date:"",description:"",type:"public",is_recurring:!1})},k=t=>{r(t),h({title:t.title,from_date:t.from_date,to_date:t.to_date,description:t.description||"",type:t.type||"public",is_recurring:t.is_recurring||!1}),w()},re=t=>{r(t),L()},se=[{name:"Holiday",uid:"title"},{name:"Date",uid:"dates"},{name:"Duration",uid:"duration"},{name:"Type",uid:"type"},{name:"Status",uid:"status"},{name:"Actions",uid:"actions"}],A=l.useCallback((t,a)=>{const m=t[a],y=new Date(t.from_date),C=new Date(t.to_date),U=Math.ceil((C-y)/(1e3*60*60*24))+1,M=y>new Date,Y=y<=new Date&&C>=new Date;switch(a){case"title":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:t.title}),t.description&&e.jsx("p",{className:"text-bold text-tiny capitalize text-default-400",children:t.description})]});case"dates":return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:y.toLocaleDateString("en-US",{month:"short",day:"numeric",year:y.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}),t.from_date!==t.to_date&&e.jsxs("span",{className:"text-tiny text-default-400",children:["to ",C.toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]});case"duration":return e.jsxs(W,{size:"sm",variant:"flat",children:[U," ",U===1?"day":"days"]});case"type":const G=P.find(oe=>oe.key===t.type)||P[0];return e.jsx(W,{size:"sm",color:G.color,variant:"flat",children:G.label});case"status":return e.jsx(W,{size:"sm",color:Y?"success":M?"warning":"default",variant:"flat",startContent:Y?e.jsx(et,{className:"w-3 h-3"}):M?e.jsx(me,{className:"w-3 h-3"}):e.jsx(Le,{className:"w-3 h-3"}),children:Y?"Ongoing":M?"Upcoming":"Past"});case"actions":return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx(ge,{content:"Edit holiday",children:e.jsx("span",{className:"text-lg text-default-400 cursor-pointer active:opacity-50",onClick:()=>k(t),children:e.jsx(Je,{className:"w-4 h-4"})})}),e.jsx(ge,{color:"danger",content:"Delete holiday",children:e.jsx("span",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:()=>re(t),children:e.jsx(Qe,{className:"w-4 h-4"})})})]});default:return m}},[]);return e.jsxs(e.Fragment,{children:[e.jsx(qe,{title:i}),e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsx(Ue,{className:"shadow-lg",children:e.jsx(Ve,{title:"Company Holidays",subtitle:"Manage company-wide holidays and special occasions",icon:e.jsx(fe,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:b?"Add":"Add Holiday",icon:e.jsx(rt,{className:"w-4 h-4"}),onClick:z,className:"bg-linear-to-r from-(--theme-primary) to-(--theme-secondary) text-white font-medium hover:opacity-90"}],children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx(Ke,{stats:Q,className:"mb-6"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ye,{label:"Search Holidays",placeholder:"Search by holiday name...",value:c,onChange:t=>o(t.target.value),startContent:e.jsx(tt,{className:"w-4 h-4 text-default-400"})})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(ve,{label:"Year",selectedKeys:[p],onSelectionChange:t=>E(Array.from(t)[0]),className:"w-32",children:[e.jsx(de,{value:"all",children:"All Years"},"all"),ee.map(t=>e.jsx(de,{value:t.toString(),children:t},t.toString()))]}),e.jsxs(B,{isIconOnly:b,variant:"bordered",onPress:()=>T(!H),className:H?"bg-purple-500/20":"bg-white/5",children:[e.jsx(at,{className:"w-4 h-4"}),!b&&e.jsx("span",{className:"ml-1",children:"Filters"})]})]})]}),(c||p!==new Date().getFullYear().toString())&&e.jsxs(ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-4 flex flex-wrap gap-2",children:[c&&e.jsxs(W,{variant:"flat",color:"primary",size:"sm",onClose:()=>o(""),children:["Search: ",c]}),p!==new Date().getFullYear().toString()&&e.jsxs(W,{variant:"flat",color:"secondary",size:"sm",onClose:()=>E(new Date().getFullYear().toString()),children:["Year: ",p==="all"?"All Years":p]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Company Holidays",e.jsxs("span",{className:"text-sm text-default-500 ml-2",children:["(",O.length," ",O.length===1?"holiday":"holidays",")"]})]})}),e.jsxs(mt,{isStriped:!0,removeWrapper:!0,"aria-label":"Holidays table",classNames:{th:"bg-white/5 text-default-600 border-b border-white/10",td:"border-b border-white/5"},children:[e.jsx(xt,{columns:se,children:t=>e.jsx(bt,{align:t.uid==="actions"?"center":"start",children:t.name},t.uid)}),e.jsx(ut,{items:O,children:t=>e.jsx(ft,{children:a=>e.jsx(ht,{children:A(t,a)})},t.id)})]})]})]})})})})}),e.jsx(je,{isOpen:$||X,onClose:R,size:"2xl",backdrop:"blur",classNames:{backdrop:"bg-linear-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20",base:"border-[#292f46] bg-linear-to-br from-white/10 to-white/5 backdrop-blur-md",header:"border-b border-[#292f46]",footer:"border-t border-[#292f46]"},children:e.jsxs(we,{children:[e.jsx(_e,{className:"flex flex-col gap-1",children:n?"Edit Holiday":"Add New Holiday"}),e.jsxs(Ne,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ye,{label:"Holiday Title",placeholder:"Enter holiday name",value:u.title,onChange:t=>h(a=>({...a,title:t.target.value})),isRequired:!0}),e.jsx(ve,{label:"Holiday Type",selectedKeys:[u.type],onSelectionChange:t=>h(a=>({...a,type:Array.from(t)[0]})),children:P.map(t=>e.jsx(de,{value:t.key,children:t.label},t.key))}),e.jsx(Ce,{label:"From Date",value:u.from_date,onChange:t=>h(a=>({...a,from_date:t})),isRequired:!0}),e.jsx(Ce,{label:"To Date",value:u.to_date,onChange:t=>h(a=>({...a,to_date:t})),isRequired:!0})]}),e.jsx(gt,{label:"Description (Optional)",placeholder:"Enter holiday description or additional notes",value:u.description,onChange:t=>h(a=>({...a,description:t.target.value})),rows:3})]}),e.jsxs(Pe,{children:[e.jsx(B,{color:"danger",variant:"light",onPress:R,children:"Cancel"}),e.jsx(B,{color:"primary",onPress:te,isLoading:q,children:n?"Update Holiday":"Add Holiday"})]})]})}),e.jsx(je,{isOpen:J,onClose:_,size:"md",backdrop:"blur",children:e.jsxs(we,{children:[e.jsx(_e,{className:"flex flex-col gap-1",children:"Confirm Delete"}),e.jsxs(Ne,{children:[e.jsxs("p",{children:['Are you sure you want to delete the holiday "',n?.title,'"?']}),e.jsx("p",{className:"text-small text-danger",children:"This action cannot be undone."})]}),e.jsxs(Pe,{children:[e.jsx(B,{color:"default",variant:"light",onPress:_,children:"Cancel"}),e.jsx(B,{color:"danger",onPress:ae,isLoading:q,children:"Delete Holiday"})]})]})})]})};jt.layout=i=>e.jsx(Ge,{children:i});export{jt as default};
