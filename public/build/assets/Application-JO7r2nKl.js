import{r as p,j as e,H as V,c as I,d as W,b as f,a as v,f as b}from"./app-BkgCtHXO.js";import{s as g}from"./toastUtils-x3kUGVfR.js";import{F as q}from"./Cog6ToothIcon-Bovovt86.js";import{F as L}from"./BuildingOfficeIcon-C8dMXtOE.js";import{F as k}from"./EnvelopeIcon-C0cG5D_W.js";import{F as z}from"./CheckCircleIcon-BA11f32N.js";import{c as D}from"./chunk-C6WKGNND-MUA-e_xI.js";import{t as K,a as N}from"./chunk-ML27DD5T-4cd9D6_e.js";import{i as o}from"./chunk-SQIAVXJX-Byw4yFUd.js";import{s as x}from"./chunk-C3QHEOC2-CNuS3wko.js";import{l as d}from"./chunk-Y5DMIIWQ-Z1JSEJtA.js";import"./app-Bq-q9uAS.js";import"./index-B7m8hOZr.js";import"./useLabels-4bh2Qhvc.js";import"./useHasTabbableChild-BIL7WSoB.js";import"./index-Clir5_RS.js";import"./index-n2HRE6J3.js";import"./chunk-LGMZDQT5-vmPOWwVV.js";import"./index-CokAva9Y.js";import"./useSelectableItem-D57jKBOb.js";import"./SelectionManager-BiHd6T0T.js";import"./keyboard-C-f1CHRW.js";import"./Item-K6ZLiQmP.js";import"./chunk-KQW2TNLT-B1u5jByx.js";import"./chunk-ICU6NNET-CIX58cOD.js";import"./useLabel-fBkMOesA.js";import"./useMenuTriggerState-Dzz21gtA.js";import"./chunk-WQVQ7P2I-D-7sv4Ho.js";import"./number-CB4zbwAz.js";import"./useDialog-Dego46hN.js";import"./VisuallyHidden-CA8GF3km.js";import"./chunk-7F3ZLNJ6-7HIsgfq8.js";import"./index-CQWya27l.js";import"./chunk-IHO36JMK-CdY0f3fU.js";import"./index-BwFQKAC4.js";function Se({title:S,timezones:w,licenseEmail:_}){const[r,C]=p.useState("lg"),[R,E]=p.useState("general"),[l,T]=p.useState({app_name:"Aero Enterprise Suite",app_url:window.location.origin,timezone:"UTC",company_name:"",company_email:"",company_phone:"",mail_mailer:"smtp",mail_host:"",mail_port:"587",mail_username:"",mail_password:"",mail_encryption:"tls",mail_from_address:_||"",mail_from_name:"Aero Enterprise Suite"}),[t,u]=p.useState({}),[c,j]=p.useState(!1),[A,y]=p.useState(!1),[h,P]=p.useState(_||"");p.useEffect(()=>{C((()=>{const m=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",s=parseInt(m);return s===0?"none":s<=4?"sm":s<=8?"md":s<=12?"lg":"xl"})())},[]);const n=(a,i)=>{T(m=>({...m,[a]:i})),t[a]&&u(m=>({...m,[a]:""}))},F=async()=>{if(!h){g.error("Please enter a test email address");return}const a=new Promise(async(i,m)=>{try{y(!0);const s=await b.post(route("install.test-email"),{test_email:h,...l});s.data.success?i([s.data.message]):m([s.data.message])}catch(s){m(s.response?.data?.message?[s.response.data.message]:["Email test failed"])}finally{y(!1)}});g.promise(a,{loading:"Sending test email...",success:i=>i.join(", "),error:i=>Array.isArray(i)?i.join(", "):i})},M=async()=>{u({});const a=new Promise(async(i,m)=>{try{j(!0);const s=await b.post(route("install.save-application"),l);s.data.success?(i([s.data.message]),setTimeout(()=>{v.visit(route("install.admin"))},1e3)):m([s.data.message])}catch(s){s.response?.data?.errors&&u(s.response.data.errors),m(s.response?.data?.message?[s.response.data.message]:["Failed to save settings"])}finally{j(!1)}});g.promise(a,{loading:"Saving settings...",success:i=>i.join(", "),error:i=>Array.isArray(i)?i.join(", "):i})};return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:S}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-content1 to-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-5xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-primary font-semibold",children:"Step 4 of 6"}),e.jsx("span",{className:"text-default-500",children:"Application Settings"})]}),e.jsx("div",{className:"mt-2 h-2 bg-default-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:"66.66%"}})})]}),e.jsxs(I,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Application Settings"}),e.jsx("p",{className:"text-sm text-default-600 mt-1",children:"Configure your application and email settings"})]})]})}),e.jsxs(W,{children:[e.jsxs(K,{selectedKey:R,onSelectionChange:E,radius:r,classNames:{tabList:"bg-default-100",cursor:"bg-primary",tab:"data-[selected=true]:text-primary-foreground"},children:[e.jsx(N,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"General"})]}),children:e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx(o,{label:"Application Name",placeholder:"Aero Enterprise Suite",value:l.app_name,onValueChange:a=>n("app_name",a),isInvalid:!!t.app_name,errorMessage:t.app_name,isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(o,{label:"Application URL",placeholder:"https://yourdomain.com",value:l.app_url,onValueChange:a=>n("app_url",a),isInvalid:!!t.app_url,errorMessage:t.app_url,isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(x,{label:"Timezone",placeholder:"Select timezone",selectedKeys:[l.timezone],onSelectionChange:a=>n("timezone",Array.from(a)[0]),isInvalid:!!t.timezone,errorMessage:t.timezone,isRequired:!0,radius:r,children:w?.map(a=>e.jsx(d,{value:a,children:a},a))}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company Information (Optional)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(o,{label:"Company Name",placeholder:"Your Company Name",value:l.company_name,onValueChange:a=>n("company_name",a),radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(o,{type:"email",label:"Company Email",placeholder:"info@company.com",value:l.company_email,onValueChange:a=>n("company_email",a),radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(o,{type:"tel",label:"Company Phone",placeholder:"+1 234 567 8900",value:l.company_phone,onValueChange:a=>n("company_phone",a),radius:r,classNames:{inputWrapper:"bg-default-100"}})]})]})]})},"general"),e.jsx(N,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"Email (Required)"})]}),children:e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsxs(x,{label:"Mail Driver",placeholder:"Select mail driver",selectedKeys:[l.mail_mailer],onSelectionChange:a=>n("mail_mailer",Array.from(a)[0]),isRequired:!0,radius:r,children:[e.jsx(d,{value:"smtp",children:"SMTP"},"smtp"),e.jsx(d,{value:"sendmail",children:"Sendmail"},"sendmail"),e.jsx(d,{value:"mailgun",children:"Mailgun"},"mailgun"),e.jsx(d,{value:"ses",children:"Amazon SES"},"ses"),e.jsx(d,{value:"postmark",children:"Postmark"},"postmark"),e.jsx(d,{value:"log",children:"Log (Testing Only)"},"log")]}),l.mail_mailer==="smtp"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(o,{label:"SMTP Host",placeholder:"smtp.gmail.com",value:l.mail_host,onValueChange:a=>n("mail_host",a),isInvalid:!!t.mail_host,errorMessage:t.mail_host,isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}})}),e.jsx(o,{type:"number",label:"Port",placeholder:"587",value:l.mail_port,onValueChange:a=>n("mail_port",a),isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}})]}),e.jsxs(x,{label:"Encryption",selectedKeys:[l.mail_encryption],onSelectionChange:a=>n("mail_encryption",Array.from(a)[0]),radius:r,children:[e.jsx(d,{value:"tls",children:"TLS"},"tls"),e.jsx(d,{value:"ssl",children:"SSL"},"ssl")]}),e.jsx(o,{label:"SMTP Username",placeholder:"your-email@gmail.com",value:l.mail_username,onValueChange:a=>n("mail_username",a),isInvalid:!!t.mail_username,errorMessage:t.mail_username,isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(o,{type:"password",label:"SMTP Password",placeholder:"Enter password",value:l.mail_password,onValueChange:a=>n("mail_password",a),isInvalid:!!t.mail_password,errorMessage:t.mail_password,isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}})]}),e.jsx(o,{type:"email",label:"From Email Address",placeholder:"noreply@yourdomain.com",value:l.mail_from_address,onValueChange:a=>n("mail_from_address",a),isInvalid:!!t.mail_from_address,errorMessage:t.mail_from_address,isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(o,{label:"From Name",placeholder:"Aero Enterprise Suite",value:l.mail_from_name,onValueChange:a=>n("mail_from_name",a),isInvalid:!!t.mail_from_name,errorMessage:t.mail_from_name,isRequired:!0,radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsxs("div",{className:"pt-4 border-t border-divider",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Test Email Configuration"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{type:"email",placeholder:"test@example.com",value:h,onValueChange:P,radius:r,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(f,{color:"secondary",variant:"flat",radius:r,onPress:F,isLoading:A,children:"Send Test"})]})]})]})},"email")]}),e.jsxs("div",{className:"flex justify-between pt-6 mt-6 border-t border-divider",children:[e.jsx(f,{variant:"flat",radius:r,onPress:()=>v.visit(route("install.database")),isDisabled:c,children:"Back"}),e.jsx(f,{color:"primary",radius:r,onPress:M,isLoading:c,endContent:!c&&e.jsx(z,{className:"w-5 h-5"}),children:c?"Saving...":"Save & Continue"})]})]})]})]})})]})}export{Se as default};
