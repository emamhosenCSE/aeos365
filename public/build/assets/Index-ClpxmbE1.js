import{r as t,j as e,c as Z,a as ee,s as $e,b,f as ke,d as H,p as be,F as Ee,e as q,g as Ue,u as ss,H as as,m as ts}from"./app-DLWZL5EI.js";import{s as rs}from"./routeUtils-C6MiLID5.js";import{ar as is,b as ns,a as ls,F as Re,ab as os,d as ds,ac as cs,A as ms}from"./App-CPiN04Y0.js";import{S as ps}from"./StatsCards-Wc45_pXA.js";import{A as Pe,I as us,U as xs}from"./InviteUserForm-pULp_5-w.js";import{s as K}from"./toastUtils-CQ8tPw7l.js";import{F as ne}from"./EnvelopeIcon-BNQywoLu.js";import{F as ye}from"./UserGroupIcon-DLyCB4U6.js";import{F as De}from"./BuildingOfficeIcon-BJoAl2gF.js";import{F as ze}from"./BriefcaseIcon-CunjT5yU.js";import{a as fs,F as gs}from"./TrashIcon-C6DesZfk.js";import{f as hs}from"./formatDistanceToNow-Ctx6mZEP.js";import{c as Me}from"./chunk-C6WKGNND-Dq1nEPC1.js";import{d as js}from"./chunk-IHO36JMK-DYeauZfe.js";import{t as le}from"./chunk-AUA5GDXN-DgHZKZnK.js";import{m as de,a as ce,b as me,c as pe}from"./chunk-TW2E3XVA-dNGvEz5r.js";import{m as ue}from"./chunk-5LXTSPS7-CJuDP5FM.js";import{b as ve,F as je}from"./UsersIcon-CpsA-xGl.js";import{F as Oe}from"./XMarkIcon-C9tv-sqJ.js";import{s as z}from"./chunk-C3QHEOC2-Bmp2Jpe_.js";import{l as N}from"./chunk-Y5DMIIWQ-zhqLBGLU.js";import{i as B}from"./chunk-SQIAVXJX-C5zDfxFa.js";import{F as oe}from"./LockClosedIcon-DWSbAAT6.js";import{t as vs}from"./chunk-WEIB4WXA-BkR_II6X.js";import{O as bs}from"./OnboardEmployeeModal-H1ybLicz.js";import{F as ys}from"./CalendarIcon-BTj7Nn7B.js";import{F as _s}from"./CurrencyDollarIcon-DK6JNn4H.js";import{F as ws}from"./MapPinIcon-CoSq0ZKP.js";import{F as Le}from"./CheckCircleIcon-CaJShsm_.js";import{a as Ns}from"./chunk-CV4BWJDJ-C645uC3W.js";import{p as Ss}from"./chunk-VFIJPDYX-DD_no7wC.js";import{F as Ae}from"./ShieldCheckIcon-BxwQA0uM.js";import{F as Fs}from"./MagnifyingGlassIcon-C9l2NPQE.js";import{b as Cs}from"./chunk-57V4RE7B-kgS1ny0L.js";import{F as ks}from"./UserIcon-DiPxEy9e.js";import{F as Rs}from"./PencilIcon-Da-ZoIco.js";import{F as Ie}from"./DevicePhoneMobileIcon-DzKKUXAD.js";import{F as Ps}from"./useMediaQuery-CZ_V8brP.js";import{a as As,F as Is}from"./DeviceTabletIcon-CR6eyvHQ.js";import{s as Y}from"./chunk-P7ACKWSP-C7P2-EIz.js";import{p as $s}from"./chunk-NL7EUJG2-cD5brqfz.js";import{u as Es}from"./chunk-NGIUTAK3-BIjgviLU.js";import{d as Us,a as Ds,b as zs,m as Ms}from"./PlusIcon-CgcHryUb.js";import{s as Os}from"./chunk-I3A4XRYQ-CbmreU5k.js";import"./app-BI-xrU3s.js";import"./index-lAyyVki8.js";/* empty css                      */import"./Cog6ToothIcon-CI3NiAkm.js";import"./GlobeAltIcon-CFAl4tmE.js";import"./useBranding-C98uB2bk.js";import"./useDialog-LKdJQ55I.js";import"./getScrollParent-B27hviGV.js";import"./keyboard-CSKkBtIV.js";import"./useLabels-CKC_NELL.js";import"./VisuallyHidden-Dslt4DE9.js";import"./index-B5MKI_DQ.js";import"./index-Dz459_my.js";import"./AcademicCapIcon-Bs9t2qow.js";import"./IdentificationIcon-6E2VOCK1.js";import"./ArrowLeftIcon-a6q7R3tQ.js";import"./ArrowRightIcon-BZNmx9ah.js";import"./BoltIcon-BRTqiOqL.js";import"./CalendarDaysIcon-BR4QgBq8.js";import"./ChartBarIcon-CnSK0enl.js";import"./CircleStackIcon-20fpj2M5.js";import"./ClipboardDocumentCheckIcon-Bwahsg1t.js";import"./CogIcon-CQIGGanJ.js";import"./CpuChipIcon-Dkmm6hKt.js";import"./DocumentArrowUpIcon-CdnT1l-_.js";import"./DocumentIcon-YVJ_odhG.js";import"./ExclamationCircleIcon-D-5waelr.js";import"./EyeSlashIcon-C7uJqcIF.js";import"./EyeIcon-Ds6DAjR7.js";import"./FunnelIcon-D8WHt0li.js";import"./InformationCircleIcon-2sIUPx4E.js";import"./KeyIcon-Dl6jmBIi.js";import"./PlusCircleIcon-borTRmVT.js";import"./PrinterIcon-jsVlFWpL.js";import"./RocketLaunchIcon-C1ofXZeY.js";import"./ShoppingCartIcon-DijpYrUE.js";import"./UserCircleIcon-D9Bl7hMN.js";import"./MaintenanceModeBanner-CpiCdC4n.js";import"./chunk-PMMJMDBI-DH4qNxn7.js";import"./useToggleState-C1tJJPv7.js";import"./chunk-ICU6NNET-BuoRM2Mj.js";import"./index-BJ8QHXMy.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./chunk-F3UDT23P-iuiXDnoX.js";import"./useSelectableItem-Qild1lMf.js";import"./SelectionManager-UhxaObWG.js";import"./useHasTabbableChild-DwAon3z_.js";import"./chunk-7F3ZLNJ6-BH294qJ7.js";import"./index-CGn2JJsk.js";import"./chunk-YRZGWF2W-C3idaI1g.js";import"./camera-CJ_kjyiK.js";import"./createLucideIcon-DKR2YbRb.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./number-CB4zbwAz.js";import"./useField-CN4URFK6.js";import"./useLabel-BC4q2FsI.js";import"./useMenuTriggerState-CpMESG3a.js";import"./Item-hnCJOaQ5.js";import"./index-D3fxkw17.js";import"./chunk-KQW2TNLT-BxZBj3py.js";import"./index-DD7PnbC4.js";import"./useProgressBar-BmJFnG-i.js";import"./useNumberFormatter-DOVyNCK1.js";import"./NumberFormatter-DNR9MAW-.js";import"./index-CokAva9Y.js";import"./chunk-OH2E76JR-Bg0Or-mv.js";import"./useTreeState-CsNDLaZy.js";const Ls=({onInvitationChange:C})=>{const[v,h]=t.useState([]),[P,p]=t.useState(!0),[o,d]=t.useState(null),[r,S]=t.useState({open:!1,invitation:null}),[R,w]=t.useState("lg"),n=()=>{if(typeof window>"u")return"lg";const j=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",u=parseInt(j);return u===0?"none":u<=4?"sm":u<=8?"md":u<=16?"lg":"full"};t.useEffect(()=>{typeof window<"u"&&w(n())},[]);const x=async()=>{p(!0);try{const l=await q.get(route("users.invitations.pending"));h(l.data.invitations||[])}catch(l){console.error("Error fetching invitations:",l),K.error("Failed to load invitations")}finally{p(!1)}};t.useEffect(()=>{x()},[]);const M=async l=>{d(`resend-${l.id}`);const j=new Promise(async(u,y)=>{try{const _=await q.post(route("users.invitations.resend",{invitation:l.id}));_.status===200&&(x(),C?.(),u([_.data.message||`Invitation resent to ${l.email}`]))}catch(_){console.error("Error resending invitation:",_),y([_.response?.data?.message||"Failed to resend invitation"])}finally{d(null)}});K.promise(j,{loading:"Resending invitation...",success:u=>u[0],error:u=>u[0]})},c=async()=>{if(!r.invitation)return;d(`cancel-${r.invitation.id}`);const l=new Promise(async(j,u)=>{try{const y=await q.delete(route("users.invitations.cancel",{invitation:r.invitation.id}));y.status===200&&(S({open:!1,invitation:null}),x(),C?.(),j([y.data.message||`Invitation to ${r.invitation.email} cancelled`]))}catch(y){console.error("Error canceling invitation:",y),u([y.response?.data?.message||"Failed to cancel invitation"])}finally{d(null)}});K.promise(l,{loading:"Canceling invitation...",success:j=>j[0],error:j=>j[0]})},F=l=>{const y=(new Date(l.expires_at)-new Date)/(1e3*60*60*24);return y<1?"danger":y<3?"warning":"success"},A=l=>{try{return hs(new Date(l),{addSuffix:!0})}catch{return l}};return P?e.jsx(Z,{className:"w-full",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(ee,{className:"flex items-center justify-center p-8",children:[e.jsx($e,{size:"lg"}),e.jsx("p",{className:"text-default-500 mt-4",children:"Loading invitations..."})]})}):v.length===0?e.jsx(Z,{className:"w-full",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:"color-mix(in srgb, var(--theme-content1) 50%, transparent)"},children:e.jsxs(ee,{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:"p-4 rounded-full mb-4",style:{background:"color-mix(in srgb, var(--theme-default-200) 30%, transparent)"},children:e.jsx(ne,{className:"w-8 h-8 text-default-400"})}),e.jsx("p",{className:"text-default-700 font-medium mb-1",children:"No Pending Invitations"}),e.jsx("p",{className:"text-default-500 text-sm",children:"All invitations have been accepted or expired"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(Z,{className:"w-full",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsxs(Me,{className:"flex justify-between items-center px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)"},children:e.jsx(ne,{className:"w-5 h-5",style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Pending Invitations"}),e.jsxs("p",{className:"text-sm text-default-500",children:[v.length," invitation",v.length!==1?"s":""," awaiting acceptance"]})]})]}),e.jsx(b,{size:"sm",variant:"flat",startContent:e.jsx(ke,{className:"w-4 h-4"}),onPress:x,radius:R,isLoading:P,children:"Refresh"})]}),e.jsx(js,{}),e.jsx(ee,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-divider",children:v.map(l=>e.jsx("div",{className:"p-4 hover:bg-default-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold text-foreground truncate",children:l.email}),e.jsxs(H,{size:"sm",variant:"flat",color:F(l),startContent:e.jsx(be,{className:"w-3 h-3"}),children:["Expires ",A(l.expires_at)]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-default-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"capitalize",children:l.role?.replace(/-/g," ")})]}),l.metadata?.department_id&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:"Department assigned"})]}),l.metadata?.designation_id&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{children:"Designation assigned"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-default-500",children:[e.jsxs("span",{children:["Sent ",A(l.created_at)]}),l.inviter&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["by ",l.inviter.name]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{content:"Resend invitation email",children:e.jsx(b,{size:"sm",variant:"flat",color:"primary",isIconOnly:!0,onPress:()=>M(l),isLoading:o===`resend-${l.id}`,radius:R,children:e.jsx(ke,{className:"w-4 h-4"})})}),e.jsx(le,{content:"Cancel invitation",color:"danger",children:e.jsx(b,{size:"sm",variant:"flat",color:"danger",isIconOnly:!0,onPress:()=>S({open:!0,invitation:l}),isLoading:o===`cancel-${l.id}`,radius:R,children:e.jsx(fs,{className:"w-4 h-4"})})})]})]})},l.id))})})]}),e.jsx(de,{isOpen:r.open,onClose:()=>S({open:!1,invitation:null}),size:"sm",backdrop:"blur",radius:R,children:e.jsxs(ce,{children:[e.jsx(me,{className:"flex flex-col gap-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-danger"}),e.jsx("span",{children:"Cancel Invitation"})]})}),e.jsxs(pe,{children:[e.jsxs("p",{className:"text-sm text-default-600",children:["Are you sure you want to cancel the invitation to"," ",e.jsx("strong",{children:r.invitation?.email}),"?"]}),e.jsx("p",{className:"text-sm text-default-500 mt-2",children:"The invitation link will no longer work, and they won't be able to join your organization using this invitation."})]}),e.jsxs(ue,{children:[e.jsx(b,{variant:"flat",onPress:()=>S({open:!1,invitation:null}),radius:R,children:"Keep Invitation"}),e.jsx(b,{color:"danger",onPress:c,isLoading:o!==null,radius:R,children:"Cancel Invitation"})]})]})})]})},Ts=({open:C,onClose:v,roles:h,departments:P,themeRadius:p="lg"})=>{const[o,d]=t.useState({role_id:"",active:"",department_id:"",from_date:"",to_date:""}),[r,S]=t.useState(!1),R=async()=>{S(!0);const n=new Promise(async(x,M)=>{try{const c=new URLSearchParams;o.role_id&&c.append("role_id",o.role_id),o.active!==""&&c.append("active",o.active),o.department_id&&c.append("department_id",o.department_id),o.from_date&&c.append("from_date",o.from_date),o.to_date&&c.append("to_date",o.to_date);const F=route("users.export")+"?"+c.toString(),A=document.createElement("a");A.href=F,A.setAttribute("download",`users_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(A),A.click(),document.body.removeChild(A),setTimeout(()=>{x(["Users exported successfully"]),v(),d({role_id:"",active:"",department_id:"",from_date:"",to_date:""})},1e3)}catch(c){M([c.message||"Failed to export users"])}finally{S(!1)}});K.promise(n,{loading:"Exporting users...",success:x=>x.join(", "),error:x=>Array.isArray(x)?x.join(", "):x})},w=()=>{r||(d({role_id:"",active:"",department_id:"",from_date:"",to_date:""}),v())};return e.jsx(de,{isOpen:C,onOpenChange:w,size:"2xl",scrollBehavior:"inside",classNames:{base:"bg-content1",header:"border-b border-divider",body:"py-6",footer:"border-t border-divider"},children:e.jsxs(ce,{children:[e.jsxs(me,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Export Users"})]}),e.jsx("p",{className:"text-sm text-default-500 font-normal",children:"Apply filters to export specific users to CSV"})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(z,{label:"Filter by Role",placeholder:"All Roles",selectedKeys:o.role_id?[o.role_id]:[],onSelectionChange:n=>d({...o,role_id:Array.from(n)[0]||""}),radius:p,classNames:{trigger:"bg-default-100"},children:[e.jsx(N,{children:"All Roles"},""),h?.map(n=>e.jsx(N,{value:String(n.id),children:n.name},String(n.id)))]}),e.jsxs(z,{label:"Filter by Status",placeholder:"All Statuses",selectedKeys:o.active!==""?[o.active]:[],onSelectionChange:n=>d({...o,active:Array.from(n)[0]||""}),radius:p,classNames:{trigger:"bg-default-100"},children:[e.jsx(N,{children:"All Statuses"},""),e.jsx(N,{children:"Active"},"1"),e.jsx(N,{children:"Inactive"},"0")]}),P&&P.length>0&&e.jsxs(z,{label:"Filter by Department",placeholder:"All Departments",selectedKeys:o.department_id?[o.department_id]:[],onSelectionChange:n=>d({...o,department_id:Array.from(n)[0]||""}),radius:p,classNames:{trigger:"bg-default-100"},children:[e.jsx(N,{children:"All Departments"},""),P.map(n=>e.jsx(N,{value:String(n.id),children:n.name},String(n.id)))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(B,{type:"date",label:"From Date",placeholder:"Select start date",value:o.from_date,onChange:n=>d({...o,from_date:n.target.value}),radius:p,classNames:{inputWrapper:"bg-default-100"}}),e.jsx(B,{type:"date",label:"To Date",placeholder:"Select end date",value:o.to_date,onChange:n=>d({...o,to_date:n.target.value}),radius:p,classNames:{inputWrapper:"bg-default-100"}})]}),e.jsx("p",{className:"text-xs text-default-400",children:"* CSV file will include: ID, Name, Username, Email, Phone, Status, Roles, Email Verified, Created At"})]})}),e.jsxs(ue,{children:[e.jsx(b,{variant:"flat",onPress:w,isDisabled:r,radius:p,startContent:e.jsx(Oe,{className:"w-4 h-4"}),children:"Cancel"}),e.jsx(b,{color:"primary",onPress:R,isLoading:r,radius:p,startContent:!r&&e.jsx(ve,{className:"w-4 h-4"}),children:r?"Exporting...":"Export CSV"})]})]})})},Vs=({open:C,onClose:v,user:h,onSuccess:P,themeRadius:p="lg"})=>{const[o,d]=t.useState(""),[r,S]=t.useState(!1),R=async()=>{S(!0);const n=new Promise(async(x,M)=>{try{const c=await q.post(route("users.lock",h.id),{reason:o||void 0});c.status===200&&(x([c.data.message||"Account locked successfully"]),P?.(c.data.user),v(),d(""))}catch(c){M(c.response?.data?.errors||[c.response?.data?.error||c.response?.data?.message||"Failed to lock account"])}finally{S(!1)}});K.promise(n,{loading:"Locking account...",success:x=>x.join(", "),error:x=>Array.isArray(x)?x.join(", "):x})},w=()=>{r||(d(""),v())};return e.jsx(de,{isOpen:C,onOpenChange:w,size:"2xl",scrollBehavior:"inside",classNames:{base:"bg-content1",header:"border-b border-divider",body:"py-6",footer:"border-t border-divider"},children:e.jsxs(ce,{children:[e.jsxs(me,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-danger"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Lock Account"})]}),e.jsxs("p",{className:"text-sm text-default-500 font-normal",children:["Lock ",h?.name,"'s account and prevent access"]})]}),e.jsx(pe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-danger-50 dark:bg-danger-100/10 border border-danger-200 dark:border-danger-200/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-danger-600 dark:text-danger-500",children:[e.jsx("strong",{children:"Warning:"})," This will immediately lock the user's account and prevent them from logging in. The user will be deactivated and will need an administrator to unlock their account."]})}),e.jsx(vs,{label:"Reason for Locking (Optional)",placeholder:"Enter the reason for locking this account...",value:o,onValueChange:d,minRows:3,maxRows:6,maxLength:500,radius:p,classNames:{inputWrapper:"bg-default-100"},description:`${o.length}/500 characters`})]})}),e.jsxs(ue,{children:[e.jsx(b,{variant:"flat",onPress:w,isDisabled:r,radius:p,startContent:e.jsx(Oe,{className:"w-4 h-4"}),children:"Cancel"}),e.jsx(b,{color:"danger",onPress:R,isLoading:r,radius:p,startContent:!r&&e.jsx(oe,{className:"w-4 h-4"}),children:r?"Locking...":"Lock Account"})]})]})})};function Ws({open:C,onClose:v,users:h=[],departments:P=[],designations:p=[],managers:o=[],onSuccess:d}){const[r,S]=t.useState({department_id:"",designation_id:"",date_of_joining:"",employment_type:"full_time",basic_salary:"",manager_id:"",work_location:"",probation_end_date:""}),[R,w]=t.useState([]),[n,x]=t.useState({}),[M,c]=t.useState(!1),[F,A]=t.useState(null),[l,j]=t.useState(!1),[u,y]=t.useState("md");t.useEffect(()=>{const f=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",g=parseInt(f);g===0?y("none"):g<=4?y("sm"):g<=8?y("md"):g<=12?y("lg"):y("xl")},[]),t.useEffect(()=>{if(r.department_id){const a=p.filter(f=>String(f.department_id)===String(r.department_id));w(a),r.designation_id&&!a.find(f=>String(f.id)===String(r.designation_id))&&S(f=>({...f,designation_id:""}))}else w([])},[r.department_id,p]),t.useEffect(()=>{C||(S({department_id:"",designation_id:"",date_of_joining:"",employment_type:"full_time",basic_salary:"",manager_id:"",work_location:"",probation_end_date:""}),x({}),A(null),j(!1))},[C]);const _=(a,f)=>{S(g=>({...g,[a]:f})),n[a]&&x(g=>{const I={...g};return delete I[a],I})},se=()=>{const a={};if(r.department_id||(a.department_id="Department is required"),r.designation_id||(a.designation_id="Designation is required"),r.date_of_joining||(a.date_of_joining="Date of joining is required"),r.employment_type||(a.employment_type="Employment type is required"),r.basic_salary||(a.basic_salary="Basic salary is required"),r.work_location||(a.work_location="Work location is required"),r.probation_end_date&&r.date_of_joining){const f=new Date(r.date_of_joining);new Date(r.probation_end_date)<=f&&(a.probation_end_date="Probation end date must be after date of joining")}return x(a),Object.keys(a).length===0},ae=async()=>{if(!se())return;const a=new Promise(async(f,g)=>{c(!0);try{const I={user_ids:h.map(J=>J.id),...r,basic_salary:parseFloat(r.basic_salary)},U=await q.post(route("hrm.employees.onboard-bulk"),I);U.status===200&&(A(U.data),j(!0),f([U.data.summary?`Successfully onboarded ${U.data.summary.succeeded} of ${U.data.summary.total} users`:"Bulk onboarding completed"]),setTimeout(()=>{d&&d()},2e3))}catch(I){console.error("Bulk onboarding error:",I);const U=I.response?.data?.message||"Failed to onboard users";g([U])}finally{c(!1)}});K.promise(a,{loading:`Onboarding ${h.length} users...`,success:f=>f.join(", "),error:f=>Array.isArray(f)?f.join(", "):f})},V=()=>{v()};return e.jsx(de,{isOpen:C,onOpenChange:V,size:"3xl",scrollBehavior:"inside",classNames:{base:"bg-content1",header:"border-b border-divider",body:"py-6",footer:"border-t border-divider"},children:e.jsxs(ce,{children:[e.jsxs(me,{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-6 h-6 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Bulk Onboard Employees"})]}),e.jsxs("p",{className:"text-sm text-default-500 font-normal",children:["Onboard ",h.length," user",h.length!==1?"s":""," as employees"]})]}),e.jsx(pe,{children:F?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-default-100 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Onboarding Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:F.summary?.total||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:F.summary?.succeeded||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Succeeded"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-danger",children:F.summary?.failed||0}),e.jsx("p",{className:"text-xs text-default-500",children:"Failed"})]})]}),e.jsx(Ss,{value:F.summary?.succeeded/F.summary?.total*100,color:"success",className:"mt-3"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>j(!l),className:"flex items-center justify-between w-full p-3 bg-default-100 rounded-lg hover:bg-default-200 transition",children:[e.jsx("span",{className:"text-sm font-medium",children:"View Detailed Results"}),l?e.jsx(is,{className:"w-4 h-4"}):e.jsx(ns,{className:"w-4 h-4"})]}),l&&e.jsxs("div",{className:"mt-3 space-y-2 max-h-[300px] overflow-y-auto",children:[F.success?.map((a,f)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-success-50 dark:bg-success-100/10 rounded-lg",children:[e.jsx(Le,{className:"w-5 h-5 text-success flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:h.find(g=>g.id===a.user_id)?.name||`User ${a.user_id}`}),e.jsx("p",{className:"text-xs text-default-500",children:a.message})]})]},`success-${f}`)),F.failed?.map((a,f)=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-danger-50 dark:bg-danger-100/10 rounded-lg",children:[e.jsx(Ue,{className:"w-5 h-5 text-danger flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:h.find(g=>g.id===a.user_id)?.name||`User ${a.user_id}`}),e.jsx("p",{className:"text-xs text-danger-600 dark:text-danger-400",children:a.message})]})]},`failed-${f}`))]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 p-4 bg-default-100 rounded-lg",children:[e.jsxs("p",{className:"text-sm font-medium mb-3",children:["Selected Users (",h.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.slice(0,10).map(a=>e.jsxs("div",{className:"flex items-center gap-2 bg-content1 px-3 py-2 rounded-lg",children:[e.jsx(Ns,{src:a.avatar,name:a.name,size:"sm",className:"flex-shrink-0"}),e.jsx("span",{className:"text-sm truncate max-w-[150px]",children:a.name})]},a.id)),h.length>10&&e.jsxs(H,{color:"default",size:"sm",children:["+",h.length-10," more"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(z,{label:"Department",placeholder:"Select department",selectedKeys:r.department_id?[String(r.department_id)]:[],onSelectionChange:a=>_("department_id",Array.from(a)[0]||""),isInvalid:!!n.department_id,errorMessage:n.department_id,isRequired:!0,radius:u,startContent:e.jsx(ze,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-default-100"},children:P?.map(a=>e.jsx(N,{children:a.name},String(a.id)))}),e.jsx(z,{label:"Designation",placeholder:"Select designation",selectedKeys:r.designation_id?[String(r.designation_id)]:[],onSelectionChange:a=>_("designation_id",Array.from(a)[0]||""),isInvalid:!!n.designation_id,errorMessage:n.designation_id,isRequired:!0,isDisabled:!r.department_id,radius:u,classNames:{trigger:"bg-default-100"},children:R?.map(a=>e.jsx(N,{children:a.name},String(a.id)))}),e.jsx(B,{type:"date",label:"Date of Joining",placeholder:"Select date",value:r.date_of_joining,onValueChange:a=>_("date_of_joining",a),isInvalid:!!n.date_of_joining,errorMessage:n.date_of_joining,isRequired:!0,radius:u,startContent:e.jsx(ys,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}}),e.jsxs(z,{label:"Employment Type",placeholder:"Select type",selectedKeys:r.employment_type?[r.employment_type]:[],onSelectionChange:a=>_("employment_type",Array.from(a)[0]||""),isInvalid:!!n.employment_type,errorMessage:n.employment_type,isRequired:!0,radius:u,classNames:{trigger:"bg-default-100"},children:[e.jsx(N,{children:"Full Time"},"full_time"),e.jsx(N,{children:"Part Time"},"part_time"),e.jsx(N,{children:"Contract"},"contract"),e.jsx(N,{children:"Intern"},"intern")]}),e.jsx(B,{type:"number",label:"Basic Salary",placeholder:"Enter amount",value:r.basic_salary,onValueChange:a=>_("basic_salary",a),isInvalid:!!n.basic_salary,errorMessage:n.basic_salary,isRequired:!0,radius:u,startContent:e.jsx(_s,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}}),e.jsx(z,{label:"Manager",placeholder:"Select manager (optional)",selectedKeys:r.manager_id?[String(r.manager_id)]:[],onSelectionChange:a=>_("manager_id",Array.from(a)[0]||""),radius:u,classNames:{trigger:"bg-default-100"},children:o?.map(a=>e.jsx(N,{children:a.name},String(a.id)))}),e.jsx(B,{label:"Work Location",placeholder:"Enter work location",value:r.work_location,onValueChange:a=>_("work_location",a),isInvalid:!!n.work_location,errorMessage:n.work_location,isRequired:!0,radius:u,startContent:e.jsx(ws,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}}),e.jsx(B,{type:"date",label:"Probation End Date",placeholder:"Select date (optional)",value:r.probation_end_date,onValueChange:a=>_("probation_end_date",a),isInvalid:!!n.probation_end_date,errorMessage:n.probation_end_date,radius:u,startContent:e.jsx(be,{className:"w-4 h-4 text-default-400"}),classNames:{inputWrapper:"bg-default-100"}})]})]})}),e.jsxs(ue,{children:[e.jsx(b,{variant:"flat",onPress:V,radius:u,children:F?"Close":"Cancel"}),!F&&e.jsxs(b,{color:"primary",onPress:ae,isLoading:M,radius:u,children:["Onboard ",h.length," User",h.length!==1?"s":""]})]})]})})}const Bs=C=>({paginate:"users.paginate",stats:"users.stats",store:"users.store",update:"users.update",destroy:"users.destroy",toggleStatus:"users.toggleStatus",updateRoles:"users.updateRole",invite:"users.invite",export:"users.export",restore:"users.restore",lock:"users.lock",unlock:"users.unlock",forcePasswordReset:"users.forcePasswordReset",resendVerification:"users.resendVerification",devices:"devices.admin.list",devicesToggle:"devices.admin.toggle",devicesReset:"devices.admin.reset"}),qs=({title:C,roles:v,departments:h,designations:P,context:p="tenant"})=>{const o=t.useMemo(()=>Bs(),[p]),[d,r]=t.useState(!1),[S,R]=t.useState(!1),[w,n]=t.useState(!1),[x,M]=t.useState(!1),[c,F]=t.useState("lg"),A=()=>{if(typeof window>"u")return"lg";const i=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",m=parseInt(i);return m===0?"none":m<=4?"sm":m<=8?"md":m<=12?"lg":"xl"};t.useEffect(()=>{typeof window<"u"&&F(A())},[]),t.useEffect(()=>{const s=()=>{r(window.innerWidth<640),R(window.innerWidth<768),n(window.innerWidth>=1025),M(window.innerWidth>=641&&window.innerWidth<=1024)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const[l,j]=t.useState([]),[u,y]=t.useState(!0),[_,se]=t.useState(null),[ae,V]=t.useState(0),[a,f]=t.useState(1),[g,I]=t.useState(null),[U,J]=t.useState(null),[te,xe]=t.useState([]),[_e,fe]=t.useState(!1),{modules:Te}=ss().props,re=Te?.hrm||!1,[k,Ve]=t.useState({search:"",role:"all",status:"all",department:"all"}),[Ks,Hs]=t.useState(!1),[G,we]=t.useState("table"),[$,ge]=t.useState({currentPage:1,perPage:10,total:l.length}),[Ne,Js]=t.useState({}),[E,We]=t.useState({total_users:0,active_users:0,inactive_users:0,deleted_users:0,verified_users:0,unverified_users:0,locked_accounts:0,users_with_roles:0,users_without_roles:0,recent_users_30_days:0,active_percentage:0,verified_percentage:0,roles_coverage:0,total_roles:0}),L=t.useMemo(()=>({data:l,total:ae,current_page:$.currentPage,per_page:$.perPage,last_page:a}),[l,ae,$.currentPage,$.perPage,a]),D=t.useCallback(async()=>{try{const{data:s}=await q.get(route(o.stats));s.stats&&We(s.stats)}catch(s){console.error("Error fetching user stats:",s)}},[o.stats]),T=t.useCallback(async()=>{y(!0);try{const s=await q.get(route(o.paginate),{params:{page:$.currentPage,perPage:$.perPage,search:k.search||void 0,role:k.role!=="all"?k.role:void 0,status:k.status!=="all"?k.status:void 0,department:k.department!=="all"?k.department:void 0}});if(s.status===200){const{users:i}=s.data;i.data&&Array.isArray(i.data)?(j(i.data),i.meta?(V(i.meta.total||0),f(i.meta.last_page||1)):(V(i.total||i.data.length),f(i.last_page||1))):Array.isArray(i)?(j(i),V(i.length),f(1)):(console.error("Unexpected users data format:",i),j([]),V(0),f(1))}}catch(s){console.error("Error fetching users:",s),K.error("Failed to load users data"),j([])}finally{y(!1)}},[k,$.currentPage,$.perPage,o.paginate]);t.useEffect(()=>{T()},[T]),t.useEffect(()=>{D();const s=setInterval(D,6e4);return()=>clearInterval(s)},[D]);const Q=(s,i)=>{Ve(m=>({...m,[s]:i})),ge(m=>({...m,currentPage:1}))},Se=s=>{ge(i=>({...i,currentPage:s})),window.scrollTo({top:0,behavior:"smooth"})},Be=s=>{ge(i=>({...i,currentPage:1,perPage:s}))},W=t.useCallback((s,i=null)=>{I(s),se(i)},[]),X=t.useCallback(()=>{I(null),se(null)},[]),ie=t.useCallback(s=>{j(s)},[]),qe=t.useCallback(s=>{j(i=>i.map(m=>m.id===s.id?{...m,...s}:m))},[]),Ke=t.useCallback(s=>{j(i=>i.filter(m=>m.id!==s)),D()},[D]),Fe=t.useCallback((s,i)=>{j(m=>m.map(O=>O.id===s?{...O,active:i}:O)),D()},[D]),He=t.useCallback(s=>{J(s),I("onboard")},[]),Je=t.useCallback(s=>{T(),J(null),I(null)},[T]),Ge=t.useCallback((s,i)=>{j(m=>m.map(O=>O.id===s?{...O,roles:i}:O)),D()},[D]),Ce=(s,i="w-4 h-4")=>{const m=s?.toLowerCase()||"";return m.includes("mobile")||m.includes("android")||m.includes("iphone")?e.jsx(Ie,{className:`${i} text-primary`}):m.includes("tablet")||m.includes("ipad")?e.jsx(As,{className:`${i} text-secondary`}):e.jsx(Is,{className:`${i} text-default-500`})},Qe=s=>{const i=s?.toLowerCase()||"";return i.includes("mobile")||i.includes("android")||i.includes("iphone")?"Mobile":i.includes("tablet")||i.includes("ipad")?"Tablet":"Desktop"},Xe=({user:s,index:i})=>e.jsx(Z,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 h-full min-h-[320px]",style:{background:`linear-gradient(135deg, 
          color-mix(in srgb, var(--theme-content1) 90%, transparent) 20%, 
          color-mix(in srgb, var(--theme-content2) 80%, transparent) 80%)`,borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsxs(ee,{className:"p-3 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-3 pb-2 border-b border-white/10",children:[e.jsx(Es,{avatarProps:{radius:"md",src:s?.profile_image_url||s?.profile_image,size:"sm",fallback:e.jsx(ks,{className:"w-4 h-4"}),style:{borderColor:"var(--theme-primary)",borderWidth:"2px"}},name:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-foreground text-sm line-clamp-1",children:s.name}),e.jsxs("span",{className:"text-default-500 text-xs line-clamp-1",children:["ID: ",s.id]})]}),classNames:{wrapper:"flex-1 min-w-0",name:"text-sm font-semibold",description:"text-xs text-default-500"}}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{content:"Edit User",size:"sm",children:e.jsx(b,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-primary min-w-6 w-6 h-6",onPress:()=>W("edit",s),children:e.jsx(Rs,{className:"w-3 h-3"})})}),e.jsxs(Us,{placement:"bottom-end",children:[e.jsx(Ds,{children:e.jsx(b,{isIconOnly:!0,size:"sm",variant:"ghost",radius:c,isDisabled:Ne[s.id],className:"min-w-6 w-6 h-6",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)"},children:e.jsx(gs,{className:"w-3 h-3"})})}),e.jsx(zs,{"aria-label":"Device management actions",variant:"bordered",className:"min-w-[180px]",style:{background:"color-mix(in srgb, var(--theme-content1) 95%, transparent)",backdropFilter:"blur(16px)",borderColor:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(Ms,{startContent:e.jsx(Ie,{className:"w-3 h-3"}),onPress:()=>rs(o.devices,{userId:s.id}),className:"text-xs",children:"Device History"},"view-devices")})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(ne,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1 flex-1",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(Ps,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1",children:s.phone})]}),(s.department||s.department_id)&&e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(De,{className:"w-3 h-3 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 line-clamp-1",children:typeof s.department=="string"?s.department:"N/A"})]})]}),e.jsxs("div",{className:"mb-3 p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-content2) 40%, transparent)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-default-700",children:"Device Status"}),s.single_device_login&&s.active_device&&e.jsx(le,{content:e.jsxs("div",{className:"p-2 max-w-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ce(s.active_device.user_agent,"w-4 h-4"),e.jsx("span",{className:"font-medium text-xs",children:s.active_device.device_name||"Unknown Device"})]}),e.jsxs("div",{className:"text-xs text-default-500",children:[Qe(s.active_device.user_agent)," •",s.active_device.is_active?" Active":" Inactive"]})]}),size:"sm",children:e.jsx("div",{className:"cursor-help",children:Ce(s.active_device.user_agent,"w-4 h-4")})})]}),e.jsx(H,{size:"sm",variant:"flat",color:s.single_device_login?s.active_device?"warning":"success":"default",startContent:s.single_device_login?s.active_device?e.jsx(oe,{className:"w-3 h-3"}):e.jsx(cs,{className:"w-3 h-3"}):e.jsx(Ae,{className:"w-3 h-3"}),className:"text-xs",children:s.single_device_login?s.active_device?"Locked":"Free":"Disabled"})]}),e.jsxs("div",{className:"mt-auto space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-default-700",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{size:"sm",isSelected:s.active,onValueChange:m=>Fe(s.id,m),color:s.active?"success":"danger",classNames:{wrapper:"group-data-[selected=true]:bg-success",thumb:"group-data-[selected=true]:ml-4"}}),e.jsx("span",{className:`text-xs font-medium ${s.active?"text-success":"text-danger"}`,children:s.active?"Active":"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-default-700 mb-1 block",children:"Roles"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.roles&&s.roles.length>0?s.roles.slice(0,3).map((m,O)=>{const es=typeof m=="object"&&m!==null?m.name:m;return e.jsx(H,{size:"sm",variant:"flat",color:"secondary",className:"text-xs h-5",children:es},O)}):e.jsx(H,{size:"sm",variant:"bordered",color:"default",className:"text-xs h-5",children:"No Roles"}),s.roles&&s.roles.length>3&&e.jsxs(H,{size:"sm",variant:"bordered",color:"primary",className:"text-xs h-5",children:["+",s.roles.length-3]})]})]})]})]})}),Ye=t.useMemo(()=>[{title:"Total Users",value:E?.total_users||0,icon:e.jsx(je,{className:"w-5 h-5"}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"All registered users"},{title:"Active Users",value:E?.active_users||0,icon:e.jsx(Le,{className:"w-5 h-5"}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${E?.active_percentage||0}% of total`},{title:"Inactive Users",value:E?.inactive_users||0,icon:e.jsx(Ue,{className:"w-5 h-5"}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Deactivated accounts"},{title:"Email Verified",value:E?.verified_users||0,icon:e.jsx(Ae,{className:"w-5 h-5"}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:`${E?.verified_percentage||0}% verified`},{title:"Unverified",value:E?.unverified_users||0,icon:e.jsx(Ee,{className:"w-5 h-5"}),color:"text-yellow-400",iconBg:"bg-yellow-500/20",description:"Pending verification"},{title:"Locked Accounts",value:E?.locked_accounts||0,icon:e.jsx(oe,{className:"w-5 h-5"}),color:"text-red-400",iconBg:"bg-red-500/20",description:"Security locked"},{title:"With Roles",value:E?.users_with_roles||0,icon:e.jsx(ls,{className:"w-5 h-5"}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:`${E?.roles_coverage||0}% coverage`},{title:"New Users (30d)",value:E?.recent_users_30_days||0,icon:e.jsx(be,{className:"w-5 h-5"}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 days"}],[E]),he=p==="admin"?"Platform Administrators":"Users Management",Ze=p==="admin"?"Manage platform administrator accounts and access":"Manage user accounts, roles and permissions";return e.jsxs(e.Fragment,{children:[e.jsx(as,{title:C||he}),g==="add"&&e.jsx(Pe,{user:null,roles:v,open:g==="add",setUsers:ie,closeModal:X,editMode:!1,context:p}),g==="edit"&&_&&e.jsx(Pe,{user:_,roles:v,open:g==="edit",setUsers:ie,closeModal:X,editMode:!0,context:p}),g==="invite"&&p==="tenant"&&e.jsx(us,{roles:v,open:g==="invite",closeModal:X,onInviteSent:()=>{T()}}),g==="export"&&e.jsx(Ts,{open:g==="export",onClose:X,roles:v,departments:h,themeRadius:c}),g==="lock"&&_&&e.jsx(Vs,{open:g==="lock",onClose:X,user:_,onSuccess:s=>{ie(s),T()},themeRadius:c}),g==="onboard"&&U&&re&&e.jsx(bs,{open:g==="onboard",onClose:()=>{I(null),J(null)},user:U,departments:h||[],designations:P||[],managers:l.filter(s=>s.employee_id)||[],onSuccess:Je}),_e&&re&&e.jsx(Ws,{open:_e,onClose:()=>{fe(!1),xe([])},users:te,departments:h||[],designations:P||[],managers:l.filter(s=>s.employee_id)||[],onSuccess:()=>{T(),fe(!1),xe([])}}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":he,children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(ts.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(Z,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Me,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${w?"p-6":x?"p-4":"p-3"} w-full`,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[u?e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx(Y,{className:"w-12 h-12 rounded-xl"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(Y,{className:"w-64 h-6 rounded mb-2"}),e.jsx(Y,{className:"w-48 h-4 rounded"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                                ${w?"p-3":x?"p-2.5":"p-2"} 
                                rounded-xl flex items-center justify-center
                              `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(je,{className:`
                                  ${w?"w-8 h-8":x?"w-6 h-6":"w-5 h-5"}
                                `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                  ${w?"text-2xl":x?"text-xl":"text-lg"}
                                  font-bold text-foreground
                                  ${w?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:he}),e.jsx("p",{className:`
                                  ${w?"text-sm":"text-xs"} 
                                  text-default-500
                                  ${w?"":"truncate"}
                                `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:Ze})]})]}),u?e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(Y,{className:"w-24 h-8 rounded"}),e.jsx(Y,{className:"w-20 h-8 rounded"})]}):e.jsxs("div",{className:"flex flex-wrap gap-2 lg:gap-3",children:[e.jsx(b,{size:d?"sm":"md",color:"primary",startContent:e.jsx(Re,{className:"w-4 h-4"}),onPress:()=>W("add"),radius:c,style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Add":p==="admin"?"Add Admin":"Add User"}),p==="tenant"&&e.jsx(b,{size:d?"sm":"md",variant:"bordered",startContent:e.jsx(ne,{className:"w-4 h-4"}),onPress:()=>W("invite"),radius:c,style:{background:"color-mix(in srgb, var(--theme-secondary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-secondary) 30%, transparent)",color:"var(--theme-secondary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Invite":"Invite User"}),re&&te.length>0&&e.jsx(b,{size:d?"sm":"md",color:"success",startContent:e.jsx(ye,{className:"w-4 h-4"}),onPress:()=>fe(!0),radius:c,style:{fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Onboard":`Onboard Selected (${te.length})`}),e.jsx(b,{size:d?"sm":"md",variant:"bordered",startContent:e.jsx(ve,{className:"w-4 h-4"}),onPress:()=>W("export"),radius:c,style:{background:"color-mix(in srgb, var(--theme-primary) 10%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-primary) 30%, transparent)",color:"var(--theme-primary)",fontFamily:'var(--fontFamily, "Inter")'},className:"min-w-0",children:d?"Export":"Export Users"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx(B,{size:d?"sm":"md",placeholder:"Search users...",value:k.search,onValueChange:s=>Q("search",s),startContent:e.jsx(Fs,{className:"w-4 h-4 text-default-400"}),isClearable:!0,onClear:()=>Q("search",""),radius:c,classNames:{inputWrapper:"bg-default-100"},className:"flex-1"}),e.jsx(z,{size:d?"sm":"md",placeholder:"All Roles",selectedKeys:k.role!=="all"?[k.role]:[],onSelectionChange:s=>Q("role",Array.from(s)[0]||"all"),radius:c,classNames:{trigger:"bg-default-100"},className:"w-full md:w-48",children:v?.map(s=>e.jsx(N,{children:s.name||s},s.name||s))}),e.jsxs(z,{size:d?"sm":"md",placeholder:"All Status",selectedKeys:k.status!=="all"?[k.status]:[],onSelectionChange:s=>Q("status",Array.from(s)[0]||"all"),radius:c,classNames:{trigger:"bg-default-100"},className:"w-full md:w-40",children:[e.jsx(N,{children:"Active"},"active"),e.jsx(N,{children:"Inactive"},"inactive")]}),p==="tenant"&&h&&h.length>0&&e.jsx(z,{size:d?"sm":"md",placeholder:"All Departments",selectedKeys:k.department!=="all"?[k.department]:[],onSelectionChange:s=>Q("department",Array.from(s)[0]||"all"),radius:c,classNames:{trigger:"bg-default-100"},className:"w-full md:w-48",children:h?.map(s=>e.jsx(N,{children:s.name},String(s.id)))}),e.jsxs(Cs,{size:d?"sm":"md",radius:c,children:[e.jsx(b,{isIconOnly:!0,variant:G==="table"?"solid":"bordered",color:G==="table"?"primary":"default",onPress:()=>we("table"),children:e.jsx(os,{className:"w-4 h-4"})}),e.jsx(b,{isIconOnly:!0,variant:G==="grid"?"solid":"bordered",color:G==="grid"?"primary":"default",onPress:()=>we("grid"),children:e.jsx(ds,{className:"w-4 h-4"})})]})]})]})})}),e.jsxs(ee,{className:"p-6",children:[e.jsx(ps,{stats:Ye,className:"mb-6",isLoading:u}),p==="tenant"&&e.jsx(Ls,{className:"mb-6",onInvitationAction:()=>{T(),D()}}),e.jsx("div",{className:"overflow-hidden",children:u?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx($e,{size:"lg"})}):G==="table"?e.jsx(xs,{allUsers:L.data,roles:v,setUsers:ie,isMobile:d,isTablet:S,pagination:$,onPageChange:Se,onRowsPerPageChange:Be,totalUsers:L.total,loading:u,onEdit:(s,i)=>{W(i==="lock"?"lock":"edit",s)},updateUserOptimized:qe,deleteUserOptimized:Ke,toggleUserStatusOptimized:Fe,updateUserRolesOptimized:Ge,deviceActions:Ne,context:p,onOnboardEmployee:He,hrmModuleInstalled:re,selectedUsers:te,onSelectionChange:xe}):e.jsxs("div",{children:[L.data&&L.data.length>0?e.jsx("div",{className:`grid gap-4 ${d?"grid-cols-1":S?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:L.data.map((s,i)=>e.jsx(Xe,{user:s,index:i},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(je,{className:"w-16 h-16 mx-auto text-default-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No users found"}),e.jsx("p",{className:"text-default-500 mb-4",children:"Try adjusting your search criteria or filters"}),e.jsx(b,{color:"primary",startContent:e.jsx(Re,{className:"w-4 h-4"}),onPress:()=>W("add"),children:p==="admin"?"Add First Admin":"Add First User"})]}),L.data&&L.data.length>0&&e.jsx("div",{className:"flex justify-center mt-6 border-t pt-4",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsx($s,{total:Math.ceil(L.total/$.perPage),initialPage:$.currentPage,page:$.currentPage,onChange:Se,size:d?"sm":"md",variant:"bordered",showControls:!0,radius:c,style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})})]})]})})})})})]})};qs.layout=C=>e.jsx(ms,{children:C});export{qs as default};
