import{aM as Q,aN as U,r as $,aO as z,ab as E,R as F,D as x,aP as m,aQ as C,aR as X,aS as Y,aT as Z,aU as ee,ae as te,aC as re,av as ne}from"./app-BrpQ0UwM.js";import{$ as oe}from"./index-DRhHtkcR.js";class ae{get currentNode(){return this._currentNode}set currentNode(e){if(!U(this.root,e))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const t=[];let n=e,o=e;for(this._currentNode=e;n&&n!==this.root;)if(n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const l=n,i=this._doc.createTreeWalker(l,this.whatToShow,{acceptNode:this._acceptNode});t.push(i),i.currentNode=o,this._currentSetFor.add(i),n=o=l.host}else n=n.parentNode;const a=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});t.push(a),a.currentNode=o,this._currentSetFor.add(a),this._walkerStack=t}get doc(){return this._doc}firstChild(){let e=this.currentNode,t=this.nextNode();return U(e,t)?(t&&(this.currentNode=t),t):(this.currentNode=e,null)}lastChild(){let t=this._walkerStack[0].lastChild();return t&&(this.currentNode=t),t}nextNode(){const e=this._walkerStack[0].nextNode();if(e){if(e.shadowRoot){var t;let o;if(typeof this.filter=="function"?o=this.filter(e):!((t=this.filter)===null||t===void 0)&&t.acceptNode&&(o=this.filter.acceptNode(e)),o===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let a=this.nextNode();return a&&(this.currentNode=a),a}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let n=this.nextNode();return n&&(this.currentNode=n),n}else return null}previousNode(){const e=this._walkerStack[0];if(e.currentNode===e.root){if(this._currentSetFor.has(e))if(this._currentSetFor.delete(e),this._walkerStack.length>1){this._walkerStack.shift();let o=this.previousNode();return o&&(this.currentNode=o),o}else return null;return null}const t=e.previousNode();if(t){if(t.shadowRoot){var n;let a;if(typeof this.filter=="function"?a=this.filter(t):!((n=this.filter)===null||n===void 0)&&n.acceptNode&&(a=this.filter.acceptNode(t)),a===NodeFilter.FILTER_ACCEPT)return t&&(this.currentNode=t),t;let l=this.lastChild();return l&&(this.currentNode=l),l}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let o=this.previousNode();return o&&(this.currentNode=o),o}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(e,t,n,o){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=l=>{if(l.nodeType===Node.ELEMENT_NODE){const s=l.shadowRoot;if(s){const u=this._doc.createTreeWalker(s,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(u),NodeFilter.FILTER_ACCEPT}else{var i;if(typeof this.filter=="function")return this.filter(l);if(!((i=this.filter)===null||i===void 0)&&i.acceptNode)return this.filter.acceptNode(l);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=e,this.root=t,this.filter=o??null,this.whatToShow=n??NodeFilter.SHOW_ALL,this._currentNode=t,this._walkerStack.unshift(e.createTreeWalker(t,n,this._acceptNode));const a=t.shadowRoot;if(a){const l=this._doc.createTreeWalker(a,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(l)}}}function ie(r,e,t,n){return Q()?new ae(r,e,t,n):r.createTreeWalker(e,t,n)}function le(r){let{ref:e,onInteractOutside:t,isDisabled:n,onInteractOutsideStart:o}=r,a=$.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),l=z(s=>{t&&q(s,e)&&(o&&o(s),a.current.isPointerDown=!0)}),i=z(s=>{t&&t(s)});$.useEffect(()=>{let s=a.current;if(n)return;const u=e.current,d=E(u);if(typeof PointerEvent<"u"){let c=f=>{s.isPointerDown&&q(f,e)&&i(f),s.isPointerDown=!1};return d.addEventListener("pointerdown",l,!0),d.addEventListener("click",c,!0),()=>{d.removeEventListener("pointerdown",l,!0),d.removeEventListener("click",c,!0)}}},[e,n,l,i])}function q(r,e){if(r.button>0)return!1;if(r.target){const t=r.target.ownerDocument;if(!t||!t.documentElement.contains(r.target)||r.target.closest("[data-react-aria-top-layer]"))return!1}return e.current?!r.composedPath().includes(e.current):!1}const B=F.createContext(null),A="react-aria-focus-scope-restore";let v=null;function Ne(r){let{children:e,contain:t,restoreFocus:n,autoFocus:o}=r,a=$.useRef(null),l=$.useRef(null),i=$.useRef([]),{parentNode:s}=$.useContext(B)||{},u=$.useMemo(()=>new M({scopeRef:i}),[i]);x(()=>{let f=s||N.root;if(N.getTreeNode(f.scopeRef)&&v&&!L(v,f.scopeRef)){let b=N.getTreeNode(v);b&&(f=b)}f.addChild(u),N.addNode(u)},[u,s]),x(()=>{let f=N.getTreeNode(i);f&&(f.contain=!!t)},[t]),x(()=>{var f;let b=(f=a.current)===null||f===void 0?void 0:f.nextSibling,h=[],y=p=>p.stopPropagation();for(;b&&b!==l.current;)h.push(b),b.addEventListener(A,y),b=b.nextSibling;return i.current=h,()=>{for(let p of h)p.removeEventListener(A,y)}},[e]),be(i,n,t),se(i,t),pe(i,n,t),fe(i,o),$.useEffect(()=>{const f=m(E(i.current?i.current[0]:void 0));let b=null;if(g(f,i.current)){for(let h of N.traverse())h.scopeRef&&g(f,h.scopeRef.current)&&(b=h);b===N.getTreeNode(i)&&(v=b.scopeRef)}},[i]),x(()=>()=>{var f,b,h;let y=(h=(b=N.getTreeNode(i))===null||b===void 0||(f=b.parent)===null||f===void 0?void 0:f.scopeRef)!==null&&h!==void 0?h:null;(i===v||L(i,v))&&(!y||N.getTreeNode(y))&&(v=y),N.removeTreeNode(i)},[i]);let d=$.useMemo(()=>ue(i),[]),c=$.useMemo(()=>({focusManager:d,parentNode:u}),[u,d]);return F.createElement(B.Provider,{value:c},F.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:a}),e,F.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:l}))}function ue(r){return{focusNext(e={}){let t=r.current,{from:n,tabbable:o,wrap:a,accept:l}=e;var i;let s=n||m(E((i=t[0])!==null&&i!==void 0?i:void 0)),u=t[0].previousElementSibling,d=R(t),c=T(d,{tabbable:o,accept:l},t);c.currentNode=g(s,t)?s:u;let f=c.nextNode();return!f&&a&&(c.currentNode=u,f=c.nextNode()),f&&w(f,!0),f},focusPrevious(e={}){let t=r.current,{from:n,tabbable:o,wrap:a,accept:l}=e;var i;let s=n||m(E((i=t[0])!==null&&i!==void 0?i:void 0)),u=t[t.length-1].nextElementSibling,d=R(t),c=T(d,{tabbable:o,accept:l},t);c.currentNode=g(s,t)?s:u;let f=c.previousNode();return!f&&a&&(c.currentNode=u,f=c.previousNode()),f&&w(f,!0),f},focusFirst(e={}){let t=r.current,{tabbable:n,accept:o}=e,a=R(t),l=T(a,{tabbable:n,accept:o},t);l.currentNode=t[0].previousElementSibling;let i=l.nextNode();return i&&w(i,!0),i},focusLast(e={}){let t=r.current,{tabbable:n,accept:o}=e,a=R(t),l=T(a,{tabbable:n,accept:o},t);l.currentNode=t[t.length-1].nextElementSibling;let i=l.previousNode();return i&&w(i,!0),i}}}function R(r){return r[0].parentElement}function _(r){let e=N.getTreeNode(v);for(;e&&e.scopeRef!==r;){if(e.contain)return!1;e=e.parent}return!0}function ce(r){if(r.checked)return!0;let e=[];if(!r.form)e=[...E(r).querySelectorAll(`input[type="radio"][name="${CSS.escape(r.name)}"]`)].filter(a=>!a.form);else{var t,n;let a=(n=r.form)===null||n===void 0||(t=n.elements)===null||t===void 0?void 0:t.namedItem(r.name);e=[...a??[]]}return e?!e.some(a=>a.checked):!1}function se(r,e){let t=$.useRef(void 0),n=$.useRef(void 0);x(()=>{let o=r.current;if(!e){n.current&&(cancelAnimationFrame(n.current),n.current=void 0);return}const a=E(o?o[0]:void 0);let l=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!_(r)||u.isComposing)return;let d=m(a),c=r.current;if(!c||!g(d,c))return;let f=R(c),b=T(f,{tabbable:!0},c);if(!d)return;b.currentNode=d;let h=u.shiftKey?b.previousNode():b.nextNode();h||(b.currentNode=u.shiftKey?c[c.length-1].nextElementSibling:c[0].previousElementSibling,h=u.shiftKey?b.previousNode():b.nextNode()),u.preventDefault(),h&&w(h,!0)},i=u=>{(!v||L(v,r))&&g(C(u),r.current)?(v=r,t.current=C(u)):_(r)&&!S(C(u),r)?t.current?t.current.focus():v&&v.current&&O(v.current):_(r)&&(t.current=C(u))},s=u=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{let d=re(),c=(d==="virtual"||d===null)&&X()&&Y(),f=m(a);if(!c&&f&&_(r)&&!S(f,r)){v=r;let h=C(u);if(h&&h.isConnected){var b;t.current=h,(b=t.current)===null||b===void 0||b.focus()}else v.current&&O(v.current)}})};return a.addEventListener("keydown",l,!1),a.addEventListener("focusin",i,!1),o?.forEach(u=>u.addEventListener("focusin",i,!1)),o?.forEach(u=>u.addEventListener("focusout",s,!1)),()=>{a.removeEventListener("keydown",l,!1),a.removeEventListener("focusin",i,!1),o?.forEach(u=>u.removeEventListener("focusin",i,!1)),o?.forEach(u=>u.removeEventListener("focusout",s,!1))}},[r,e]),x(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function G(r){return S(r)}function g(r,e){return!r||!e?!1:e.some(t=>t.contains(r))}function S(r,e=null){if(r instanceof Element&&r.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:t}of N.traverse(N.getTreeNode(e)))if(t&&g(r,t.current))return!0;return!1}function de(r){return S(r,v)}function L(r,e){var t;let n=(t=N.getTreeNode(e))===null||t===void 0?void 0:t.parent;for(;n;){if(n.scopeRef===r)return!0;n=n.parent}return!1}function w(r,e=!1){if(r!=null&&!e)try{te(r)}catch{}else if(r!=null)try{r.focus()}catch{}}function j(r,e=!0){let t=r[0].previousElementSibling,n=R(r),o=T(n,{tabbable:e},r);o.currentNode=t;let a=o.nextNode();return e&&!a&&(n=R(r),o=T(n,{tabbable:!1},r),o.currentNode=t,a=o.nextNode()),a}function O(r,e=!0){w(j(r,e))}function fe(r,e){const t=F.useRef(e);$.useEffect(()=>{if(t.current){v=r;const n=E(r.current?r.current[0]:void 0);!g(m(n),v.current)&&r.current&&O(r.current)}t.current=!1},[r])}function be(r,e,t){x(()=>{if(e||t)return;let n=r.current;const o=E(n?n[0]:void 0);let a=l=>{let i=C(l);g(i,r.current)?v=r:G(i)||(v=null)};return o.addEventListener("focusin",a,!1),n?.forEach(l=>l.addEventListener("focusin",a,!1)),()=>{o.removeEventListener("focusin",a,!1),n?.forEach(l=>l.removeEventListener("focusin",a,!1))}},[r,e,t])}function H(r){let e=N.getTreeNode(v);for(;e&&e.scopeRef!==r;){if(e.nodeToRestore)return!1;e=e.parent}return e?.scopeRef===r}function pe(r,e,t){const n=$.useRef(typeof document<"u"?m(E(r.current?r.current[0]:void 0)):null);x(()=>{let o=r.current;const a=E(o?o[0]:void 0);if(!e||t)return;let l=()=>{(!v||L(v,r))&&g(m(a),r.current)&&(v=r)};return a.addEventListener("focusin",l,!1),o?.forEach(i=>i.addEventListener("focusin",l,!1)),()=>{a.removeEventListener("focusin",l,!1),o?.forEach(i=>i.removeEventListener("focusin",l,!1))}},[r,t]),x(()=>{const o=E(r.current?r.current[0]:void 0);if(!e)return;let a=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!_(r)||l.isComposing)return;let i=o.activeElement;if(!S(i,r)||!H(r))return;let s=N.getTreeNode(r);if(!s)return;let u=s.nodeToRestore,d=T(o.body,{tabbable:!0});d.currentNode=i;let c=l.shiftKey?d.previousNode():d.nextNode();if((!u||!u.isConnected||u===o.body)&&(u=void 0,s.nodeToRestore=void 0),(!c||!S(c,r))&&u){d.currentNode=u;do c=l.shiftKey?d.previousNode():d.nextNode();while(S(c,r));l.preventDefault(),l.stopPropagation(),c?w(c,!0):G(u)?w(u,!0):i.blur()}};return t||o.addEventListener("keydown",a,!0),()=>{t||o.removeEventListener("keydown",a,!0)}},[r,e,t]),x(()=>{const o=E(r.current?r.current[0]:void 0);if(!e)return;let a=N.getTreeNode(r);if(a){var l;return a.nodeToRestore=(l=n.current)!==null&&l!==void 0?l:void 0,()=>{let i=N.getTreeNode(r);if(!i)return;let s=i.nodeToRestore,u=m(o);if(e&&s&&(u&&S(u,r)||u===o.body&&H(r))){let d=N.clone();requestAnimationFrame(()=>{if(o.activeElement===o.body){let c=d.getTreeNode(r);for(;c;){if(c.nodeToRestore&&c.nodeToRestore.isConnected){J(c.nodeToRestore);return}c=c.parent}for(c=d.getTreeNode(r);c;){if(c.scopeRef&&c.scopeRef.current&&N.getTreeNode(c.scopeRef)){let f=j(c.scopeRef.current,!0);J(f);return}c=c.parent}}})}}}},[r,e])}function J(r){r.dispatchEvent(new CustomEvent(A,{bubbles:!0,cancelable:!0}))&&w(r)}function T(r,e,t){let n=e?.tabbable?Z:ee,o=r?.nodeType===Node.ELEMENT_NODE?r:null,a=E(o),l=ie(a,r||a,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var s;return!(e==null||(s=e.from)===null||s===void 0)&&s.contains(i)||e?.tabbable&&i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(!ce(i)||l.currentNode.tagName==="INPUT"&&l.currentNode.type==="radio"&&l.currentNode.name===i.name)?NodeFilter.FILTER_REJECT:n(i)&&(!t||g(i,t))&&(!e?.accept||e.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(l.currentNode=e.from),l}function $e(r,e={}){return{focusNext(t={}){let n=r.current;if(!n)return null;let{from:o,tabbable:a=e.tabbable,wrap:l=e.wrap,accept:i=e.accept}=t,s=o||m(E(n)),u=T(n,{tabbable:a,accept:i});n.contains(s)&&(u.currentNode=s);let d=u.nextNode();return!d&&l&&(u.currentNode=n,d=u.nextNode()),d&&w(d,!0),d},focusPrevious(t=e){let n=r.current;if(!n)return null;let{from:o,tabbable:a=e.tabbable,wrap:l=e.wrap,accept:i=e.accept}=t,s=o||m(E(n)),u=T(n,{tabbable:a,accept:i});if(n.contains(s))u.currentNode=s;else{let c=P(u);return c&&w(c,!0),c??null}let d=u.previousNode();if(!d&&l){u.currentNode=n;let c=P(u);if(!c)return null;d=c}return d&&w(d,!0),d??null},focusFirst(t=e){let n=r.current;if(!n)return null;let{tabbable:o=e.tabbable,accept:a=e.accept}=t,i=T(n,{tabbable:o,accept:a}).nextNode();return i&&w(i,!0),i},focusLast(t=e){let n=r.current;if(!n)return null;let{tabbable:o=e.tabbable,accept:a=e.accept}=t,l=T(n,{tabbable:o,accept:a}),i=P(l);return i&&w(i,!0),i??null}}}function P(r){let e,t;do t=r.lastChild(),t&&(e=t);while(t);return e}class K{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,n){let o=this.fastMap.get(t??null);if(!o)return;let a=new M({scopeRef:e});o.addChild(a),a.parent=o,this.fastMap.set(e,a),n&&(a.nodeToRestore=n)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let t=this.fastMap.get(e);if(!t)return;let n=t.parent;for(let a of this.traverse())a!==t&&t.nodeToRestore&&a.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&g(a.nodeToRestore,t.scopeRef.current)&&(a.nodeToRestore=t.nodeToRestore);let o=t.children;n&&(n.removeChild(t),o.size>0&&o.forEach(a=>n&&n.addChild(a))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e;let t=new K;var n;for(let o of this.traverse())t.addTreeNode(o.scopeRef,(n=(e=o.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&n!==void 0?n:null,o.nodeToRestore);return t}constructor(){this.fastMap=new Map,this.root=new M({scopeRef:null}),this.fastMap.set(null,this.root)}}class M{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let N=new K;var V={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},Ee={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:V.ease}},exit:{opacity:0,transition:{duration:.3,ease:V.ease}}},collapse:{enter:{opacity:1,height:"auto",transition:{height:{type:"spring",bounce:0,duration:.3},opacity:{easings:"ease",duration:.4}}},exit:{opacity:0,height:0,transition:{easings:"ease",duration:.3}}}};function we(r){let[e,t]=oe(r.isOpen,r.defaultOpen||!1,r.onOpenChange);const n=$.useCallback(()=>{t(!0)},[t]),o=$.useCallback(()=>{t(!1)},[t]),a=$.useCallback(()=>{t(!e)},[t,e]);return{isOpen:e,setOpen:t,open:n,close:o,toggle:a}}var k=[];function Te(r,e){const{disableOutsideEvents:t=!0,isDismissable:n=!1,isKeyboardDismissDisabled:o=!1,isOpen:a,onClose:l,shouldCloseOnBlur:i,shouldCloseOnInteractOutside:s}=r;$.useEffect(()=>{if(a&&!k.includes(e))return k.push(e),()=>{let p=k.indexOf(e);p>=0&&k.splice(p,1)}},[a,e]);const u=()=>{k[k.length-1]===e&&l&&l()},d=p=>{(!s||s(p.target))&&(k[k.length-1]===e&&t&&(p.stopPropagation(),p.preventDefault()),y(e)!=="pressEnd"&&u())},c=p=>{(!s||s(p.target))&&(k[k.length-1]===e&&t&&(p.stopPropagation(),p.preventDefault()),u())},f=p=>{p.key==="Escape"&&!o&&!p.nativeEvent.isComposing&&(p.stopPropagation(),p.preventDefault(),u())};le({isDisabled:!(n&&a),onInteractOutside:n&&a?c:void 0,onInteractOutsideStart:d,ref:e});const{focusWithinProps:b}=ne({isDisabled:!i,onBlurWithin:p=>{!p.relatedTarget||de(p.relatedTarget)||(!s||s(p.relatedTarget))&&u()}}),h=p=>{p.target===p.currentTarget&&p.preventDefault()};function y(p){const D=p.current;if(!D)return"unknown";const I=(D.getAttribute("role")||"").toLowerCase(),W=D.getAttribute("aria-modal");return(I==="dialog"||I==="alertdialog")&&(W===null||W.toLowerCase()==="true")?"pressEnd":["listbox","menu","tree","grid","combobox"].includes(I)?"pressStart":"unknown"}return{overlayProps:{onKeyDown:f,...b},underlayProps:{onPointerDown:h}}}export{T as $,Ee as T,we as a,V as b,Ne as c,$e as d,Te as u};
