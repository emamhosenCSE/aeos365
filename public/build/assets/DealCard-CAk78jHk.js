import{r as y,j as e,m as j,c as b,d as w,e as N,F as _}from"./app-B1idACz3.js";import{e as v,C as D}from"./sortable.esm-Bn_UlmTt.js";import{F}from"./UserIcon-1qA6iUQn.js";import{F as $}from"./CurrencyDollarIcon-nhXxeFAs.js";import{F as S}from"./CalendarDaysIcon-CPIWRTu0.js";import{t as a}from"./chunk-AUA5GDXN-Dy7XAS6o.js";import{a as R}from"./chunk-CV4BWJDJ-BFly1wX0.js";import"./app-BmhO9GrS.js";import"./index-BvG5LGgQ.js";import"./index-BvevyAVm.js";import"./chunk-WQVQ7P2I-BDe9YmDI.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BFW_lSqD.js";import"./index-CaNeU5V8.js";const m={low:{color:"default",label:"Low"},medium:{color:"primary",label:"Medium"},high:{color:"warning",label:"High"},urgent:{color:"danger",label:"Urgent"}},J=y.memo(function({deal:t,isDragging:U=!1,formatCurrency:n}){const{attributes:d,listeners:x,setNodeRef:u,transform:f,transition:p,isDragging:o}=v({id:t.id,data:{type:"deal",deal:t}}),g={transform:D.Transform.toString(f),transition:p,opacity:o?.5:1,cursor:"grab"},c=t.is_rotting,i=t.priority||"medium",h=r=>n?n(r):new Intl.NumberFormat("en-US",{style:"currency",currency:t.currency||"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),l=r=>r?new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"}):null,s=t.expected_close_date?Math.ceil((new Date(t.expected_close_date)-new Date)/(1e3*60*60*24)):null;return e.jsx(j.div,{ref:u,style:g,...d,...x,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"touch-none",children:e.jsx(b,{className:`
                    w-full mb-2 transition-all duration-200 
                    hover:shadow-md hover:scale-[1.02]
                    ${c?"ring-2 ring-warning-400 bg-warning-50/30 dark:bg-warning-900/20":""}
                    ${o?"shadow-xl ring-2 ring-primary-500":"shadow-sm"}
                `,isPressable:!0,children:e.jsxs(w,{className:"p-3 gap-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"text-sm font-semibold text-foreground line-clamp-2 flex-1",children:t.title}),e.jsx(N,{size:"sm",variant:"flat",color:m[i]?.color||"default",className:"text-tiny shrink-0",children:m[i]?.label||i})]}),t.customer&&e.jsxs("div",{className:"flex items-center gap-2 text-default-500",children:[e.jsx(F,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"text-xs truncate",children:t.customer.name})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx($,{className:"w-4 h-4 text-success-500"}),e.jsx("span",{className:"text-sm font-bold text-success-600 dark:text-success-400",children:h(t.value)})]}),e.jsx(a,{content:`Win probability: ${t.probability}%`,children:e.jsx("div",{className:"px-1.5 py-0.5 rounded-md bg-default-100 dark:bg-default-50/10",children:e.jsxs("span",{className:"text-tiny font-medium text-default-600",children:[t.probability,"%"]})})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1 pt-2 border-t border-divider",children:[t.expected_close_date&&e.jsx(a,{content:`Expected close: ${l(t.expected_close_date)}`,children:e.jsxs("div",{className:`flex items-center gap-1 ${s!==null&&s<0?"text-danger-500":s!==null&&s<=7?"text-warning-500":"text-default-400"}`,children:[e.jsx(S,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs",children:s!==null&&s<0?`${Math.abs(s)}d overdue`:l(t.expected_close_date)})]})}),c&&e.jsx(a,{content:"Deal is rotting - no activity recently",children:e.jsxs("div",{className:"flex items-center gap-1 text-warning-500",children:[e.jsx(_,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs",children:"Rotting"})]})}),t.assigned_to_user&&e.jsx(a,{content:`Assigned to: ${t.assigned_to_user.name}`,children:e.jsx(R,{src:t.assigned_to_user.avatar,name:t.assigned_to_user.name,size:"sm",className:"w-6 h-6"})})]}),e.jsx("div",{className:"text-tiny text-default-400 mt-1",children:t.deal_number})]})})})});export{J as default};
