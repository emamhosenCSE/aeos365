import{r as T,f as z,j as e,z as U,m,u as q,o as K,H as O,c as v,d as $,e as L,L as V,b as G}from"./app-B1idACz3.js";import{A as J}from"./AuthCard-B1fXR9gP.js";import{R as Q}from"./RegisterLayout-nh_GC2aT.js";import{F as X,P as Y}from"./ProgressSteps-npLoq7WU.js";import{u as Z}from"./useBranding-BpzGYNdv.js";import{s as d}from"./toastUtils-CW5B8m6C.js";import"./app-BmhO9GrS.js";import"./index-B22Xm-65.js";/* empty css                      */import"./MaintenanceModeBanner-BuwtjklV.js";import"./chunk-AUA5GDXN-Dy7XAS6o.js";import"./index-BvG5LGgQ.js";import"./index-BvevyAVm.js";import"./chunk-WQVQ7P2I-BDe9YmDI.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BFW_lSqD.js";import"./ArrowLeftIcon-B39h7gxR.js";const C=T.forwardRef(({label:p,description:x,error:n,checked:i=!1,className:h="",...o},k)=>{const{themeSettings:j}=z(),u=j?.mode==="dark",a={palette:{primary:{main:"#3b82f6",contrastText:"#ffffff"},secondary:{main:"#64748b"},error:{main:"#ef4444"},text:{primary:u?"#ffffff":"#0f172a",secondary:u?"#94a3b8":"#475569"}},mode:u?"dark":"light"};return e.jsxs("div",{className:U("space-y-1",h),children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:k,type:"checkbox",checked:i,className:"sr-only",...o}),e.jsxs(m.div,{className:"w-5 h-5 rounded-lg cursor-pointer transition-all duration-300 flex items-center justify-center relative overflow-hidden",style:{background:i?`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.secondary.main})`:a.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px) saturate(180%)",border:i?`2px solid ${a.palette.primary.main}`:n?`2px solid ${a.palette.error.main}40`:`2px solid ${a.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}`,boxShadow:i?`0 2px 8px ${a.palette.primary.main}30, 0 0 0 3px ${a.palette.primary.main}15`:"0 2px 4px rgba(0, 0, 0, 0.05)"},whileHover:{scale:1.05,boxShadow:i?`0 4px 12px ${a.palette.primary.main}40, 0 0 0 4px ${a.palette.primary.main}20`:`0 4px 8px rgba(0, 0, 0, 0.1), 0 0 0 3px ${a.palette.primary.main}15`},whileTap:{scale:.95},onClick:()=>{o.onChange&&o.onChange({target:{checked:!i}})},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsx(m.div,{initial:!1,animate:{scale:i?1:0,opacity:i?1:0,rotate:i?0:180},transition:{duration:.3,type:"spring",stiffness:500,damping:30},children:e.jsx(X,{className:"w-3 h-3",style:{color:a.palette.primary.contrastText}})}),i&&e.jsx(m.div,{className:"absolute inset-0 bg-linear-to-r from-transparent via-white/30 to-transparent rounded-lg",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1,repeat:1/0,repeatDelay:2,ease:"easeInOut"}})]})]})}),(p||x)&&e.jsxs(m.div,{className:"ml-3",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},children:[p&&e.jsx("label",{className:"text-sm font-medium cursor-pointer transition-colors duration-200",style:{color:a.palette.text.primary},onClick:()=>{o.onChange&&o.onChange({target:{checked:!i}})},children:p}),x&&e.jsx(m.p,{className:"text-sm mt-1",style:{color:a.palette.text.secondary},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.2},children:x})]})]}),n&&e.jsxs(m.p,{className:"text-sm ml-8 flex items-center gap-2",style:{color:a.palette.error.main},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n]})]})});C.displayName="Checkbox";function ye({steps:p=[],currentStep:x,savedData:n={},trialDays:i=14,baseDomain:h="platform.test",plans:o=[],modules:k=[],modulePricing:j={}}){const u=n.account??{},a=n.details??{},P=n.admin??{},b=n.plan??{},c=o.find(t=>t.id===b.plan_id),M=Array.isArray(b.modules)?b.modules:[],_=k.filter(t=>M.includes(t.id)),y=b.billing_cycle==="yearly",R=y?j.yearly??200:j.monthly??20;let N=0,r=[],w="";if(c){const t=y?c.yearly_price||0:c.monthly_price||0;N=parseFloat(t)||0,r=Array.isArray(c.modules)?c.modules.map(l=>l.name||l):[],w="plan",console.log("Plan pricing:",{selectedPlan:c,isAnnual:y,planPrice:t,estimate:N})}else _.length>0&&(N=_.length*R,r=_.map(t=>t.name),w="custom");const{data:A,setData:S,post:F,processing:I,errors:W}=q({accept_terms:!1,notify_updates:!0}),{siteName:E}=Z(),{flash:f}=K().props;T.useEffect(()=>{f?.error&&d.error(f.error),f?.success&&d.success(f.success)},[f]);const B=t=>{t.preventDefault(),F(route("platform.register.trial.activate"),{onError:l=>{console.error("Activation failed:",l),l.subdomain?d.error(l.subdomain):l.email?d.error(l.email):l.error?d.error(l.error):d.error("Please check the form and try again.")}})},{themeSettings:H}=z(),g=H?.mode==="dark",s={heading:g?"text-white":"text-slate-900",copy:g?"text-slate-300":"text-slate-600",badge:g?"text-slate-300":"text-slate-500",surface:g?"bg-white/5 border border-white/10":"bg-white border border-slate-200 shadow-sm",link:g?"text-white/80 hover:text-white":"text-slate-600 hover:text-slate-900"};return e.jsxs(Q,{children:[e.jsx(O,{title:`Review & launch - ${E}`}),e.jsxs("section",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 sm:py-12 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3 text-center",children:[e.jsx("p",{className:`text-[10px] sm:text-sm uppercase tracking-[0.3em] ${s.badge}`,children:"Step 5"}),e.jsx("h1",{className:`text-2xl sm:text-4xl font-semibold ${s.heading} px-2`,children:"Review and start your trial."}),e.jsxs("p",{className:`${s.copy} text-sm sm:text-base px-2`,children:["Payments go live later. Today we just launch your ",i,"-day sandbox and wire up the modules you picked."]})]}),e.jsx(Y,{steps:p,currentStep:x}),e.jsx(J,{children:e.jsxs("form",{onSubmit:B,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid gap-3 sm:gap-5 md:grid-cols-2",children:[e.jsx(v,{className:`${s.surface} text-xs sm:text-sm`,children:e.jsxs($,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`uppercase tracking-[0.3em] text-[10px] sm:text-xs ${s.badge}`,children:"Workspace"}),e.jsx(L,{size:"sm",color:"secondary",variant:"flat",className:"text-[10px] sm:text-xs",children:u.type??"company"})]}),e.jsx("p",{className:`text-base sm:text-lg font-semibold ${s.heading} break-words`,children:a.name}),e.jsx("p",{className:`${s.copy} break-all`,children:a.email}),a.phone&&e.jsx("p",{className:s.copy,children:a.phone}),e.jsxs("p",{className:`text-xs sm:text-sm ${s.copy} break-all`,children:["URL: ",e.jsxs("span",{className:"font-mono",children:["https://",a.subdomain,".",h]})]})]})}),e.jsx(v,{className:`${s.surface} text-xs sm:text-sm`,children:e.jsxs($,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`uppercase tracking-[0.3em] text-[10px] sm:text-xs ${s.badge}`,children:"Activation"}),e.jsxs(L,{size:"sm",color:"success",variant:"flat",className:"text-[10px] sm:text-xs",children:[i,"-day trial"]})]}),e.jsxs("p",{className:`text-2xl sm:text-3xl font-semibold ${s.heading}`,children:["$",N.toLocaleString()]}),e.jsxs("p",{className:s.copy,children:["Projected per ",y?"year":"month"," once billing is enabled."]}),w==="plan"&&c&&e.jsxs("p",{className:`text-xs ${s.badge}`,children:[e.jsxs("strong",{children:[c.name," Plan"]})," • ",r.length," module",r.length!==1?"s":""," included"]}),w==="custom"&&r.length>0&&e.jsxs("p",{className:`text-xs ${s.badge}`,children:[e.jsx("strong",{children:"Custom Selection"})," • ",r.length," module",r.length!==1?"s":""," at $",R,"/",y?"year":"month"," each"]}),e.jsxs("ul",{className:`space-y-1 ${s.copy}`,children:[r.map((t,l)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-1.5 w-1.5 sm:h-2 sm:w-2 rounded-full bg-emerald-400 shrink-0"}),e.jsx("span",{className:"break-words",children:t})]},l)),r.length===0&&e.jsx("li",{className:`text-xs ${s.badge}`,children:"No modules selected"})]})]})})]}),e.jsx(v,{className:`${s.surface} text-xs sm:text-sm`,children:e.jsx($,{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:`font-semibold ${s.heading}`,children:"Administrator Login"}),e.jsxs("p",{className:`text-xs sm:text-sm ${s.copy} break-all`,children:[e.jsx("strong",{children:P.name})," (",P.username,") will be able to login at ",a.subdomain,".",h]})]})})}),e.jsx(v,{className:`${s.surface} text-xs sm:text-sm`,children:e.jsxs($,{className:"space-y-2 sm:space-y-3",children:[e.jsx("p",{className:`font-semibold ${s.heading}`,children:"What happens next?"}),e.jsxs("ol",{className:`list-decimal list-inside space-y-2 ${s.copy}`,children:[e.jsx("li",{children:"We provision your isolated database + files."}),e.jsxs("li",{className:"break-words",children:["Workspace URL (",a.subdomain,".",h,") goes live with default themes."]}),e.jsx("li",{children:"Within 5 minutes you will be redirected to your new workspace."}),e.jsx("li",{children:"At any time during the trial you can add payment details to continue seamlessly."})]})]})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx(C,{checked:A.accept_terms,onChange:t=>S("accept_terms",t.target.checked),error:W.accept_terms,label:"I agree to the Terms of Service and Privacy Policy.",description:"Required before spinning up the workspace."}),e.jsx(C,{checked:A.notify_updates,onChange:t=>S("notify_updates",t.target.checked),label:"Keep me posted about rollout templates and module launches."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsx(V,{href:route("platform.register.plan"),className:`text-xs sm:text-sm transition-colors text-center sm:text-left ${s.link}`,children:"← Back to modules"}),e.jsx(G,{type:"submit",color:"success",className:"px-6 w-full sm:w-auto",isLoading:I,children:"Launch trial workspace"})]})]})})]})]})}export{ye as default};
