import{o as We,r as l,j as t,i as qe,k as Ve,n as Y,H as de,c as ee,d as te,F as ce,m as me,b as G,e as J,s as He}from"./app-BrpQ0UwM.js";import{i as Ke,R as Ge,o as Je,M as Qe,A as Xe}from"./App-BzZwRIf3.js";import{S as Ze}from"./StatsCards-C4zQ_vty.js";import{L as pe,D as Ue,B as et,a as tt,b as at}from"./BulkDeleteModal-DPoQrIuD.js";import{d as ue}from"./dayjs.min-B9TjvO8F.js";import{s as W}from"./toastUtils-DmXWeOL1.js";import{F as st}from"./CheckCircleIcon-BURezXLP.js";import{F as rt}from"./CalendarDaysIcon-BkAEztIS.js";import{F as Q}from"./CalendarIcon-DNQOCB8b.js";import{e as lt,F as ot}from"./PlusIcon-CA_x2Or_.js";import{F as nt}from"./MagnifyingGlassIcon-dFi3LUfQ.js";import{c as it}from"./chunk-C6WKGNND-CkI8tRvQ.js";import{i as ve}from"./chunk-SQIAVXJX-d0efAK_x.js";import{b as dt}from"./chunk-57V4RE7B-DnLRnwzr.js";import{s as ae}from"./chunk-C3QHEOC2-D4QcJqup.js";import{l as R}from"./chunk-Y5DMIIWQ-ilm6UE0q.js";import"./app-Dxe9AM1M.js";import"./index-DGjdlXV7.js";/* empty css                      */import"./chunk-CV4BWJDJ-C96VZW1N.js";import"./index-CQwslooR.js";import"./index-DRhHtkcR.js";import"./UserIcon-D8kY1ZwS.js";import"./Cog6ToothIcon-BMMbAZpA.js";import"./GlobeAltIcon-DxtqcOi2.js";import"./useBranding-qv63WW7j.js";import"./useDialog-fti0_t2P.js";import"./VisuallyHidden-DwXjZBP5.js";import"./keyboard-BhtLdWlC.js";import"./useLabels-DLWWaVRl.js";import"./index-CpUThtir.js";import"./XMarkIcon-C1WIqP6o.js";import"./MagnifyingGlassIcon-DhzJZJr3.js";import"./chunk-AUA5GDXN-BodSRBst.js";import"./chunk-WQVQ7P2I-hHnQawC0.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-CSsa5DzI.js";import"./useMediaQuery-CFaF2uqM.js";import"./chunk-IHO36JMK-xRSFIery.js";import"./ShieldCheckIcon-bFtvfWXE.js";import"./AcademicCapIcon-D20Gi9a_.js";import"./IdentificationIcon-BGfsu79d.js";import"./ArrowLeftIcon-Cdc1HrjB.js";import"./ArrowRightIcon-Cz66Tf3s.js";import"./BriefcaseIcon-BCesjFgA.js";import"./BuildingOfficeIcon-CoZNcGsq.js";import"./CircleStackIcon-CrHNZK6m.js";import"./ClipboardDocumentCheckIcon-BxDTls2I.js";import"./DeviceTabletIcon-B_IoiQm8.js";import"./CpuChipIcon-CSICtRFQ.js";import"./CurrencyDollarIcon-DhjPgWHi.js";import"./DevicePhoneMobileIcon-j_Cw2KiO.js";import"./DocumentArrowUpIcon-Is7TjkFb.js";import"./DocumentIcon-CqhqrUyF.js";import"./EnvelopeIcon-CF1Xt110.js";import"./EyeIcon-DHXN5WDi.js";import"./InformationCircleIcon-B-LSZjy2.js";import"./KeyIcon-DBJJhxUd.js";import"./LockClosedIcon-CDMX3egb.js";import"./MapPinIcon-D1Pi-EC7.js";import"./PlusCircleIcon-BYeJHQrD.js";import"./PrinterIcon-Cxf-38ZP.js";import"./UserCircleIcon-CUGyxbk3.js";import"./UserGroupIcon-h979AJVu.js";import"./chunk-TW2E3XVA-Cq0DGGbI.js";import"./useHasTabbableChild-BCB9SlDy.js";import"./useSelectableItem-xFnwZFq2.js";import"./SelectionManager-BDqxcBRc.js";import"./Item-Bz9nEl3J.js";import"./MaintenanceModeBanner-Cxhu4lEL.js";import"./chunk-P7ACKWSP-C--uPpFg.js";import"./index-3SaTkLKc.js";import"./index-CWTul9Eo.js";import"./index-CCfM7oky.js";import"./chunk-WEIB4WXA-DikSLtkc.js";import"./chunk-KQW2TNLT-Ex180OOD.js";import"./chunk-ICU6NNET-JgRCpHuB.js";import"./useLabel-CGwDFWJ-.js";import"./chunk-5LXTSPS7-CZESlYuq.js";import"./XCircleIcon-R71WCHBB.js";import"./CheckCircleIcon-DJpbJfJ6.js";import"./ClockIcon-ZMcHVGfY.js";import"./ExclamationTriangleIcon-Bq11ZqMk.js";import"./chunk-3YGGVHYO-Bwgks25o.js";import"./createLucideIcon-D01_EIkb.js";import"./chunk-F3UDT23P-Ct2uUAEU.js";import"./chunk-PMMJMDBI-DQ2xIUcD.js";import"./useToggleState-B-2VEJIj.js";import"./chunk-7F3ZLNJ6-DliCQ3uz.js";import"./index-CTla63m4.js";import"./chunk-NGIUTAK3-4_PFpeh4.js";import"./chunk-NL7EUJG2-AbreVKB9.js";import"./chunk-OH2E76JR-Bp4YAI-x.js";import"./chunk-YRZGWF2W-w_pv8JHK.js";import"./chunk-VFIJPDYX-CuVNCCGP.js";import"./useProgressBar-SsHuKyJV.js";import"./useNumberFormatter-D4aCfwPX.js";import"./NumberFormatter-DNR9MAW-.js";import"./calendar-D_HImlSv.js";import"./user-BuMYKA_Y.js";import"./clock-RYAs-9Sl.js";import"./chunk-I3A4XRYQ-CfGUc_10.js";import"./index-DPUAKS60.js";import"./useTreeState-SZseE4UO.js";import"./useMenuTriggerState-C8Me9E6c.js";const ct=({title:q,allUsers:j})=>{const{auth:T}=We().props,S=()=>{if(typeof window>"u")return"lg";const s=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",r=parseInt(s);return r===0?"none":r<=4?"sm":r<=8?"md":r<=16?"lg":"full"},[f,fe]=l.useState(!1),[mt,he]=l.useState(!1);l.useEffect(()=>{const e=()=>{fe(window.innerWidth<640),he(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[ge,X]=l.useState(!1),[L,E]=l.useState([]),[c,u]=l.useState(),[F,m]=l.useState(0),[ye,_]=l.useState(0),[se,re]=l.useState(),[xe,le]=l.useState([]),[oe,I]=l.useState(""),[D,be]=l.useState([]),[d,k]=l.useState({perPage:30,currentPage:1}),[pt,A]=l.useState(!1),[V,we]=l.useState(!1),[a,je]=l.useState({employee:"",selectedMonth:ue().format("YYYY-MM"),status:[],leaveType:[],department:[]}),h=l.useCallback((e,s)=>{if(e==="year"){const r=Number(s);if(r<1900||r>new Date().getFullYear()){console.warn("Invalid year selected. Must be between 1900 and current year.");return}}je(r=>({...r,[e]:s})),k(r=>({...r,currentPage:1}))},[]),[N,Fe]=l.useState({pending:0,approved:0,rejected:0,total:0,thisMonth:0,thisWeek:0,totalDaysUsed:0,totalDaysRemaining:0}),_e=l.useMemo(()=>[{title:"Total Leaves",value:N.total,icon:t.jsx(Ke,{}),color:"text-primary",iconBg:"bg-primary/20",description:"All leave requests"},{title:"Pending",value:N.pending,icon:t.jsx(qe,{}),color:"text-warning",iconBg:"bg-warning/20",description:"Awaiting approval"},{title:"Approved",value:N.approved,icon:t.jsx(st,{}),color:"text-success",iconBg:"bg-success/20",description:"Approved requests"},{title:"Rejected",value:N.rejected,icon:t.jsx(Ve,{}),color:"text-danger",iconBg:"bg-danger/20",description:"Rejected requests"},{title:"This Month",value:N.thisMonth,icon:t.jsx(rt,{}),color:"text-secondary",iconBg:"bg-secondary/20",description:"Current month"},{title:"This Week",value:N.thisWeek,icon:t.jsx(Q,{}),color:"text-primary",iconBg:"bg-primary/20",description:"Current week"}],[N]),z=T.permissions?.includes("leaves.view")||!1,$=T.permissions?.includes("leaves.approve")||!1,ne=T.permissions?.includes("leaves.create")||!1,ke=T.permissions?.includes("leaves.update")||!1,Ne=T.permissions?.includes("leaves.delete")||!1,Ce=l.useMemo(()=>{const e=[{key:"all",label:"All Types",value:"all"}];if(!L.leaveTypes)return e;const s=L.leaveTypes.map(r=>({key:r.type.toLowerCase(),label:r.type,value:r.type.toLowerCase()}));return[...e,...s]},[L.leaveTypes]),Pe=l.useCallback(e=>{B(s=>({...s,[e]:!0}))},[]),Se=l.useCallback((e,s)=>{re({id:e}),B(r=>({...r,[s]:!0}))},[]);l.useCallback(e=>{h("employee",e.target.value.toLowerCase())},[h]);const Z=l.useCallback(e=>{h("selectedMonth",e.target.value)},[h]),Le=l.useCallback(e=>{k(s=>({...s,currentPage:e}))},[]),Ae=l.useCallback(e=>{k(s=>({...s,perPage:e,currentPage:1}))},[]),g=l.useCallback(async(e=null,s=null)=>{X(!0);const r=e||d.currentPage,i=s||d.perPage;try{const n=await Y.get(route("leaves.paginate"),{params:{page:r,perPage:i,employee:a.employee,month:a.selectedMonth,status:Array.isArray(a.status)&&a.status.length>0?a.status:void 0,leave_type:Array.isArray(a.leaveType)&&a.leaveType.length>0?a.leaveType:void 0,department:Array.isArray(a.department)&&a.department.length>0?a.department:void 0,admin_view:!0,view_all:!0}});if(n.status===200){const{leaves:o,leavesData:y,departments:p}=n.data;o?.data&&Array.isArray(o.data)?(u(o.data),m(o.total||o.data.length),_(o.last_page||1),e&&e!==d.currentPage&&k(v=>({...v,currentPage:e})),s&&s!==d.perPage&&k(v=>({...v,perPage:s}))):Array.isArray(o)?(u(o),m(o.length),_(1)):(console.error("Unexpected leaves data format:",o),u([]),m(0),_(1)),E(y),be(p||[]),I("")}}catch(n){if(console.error("Error fetching leaves data:",n.response),n.response?.status===404){const{leavesData:o}=n.response.data||{};E(o||[]),I(n.response?.data?.message||"No leaves found for the selected criteria.")}else I(n.response?.data?.message||"Error retrieving leaves data. Please try again.");u([]),m(0),_(1)}finally{X(!1)}},[a,d.currentPage,d.perPage]),C=l.useCallback(async()=>{try{const e=await Y.get(route("leaves.stats"),{params:{month:a.selectedMonth,admin_view:!0,view_all:!0}});if(e.status===200){const{stats:s}=e.data;Fe(s)}}catch(e){console.error("Error fetching leaves data:",e.response),e.response?.status===404?I(e.response?.data?.message||"No leaves found for the selected criteria."):I("Error retrieving leaves data. Please try again."),X(!1)}},[a]),Me=l.useCallback(async e=>{if($)try{if((await Y.post(route("leaves.bulk-approve"),{leave_ids:e})).status===200){g();const r=Promise.resolve();W.promise(r,{success:"Selected leaves approved successfully"})}}catch(s){console.error("Error bulk approving leaves:",s);const r=Promise.reject(s);W.promise(r,{error:"Failed to approve selected leaves"})}},[$,g]),Re=l.useCallback(async e=>{if($)try{if((await Y.post(route("leaves.bulk-reject"),{leave_ids:e})).status===200){g();const r=Promise.resolve();W.promise(r,{success:"Selected leaves rejected successfully"})}}catch(s){console.error("Error bulk rejecting leaves:",s);const r=Promise.reject(s);W.promise(r,{error:"Failed to reject selected leaves"})}},[$,g]),Te=l.useCallback(e=>{le(e),B(s=>({...s,bulk_delete:!0}))},[]);if(!z)return t.jsxs(t.Fragment,{children:[t.jsx(de,{title:q}),t.jsx("div",{className:"flex justify-center p-4",children:t.jsx(ee,{className:"w-full max-w-md",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                                var(--theme-content1, #FAFAFA) 20%, 
                                var(--theme-content2, #F4F4F5) 10%, 
                                var(--theme-content3, #F1F3F4) 20%)`},children:t.jsxs(te,{className:"p-8 text-center",children:[t.jsx(ce,{className:"w-16 h-16 text-warning mx-auto mb-4"}),t.jsx("h6",{className:"text-lg font-semibold mb-2",children:"Access Denied"}),t.jsx("p",{className:"text-sm text-default-500",children:"You don't have permission to view leave management."})]})})})]});const[x,B]=l.useState({add_leave:!1,edit_leave:!1,delete_leave:!1,bulk_leave:!1,bulk_delete:!1}),Ee=l.useRef(null),ie=l.useCallback(e=>{B(s=>({...s,[e]:!0}))},[]),O=l.useCallback(e=>{B(s=>({...s,[e]:!1})),e==="bulk_delete"&&le([])},[]),H=l.useCallback(e=>[...e].sort((s,r)=>new Date(r.from_date)-new Date(s.from_date)),[]),P=l.useCallback((e,s=null)=>{m(e);const r=Math.max(1,Math.ceil(e/d.perPage));_(r),d.currentPage>r&&k(i=>({...i,currentPage:r}))},[d.perPage,d.currentPage]),K=l.useCallback(e=>{const s=ue(e.from_date).format("YYYY-MM");if(a.selectedMonth&&s!==a.selectedMonth)return!1;if(a.employee){const r=j?.find(n=>String(n.id)===String(e.user_id)),i=a.employee.trim().toLowerCase();if(r){if(String(r.id)!==i&&!(r.name&&r.name.trim().toLowerCase().includes(i)))return!1}else if(String(a.employee)!==String(e.user_id))return!1}if(Array.isArray(a.status)&&a.status.length>0&&!a.status.some(i=>String(e.status).toLowerCase()===String(i).toLowerCase())||Array.isArray(a.leaveType)&&a.leaveType.length>0&&!a.leaveType.some(i=>String(e.leave_type).toLowerCase()===String(i).toLowerCase()))return!1;if(Array.isArray(a.department)&&a.department.length>0){const r=j?.find(n=>String(n.id)===String(e.user_id));if(!r||!a.department.some(n=>String(r.department_id)===String(n)))return!1}return!0},[a,j]),Ie=l.useMemo(()=>c||[],[c]),U=l.useCallback(async()=>{if(c&&c.length<d.perPage&&F>c.length){const e=Math.min(d.perPage-c.length,F-c.length);if(e<=0)return;A(!0);try{const s=await Y.get(route("leaves.paginate"),{params:{page:d.currentPage+1,perPage:e,employee:a.employee,month:a.selectedMonth,status:Array.isArray(a.status)&&a.status.length>0?a.status:void 0,leave_type:Array.isArray(a.leaveType)&&a.leaveType.length>0?a.leaveType:void 0,department:Array.isArray(a.department)&&a.department.length>0?a.department:void 0,admin_view:!0,view_all:!0}});s.status===200&&s.data.leaves.data&&u(r=>{const i=s.data.leaves.data.filter(K),n=[...r,...i];return H(n)})}catch(s){const r=Promise.reject(s);W.promise(r,{error:"Error fetching additional items."}),console.error(`Error fetching additional items from page ${d.currentPage+1}:`,s)}finally{A(!1)}}},[d.currentPage,d.perPage,c,a,H,K]),b=l.useCallback((e,s)=>{if(!s||!s.success){console.error(`Invalid ${e} response data:`,s);return}C(),s.leavesData&&E(s.leavesData);const r=d.perPage,i=d.currentPage;switch(e){case"bulk_delete":{const n=s.deleted_leaves||[],o=s.deleted_count||n.length;if(o===0)return;const y=n.map(w=>w.id),p=Math.max(0,F-o),v=c.filter(w=>!y.includes(w.id)).length;if(o>5||v===0||i>1&&v<r/2){const w=Math.ceil(p/r);let M=i;v===0&&p>0?M=Math.max(1,i-1):i>w&&w>0&&(M=w),k(Ye=>({...Ye,currentPage:M})),g(M,r)}else A(!0),u(w=>w.filter(M=>!y.includes(M.id))),m(p),P(p),A(!1),U();break}case"single_delete":{const n=s.deleted_leave_id;if(!n)return;const o=Math.max(0,F-1);if(c.filter(p=>p.id!==n).length===0&&o>0&&i>1){const p=i-1;k(v=>({...v,currentPage:p})),g(p,r)}else A(!0),u(p=>p.filter(v=>v.id!==n)),m(o),P(o),A(!1),U();break}case"bulk_add":{const n=s.added_count||1,o=F+n;m(o),P(o),g(i,r);break}case"single_add":{const n=s.added_count||1,o=F+n,y=s.leave;if(y&&K(y))if(c.length<r){const v=H([...c,y]);u(v),m(o),P(o)}else m(o),P(o),g(i,r);else m(o),P(o);break}case"edit":{const n=s.updated_leave||s.leave;n&&u(o=>o.map(y=>y.id===n.id?n:y));break}}},[d.perPage,d.currentPage,F,c,C,P,g,U,K,H]),De=l.useCallback(e=>{b("single_add",{success:!0,added_count:1,leave:e})},[b]),ze=l.useCallback(e=>{b("edit",{success:!0,updated_leave:e})},[b]),$e=l.useCallback(e=>{if(!e||!e.success){console.error("Invalid bulk response data:",e);return}const s=e.created_leaves||[],r=e.summary?.successful||s.length,i={...e,added_count:r};b("bulk_add",i)},[b]),Be=l.useCallback(e=>{b("single_delete",{success:!0,deleted_leave_id:e})},[b]),Oe=l.useCallback(e=>{b("bulk_delete",e)},[b]);return l.useEffect(()=>{z&&g()},[g,z,d.currentPage,a.employee,a.selectedMonth,a.status,a.leaveType,a.department]),l.useEffect(()=>{z&&C()},[g,z]),t.jsxs(t.Fragment,{children:[t.jsx(de,{title:q}),x.add_leave&&t.jsx(pe,{open:x.add_leave,closeModal:()=>O("add_leave"),leavesData:L,setLeavesData:E,currentLeave:null,allUsers:j,departments:D,setTotalRows:m,setLastPage:_,setLeaves:u,handleMonthChange:Z,employee:a.employee,selectedMonth:a.selectedMonth,addLeaveOptimized:De,fetchLeavesStats:C}),x.edit_leave&&t.jsx(pe,{open:x.edit_leave,closeModal:()=>O("edit_leave"),leavesData:L,setLeavesData:E,currentLeave:se,allUsers:j,departments:D,setTotalRows:m,setLastPage:_,setLeaves:u,handleMonthChange:Z,employee:a.employee,selectedMonth:a.selectedMonth,updateLeaveOptimized:ze,fetchLeavesStats:C}),x.delete_leave&&t.jsx(Ue,{open:x.delete_leave,closeModal:()=>O("delete_leave"),leaveId:se?.id,setLeaves:u,setTotalRows:m,setLastPage:_,deleteLeaveOptimized:Be,fetchLeavesStats:C}),x.bulk_leave&&t.jsx(et,{open:x.bulk_leave,onClose:()=>O("bulk_leave"),onSuccess:e=>{$e(e)},allUsers:j,departments:D,leavesData:L,isAdmin:!0}),x.bulk_delete&&t.jsx(tt,{open:x.bulk_delete,onClose:()=>O("bulk_delete"),onSuccess:e=>{Oe(e)},selectedLeaves:xe,allUsers:j}),t.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Leave Management",children:t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"w-full",children:t.jsx(me.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:t.jsxs(ee,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[t.jsx(it,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:t.jsx("div",{className:`${f?"p-4":"p-6"} w-full`,children:t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[t.jsx("div",{className:`
                                                            ${f?"p-2":"p-3"} 
                                                            rounded-xl flex items-center justify-center
                                                        `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:t.jsx(Ge,{className:`
                                                                ${f?"w-6 h-6":"w-8 h-8"}
                                                            `,style:{color:"var(--theme-primary)"}})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h4",{className:`
                                                                ${f?"text-xl":"text-2xl"}
                                                                font-bold text-foreground
                                                                ${f?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Leave Management"}),t.jsx("p",{className:`
                                                                ${f?"text-xs":"text-sm"} 
                                                                text-default-500
                                                                ${f?"truncate":""}
                                                            `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage employee leave requests and approvals"})]})]}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[ne&&t.jsx(G,{color:"primary",variant:"shadow",startContent:t.jsx(lt,{className:"w-4 h-4"}),onPress:()=>ie("add_leave"),size:f?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Add Leave"}),ne&&t.jsx(G,{color:"secondary",variant:"flat",startContent:t.jsx(Q,{className:"w-4 h-4"}),onPress:()=>ie("bulk_leave"),size:f?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Bulk Add"}),t.jsx(G,{color:"default",variant:"bordered",startContent:t.jsx(Je,{className:"w-4 h-4"}),size:f?"sm":"md",className:"font-semibold",style:{borderRadius:"var(--borderRadius, 8px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Export"})]})]})})})}),t.jsxs(te,{className:"p-6",children:[t.jsx(Ze,{stats:_e,className:"mb-6"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[t.jsx("div",{className:"flex-1",children:t.jsx(ve,{label:"Search Employee",placeholder:"Search by name or ID...",value:a.employee,onChange:e=>h("employee",e.target.value),startContent:t.jsx(nt,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:S(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Search employees"})}),t.jsx("div",{className:"flex gap-2 items-end",children:t.jsx(dt,{variant:"bordered",radius:S(),className:"bg-white/5",children:t.jsxs(G,{isIconOnly:f,color:V?"primary":"default",onPress:()=>we(!V),className:V?"bg-purple-500/20":"bg-white/5",children:[t.jsx(Qe,{className:"w-4 h-4"}),!f&&t.jsx("span",{className:"ml-1",children:"Filters"})]})})})]}),V&&t.jsx(me.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t.jsxs("div",{className:"mb-6 p-4 bg-white/5 backdrop-blur-md rounded-lg border border-white/10",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs(ae,{label:"Leave Status",placeholder:"Select status...",selectionMode:"multiple",selectedKeys:new Set(a.status),onSelectionChange:e=>h("status",Array.from(e)),variant:"bordered",size:"sm",radius:S(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Filter by leave status",children:[t.jsx(R,{value:"pending",children:"Pending"},"pending"),t.jsx(R,{value:"approved",children:"Approved"},"approved"),t.jsx(R,{value:"rejected",children:"Rejected"},"rejected"),t.jsx(R,{value:"new",children:"New"},"new")]}),t.jsx(ae,{label:"Leave Type",placeholder:"Select leave types",selectionMode:"multiple",selectedKeys:new Set(a.leaveType),onSelectionChange:e=>h("leaveType",Array.from(e)),variant:"bordered",size:"sm",radius:S(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Filter by leave type",children:Ce.map(e=>t.jsx(R,{value:e.value,children:e.label},e.value))}),t.jsx(ae,{label:"Department",placeholder:"Select departments",selectionMode:"multiple",selectedKeys:new Set(a.department),onSelectionChange:e=>h("department",Array.from(e)),variant:"bordered",size:"sm",radius:S(),className:"w-full",classNames:{trigger:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Filter by department",children:D.map(e=>t.jsx(R,{value:e.id,children:e.name},e.id))}),t.jsx(ve,{label:"Month/Year",type:"month",value:a.selectedMonth,onChange:Z,startContent:t.jsx(Q,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:S(),className:"w-full",classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Select month and year for filtering"})]}),(a.employee||Array.isArray(a.status)&&a.status.length>0||Array.isArray(a.leaveType)&&a.leaveType.length>0||Array.isArray(a.department)&&a.department.length>0)&&t.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-white/10",children:[a.employee&&t.jsxs(J,{variant:"flat",color:"primary",size:"sm",onClose:()=>h("employee",""),children:["Employee: ",a.employee]}),Array.isArray(a.status)&&a.status.map(e=>t.jsxs(J,{variant:"flat",color:"secondary",size:"sm",onClose:()=>h("status",a.status.filter(s=>s!==e)),children:["Status: ",e]},e)),Array.isArray(a.leaveType)&&a.leaveType.map(e=>t.jsxs(J,{variant:"flat",color:"warning",size:"sm",onClose:()=>h("leaveType",a.leaveType.filter(s=>s!==e)),children:["Type: ",e]},e)),Array.isArray(a.department)&&a.department.map(e=>{const s=D.find(r=>String(r.id)===String(e));return t.jsxs(J,{variant:"flat",color:"success",size:"sm",onClose:()=>h("department",a.department.filter(r=>r!==e)),children:["Department: ",s?.name||`ID: ${e}`]},e)})]})]})}),t.jsxs("div",{className:"min-h-96",children:[t.jsxs("div",{className:"mb-4 flex items-center gap-2 font-semibold text-lg",children:[t.jsx(ot,{className:"w-5 h-5"}),"Leave Requests Management"]}),ge?t.jsx(ee,{className:"bg-white/10 backdrop-blur-md border-white/20",children:t.jsxs(te,{className:"text-center py-12",children:[t.jsx(He,{size:"lg"}),t.jsx("p",{className:"mt-4 text-default-500",children:"Loading leave data..."})]})}):c&&c.length>0?t.jsx("div",{className:"overflow-hidden rounded-lg",children:t.jsx(at,{ref:Ee,totalRows:F,lastPage:ye,setCurrentPage:Le,setPerPage:Ae,perPage:d.perPage,currentPage:d.currentPage,handleClickOpen:Se,setCurrentLeave:re,openModal:Pe,leaves:Ie,allUsers:j,setLeaves:u,employee:a.employee,selectedMonth:a.selectedMonth,isAdminView:!0,onBulkApprove:Me,onBulkReject:Re,canApproveLeaves:$,canEditLeaves:ke,canDeleteLeaves:Ne,fetchLeavesStats:C,onBulkDelete:Te})}):oe?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(ce,{className:"w-16 h-16 text-warning mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Data Found"}),t.jsx("p",{className:"text-default-500",children:oe})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Q,{className:"w-16 h-16 text-default-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Leave Records Found"}),t.jsx("p",{className:"text-default-500",children:"No leave records found for the selected criteria."})]})]})]})]})})})})})]})};ct.layout=q=>t.jsx(Xe,{children:q});export{ct as default};
