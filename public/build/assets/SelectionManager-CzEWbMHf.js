import{r as h,B as ce,aO as se,aS as Ie,z as Ke,af as Te,aP as me,$ as Me,bA as Re,ah as Pe,ai as ue,V as ae,aC as fe,ag as de,ak as De,R as O}from"./app-D_-WVEdp.js";import{$ as Ae,a as X}from"./keyboard-DoUdRS-l.js";import{$ as Ce}from"./index-D0ogoVNn.js";import{$ as Ee}from"./index-C-9Wnuxw.js";function he(i,e){const t=h.useRef(!0),l=h.useRef(null);ce(()=>(t.current=!0,()=>{t.current=!1}),[]),ce(()=>{t.current?t.current=!1:(!l.current||e.some((n,o)=>!Object.is(n,l[o])))&&i(),l.current=e},e)}function ke(i,e){const t=[];for(;i&&i!==document.documentElement;)Ae(i,e)&&t.push(i),i=i.parentElement;return t}function G(i,e,t,l){let n=se(t),o=t==null;h.useEffect(()=>{if(o||!i.current)return;let r=i.current;return r.addEventListener(e,n,l),()=>{r.removeEventListener(e,n,l)}},[i,e,l,o,n])}function Se(i,e){let t=ve(i,e,"left"),l=ve(i,e,"top"),n=e.offsetWidth,o=e.offsetHeight,r=i.scrollLeft,a=i.scrollTop,{borderTopWidth:f,borderLeftWidth:p,scrollPaddingTop:T,scrollPaddingRight:K,scrollPaddingBottom:E,scrollPaddingLeft:I}=getComputedStyle(i),{scrollMarginTop:b,scrollMarginRight:M,scrollMarginBottom:d,scrollMarginLeft:g}=getComputedStyle(e),m=r+parseInt(p,10),y=a+parseInt(f,10),S=m+i.clientWidth,A=y+i.clientHeight,P=parseInt(T,10)||0,C=parseInt(E,10)||0,w=parseInt(K,10)||0,W=parseInt(I,10)||0,H=parseInt(b,10)||0,j=parseInt(d,10)||0,B=parseInt(M,10)||0,q=parseInt(g,10)||0,Y=t-q,U=t+n+B,V=l-H,s=l+o+j,u=r+parseInt(p,10)+W,v=S-w,$=a+parseInt(f,10)+P,x=A-C;(Y>u||U<v)&&(Y<=r+W?r=Y-parseInt(p,10)-W:U>S-w&&(r+=U-S+w)),(V>$||s<x)&&(V<=y+P?a=V-parseInt(f,10)-P:s>A-C&&(a+=s-A+C)),i.scrollTo({left:r,top:a})}function ve(i,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let n=0;for(;e.offsetParent&&(n+=e[l],e.offsetParent!==i);){if(e.offsetParent.contains(i)){n-=i[l];break}e=e.offsetParent}return n}function ye(i,e){if(i&&document.contains(i)){let r=document.scrollingElement||document.documentElement;if(!(window.getComputedStyle(r).overflow==="hidden")&&!Ie()){var t;let{left:f,top:p}=i.getBoundingClientRect();i==null||(t=i.scrollIntoView)===null||t===void 0||t.call(i,{block:"nearest"});let{left:T,top:K}=i.getBoundingClientRect();if(Math.abs(f-T)>1||Math.abs(p-K)>1){var l,n,o;e==null||(n=e.containingElement)===null||n===void 0||(l=n.scrollIntoView)===null||l===void 0||l.call(n,{block:"center",inline:"center"}),(o=i.scrollIntoView)===null||o===void 0||o.call(i,{block:"nearest"})}}else{let f=ke(i);for(let p of f)Se(p,i)}}}const Be="react-aria-clear-focus",Le="react-aria-focus";let ie=new Map;function tt(i){let{locale:e}=Ke(),t=e+(i?Object.entries(i).sort((n,o)=>n[0]<o[0]?-1:1).join():"");if(ie.has(t))return ie.get(t);let l=new Intl.Collator(e,i);return ie.set(t,l),l}function ze(i){let e=We(Te(i));e!==i&&(e&&Oe(e,i),i&&xe(i,e))}function Oe(i,e){i.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function xe(i,e){i.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),i.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function We(i){let e=me(i),t=e?.getAttribute("aria-activedescendant");return t&&i.getElementById(t)||e}function pe(i){return Re()?i.altKey:i.ctrlKey}function Z(i,e){var t,l;let n=`[data-key="${CSS.escape(String(e))}"]`,o=(t=i.current)===null||t===void 0?void 0:t.dataset.collection;return o&&(n=`[data-collection="${CSS.escape(o)}"]${n}`),(l=i.current)===null||l===void 0?void 0:l.querySelector(n)}const we=new WeakMap;function He(i){let e=Me();return we.set(i,e),e}function lt(i){return we.get(i)}const Ue=1e3;function je(i){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=i,n=h.useRef({search:"",timeout:void 0}).current,o=r=>{let a=qe(r.key);if(!(!a||r.ctrlKey||r.metaKey||!r.currentTarget.contains(r.target)||n.search.length===0&&a===" ")){if(a===" "&&n.search.trim().length>0&&(r.preventDefault(),"continuePropagation"in r||r.stopPropagation()),n.search+=a,e.getKeyForSearch!=null){let f=e.getKeyForSearch(n.search,t.focusedKey);f==null&&(f=e.getKeyForSearch(n.search)),f!=null&&(t.setFocusedKey(f),l&&l(f))}clearTimeout(n.timeout),n.timeout=setTimeout(()=>{n.search=""},Ue)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?o:void 0}}}function qe(i){return i.length===1||!/^[A-Z]/i.test(i)?i:""}function it(i){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:n=!1,shouldFocusWrap:o=!1,disallowEmptySelection:r=!1,disallowSelectAll:a=!1,escapeKeyBehavior:f="clearSelection",selectOnFocus:p=e.selectionBehavior==="replace",disallowTypeAhead:T=!1,shouldUseVirtualFocus:K,allowsTabNavigation:E=!1,isVirtualized:I,scrollRef:b=l,linkBehavior:M="action"}=i,{direction:d}=Ke(),g=Pe(),m=s=>{var u;if(s.altKey&&s.key==="Tab"&&s.preventDefault(),!(!((u=l.current)===null||u===void 0)&&u.contains(s.target)))return;const v=(c,L)=>{if(c!=null){if(e.isLink(c)&&M==="selection"&&p&&!pe(s)){De.flushSync(()=>{e.setFocusedKey(c,L)});let z=Z(l,c),oe=e.getItemProps(c);z&&g.open(z,s,oe.href,oe.routerOptions);return}if(e.setFocusedKey(c,L),e.isLink(c)&&M==="override")return;s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):p&&!pe(s)&&e.replaceSelection(c)}};switch(s.key){case"ArrowDown":if(t.getKeyBelow){var $,x,F;let c=e.focusedKey!=null?($=t.getKeyBelow)===null||$===void 0?void 0:$.call(t,e.focusedKey):(x=t.getFirstKey)===null||x===void 0?void 0:x.call(t);c==null&&o&&(c=(F=t.getFirstKey)===null||F===void 0?void 0:F.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c))}break;case"ArrowUp":if(t.getKeyAbove){var D,k,J;let c=e.focusedKey!=null?(D=t.getKeyAbove)===null||D===void 0?void 0:D.call(t,e.focusedKey):(k=t.getLastKey)===null||k===void 0?void 0:k.call(t);c==null&&o&&(c=(J=t.getLastKey)===null||J===void 0?void 0:J.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c))}break;case"ArrowLeft":if(t.getKeyLeftOf){var Q,N,_;let c=e.focusedKey!=null?(Q=t.getKeyLeftOf)===null||Q===void 0?void 0:Q.call(t,e.focusedKey):null;c==null&&o&&(c=d==="rtl"?(N=t.getFirstKey)===null||N===void 0?void 0:N.call(t,e.focusedKey):(_=t.getLastKey)===null||_===void 0?void 0:_.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c,d==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var ee,te,le;let c=e.focusedKey!=null?(ee=t.getKeyRightOf)===null||ee===void 0?void 0:ee.call(t,e.focusedKey):null;c==null&&o&&(c=d==="rtl"?(te=t.getLastKey)===null||te===void 0?void 0:te.call(t,e.focusedKey):(le=t.getFirstKey)===null||le===void 0?void 0:le.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c,d==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let c=t.getFirstKey(e.focusedKey,X(s));e.setFocusedKey(c),c!=null&&(X(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):p&&e.replaceSelection(c))}break;case"End":if(t.getLastKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let c=t.getLastKey(e.focusedKey,X(s));e.setFocusedKey(c),c!=null&&(X(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):p&&e.replaceSelection(c))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let c=t.getKeyPageBelow(e.focusedKey);c!=null&&(s.preventDefault(),v(c))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let c=t.getKeyPageAbove(e.focusedKey);c!=null&&(s.preventDefault(),v(c))}break;case"a":X(s)&&e.selectionMode==="multiple"&&a!==!0&&(s.preventDefault(),e.selectAll());break;case"Escape":f==="clearSelection"&&!r&&e.selectedKeys.size!==0&&(s.stopPropagation(),s.preventDefault(),e.clearSelection());break;case"Tab":if(!E){if(s.shiftKey)l.current.focus();else{let c=Ce(l.current,{tabbable:!0}),L,z;do z=c.lastChild(),z&&(L=z);while(z);L&&!L.contains(document.activeElement)&&de(L)}break}}},y=h.useRef({top:0,left:0});G(b,"scroll",I?void 0:()=>{var s,u,v,$;y.current={top:(v=(s=b.current)===null||s===void 0?void 0:s.scrollTop)!==null&&v!==void 0?v:0,left:($=(u=b.current)===null||u===void 0?void 0:u.scrollLeft)!==null&&$!==void 0?$:0}});let S=s=>{if(e.isFocused){s.currentTarget.contains(s.target)||e.setFocused(!1);return}if(s.currentTarget.contains(s.target)){if(e.setFocused(!0),e.focusedKey==null){var u,v;let F=k=>{k!=null&&(e.setFocusedKey(k),p&&!e.isSelected(k)&&e.replaceSelection(k))},D=s.relatedTarget;var $,x;D&&s.currentTarget.compareDocumentPosition(D)&Node.DOCUMENT_POSITION_FOLLOWING?F(($=e.lastSelectedKey)!==null&&$!==void 0?$:(u=t.getLastKey)===null||u===void 0?void 0:u.call(t)):F((x=e.firstSelectedKey)!==null&&x!==void 0?x:(v=t.getFirstKey)===null||v===void 0?void 0:v.call(t))}else!I&&b.current&&(b.current.scrollTop=y.current.top,b.current.scrollLeft=y.current.left);if(e.focusedKey!=null&&b.current){let F=Z(l,e.focusedKey);F instanceof HTMLElement&&(!F.contains(document.activeElement)&&!K&&de(F),fe()==="keyboard"&&ye(F,{containingElement:l.current}))}}},A=s=>{s.currentTarget.contains(s.relatedTarget)||e.setFocused(!1)},P=h.useRef(!1);G(l,Le,K?s=>{let{detail:u}=s;s.stopPropagation(),e.setFocused(!0),u?.focusStrategy==="first"&&(P.current=!0)}:void 0);let C=se(()=>{var s,u;let v=(u=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&u!==void 0?u:null;if(v==null){let $=me();ze(l.current),xe($,null),e.collection.size>0&&(P.current=!1)}else e.setFocusedKey(v),P.current=!1});he(()=>{P.current&&C()},[e.collection,C]);let w=se(()=>{e.collection.size>0&&(P.current=!1)});he(()=>{w()},[e.focusedKey,w]),G(l,Be,K?s=>{var u;s.stopPropagation(),e.setFocused(!1),!((u=s.detail)===null||u===void 0)&&u.clearFocusKey&&e.setFocusedKey(null)}:void 0);const W=h.useRef(n),H=h.useRef(!1);h.useEffect(()=>{if(W.current){var s,u;let x=null;var v;n==="first"&&(x=(v=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&v!==void 0?v:null);var $;n==="last"&&(x=($=(u=t.getLastKey)===null||u===void 0?void 0:u.call(t))!==null&&$!==void 0?$:null);let F=e.selectedKeys;if(F.size){for(let D of F)if(e.canSelectItem(D)){x=D;break}}e.setFocused(!0),e.setFocusedKey(x),x==null&&!K&&l.current&&ue(l.current),e.collection.size>0&&(W.current=!1,H.current=!0)}});let j=h.useRef(e.focusedKey),B=h.useRef(null);h.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==j.current||H.current)&&b.current&&l.current){let s=fe(),u=Z(l,e.focusedKey);if(!(u instanceof HTMLElement))return;(s==="keyboard"||H.current)&&(B.current&&cancelAnimationFrame(B.current),B.current=requestAnimationFrame(()=>{b.current&&(Se(b.current,u),s!=="virtual"&&ye(u,{containingElement:l.current}))}))}!K&&e.isFocused&&e.focusedKey==null&&j.current!=null&&l.current&&ue(l.current),j.current=e.focusedKey,H.current=!1}),h.useEffect(()=>()=>{B.current&&cancelAnimationFrame(B.current)},[]),G(l,"react-aria-focus-scope-restore",s=>{s.preventDefault(),e.setFocused(!0)});let q={onKeyDown:m,onFocus:S,onBlur:A,onMouseDown(s){b.current===s.target&&s.preventDefault()}},{typeSelectProps:Y}=je({keyboardDelegate:t,selectionManager:e});T||(q=ae(Y,q));let U;K||(U=e.focusedKey==null?0:-1);let V=He(e.collection);return{collectionProps:ae(q,{tabIndex:U,"data-collection":V})}}class nt{getItemRect(e){let t=this.ref.current;if(!t)return null;let l=e!=null?Z(this.ref,e):null;if(!l)return null;let n=t.getBoundingClientRect(),o=l.getBoundingClientRect();return{x:o.left-n.left-t.clientLeft+t.scrollLeft,y:o.top-n.top-t.clientTop+t.scrollTop,width:o.width,height:o.height}}getContentSize(){let e=this.ref.current;var t,l;return{width:(t=e?.scrollWidth)!==null&&t!==void 0?t:0,height:(l=e?.scrollHeight)!==null&&l!==void 0?l:0}}getVisibleRect(){let e=this.ref.current;var t,l,n,o;return{x:(t=e?.scrollLeft)!==null&&t!==void 0?t:0,y:(l=e?.scrollTop)!==null&&l!==void 0?l:0,width:(n=e?.clientWidth)!==null&&n!==void 0?n:0,height:(o=e?.clientHeight)!==null&&o!==void 0?o:0}}constructor(e){this.ref=e}}class R extends Set{constructor(e,t,l){super(e),e instanceof R?(this.anchorKey=t??e.anchorKey,this.currentKey=l??e.currentKey):(this.anchorKey=t??null,this.currentKey=l??null)}}function Ye(i,e){if(i.size!==e.size)return!1;for(let t of i)if(!e.has(t))return!1;return!0}function rt(i){let{selectionMode:e="none",disallowEmptySelection:t=!1,allowDuplicateSelectionEvents:l,selectionBehavior:n="toggle",disabledBehavior:o="all"}=i,r=h.useRef(!1),[,a]=h.useState(!1),f=h.useRef(null),p=h.useRef(null),[,T]=h.useState(null),K=h.useMemo(()=>be(i.selectedKeys),[i.selectedKeys]),E=h.useMemo(()=>be(i.defaultSelectedKeys,new R),[i.defaultSelectedKeys]),[I,b]=Ee(K,E,i.onSelectionChange),M=h.useMemo(()=>i.disabledKeys?new Set(i.disabledKeys):new Set,[i.disabledKeys]),[d,g]=h.useState(n);n==="replace"&&d==="toggle"&&typeof I=="object"&&I.size===0&&g("replace");let m=h.useRef(n);return h.useEffect(()=>{n!==m.current&&(g(n),m.current=n)},[n]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:d,setSelectionBehavior:g,get isFocused(){return r.current},setFocused(y){r.current=y,a(y)},get focusedKey(){return f.current},get childFocusStrategy(){return p.current},setFocusedKey(y,S="first"){f.current=y,p.current=S,T(y)},selectedKeys:I,setSelectedKeys(y){(l||!Ye(y,I))&&b(y)},disabledKeys:M,disabledBehavior:o}}function be(i,e){return i?i==="all"?"all":new R(i):e}class Ve{build(e,t){return this.context=t,$e(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(O.isValidElement(t)&&t.type===O.Fragment)yield*this.iterateCollection({children:t.props.children,items:l});else if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");let n=0;for(let o of l)yield*this.getFullNode({value:o,index:n},{renderer:t}),n++}else{let n=[];O.Children.forEach(t,r=>{r&&n.push(r)});let o=0;for(let r of n){let a=this.getFullNode({element:r,index:o},{});for(let f of a)o++,yield f}}}getKey(e,t,l,n){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${n}${t.key}`;let o=t.value;if(o!=null){var r;let a=(r=o.key)!==null&&r!==void 0?r:o.id;if(a==null)throw new Error("No key found for item");return a}return n?`${n}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,n){if(O.isValidElement(e.element)&&e.element.type===O.Fragment){let d=[];O.Children.forEach(e.element.props.children,m=>{d.push(m)});var o;let g=(o=e.index)!==null&&o!==void 0?o:0;for(const m of d)yield*this.getFullNode({element:m,index:g++},t,l,n);return}let r=e.element;if(!r&&e.value&&t&&t.renderer){let d=this.cache.get(e.value);if(d&&(!d.shouldInvalidate||!d.shouldInvalidate(this.context))){d.index=e.index,d.parentKey=n?n.key:null,yield d;return}r=t.renderer(e.value)}if(O.isValidElement(r)){let d=r.type;if(typeof d!="function"&&typeof d.getCollectionNode!="function"){let S=r.type;throw new Error(`Unknown element <${S}> in collection.`)}let g=d.getCollectionNode(r.props,this.context);var a;let m=(a=e.index)!==null&&a!==void 0?a:0,y=g.next();for(;!y.done&&y.value;){let S=y.value;e.index=m;var f;let A=(f=S.key)!==null&&f!==void 0?f:null;A==null&&(A=S.element?null:this.getKey(r,e,t,l));let C=[...this.getFullNode({...S,key:A,index:m,wrapper:Xe(e.wrapper,S.wrapper)},this.getChildState(t,S),l?`${l}${r.key}`:r.key,n)];for(let w of C){var p,T;w.value=(T=(p=S.value)!==null&&p!==void 0?p:e.value)!==null&&T!==void 0?T:null,w.value&&this.cache.set(w.value,w);var K;if(e.type&&w.type!==e.type)throw new Error(`Unsupported type <${ne(w.type)}> in <${ne((K=n?.type)!==null&&K!==void 0?K:"unknown parent type")}>. Only <${ne(e.type)}> is supported.`);m++,yield w}y=g.next(C)}return}if(e.key==null||e.type==null)return;let E=this;var I,b;let M={type:e.type,props:e.props,key:e.key,parentKey:n?n.key:null,value:(I=e.value)!==null&&I!==void 0?I:null,level:n?n.level+1:0,index:e.index,rendered:e.rendered,textValue:(b=e.textValue)!==null&&b!==void 0?b:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:$e(function*(){if(!e.hasChildNodes||!e.childNodes)return;let d=0;for(let g of e.childNodes()){g.key!=null&&(g.key=`${M.key}${g.key}`);let m=E.getFullNode({...g,index:d},E.getChildState(t,g),M.key,M);for(let y of m)d++,yield y}})};yield M}constructor(){this.cache=new WeakMap}}function $e(i){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=i());for(let l of t)e.push(l),yield l}}}function Xe(i,e){if(i&&e)return t=>i(e(t));if(i)return i;if(e)return e}function ne(i){return i[0].toUpperCase()+i.slice(1)}function st(i,e,t){let l=h.useMemo(()=>new Ve,[]),{children:n,items:o,collection:r}=i;return h.useMemo(()=>{if(r)return r;let f=l.build({children:n,items:o},t);return e(f)},[l,n,o,r,t,e])}function Ge(i,e){return typeof e.getChildren=="function"?e.getChildren(i.key):i.childNodes}function Ze(i){return Je(i,0)}function Je(i,e){if(e<0)return;let t=0;for(let l of i){if(t===e)return l;t++}}function ot(i){let e;for(let t of i)e=t;return e}function re(i,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...ge(i,e),e],n=[...ge(i,t),t],o=l.slice(0,n.length).findIndex((r,a)=>r!==n[a]);return o!==-1?(e=l[o],t=n[o],e.index-t.index):l.findIndex(r=>r===t)>=0?1:(n.findIndex(r=>r===e)>=0,-1)}function ge(i,e){let t=[],l=e;for(;l?.parentKey!=null;)l=i.getItem(l.parentKey),l&&t.unshift(l);return t}class Fe{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if(this.state.selectionMode==="none")return!1;let t=this.getKey(e);return t==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(t):this.state.selectedKeys.has(t)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let l of this.state.selectedKeys){let n=this.collection.getItem(l);(!e||n&&re(this.collection,n,e)<0)&&(e=n)}var t;return(t=e?.key)!==null&&t!==void 0?t:null}get lastSelectedKey(){let e=null;for(let l of this.state.selectedKeys){let n=this.collection.getItem(l);(!e||n&&re(this.collection,n,e)>0)&&(e=n)}var t;return(t=e?.key)!==null&&t!==void 0?t:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let l;if(this.state.selectedKeys==="all")l=new R([t],t,t);else{let r=this.state.selectedKeys;var n;let a=(n=r.anchorKey)!==null&&n!==void 0?n:t;l=new R(r,a,t);var o;for(let f of this.getKeyRange(a,(o=r.currentKey)!==null&&o!==void 0?o:t))l.delete(f);for(let f of this.getKeyRange(t,a))this.canSelectItem(f)&&l.add(f)}this.state.setSelectedKeys(l)}getKeyRange(e,t){let l=this.collection.getItem(e),n=this.collection.getItem(t);return l&&n?re(this.collection,l,n)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var l;if(!((l=this.layoutDelegate)===null||l===void 0)&&l.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let n=[],o=e;for(;o!=null;){let r=this.collection.getItem(o);if(r&&(r.type==="item"||r.type==="cell"&&this.allowsCellSelection)&&n.push(o),o===t)return n;o=this.collection.getKeyAfter(o)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t&&t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let l=new R(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);l.has(t)?l.delete(t):this.canSelectItem(t)&&(l.add(t),l.anchorKey=t,l.currentKey=t),!(this.disallowEmptySelection&&l.size===0)&&this.state.setSelectedKeys(l)}replaceSelection(e){if(this.selectionMode==="none")return;let t=this.getKey(e);if(t==null)return;let l=this.canSelectItem(t)?new R([t],t,t):new R;this.state.setSelectedKeys(l)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new R;for(let l of e){let n=this.getKey(l);if(n!=null&&(t.add(n),this.selectionMode==="single"))break}this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l!=null;){if(this.canSelectItem(l)){var n;let r=this.collection.getItem(l);r?.type==="item"&&e.push(l);var o;r?.hasChildNodes&&(this.allowsCellSelection||r.type!=="item")&&t((o=(n=Ze(Ge(r,this.collection)))===null||n===void 0?void 0:n.key)!==null&&o!==void 0?o:null)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new R)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let l=this.collection.getItem(e);return!(!l||!(l==null||(t=l.props)===null||t===void 0)&&t.isDisabled||l.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,l;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}withCollection(e){return new Fe(e,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(e,t,l){this.collection=e,this.state=t;var n;this.allowsCellSelection=(n=l?.allowsCellSelection)!==null&&n!==void 0?n:!1,this._isSelectAll=null,this.layoutDelegate=l?.layoutDelegate||null}}export{rt as $,st as a,Fe as b,Ge as c,nt as d,tt as e,it as f,ze as g,lt as h,pe as i,je as j,ot as k,Ze as l,Je as m,ye as n,G as o};
