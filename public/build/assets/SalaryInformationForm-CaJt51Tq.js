import{r as b,j as e,m as Z,c as J,e as X,F as ae,b as B,d as le,R as de,s as Y}from"./app-B6wsOsaS.js";import{C as be,at as ce,M as te,aE as fe}from"./App-CK2S0NSv.js";import{F as ye}from"./BriefcaseIcon-CfrA7uZL.js";import{F as me}from"./CheckCircleIcon-DEtAvStx.js";import{F as ge}from"./CalendarIcon-CypwPsvu.js";import{F as ve}from"./EnvelopeIcon-BdlOEcSN.js";import{F as _e}from"./useMediaQuery-DZUWRbmB.js";import{F as je}from"./MapPinIcon-DLvBLoQF.js";import{c as se}from"./chunk-C6WKGNND-_SL0ETSL.js";import{p as Fe}from"./chunk-VFIJPDYX-BAUheveH.js";import{d as ee}from"./chunk-IHO36JMK-CuHsjaEa.js";import{F as Ie}from"./XMarkIcon-DSAMkR0J.js";import{s as N}from"./toastUtils-DmQakeEH.js";import{X as ne,a as Ne,U as Ce,P as pe}from"./x-DqnkEDiW.js";import{C as Se}from"./camera-BoZjZEDw.js";import{m as U,a as G,b as q,c as V}from"./chunk-TW2E3XVA-BZhjrx-b.js";import{i as _}from"./chunk-SQIAVXJX-BKfxTp82.js";import{s as T}from"./chunk-C3QHEOC2-CExZ-LMh.js";import{l as L}from"./chunk-Y5DMIIWQ-rOZjnGr-.js";import{m as H}from"./chunk-5LXTSPS7-Sqo0SLte.js";import{U as ke}from"./user-CRAXVpTB.js";import{c as ue}from"./createLucideIcon-Ce9k22lj.js";import{B as we}from"./briefcase-CF0lB4GI.js";const Re=ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Pe=ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),rr=({user:r,departments:w=[],designations:u=[],onEditClick:I,profileStats:n={},canEdit:f=!1})=>{const[k,d]=b.useState(!1),p=w.find(g=>g.id===r.department_id||g.id===r.department),h=u.find(g=>g.id===r.designation_id||g.id===r.designation),S=()=>r.active?"success":"danger",i=()=>{const g=n.completion_percentage||0;return g>=80?"success":g>=50?"warning":"danger"};return e.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(J,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsx(se,{className:"flex gap-4 pb-0",children:e.jsxs("div",{className:"flex gap-4 items-start w-full",children:[e.jsx("div",{className:"relative",children:e.jsx(be,{content:e.jsx("div",{className:`w-4 h-4 rounded-full ${r.active?"bg-success-500":"bg-danger-500"} border-2 border-background`}),placement:"bottom-right",className:"border-0",children:e.jsx(ce,{src:r.profile_image_url||r.profile_image,name:r.name,size:"lg",className:"ring-2 ring-white/20 hover:ring-white/40 transition-all duration-300"})})}),e.jsxs("div",{className:"flex flex-col gap-2 flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:r.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[p&&e.jsx(X,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(ye,{className:"w-3 h-3"}),children:p.name}),h&&e.jsx(X,{size:"sm",variant:"flat",color:"secondary",children:h.title}),e.jsx(X,{size:"sm",variant:"flat",color:S(),startContent:r.active?e.jsx(me,{className:"w-3 h-3"}):e.jsx(ae,{className:"w-3 h-3"}),children:r.active?"Active":"Inactive"})]})]}),f&&e.jsx(Z.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(B,{color:"primary",variant:"bordered",size:"sm",startContent:e.jsx(te,{className:"w-4 h-4"}),onPress:I,className:"bg-white/10 hover:bg-white/20 border-white/20",children:"Edit Profile"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm font-semibold text-foreground",children:[n.completion_percentage||0,"%"]})]}),e.jsx(Fe,{value:n.completion_percentage||0,color:i(),size:"sm",className:"max-w-full"}),e.jsxs("p",{className:"text-xs text-default-500 mt-1",children:[n.completed_sections||0," of ",n.total_sections||8," sections completed"]})]})]})]})}),e.jsxs(le,{className:"pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(fe,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Employee ID"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.employee_id||"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(ge,{className:"w-4 h-4 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Date of Joining"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.date_of_joining?new Date(r.date_of_joining).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(ve,{className:"w-4 h-4 text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:r.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:e.jsx(_e,{className:"w-4 h-4 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-default-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:r.phone||"N/A"})]})]})]}),r.address&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mb-4"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-teal-500/20 rounded-lg",children:e.jsx(je,{className:"w-4 h-4 text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-default-500",children:"Address"}),e.jsx("p",{className:"text-sm text-foreground",children:r.address})]})]})]}),(n.profile_views||n.last_updated)&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"my-4"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-default-500",children:[n.profile_views&&e.jsxs("span",{children:["Views: ",n.profile_views]}),n.last_updated&&e.jsxs("span",{children:["Updated: ",new Date(n.last_updated).toLocaleDateString()]})]})]})]})]})})},ar=({title:r,icon:w,children:u,onEdit:I,canEdit:n=!1,isEmpty:f=!1,isCompleted:k=!1,className:d="",headerAction:p=null,...h})=>{const i=f?{color:"danger",icon:Ie,text:"Empty"}:k?{color:"success",icon:me,text:"Complete"}:{color:"warning",icon:ae,text:"Incomplete"},g=i.icon;return e.jsx(Z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{y:-2},className:d,children:e.jsxs(J,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-300 h-full",...h,children:[e.jsx(se,{className:"flex gap-3 pb-3",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[w&&e.jsx("div",{className:"p-2 bg-primary-500/20 rounded-lg",children:de.cloneElement(w,{className:"w-5 h-5 text-primary-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-foreground",children:r}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(X,{size:"sm",variant:"flat",color:i.color,startContent:e.jsx(g,{className:"w-3 h-3"}),children:i.text})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[p,n&&I&&e.jsx(Z.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(B,{isIconOnly:!0,size:"sm",variant:"bordered",color:"primary",onPress:I,className:"bg-white/10 hover:bg-white/20 border-white/20",children:e.jsx(te,{className:"w-4 h-4"})})})]})]})}),e.jsx(le,{className:"pt-0",children:f?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"p-4 bg-default-100/50 rounded-lg",children:[e.jsx(ae,{className:"w-8 h-8 text-default-400 mx-auto mb-2"}),e.jsx("p",{className:"text-default-500 text-sm",children:"No information available"}),n&&I&&e.jsx(B,{size:"sm",color:"primary",variant:"bordered",className:"mt-3",onPress:I,startContent:e.jsx(te,{className:"w-4 h-4"}),children:"Add Information"})]})}):u})]})})},tr=({label:r,value:w,icon:u,type:I="text",className:n="",valueClassName:f="",labelClassName:k="",showDivider:d=!0})=>{const p=(S,i)=>{if(!S||S==="N/A")return"N/A";switch(i){case"date":return new Date(S).toLocaleDateString();case"email":return S;case"phone":return S;case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(S);default:return S}},h=()=>!w||w==="N/A"?"text-default-400":"text-foreground";return e.jsxs("div",{className:`flex items-center justify-between py-3 ${d?"border-b border-white/10 last:border-b-0":""} ${n}`,children:[e.jsxs("div",{className:`flex items-center gap-2 text-sm text-default-600 ${k}`,children:[u&&de.cloneElement(u,{className:"w-4 h-4"}),e.jsx("span",{children:r})]}),e.jsx("div",{className:`text-sm font-medium ${h()} text-right ${f}`,children:I==="chip"&&w&&w!=="N/A"?e.jsx(X,{size:"sm",variant:"flat",color:"primary",children:p(w,I)}):e.jsx("span",{children:p(w,I)})})]})},sr=({user:r,allUsers:w,departments:u,designations:I,setUser:n,open:f,closeModal:k})=>{const[d,p]=b.useState({id:r.id,name:r.name||"",gender:r.gender||"",birthday:r.birthday||"",date_of_joining:r.date_of_joining||"",address:r.address||"",employee_id:r.employee_id||"",phone:r.phone||"",email:r.email||"",department:r.department_id||r.department||"",designation:r.designation_id||r.designation||"",report_to:r.report_to_id||r.report_to||""}),[h,S]=b.useState({id:r.id}),[i,g]=b.useState(!1),[v,l]=b.useState({}),[c,E]=b.useState(!1),[t,a]=b.useState(!1),[o,s]=b.useState(null),[m,P]=b.useState(I),[F,D]=b.useState(w),y=x=>{const C=x.target.files[0];if(C){const $=C.type;if(!["image/jpeg","image/jpg","image/png"].includes($)){N.error("Invalid file type. Only JPEG and PNG are allowed.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}});return}const A=URL.createObjectURL(C);s(A);const Q=new Promise(async(W,K)=>{try{const z=new FormData;z.append("id",r.id),z.append("profile_image",C),z.append("ruleSet","profile_image");const O=await axios.post(route("profile.update"),z,{headers:{"Content-Type":"multipart/form-data"}});O.data.user?(n(O.data.user),s(null),W(O.data.messages||["Profile image updated successfully"])):K("Failed to update profile image")}catch(z){if(s(null),z.response?.status===422){const O=z.response.data.errors,M=Object.values(O).flat();K(M.join(". "))}else z.response?.data?.error?K(z.response.data.error):K(z.message||"Failed to update profile image")}});N.promise(Q,{pending:{render(){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{children:"Uploading image..."})]})},icon:!1,style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}},success:{render({data:W}){return Array.isArray(W)?W.join(". "):W},icon:"âœ…",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-success, #17C964)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}},error:{render({data:W}){return W||"Failed to update profile image"},icon:"âŒ",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}})}},R=(x,C)=>{p($=>{const A={...$,[x]:C};return C===""&&delete A[x],x==="department"&&C!==$.department&&(A.designation="",A.report_to=""),A}),S($=>{const A={...$,[x]:C};return C===""&&delete A[x],x==="department"&&C!==d.department&&(A.designation="",A.report_to=""),A})};b.useEffect(()=>{const x=h.department||d.department,C=h.designation||d.designation,$=x?parseInt(x):null,A=C?parseInt(C):null;P(I.filter(M=>{const re=parseInt(M.department_id);return $&&re===$}));const Q=I.find(M=>parseInt(M.id)===A),W=Q?parseInt(Q.hierarchy_level):999,K=w.filter(M=>{const re=parseInt(M.department_id||M.department),he=parseInt(M.designation_id||M.designation),ie=I.find(xe=>parseInt(xe.id)===he),oe=ie?parseInt(ie.hierarchy_level):999;return re===$&&oe<W&&oe>0||M.id===d.report_to||M.id===h.report_to});D(K);const z={...h};for(const M in z)M!=="id"&&z[M]===r[M]&&delete z[M];const O=Object.keys(z).length>1;g(O)},[d,h]);const j=async x=>{x.preventDefault(),E(!0);try{const C=await axios.post(route("profile.update"),{ruleSet:"profile",...d});C.status===200&&(n(C.data.user),N.success(C.data.messages?.length>0?C.data.messages.join(" "):"Profile information updated successfully",{icon:"ðŸŸ¢",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-success, #17C964)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),k())}catch(C){E(!1),C.response?(C.response.status===422?(l(C.response.data.errors||{}),N.error(C.response.data.error||"Failed to update profile information.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})):N.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error(C.response.data)):C.request?(N.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error(C.request)):(N.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{background:"var(--theme-content1, #FFFFFF)",border:"1px solid var(--theme-danger, #F31260)",color:"var(--theme-foreground, #11181C)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}}),console.error("Error",C.message))}finally{E(!1)}};return e.jsx(U,{isOpen:f,onOpenChange:k,size:"5xl",scrollBehavior:"inside",backdrop:"blur",hideCloseButton:!0,classNames:{backdrop:"bg-black/30",base:"max-h-[90vh]",body:"p-0",header:"p-0",footer:"p-0"},children:e.jsxs(G,{style:{background:`linear-gradient(135deg, 
                        var(--theme-content1, #FAFAFA) 20%, 
                        var(--theme-content2, #F4F4F5) 10%, 
                        var(--theme-content3, #F1F3F4) 20%)`,borderColor:"var(--theme-divider, #E4E4E7)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))"},children:[e.jsx(q,{className:"p-0",children:e.jsxs("div",{className:"flex items-center justify-between p-6 border-b w-full",style:{borderColor:"var(--theme-divider, #E4E4E7)",color:"var(--theme-foreground, #11181C)"},children:[e.jsx("h3",{className:"text-lg font-semibold",style:{color:"var(--theme-foreground, #11181C)",fontFamily:'var(--fontFamily, "Inter")'},children:"Profile Information"}),e.jsx(B,{isIconOnly:!0,variant:"light",onPress:k,style:{color:"var(--theme-foreground-600, #71717A)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(ne,{size:20})})]})}),e.jsx(V,{className:"p-0",children:e.jsxs("form",{onSubmit:j,children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-full flex items-center justify-center",children:e.jsxs("div",{className:"relative inline-block",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[e.jsx(ce,{src:o||r.profile_image,name:h.name||d.name,size:"lg",className:"w-24 h-24"}),t&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full flex justify-center items-center cursor-pointer",style:{background:"color-mix(in srgb, var(--theme-default, #71717A) 50%, transparent)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(B,{isIconOnly:!0,variant:"light",className:"text-white",children:e.jsx(Se,{size:20})})})}),e.jsx("input",{accept:"image/*",style:{display:"none"},id:"upload-button",type:"file",onChange:y}),e.jsx("label",{htmlFor:"upload-button",children:e.jsx("div",{className:"absolute w-full h-full top-0 left-0 rounded-full cursor-pointer"})})]})}),e.jsx("div",{children:e.jsx(_,{label:"Name",value:h.name||d.name||"",onChange:x=>R("name",x.target.value),isInvalid:!!v.name,errorMessage:v.name,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsxs(T,{label:"Gender",selectedKeys:h.gender||d.gender?[h.gender||d.gender]:[],onSelectionChange:x=>R("gender",Array.from(x)[0]),isInvalid:!!v.gender,errorMessage:v.gender,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(L,{value:"Male",children:"Male"},"Male"),e.jsx(L,{value:"Female",children:"Female"},"Female")]})}),e.jsx("div",{children:e.jsx(_,{label:"Birth Date",type:"date",value:h.birthday||d.birthday||"",onChange:x=>R("birthday",x.target.value),isInvalid:!!v.birthday,errorMessage:v.birthday,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Joining Date",type:"date",value:h.date_of_joining||d.date_of_joining||"",onChange:x=>R("date_of_joining",x.target.value),isInvalid:!!v.date_of_joining,errorMessage:v.date_of_joining,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-full",children:e.jsx(_,{label:"Address",value:h.address||d.address,onChange:x=>R("address",x.target.value),isInvalid:!!v.address,errorMessage:v.address,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Employee ID",value:h.employee_id||d.employee_id||"",onChange:x=>R("employee_id",x.target.value),isInvalid:!!v.employee_id,errorMessage:v.employee_id,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Phone Number",value:h.phone||d.phone,onChange:x=>R("phone",x.target.value),isInvalid:!!v.phone,errorMessage:v.phone,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Email Address",value:h.email||d.email,onChange:x=>R("email",x.target.value),isInvalid:!!v.email,errorMessage:v.email,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(T,{label:"Department",selectedKeys:h.department||d.department?[String(h.department||d.department)]:[],onSelectionChange:x=>R("department",Array.from(x)[0]),isInvalid:!!v.department,errorMessage:v.department,variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:u.map(x=>e.jsx(L,{value:x.id,children:x.name},x.id))})}),e.jsx("div",{children:e.jsx(T,{label:"Designation",selectedKeys:h.designation||d.designation?[String(h.designation||d.designation)]:[],onSelectionChange:x=>R("designation",Array.from(x)[0]),isInvalid:!!v.designation,errorMessage:v.designation,isDisabled:!(h.department||d.department),variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:m.map(x=>e.jsx(L,{value:x.id,children:x.title},x.id))})}),e.jsx("div",{children:e.jsxs(T,{label:"Reports To",selectedKeys:h.report_to||d.report_to?[String(h.report_to||d.report_to)]:[],onSelectionChange:x=>R("report_to",Array.from(x)[0]),isInvalid:!!v.report_to,errorMessage:v.report_to,isDisabled:r.report_to==="na",variant:"bordered",style:{borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(L,{value:"na",children:"--"},"na"),F.map(x=>e.jsx(L,{value:x.id,children:x.name},x.id))]})})]})}),e.jsx(H,{className:"p-0",children:e.jsx("div",{className:"flex items-center justify-center p-6 border-t w-full",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsx(B,{isDisabled:!i,className:"rounded-full px-6",variant:"bordered",color:"primary",type:"submit",isLoading:c,style:{borderColor:"var(--theme-primary, #006FEE)",color:"var(--theme-primary, #006FEE)",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})})})]})})]})})},nr=({user:r,setUser:w,open:u,closeModal:I})=>{const n=()=>{if(typeof window>"u")return"lg";const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",o=parseInt(a);return o===0?"none":o<=4?"sm":o<=8?"md":o<=16?"lg":"full"},[f,k]=b.useState({id:r.id,passport_no:r.passport_no||"",passport_exp_date:r.passport_exp_date||"",nationality:r.nationality||"",religion:r.religion||"",marital_status:r.marital_status||"",employment_of_spouse:r.employment_of_spouse||"",number_of_children:r.number_of_children||"",nid:r.nid||""}),[d,p]=b.useState({id:r.id}),[h,S]=b.useState(!1),[i,g]=b.useState({}),[v,l]=b.useState(!1),c=(t,a)=>{k(o=>{const s={...o,[t]:a};return a===""&&delete s[t],t==="marital_status"&&a==="Single"&&(s.employment_of_spouse="",s.number_of_children=""),s}),p(o=>{const s={...o,[t]:a};return a===""&&delete s[t],t==="marital_status"&&a==="Single"&&(s.employment_of_spouse=null,s.number_of_children=null),s})};b.useEffect(()=>{for(const a in d)a!=="id"&&d[a]===r[a]&&delete d[a];const t=Object.keys(d).filter(a=>a!=="id").length>0;S(t)},[f,d,r]);const E=async t=>{t.preventDefault(),l(!0);try{const a=await axios.post(route("profile.update"),{ruleSet:"personal",...f});a.status===200&&(w(a.data.user),N.success(a.data.messages?.length>0?a.data.messages.join(" "):"Personal information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(a){l(!1),a.response?(a.response.status===422?(g(a.response.data.errors||{}),N.error(a.response.data.error||"Failed to update personal information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):N.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(a.response.data)):a.request?(N.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(a.request)):(N.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",a.message))}finally{l(!1)}};return e.jsx(U,{isOpen:u,onOpenChange:v?void 0:I,size:"2xl",radius:n(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(ke,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Personal Information"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Passport No",value:d.passport_no||f.passport_no||"",onChange:t=>c("passport_no",t.target.value),isInvalid:!!i.passport_no,errorMessage:i.passport_no,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Passport Expiry Date",type:"date",value:d.passport_exp_date||f.passport_exp_date||"",onChange:t=>c("passport_exp_date",t.target.value),isInvalid:!!i.passport_exp_date,errorMessage:i.passport_exp_date,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"NID No",value:d.nid||f.nid||"",onChange:t=>c("nid",t.target.value),isInvalid:!!i.nid,errorMessage:i.nid,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Nationality",value:d.nationality||f.nationality||"",onChange:t=>c("nationality",t.target.value),isInvalid:!!i.nationality,errorMessage:i.nationality,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Religion",value:d.religion||f.religion||"",onChange:t=>c("religion",t.target.value),isInvalid:!!i.religion,errorMessage:i.religion,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsxs(T,{label:"Marital Status",selectedKeys:d.marital_status||f.marital_status?[d.marital_status||f.marital_status]:[],onSelectionChange:t=>c("marital_status",Array.from(t)[0]),isInvalid:!!i.marital_status,errorMessage:i.marital_status,variant:"bordered",size:"sm",radius:n(),classNames:{trigger:"min-h-unit-10",value:"text-small"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(L,{value:"na",children:"-"},"na"),e.jsx(L,{value:"Single",children:"Single"},"Single"),e.jsx(L,{value:"Married",children:"Married"},"Married")]})}),e.jsx("div",{children:e.jsx(_,{label:"Employment of spouse",value:d.marital_status==="Single"?"":d.employment_of_spouse||f.employment_of_spouse,onChange:t=>c("employment_of_spouse",t.target.value),isInvalid:!!i.employment_of_spouse,errorMessage:i.employment_of_spouse,isDisabled:d.marital_status==="Single"||f.marital_status==="Single",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"No. of children",type:"number",value:d.marital_status==="Single"?"":d.number_of_children||f.number_of_children,onChange:t=>c("number_of_children",t.target.value),isInvalid:!!i.number_of_children,errorMessage:i.number_of_children,isDisabled:d.marital_status==="Single"||f.marital_status==="Single",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:I,isDisabled:v,variant:"light",radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!h,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},ir=({user:r,setUser:w,open:u,closeModal:I})=>{const n=()=>{if(typeof window>"u")return"lg";const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",o=parseInt(a);return o===0?"none":o<=4?"sm":o<=8?"md":o<=16?"lg":"full"},[f,k]=b.useState({id:r.id,emergency_contact_primary_name:r.emergency_contact_primary_name||"",emergency_contact_primary_relationship:r.emergency_contact_primary_relationship||"",emergency_contact_primary_phone:r.emergency_contact_primary_phone||"",emergency_contact_secondary_name:r.emergency_contact_secondary_name||"",emergency_contact_secondary_relationship:r.emergency_contact_secondary_relationship||"",emergency_contact_secondary_phone:r.emergency_contact_secondary_phone||""}),[d,p]=b.useState({id:r.id}),[h,S]=b.useState(!1),[i,g]=b.useState({}),[v,l]=b.useState(!1),c=(t,a)=>{k(o=>{const s={...o,[t]:a};return a===""&&delete s[t],s}),p(o=>{const s={...o,[t]:a};return a===""&&delete s[t],s})};b.useEffect(()=>{for(const a in d)a!=="id"&&d[a]===r[a]&&delete d[a];const t=Object.keys(d).filter(a=>a!=="id").length>0;S(t)},[f,d,r]);const E=async t=>{t.preventDefault(),l(!0);try{const a=await axios.post(route("profile.update"),{ruleSet:"emergency",...f});a.status===200&&(w(a.data.user),N.success(a.data.messages?.length>0?a.data.messages.join(" "):"Emergency contact updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(a){l(!1),a.response?(a.response.status===422?(g(a.response.data.errors||{}),N.error(a.response.data.error||"Failed to update emergency contact.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):N.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(a.response.data)):a.request?(N.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(a.request)):(N.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",a.message))}finally{l(!1)}};return e.jsx(U,{isOpen:u,onOpenChange:v?void 0:I,size:"2xl",radius:n(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Ne,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Emergency Contact Information"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(J,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Primary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Name",isRequired:!0,value:d.emergency_contact_primary_name||f.emergency_contact_primary_name||"",onChange:t=>c("emergency_contact_primary_name",t.target.value),isInvalid:!!i.emergency_contact_primary_name,errorMessage:i.emergency_contact_primary_name,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Relationship",isRequired:!0,value:d.emergency_contact_primary_relationship||f.emergency_contact_primary_relationship||"",onChange:t=>c("emergency_contact_primary_relationship",t.target.value),isInvalid:!!i.emergency_contact_primary_relationship,errorMessage:i.emergency_contact_primary_relationship,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Phone",isRequired:!0,value:d.emergency_contact_primary_phone||f.emergency_contact_primary_phone||"",onChange:t=>c("emergency_contact_primary_phone",t.target.value),isInvalid:!!i.emergency_contact_primary_phone,errorMessage:i.emergency_contact_primary_phone,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})}),e.jsx("div",{children:e.jsx(J,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Secondary Contact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Name",value:d.emergency_contact_secondary_name||f.emergency_contact_secondary_name||"",onChange:t=>c("emergency_contact_secondary_name",t.target.value),isInvalid:!!i.emergency_contact_secondary_name,errorMessage:i.emergency_contact_secondary_name,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Relationship",value:d.emergency_contact_secondary_relationship||f.emergency_contact_secondary_relationship||"",onChange:t=>c("emergency_contact_secondary_relationship",t.target.value),isInvalid:!!i.emergency_contact_secondary_relationship,errorMessage:i.emergency_contact_secondary_relationship,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Phone",value:d.emergency_contact_secondary_phone||f.emergency_contact_secondary_phone||"",onChange:t=>c("emergency_contact_secondary_phone",t.target.value),isInvalid:!!i.emergency_contact_secondary_phone,errorMessage:i.emergency_contact_secondary_phone,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:I,isDisabled:v,variant:"light",radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!h,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},or=({user:r,setUser:w,open:u,closeModal:I})=>{const n=()=>{if(typeof window>"u")return"lg";const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",o=parseInt(a);return o===0?"none":o<=4?"sm":o<=8?"md":o<=16?"lg":"full"},[f,k]=b.useState({id:r.id,bank_name:r.bank_name||"",bank_account_no:r.bank_account_no||"",ifsc_code:r.ifsc_code||"",pan_no:r.pan_no||""}),[d,p]=b.useState({id:r.id}),[h,S]=b.useState(!1),[i,g]=b.useState({}),[v,l]=b.useState(!1),c=(t,a)=>{k(o=>{const s={...o,[t]:a};return a===""&&delete s[t],s}),p(o=>{const s={...o,[t]:a};return a===""&&delete s[t],s})};b.useEffect(()=>{for(const a in d)a!=="id"&&d[a]===r[a]&&delete d[a];const t=Object.keys(d).filter(a=>a!=="id").length>0;S(t)},[f,d,r]);const E=async t=>{t.preventDefault(),l(!0);try{const a=await axios.post(route("profile.update"),{ruleSet:"bank",...f});a.status===200&&(w(a.data.user),g({}),N.success(a.data.messages?.length>0?a.data.messages.join(" "):"Bank information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),I())}catch(a){l(!1),a.response?(a.response.status===422?(g(a.response.data.errors||{}),N.error(a.response.data.error||"Failed to update bank information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):N.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(a.response.data)):a.request?(N.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(a.request)):(N.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",a.message))}finally{l(!1)}};return e.jsx(U,{isOpen:u,onOpenChange:v?void 0:I,size:"2xl",radius:n(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Re,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Bank Information"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Bank Name",value:d.bank_name||f.bank_name||"",onChange:t=>c("bank_name",t.target.value),isInvalid:!!i.bank_name,errorMessage:i.bank_name,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Bank Account No.",value:d.bank_account_no||f.bank_account_no||"",onChange:t=>c("bank_account_no",t.target.value),isInvalid:!!i.bank_account_no,errorMessage:i.bank_account_no,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"IFSC Code",value:d.ifsc_code||f.ifsc_code||"",onChange:t=>c("ifsc_code",t.target.value),isInvalid:!!i.ifsc_code,errorMessage:i.ifsc_code,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"PAN No.",value:d.pan_no||f.pan_no||"",onChange:t=>c("pan_no",t.target.value),isInvalid:!!i.pan_no,errorMessage:i.pan_no,variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:I,isDisabled:v,variant:"light",radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!h,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},lr=({user:r,open:w,closeModal:u,handleDelete:I,setUser:n})=>{const f=()=>{if(typeof window>"u")return"lg";const o=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",s=parseInt(o);return s===0?"none":s<=4?"sm":s<=8?"md":s<=16?"lg":"full"},[k,d]=b.useState({id:r.id,family_member_name:r.family_member_name||"",family_member_relationship:r.family_member_relationship||"",family_member_dob:r.family_member_dob||"",family_member_phone:r.family_member_phone||""}),[p,h]=b.useState({id:r.id}),[S,i]=b.useState(!1),[g,v]=b.useState({}),[l,c]=b.useState(!1),E=(a,o)=>{d(s=>{const m={...s,[a]:o};return o===""&&delete m[a],m}),h(s=>{const m={...s,[a]:o};return o===""&&delete m[a],m})};b.useEffect(()=>{for(const o in p)o!=="id"&&p[o]===r[o]&&delete p[o];const a=Object.keys(p).filter(o=>o!=="id").length>0;i(a)},[k,p,r]);const t=async a=>{a.preventDefault(),c(!0);try{const o=await axios.post(route("profile.update"),{ruleSet:"family",...k});o.status===200&&(n(o.data.user),N.success(o.data.messages?.length>0?o.data.messages.join(" "):"Family information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),u())}catch(o){c(!1),o.response?(o.response.status===422?(v(o.response.data.errors||{}),N.error(o.response.data.error||"Failed to update family information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):N.error("An unexpected error occurred. Please try again later.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(o.response.data)):o.request?(N.error("No response received from the server. Please check your internet connection.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(o.request)):(N.error("An error occurred while setting up the request.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error("Error",o.message))}finally{c(!1)}};return e.jsx(U,{isOpen:w,onOpenChange:l?void 0:u,size:"2xl",radius:f(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Ce,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Family Member"})]}),e.jsxs("form",{onSubmit:t,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Name",variant:"bordered",value:p.family_member_name||k.family_member_name||"",onChange:a=>E("family_member_name",a.target.value),isInvalid:!!g.family_member_name,errorMessage:g.family_member_name,size:"sm",radius:f(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Relationship",variant:"bordered",value:p.family_member_relationship||k.family_member_relationship||"",onChange:a=>E("family_member_relationship",a.target.value),isInvalid:!!g.family_member_relationship,errorMessage:g.family_member_relationship,size:"sm",radius:f(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Date of Birth",variant:"bordered",type:"date",value:p.family_member_dob||k.family_member_dob||"",onChange:a=>E("family_member_dob",a.target.value),isInvalid:!!g.family_member_dob,errorMessage:g.family_member_dob,size:"sm",radius:f(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-1",children:e.jsx(_,{label:"Phone",variant:"bordered",value:p.family_member_phone||k.family_member_phone||"",onChange:a=>E("family_member_phone",a.target.value),isInvalid:!!g.family_member_phone,errorMessage:g.family_member_phone,size:"sm",radius:f(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:u,isDisabled:l,variant:"light",radius:f(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!S,variant:"bordered",color:"primary",type:"submit",isLoading:l,radius:f(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},dr=({user:r,open:w,closeModal:u,setUser:I})=>{const n=()=>{if(typeof window>"u")return"lg";const s=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",m=parseInt(s);return m===0?"none":m<=4?"sm":m<=8?"md":m<=16?"lg":"full"},[f,k]=b.useState({id:r.id}),[d,p]=b.useState(!1),[h,S]=b.useState(r.educations&&r.educations.length>0?r.educations:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),[i,g]=b.useState({}),[v,l]=b.useState(!1),c=(o,s,m)=>{const P=[...h];P[o]={...P[o],[s]:m},S(P);const F=P.filter((y,R)=>{const j=r.educations[R]||{},x=!j.id||y.institution!==j.institution||y.subject!==j.subject||y.degree!==j.degree||y.starting_date!==j.starting_date||y.complete_date!==j.complete_date||y.grade!==j.grade,C=j.id&&y.institution===j.institution&&y.subject===j.subject&&y.degree===j.degree&&y.starting_date===j.starting_date&&y.complete_date===j.complete_date&&y.grade===j.grade;return x&&!C});k(y=>({...y,educations:[...F]}));const D=F.length>0;p(D)},E=async o=>{const s=h[o],m=h.filter((P,F)=>F!==o);if(S(m.length>0?m:[{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}]),s.id){const P=new Promise(async(F,D)=>{try{const y=await fetch("/education/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:s.id,user_id:r.id})}),R=await y.json();y.ok?(k(j=>({...j,educations:R.educations})),I(j=>({...j,educations:R.educations})),F(R.message||"Education record deleted successfully.")):(g(R.errors),console.error(R.errors),D(R.error||"Failed to delete education record."))}catch(y){D(y)}});N.promise(P,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Deleting education record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})}},t=async o=>{o.preventDefault(),l(!0);const s=new Promise(async(m,P)=>{try{const F=await fetch("/education/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({educations:h.map(y=>({...y,user_id:r.id}))})}),D=await F.json();F.ok?(I(y=>({...y,educations:D.educations})),l(!1),u(),m([...D.messages])):(l(!1),g(D.errors),console.error(D.errors),P(D.error||"Failed to update education records."))}catch(F){l(!1),P(F.message||"An unexpected error occurred while updating education records.")}});N.promise(s,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Updating education records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:m}){return e.jsx(e.Fragment,{children:m.map((P,F)=>e.jsx("div",{children:P},F))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:m}){return e.jsx(e.Fragment,{children:m})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},a=async()=>{S([...h,{institution:"",subject:"",degree:"",starting_date:"",complete_date:"",grade:""}])};return e.jsx(U,{isOpen:w,onOpenChange:v?void 0:u,size:"3xl",radius:n(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(Pe,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Education Information"})]}),e.jsxs("form",{onSubmit:t,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-4",children:[h.map((o,s)=>e.jsx("div",{children:e.jsx(Card,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["Education #",s+1]}),e.jsx(B,{isIconOnly:!0,variant:"light",onPress:()=>E(s),className:"text-red-500 hover:text-red-700",size:"sm",radius:n(),children:e.jsx(ne,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Institution",value:o.institution||"",onChange:m=>c(s,"institution",m.target.value),isInvalid:!!i[`educations.${s}.institution`],errorMessage:i[`educations.${s}.institution`]?i[`educations.${s}.institution`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Degree",value:o.degree||"",onChange:m=>c(s,"degree",m.target.value),isInvalid:!!i[`educations.${s}.degree`],errorMessage:i[`educations.${s}.degree`]?i[`educations.${s}.degree`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Subject",value:o.subject||"",onChange:m=>c(s,"subject",m.target.value),isInvalid:!!i[`educations.${s}.subject`],errorMessage:i[`educations.${s}.subject`]?i[`educations.${s}.subject`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Started in",type:"month",value:o.starting_date||"",onChange:m=>c(s,"starting_date",m.target.value),isInvalid:!!i[`educations.${s}.starting_date`],errorMessage:i[`educations.${s}.starting_date`]?i[`educations.${s}.starting_date`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Completed in",type:"month",value:o.complete_date||"",onChange:m=>c(s,"complete_date",m.target.value),isInvalid:!!i[`educations.${s}.complete_date`],errorMessage:i[`educations.${s}.complete_date`]?i[`educations.${s}.complete_date`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Grade",value:o.grade||"",onChange:m=>c(s,"grade",m.target.value),isInvalid:!!i[`educations.${s}.grade`],errorMessage:i[`educations.${s}.grade`]?i[`educations.${s}.grade`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})},s)),e.jsx("div",{className:"mt-4",children:e.jsx(B,{size:"sm",color:"danger",variant:"bordered",onPress:a,startContent:e.jsx(pe,{size:16}),radius:n(),children:"Add More"})})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:u,isDisabled:v,variant:"light",radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!d,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},cr=({user:r,open:w,closeModal:u,setUser:I})=>{const n=()=>{if(typeof window>"u")return"lg";const s=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",m=parseInt(s);return m===0?"none":m<=4?"sm":m<=8?"md":m<=16?"lg":"full"},[f,k]=b.useState({id:r.id}),[d,p]=b.useState(!1),[h,S]=b.useState(r.experiences.length>0?r.experiences:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),[i,g]=b.useState({}),[v,l]=b.useState(!1),c=(o,s,m)=>{const P=[...h];P[o]={...P[o],[s]:m},S(P);const F=P.filter((y,R)=>{const j=r.experiences[R]||{},x=!j.id||y.company_name!==j.company_name||y.location!==j.location||y.job_position!==j.job_position||y.period_from!==j.period_from||y.period_to!==j.period_to||y.description!==j.description,C=j.id&&y.company_name===j.company_name&&y.location===j.location&&y.job_position===j.job_position&&y.period_from===j.period_from&&y.period_to===j.period_to&&y.description===j.description;return x&&!C});k(y=>({...y,experiences:[...F]}));const D=F.length>0;p(D)},E=async o=>{const s=h[o],m=h.filter((P,F)=>F!==o);if(S(m.length>0?m:[{company_name:"",location:"",job_position:"",period_from:"",period_to:"",description:""}]),s.id){const P=new Promise(async(F,D)=>{try{const y=await fetch("/experience/delete",{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({id:s.id,user_id:r.id})}),R=await y.json();y.ok?(k(j=>({...j,experiences:R.experiences})),I(j=>({...j,experiences:R.experiences})),F(R.message||"Experience record deleted successfully."),u()):(g([...R.errors]),D(R.error||"Failed to delete experience record."))}catch(y){D(y)}});N.promise(P,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Deleting experience record ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:F}){return e.jsx(e.Fragment,{children:F})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})}},t=async o=>{o.preventDefault(),l(!0);const s=new Promise(async(m,P)=>{try{const F=await fetch("/experience/update",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({experiences:h.map(y=>({...y,user_id:r.id}))})}),D=await F.json();F.ok?(I(y=>({...y,experiences:D.experiences})),l(!1),u(),m([...D.messages])):(l(!1),g(D.errors),console.error(D.errors),P(D.error||"Failed to update experience records."))}catch(F){l(!1),P(F.message||"An unexpected error occurred while updating experience records.")}});N.promise(s,{pending:{render(){return e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:"sm"}),e.jsx("span",{className:"ml-2",children:"Updating experience records ..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:m}){return e.jsx(e.Fragment,{children:m.map((P,F)=>e.jsx("div",{children:P},F))})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:m}){return e.jsx(e.Fragment,{children:m})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},a=async()=>{S([...h,{company:"",role:"",start_date:"",end_date:"",responsibilities:""}])};return e.jsx(U,{isOpen:w,onOpenChange:v?void 0:u,size:"3xl",radius:n(),scrollBehavior:"inside",classNames:{base:"bg-content1",backdrop:"bg-black/50 backdrop-blur-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs(G,{children:[e.jsxs(q,{className:"flex gap-3 items-center",style:{fontFamily:'var(--fontFamily, "Inter")',borderBottom:"1px solid var(--theme-divider)"},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{background:"color-mix(in srgb, var(--theme-primary) 20%, transparent)",borderRadius:"var(--borderRadius, 8px)"},children:e.jsx(we,{size:20,style:{color:"var(--theme-primary)"}})}),e.jsx("span",{className:"text-lg font-semibold",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Experience Information"})]}),e.jsxs("form",{onSubmit:t,children:[e.jsx(V,{className:"py-4 px-4 sm:py-6 sm:px-6",style:{fontFamily:'var(--fontFamily, "Inter")'},children:e.jsxs("div",{className:"space-y-4",children:[h.map((o,s)=>e.jsx("div",{children:e.jsx(J,{className:"shadow-lg",children:e.jsxs("div",{className:"p-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 dark:text-white",children:["Experience #",s+1]}),e.jsx(B,{isIconOnly:!0,variant:"light",onPress:()=>E(s),className:"text-red-500 hover:text-red-700",size:"sm",radius:n(),children:e.jsx(ne,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_,{label:"Company",value:o.company_name||"",onChange:m=>c(s,"company_name",m.target.value),isInvalid:!!i[`experiences.${s}.company_name`],errorMessage:i[`experiences.${s}.company_name`]?i[`experiences.${s}.company_name`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Location",value:o.location||"",onChange:m=>c(s,"location",m.target.value),isInvalid:!!i[`experiences.${s}.location`],errorMessage:i[`experiences.${s}.location`]?i[`experiences.${s}.location`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Role",value:o.job_position||"",onChange:m=>c(s,"job_position",m.target.value),isInvalid:!!i[`experiences.${s}.job_position`],errorMessage:i[`experiences.${s}.job_position`]?i[`experiences.${s}.job_position`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Started From",type:"date",value:o.period_from||"",onChange:m=>c(s,"period_from",m.target.value),isInvalid:!!i[`experiences.${s}.period_from`],errorMessage:i[`experiences.${s}.period_from`]?i[`experiences.${s}.period_from`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{children:e.jsx(_,{label:"Ended On",type:"date",value:o.period_to||"",onChange:m=>c(s,"period_to",m.target.value),isInvalid:!!i[`experiences.${s}.period_to`],errorMessage:i[`experiences.${s}.period_to`]?i[`experiences.${s}.period_to`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})}),e.jsx("div",{className:"col-span-full",children:e.jsx(_,{label:"Responsibilities",value:o.description||"",onChange:m=>c(s,"description",m.target.value),isInvalid:!!i[`experiences.${s}.description`],errorMessage:i[`experiences.${s}.description`]?i[`experiences.${s}.description`][0]:"",variant:"bordered",size:"sm",radius:n(),classNames:{input:"text-small",inputWrapper:"min-h-unit-10"},style:{fontFamily:'var(--fontFamily, "Inter")'}})})]})]})})},s)),e.jsx(B,{size:"sm",color:"danger",variant:"bordered",onPress:a,startContent:e.jsx(pe,{size:16}),radius:n(),children:"Add More"})]})}),e.jsxs(H,{style:{borderTop:"1px solid var(--theme-divider)",fontFamily:'var(--fontFamily, "Inter")'},children:[e.jsx(B,{onPress:u,isDisabled:v,variant:"light",radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Cancel"}),e.jsx(B,{isDisabled:!d,variant:"bordered",color:"primary",type:"submit",isLoading:v,radius:n(),style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Submit"})]})]})]})})},mr=({user:r,setUser:w})=>{const[u,I]=b.useState({id:r.id,salary_basis:r.salary_basis||"",salary_amount:r.salary_amount||"",payment_type:r.payment_type||"",pf_contribution:r.pf_contribution??!1,pf_no:r.pf_no||"",employee_pf_rate:r.employee_pf_rate||0,additional_pf_rate:r.additional_pf_rate||0,total_pf_rate:r.total_pf_rate||0,esi_contribution:r.esi_contribution??!1,esi_no:r.esi_no||"",employee_esi_rate:r.employee_esi_rate||0,additional_esi_rate:r.additional_esi_rate||0,total_esi_rate:r.total_esi_rate||0}),[n,f]=b.useState({id:r.id}),[k,d]=b.useState(!1),[p,h]=b.useState({}),[S,i]=b.useState(!1),g=(l,c)=>{I(E=>{const t={...E,[l]:c};return c===""&&delete t[l],l==="pf_contribution"&&c===0?(t.pf_no="",t.employee_pf_rate=0,t.additional_pf_rate=0,t.total_pf_rate=0):(l==="employee_pf_rate"||l==="additional_pf_rate")&&(t.total_pf_rate=t.employee_pf_rate+t.additional_pf_rate),l==="esi_contribution"&&c===0?(t.esi_no="",t.employee_esi_rate=0,t.additional_esi_rate=0,t.total_esi_rate=0):(l==="employee_esi_rate"||l==="additional_esi_rate")&&(t.total_esi_rate=t.employee_esi_rate+t.additional_esi_rate),t}),f(E=>{const t={...E,[l]:c};return c===""&&delete t[l],l==="pf_contribution"&&c===0?(t.pf_no="",t.employee_pf_rate=0,t.additional_pf_rate=0,t.total_pf_rate=0):(l==="employee_pf_rate"||l==="additional_pf_rate")&&(t.total_pf_rate=t.employee_pf_rate+t.additional_pf_rate),l==="esi_contribution"&&c===0?(t.esi_no="",t.employee_esi_rate=0,t.additional_esi_rate=0,t.total_esi_rate=0):(l==="employee_esi_rate"||l==="additional_esi_rate")&&(t.total_esi_rate=t.employee_esi_rate+t.additional_esi_rate),t})};b.useEffect(()=>{for(const c in n)c!=="id"&&n[c]===r[c]&&delete n[c];const l=Object.keys(n).filter(c=>c!=="id").length>0;d(l)},[u,n,r]);const v=async l=>{l.preventDefault(),i(!0);try{const c=await axios.post(route("profile.update"),{ruleSet:"salary",...u});c.status===200?(w(c.data.user),i(!1),N.success(c.data.messages?.length>0?c.data.messages.join(" "):"Salary information updated successfully",{icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}})):(i(!1),h(c.data.errors),N.error(c.data.error||"Failed to update salary information.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}))}catch(c){i(!1),N.error(c.response?.data?.message||"An unexpected error occurred.",{icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}),console.error(c)}};return e.jsx(Grid,{container:!0,spacing:2,sx:{display:"flex",alignItems:"stretch"},children:e.jsx(Grid,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column"},children:e.jsxs(J,{className:"shadow-lg",children:[e.jsx(se,{title:"Salary & Statutory Information"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs(CardContent,{children:[e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"Salary Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"salary-basis-label",children:"Salary basis"}),e.jsxs(T,{labelId:"salary-basis-label",value:n.salary_basis||u.salary_basis||"na",onChange:l=>g("salary_basis",l.target.value),error:!!p.salary_basis,helperText:p.salary_basis,label:"Salary basis",MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select salary basis type"}),e.jsx(MenuItem,{value:"Hourly",children:"Hourly"}),e.jsx(MenuItem,{value:"Daily",children:"Daily"}),e.jsx(MenuItem,{value:"Weekly",children:"Weekly"}),e.jsx(MenuItem,{value:"Monthly",children:"Monthly"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{label:"Salary amount",type:"number",fullWidth:!0,placeholder:"Type your salary amount",value:n.salary_amount||u.salary_amount||"",onChange:l=>g("salary_amount",l.target.value),InputProps:{startAdornment:e.jsx(InputAdornment,{position:"start",children:"$"})},error:!!p.salary_amount,helperText:p.salary_amount})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"payment-type-label",children:"Payment type"}),e.jsxs(T,{labelId:"payment-type-label",label:"Payment type",id:`gender-select-${r.id}`,value:n.payment_type||u.payment_type||"na",onChange:l=>g("payment_type",l.target.value),error:!!p.payment_type,helperText:p.payment_type,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select payment type"}),e.jsx(MenuItem,{value:"Bank transfer",children:"Bank transfer"}),e.jsx(MenuItem,{value:"Check",children:"Check"}),e.jsx(MenuItem,{value:"Cash",children:"Cash"})]})]})})]}),e.jsx(ee,{sx:{my:3}}),e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"PF Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"pf-contribution-label",children:"PF contribution"}),e.jsxs(T,{labelId:"pf-contribution-label",label:"PF contribution",id:`gender-select-${r.id}`,value:n.pf_contribution!==void 0?n.pf_contribution:u.pf_contribution!==void 0?u.pf_contribution:"na",onChange:l=>g("pf_contribution",l.target.value),error:!!p.pf_contribution,helperText:p.pf_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select PF contribution"}),e.jsx(MenuItem,{value:1,children:"Yes"}),e.jsx(MenuItem,{value:0,children:"No"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(n.pf_contribution||u.pf_contribution),InputLabelProps:{shrink:!0},label:"PF No.",fullWidth:!0,type:"text",placeholder:"Enter PF No.",value:n.pf_no||u.pf_no,onChange:l=>g("pf_no",l.target.value),error:!!p.pf_no,helperText:p.pf_no})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"employee-pf-rate-label",children:"Employee PF rate"}),e.jsxs(T,{disabled:!(n.pf_contribution||u.pf_contribution),labelId:"employee-pf-rate-label",label:"Employee PF rate",value:n.employee_pf_rate||u.employee_pf_rate||"na",onChange:l=>g("employee_pf_rate",l.target.value),error:!!p.employee_pf_rate,helperText:p.employee_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select pf rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"additional-rate-label",children:"Additional rate"}),e.jsxs(T,{disabled:!(n.pf_contribution||u.pf_contribution),labelId:"additional-rate-label",label:"Additional rate",id:`gender-select-${r.id}`,value:n.additional_pf_rate||u.additional_pf_rate||"na",onChange:l=>g("additional_pf_rate",l.target.value),error:!!p.additional_pf_rate,helperText:p.additional_pf_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(n.pf_contribution||u.pf_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:n.total_pf_rate||u.total_pf_rate?`${n.total_pf_rate||u.total_pf_rate}%`:"",InputProps:{readOnly:!0},error:!!p.total_pf_rate,helperText:p.total_pf_rate})})]}),e.jsx(ee,{sx:{my:3}}),e.jsx(Typography,{sx:{fontWeight:"bold",m:2},children:"ESI Information"}),e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"ESI contribution"}),e.jsxs(T,{labelId:"esi-contribution-label",label:"ESI contribution",value:n.esi_contribution!==void 0?n.esi_contribution:u.esi_contribution!==void 0?u.esi_contribution:"na",onChange:l=>g("esi_contribution",l.target.value),error:!!p.esi_contribution,helperText:p.esi_contribution,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select ESI contribution"}),e.jsx(MenuItem,{value:1,children:"Yes"}),e.jsx(MenuItem,{value:0,children:"No"})]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(n.esi_contribution||u.esi_contribution),InputLabelProps:{shrink:!0},label:"ESI No.",fullWidth:!0,type:"text",placeholder:"Enter ESI No.",value:n.esi_no||u.esi_no,onChange:l=>g("esi_no",l.target.value),error:!!p.esi_no,helperText:p.esi_no})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"Employee ESI rate"}),e.jsxs(T,{disabled:!(n.esi_contribution||u.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:n.employee_esi_rate||u.employee_esi_rate||"na",onChange:l=>g("employee_esi_rate",l.target.value),error:!!p.employee_esi_rate,helperText:p.employee_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select esi rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(FormControl,{fullWidth:!0,children:[e.jsx(InputLabel,{id:"esi-contribution-label",children:"Additional rate"}),e.jsxs(T,{disabled:!(n.esi_contribution||u.esi_contribution),labelId:"esi-contribution-label",label:"ESI contribution",value:n.additional_esi_rate||u.additional_esi_rate||"na",onChange:l=>g("additional_esi_rate",l.target.value),error:!!p.additional_esi_rate,helperText:p.additional_esi_rate,MenuProps:{PaperProps:{sx:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",borderRadius:2,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}},children:[e.jsx(MenuItem,{value:"na",disabled:!0,children:"Select additional rate"}),[...Array(11).keys()].map(l=>e.jsxs(MenuItem,{value:l,children:[l,"%"]},l))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsx(TextField,{disabled:!(n.esi_contribution||u.esi_contribution),InputLabelProps:{shrink:!0},fullWidth:!0,label:"Total rate",placeholder:"N/A",value:n.total_esi_rate||u.total_esi_rate?`${n.total_esi_rate||u.total_esi_rate}%`:"",InputProps:{readOnly:!0},error:!!p.total_esi_rate,helperText:p.total_esi_rate})})]})]}),e.jsx(CardActions,{sx:{display:"flex",alignItems:"center",justifyContent:"center",padding:"16px"},children:e.jsx(LoadingButton,{disabled:!k,sx:{borderRadius:"50px",padding:"6px 16px"},variant:"outlined",color:"primary",type:"submit",loading:S,children:"Submit"})})]})]})})})};export{or as B,ir as E,lr as F,tr as I,sr as P,mr as S,nr as a,dr as b,cr as c,rr as d,ar as e};
