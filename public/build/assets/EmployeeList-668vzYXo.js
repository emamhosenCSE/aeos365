import{j as e,F as fe,e as Y,b,r as n,c as be,d as ve,aw as Ze,n as K,s as q,L as et,i as je,H as tt,m as Ue,a as Le}from"./app-B1idACz3.js";import{au as le,z as $e,B as Me,V as rt,aA as st,y as pe,N as He,aB as at,aC as nt,aD as it,F as xe,d as lt,c as Oe,ar as ot,h as dt,A as ct}from"./App-BxA45E4t.js";import{S as mt}from"./StatsCards-BcTb12h8.js";import{s as L}from"./toastUtils-CW5B8m6C.js";import{F as ae}from"./BuildingOfficeIcon-DRKs9y4o.js";import{F as ne}from"./BriefcaseIcon-CtncUTGk.js";import{m as Ge,a as qe,b as pt,c as xt}from"./chunk-TW2E3XVA-DozWYklk.js";import{m as ht}from"./chunk-5LXTSPS7-Cw-SP9Ff.js";import{F as We}from"./XMarkIcon-BkS9W9l-.js";import{F as Ke}from"./CheckCircleIcon-znT6UY48.js";import{p as ut}from"./chunk-VFIJPDYX-nQIpe2PR.js";import{F as gt}from"./MapPinIcon-CvRrNoqN.js";import{F as Ye}from"./UserIcon-1qA6iUQn.js";import{F as Ie}from"./EnvelopeIcon-B0z_TX9R.js";import{F as Ae}from"./useMediaQuery-oujQjmbJ.js";import{t as ft,a as bt,b as vt,c as jt}from"./chunk-F3UDT23P-C-ho-l6F.js";import{t as yt,a as wt}from"./chunk-YRZGWF2W-DSN9j3G1.js";import{p as Xe}from"./chunk-NL7EUJG2-aTLCznnI.js";import{d as he,a as ue,b as ge,m as se,F as Nt,c as _t}from"./PlusIcon-B7YJbjTI.js";import{s as ye}from"./chunk-C3QHEOC2-tt4DAwFy.js";import{l as ie}from"./chunk-Y5DMIIWQ-CwpVnCx_.js";import{u as kt}from"./chunk-NGIUTAK3-DEWLG6K6.js";import{F as Pt}from"./MagnifyingGlassIcon-DgboSUq1.js";import{c as Be}from"./chunk-C6WKGNND-DYIi9UqF.js";import{i as Ft}from"./chunk-SQIAVXJX-BmeQe73H.js";import{b as Ct}from"./chunk-57V4RE7B-HilHExJA.js";import"./app-BmhO9GrS.js";import"./index-B22Xm-65.js";/* empty css                      */import"./chunk-CV4BWJDJ-BFly1wX0.js";import"./index-CaNeU5V8.js";import"./index-BvevyAVm.js";import"./Cog6ToothIcon-BTkQVx_H.js";import"./GlobeAltIcon-BXsgRUBL.js";import"./useBranding-BpzGYNdv.js";import"./useDialog-Ch8oEuGx.js";import"./VisuallyHidden-8dXxwzFE.js";import"./keyboard-Ct-gpNNq.js";import"./useLabels-xtEGP3rr.js";import"./index-BvG5LGgQ.js";import"./chunk-AUA5GDXN-Dy7XAS6o.js";import"./chunk-WQVQ7P2I-BDe9YmDI.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-BFW_lSqD.js";import"./chunk-IHO36JMK-_QcGGA4V.js";import"./ShieldCheckIcon-BVzIZ77z.js";import"./AcademicCapIcon-QvlhCYpE.js";import"./IdentificationIcon-CvziX476.js";import"./ArrowLeftIcon-B39h7gxR.js";import"./ArrowRightIcon-DyVdpuyc.js";import"./CalendarDaysIcon-CPIWRTu0.js";import"./CalendarIcon-DXmDQodP.js";import"./CircleStackIcon-DdzMQ0P3.js";import"./ClipboardDocumentCheckIcon-DRpcDtD7.js";import"./DeviceTabletIcon--UjnqdVT.js";import"./CpuChipIcon-Czc12K36.js";import"./CurrencyDollarIcon-nhXxeFAs.js";import"./DevicePhoneMobileIcon-BEyIwQb0.js";import"./DocumentArrowUpIcon-1h0_t1N_.js";import"./DocumentIcon-CZnboGRP.js";import"./EyeIcon-Cqrke5l0.js";import"./InformationCircleIcon-DqlZzEsT.js";import"./KeyIcon-EZeCAT5w.js";import"./LockClosedIcon-D4pmCoEC.js";import"./PlusCircleIcon-ChwrtP31.js";import"./PrinterIcon-BAYK2vO7.js";import"./UserCircleIcon-BluwysQc.js";import"./UserGroupIcon-C2aGroqx.js";import"./useHasTabbableChild-D7clvTMF.js";import"./useSelectableItem-2B3SBj_3.js";import"./SelectionManager-CcfpIYkh.js";import"./Item-C3GqwNyW.js";import"./MaintenanceModeBanner-BuwtjklV.js";import"./chunk-P7ACKWSP-5o7fRwLF.js";import"./useProgressBar-Bpr0HQnj.js";import"./useLabel-BWLgnRON.js";import"./useNumberFormatter-p89ekOdc.js";import"./NumberFormatter-DNR9MAW-.js";import"./chunk-PMMJMDBI-B-BWMVyO.js";import"./useToggleState-DFwZ_RpM.js";import"./chunk-ICU6NNET-CXrsm0Bw.js";import"./index-CcVAKcbs.js";import"./chunk-7F3ZLNJ6-CMjtQ9ZK.js";import"./index-BMFea15Y.js";import"./chunk-OH2E76JR-ZyB0wyOM.js";import"./index-BsK0-JqV.js";import"./useTreeState-D7Kaxu17.js";import"./useMenuTriggerState-ZTP0zge5.js";import"./chunk-KQW2TNLT-Cz1cLYHm.js";const St=({open:$,onClose:P,employee:d,onConfirm:S,loading:f=!1})=>{if(!d)return null;const k=d.active_projects_count>0||d.pending_leaves_count>0||d.active_trainings_count>0;return e.jsx(Ge,{isOpen:$,onClose:P,size:"2xl",classNames:{backdrop:"bg-black/50 backdrop-blur-sm",base:"border border-white/20 bg-white/90 backdrop-blur-md",header:"border-b border-danger/30 bg-gradient-to-r from-danger-50/50 to-danger-100/30",body:"py-0",footer:"border-t border-white/10 bg-white/5"},children:e.jsxs(qe,{children:[e.jsx(pt,{className:"flex items-center gap-4 pb-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-danger",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-danger/20 to-danger/10 flex items-center justify-center border border-danger/30",children:e.jsx(fe,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Delete Employee"})]})}),e.jsxs(xt,{children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 backdrop-blur-2xl border border-white/10 mb-6 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx(le,{src:d.profile_image_url||d.profile_image,name:d.name,size:"lg",className:"ring-2 ring-white/20 shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:d.name}),e.jsx("p",{className:"text-sm text-default-500",children:d.email}),d.employee_id&&e.jsxs("span",{className:"inline-block mt-1 px-3 py-1 text-xs rounded-lg bg-white/10 border border-white/10",children:["ID: ",d.employee_id]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Department"})]}),e.jsx("p",{className:"text-sm font-medium",children:d.department_name||"Not assigned"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-default-500 font-medium",children:"Designation"})]}),e.jsx("p",{className:"text-sm font-medium",children:d.designation_name||"Not assigned"})]})]})]}),e.jsx("div",{className:"mb-6 p-4 rounded-2xl bg-danger-50/50 backdrop-blur-2xl border border-danger/30",children:e.jsxs("div",{className:"flex items-center gap-3 text-danger",children:[e.jsx(fe,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:"This action will permanently delete the employee record and cannot be undone."})]})}),k&&e.jsxs("div",{className:"p-6 rounded-2xl bg-warning-50/50 backdrop-blur-2xl border border-warning/30 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-warning/20 flex items-center justify-center",children:e.jsx(fe,{className:"w-4 h-4 text-warning"})}),e.jsx("h4",{className:"text-sm font-semibold text-warning",children:"Employee Has Active Data"})]}),e.jsx("p",{className:"text-sm text-default-500 mb-4",children:"This employee has the following active records that will also be affected:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.active_projects_count>0&&e.jsxs(Y,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[d.active_projects_count," Active Projects"]}),d.pending_leaves_count>0&&e.jsxs(Y,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[d.pending_leaves_count," Pending Leaves"]}),d.active_trainings_count>0&&e.jsxs(Y,{size:"sm",variant:"flat",color:"warning",className:"bg-warning/20 text-warning border border-warning/30",children:[d.active_trainings_count," Active Trainings"]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-white/5 border border-white/10 mb-4",children:[e.jsxs("p",{className:"text-sm mb-2 font-medium",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-danger font-semibold",children:d.name}),"?"]}),e.jsx("p",{className:"text-xs text-default-500",children:"Type the employee's name below to confirm this permanent deletion:"})]})]}),e.jsxs(ht,{className:"flex justify-between px-6 py-6 bg-white/5",children:[e.jsx(b,{variant:"light",onPress:P,isDisabled:f,className:"hover:bg-white/10",children:"Cancel"}),e.jsx(b,{color:"danger",variant:"solid",onPress:S,isLoading:f,startContent:!f&&e.jsx($e,{className:"w-4 h-4"}),className:"bg-gradient-to-r from-danger to-danger-600 hover:from-danger-600 hover:to-danger-700 shadow-lg",children:f?"Deleting...":"Delete Employee"})]})]})})},Ve=window.axios,Rt=({isOpen:$,onClose:P,employee:d,onImageUpdate:S})=>{const f=n.useRef(null),[k,_]=n.useState(null),[M,p]=n.useState(null),[F,U]=n.useState(!1),[oe,R]=n.useState(0),[v,j]=n.useState(""),Q=2*1024*1024,Z=["image/jpeg","image/jpg","image/png","image/webp"],O=100,V=2e3,H=d?.profile_image_url||null,we=H&&H!==null,ee=T=>{const u=T.target.files[0];if(!u)return;if(j(""),!Z.includes(u.type)){j("Invalid file type. Please select a JPEG, PNG, or WebP image.");return}if(u.size>Q){j(`File too large. Maximum size is ${Q/1024/1024}MB.`);return}const l=URL.createObjectURL(u),o=new Image;o.onload=()=>{if(o.width<O||o.height<O){j(`Image dimensions too small. Minimum size is ${O}x${O} pixels.`),URL.revokeObjectURL(l);return}if(o.width>V||o.height>V){j(`Image dimensions too large. Maximum size is ${V}x${V} pixels.`),URL.revokeObjectURL(l);return}_(u),p(l)},o.onerror=()=>{j("Invalid image file."),URL.revokeObjectURL(l)},o.src=l},h=async()=>{if(!k||!d){console.error("[ProfileUpload] Missing file or employee:",{selectedFile:k,employee:d});return}U(!0),R(0),j("");const T=new FormData;T.append("profile_image",k),T.append("user_id",d.id);const u=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");console.log("[ProfileUpload] Starting upload:",{fileName:k.name,fileSize:k.size,fileType:k.type,userId:d.id,csrfToken:u?"present":"missing",route:route("profile.image.upload")});try{const l=await Ve.post(route("profile.image.upload"),T,{headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":u},onUploadProgress:o=>{const x=Math.round(o.loaded*100/o.total);R(x),console.log("[ProfileUpload] Progress:",x+"%")}});if(console.log("[ProfileUpload] Response:",l.data),l.data.success){if(L.success(l.data.message||"Profile picture updated successfully!"),S){const o=l.data.profile_image_url;console.log("[ProfileUpload] Calling onImageUpdate with:",{employeeId:d.id,newImageUrl:o}),S(d.id,o)}y()}else throw new Error(l.data.message||"Upload failed")}catch(l){console.error("[ProfileUpload] Error details:",{message:l.message,status:l.response?.status,statusText:l.response?.statusText,responseData:l.response?.data,errors:l.response?.data?.errors,headers:l.response?.headers});let o="Failed to upload profile picture",x="";if(l.response?.status===419)o="Session expired (CSRF token mismatch). Please refresh the page.",x="CSRF Token Error";else if(l.response?.status===413)o="File too large. Please choose a smaller image.",x="File Size Error";else if(l.response?.status===422){const w=l.response.data?.errors;w?o=Object.values(w).flat().join(", ")||l.response.data.message||"Validation failed":o=l.response.data.message||"Validation failed",x="Validation Error"}else l.response?.status===403?(o=l.response.data?.message||"Unauthorized to upload profile image",x="Authorization Error"):l.response?.status===500?(o=l.response.data?.message||"Server error during upload",x="Server Error: "+(l.response.data?.exception||"Unknown")):l.response?.data?.message?(o=l.response.data.message,x=`HTTP ${l.response.status}`):l.message&&(o=l.message,x="Network/Client Error");console.error(`[ProfileUpload] ${x}:`,o),j(`${o}${x?` (${x})`:""}`),L.error(o)}finally{U(!1),R(0)}},E=async()=>{if(!d)return;U(!0),j("");const T=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");try{const u=await Ve.delete(route("profile.image.remove"),{data:{user_id:d.id},headers:{"X-CSRF-TOKEN":T}});if(u.data.success){if(L.success(u.data.message||"Profile picture removed successfully!"),S){const l=u.data.profile_image_url;S(d.id,l)}y()}else throw new Error(u.data.message||"Remove failed")}catch(u){console.error("Remove error:",u);const l=u.response?.data?.message||u.message||"Failed to remove profile picture";j(l),L.error(l)}finally{U(!1)}},y=()=>{F||(_(null),p(null),j(""),R(0),M&&URL.revokeObjectURL(M),P())};return d?e.jsx(Ge,{isOpen:$,onClose:y,size:"lg",classNames:{base:"border border-divider bg-content1 shadow-lg",header:"border-b border-divider",footer:"border-t border-divider"},children:e.jsx(qe,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Update Profile Picture"}),e.jsx("p",{className:"text-sm text-gray-500",children:d?.name||"Employee"})]})]}),e.jsx(b,{isIconOnly:!0,variant:"light",onPress:y,className:"text-gray-400 hover:text-gray-600",children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(le,{src:M||H||void 0,name:d?.name||"Employee",size:"lg",className:"w-24 h-24",showBorder:!0})}),v&&e.jsx(Y,{color:"danger",variant:"flat",startContent:e.jsx(fe,{className:"w-4 h-4"}),className:"mb-4 w-full",children:v}),F&&e.jsx("div",{className:"mb-4",children:e.jsx(ut,{value:oe,color:"primary",size:"sm",label:"Uploading...",showValueLabel:!0,className:"w-full"})}),e.jsx(be,{className:"mb-4",children:e.jsxs(ve,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("input",{ref:f,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:ee,className:"hidden",disabled:F}),e.jsx(b,{onPress:()=>f.current?.click(),startContent:e.jsx(Me,{className:"w-5 h-5"}),variant:"flat",color:"primary",disabled:F,className:"mb-3",children:"Choose New Picture"}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP"}),e.jsx("p",{children:"Maximum size: 2MB"}),e.jsx("p",{children:"Minimum dimensions: 100x100px"}),e.jsx("p",{children:"Maximum dimensions: 2000x2000px"})]})]}),k&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(k.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(b,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>{_(null),p(null),j("")},disabled:F,children:e.jsx(We,{className:"w-4 h-4"})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[we&&e.jsx(b,{onPress:E,startContent:e.jsx($e,{className:"w-4 h-4"}),color:"danger",variant:"flat",disabled:F,children:"Remove Picture"}),e.jsx(b,{onPress:y,variant:"flat",disabled:F,children:"Cancel"}),e.jsx(b,{onPress:h,color:"primary",disabled:!k||F,isLoading:F,children:F?"Uploading...":"Update Picture"})]})]})})}):null},Dt=({allUsers:$,allManagers:P=[],departments:d,designations:S,attendanceTypes:f,setUsers:k,isMobile:_,isTablet:M,pagination:p,onPageChange:F,onRowsPerPageChange:U,totalUsers:oe=0,loading:R=!1,updateEmployeeOptimized:v,deleteEmployeeOptimized:j})=>{const[Q,Z]=n.useState(!1),[O,V]=n.useState(null),[H,we]=n.useState({}),[ee,h]=n.useState(!1),[E,y]=n.useState(null),[T,u]=n.useState(!1),[l,o]=n.useState({isOpen:!1,employee:null}),x=()=>{if(typeof window>"u")return"lg";const s=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",c=parseInt(s);return c===0?"none":c<=4?"sm":c<=8?"md":c<=16?"lg":"full"},w=t=>t?t.replace(/_\d+$/,""):"",g=t=>{const s=t?.config;if(!s)return!1;switch(w(t.slug)){case"geo_polygon":return s.polygon&&s.polygon.length>=3||s.polygons&&s.polygons.some(i=>i.points?.length>=3);case"wifi_ip":return s.allowed_ips&&s.allowed_ips.length>0||s.allowed_ranges&&s.allowed_ranges.length>0||s.ip_locations&&s.ip_locations.some(i=>i.allowed_ips?.length>0||i.allowed_ranges?.length>0);case"route_waypoint":return s.waypoints&&s.waypoints.length>=2||s.routes&&s.routes.some(i=>i.waypoints?.length>=2);case"qr_code":return s.code||s.qr_codes&&s.qr_codes.length>0;default:return!1}},te={geo_polygon:{title:"Geo Polygon",icon:gt,color:"warning"},wifi_ip:{title:"WiFi/IP",icon:Ze,color:"secondary"},route_waypoint:{title:"Route Waypoint",icon:st,color:"primary"},qr_code:{title:"QR Code",icon:rt,color:"success"}},X=n.useMemo(()=>{if(!f)return[];const t={};return f.forEach(s=>{if(!s.is_active||!g(s))return;const c=w(s.slug);te[c]&&(t[c]||(t[c]={...te[c],slug:c,types:[]}),t[c].types.push(s))}),Object.values(t).filter(s=>s.types.length>0)},[f]),J=async(t,s)=>{const c=new Promise(async(i,I)=>{try{if((await K.post(route("user.updateDepartment",{id:t}),{department:s})).status===200){const N=d.find(C=>C.id===parseInt(s))||null;v?.(t,{department_id:s,department_name:N?.name||null,designation_id:null,designation_name:null}),i("Department updated successfully")}}catch(z){console.error("Error updating department:",z),I("Failed to update department")}});L.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating department..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},Ne=async(t,s)=>{const c=new Promise(async(i,I)=>{try{if((await K.post(route("user.updateDesignation",{id:t}),{designation_id:s})).status===200){const N=S.find(C=>C.id===parseInt(s))||null;v?.(t,{designation_id:s,designation_name:N?.title||null}),i("Designation updated successfully")}}catch(z){console.error("Error updating designation:",z),I("Failed to update designation")}});L.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating designation..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},_e=async(t,s)=>{const c=new Promise(async(i,I)=>{try{if((await K.post(route("user.updateAttendanceType",{id:t}),{attendance_type_id:s})).status===200){const N=f.find(C=>C.id===parseInt(s))||null;v&&v(t,{attendance_type_id:s,attendance_type_name:N?.name||null}),i("Attendance type updated successfully")}}catch(z){console.error("Error updating attendance type:",z),I("Failed to update attendance type")}});L.promise(c,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Updating attendance type..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸŸ¢",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:i}){return e.jsx("div",{children:i})},icon:"ðŸ”´",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},ke=t=>{y(t),h(!0)},Pe=async()=>{if(!E)return;u(!0);const t=new Promise(async(s,c)=>{try{(await K.delete(route("user.delete",{id:E.id}))).status===200&&(j&&j(E.id),h(!1),y(null),s("Employee deleted successfully"))}catch(i){console.error("Error deleting employee:",i);let I="Failed to delete employee";i.response?.status===403?I="You do not have permission to delete this employee":i.response?.status===404?I="Employee not found or already deleted":i.response?.data?.error&&(I=i.response.data.error),c(I)}finally{u(!1)}});L.promise(t,{pending:{render(){return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(q,{size:"sm"}),e.jsx("span",{style:{marginLeft:"8px"},children:"Deleting employee..."})]})},icon:!1,style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},success:{render({data:s}){return e.jsx("div",{children:s})},icon:"âœ…",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}},error:{render({data:s}){return e.jsx("div",{children:s})},icon:"âŒ",style:{backdropFilter:"blur(16px) saturate(200%)",background:"var(--theme-content1)",border:"1px solid var(--theme-divider)",color:"var(--theme-primary)"}}})},de=()=>{h(!1),y(null)},Fe=t=>{o({isOpen:!0,employee:t})},Ce=()=>{o({isOpen:!1,employee:null})},Se=(t,s)=>{v&&v(t,{profile_image_url:s})},re=n.useRef({}),Re=n.useCallback((t,s)=>{re.current[t]&&clearTimeout(re.current[t]),re.current[t]=setTimeout(async()=>{const c=K.post(route("users.updateReportTo",{id:t}),{report_to:s||null});L.promise(c,{loading:"Updating manager assignment...",success:i=>(v&&v(t,{report_to:s||null,reports_to:i.data.user?.reports_to||null}),i.data?.message||"Manager assigned successfully!"),error:i=>i.response?.data?.error||"Failed to update manager"})},500)},[v]),De=n.useCallback((t,s=null)=>{if(!P||P.length===0)return[];const c=t?.department_id,i=t?.designation_hierarchy_level??999,z=!P.filter(N=>String(N.department_id)===String(c)&&N.id!==t.id).some(N=>(N.designation_hierarchy_level??999)<i);return P.filter(N=>{if(N.id===t.id)return!1;if(s&&N.id===s)return!0;const C=N.department_id,Ee=N.designation_hierarchy_level??999,A=String(C)===String(c);return Ee>=i?!1:!!(A||z)})},[P]),r=n.useMemo(()=>{const t=[{name:"#",uid:"sl",width:60},{name:"EMPLOYEE",uid:"employee",width:"auto",minWidth:200},{name:"DEPARTMENT",uid:"department",width:180},{name:"DESIGNATION",uid:"designation",width:180},{name:"REPORT TO",uid:"report_to",width:200},{name:"ACTIONS",uid:"actions",width:80}];if(_||t.splice(2,0,{name:"CONTACT",uid:"contact",width:220}),!_&&!M&&t.splice(t.length-2,0,{name:"ATTENDANCE TYPE",uid:"attendance_type",width:180}),_){const s=t.findIndex(c=>c.uid==="report_to");s>-1&&t.splice(s,1)}return t},[_,M]),a=(t,s,c)=>{const i=t[s],N=(p?.currentPage&&p?.perPage?Number((p.currentPage-1)*p.perPage):0)+(typeof c=="number"?c:0)+1;switch(s){case"sl":return e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:e.jsx("span",{className:"text-sm font-semibold text-foreground",children:N})})});case"employee":return e.jsxs("div",{className:"min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{src:t?.profile_image_url||t?.profile_image,name:t?.name,size:_?"sm":"md",onClick:()=>Fe(t)}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"font-semibold text-foreground text-left whitespace-nowrap",children:t?.name}),!_&&e.jsxs("p",{className:"text-default-500 text-left text-xs whitespace-nowrap",children:["ID: ",t?.employee_id||"N/A"]})]})]}),_&&e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-default-500 ml-10 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(it,{className:"w-3 h-3"}),t?.employee_id||"N/A"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[150px]",children:t?.email})]}),t?.phone&&e.jsxs("div",{className:"flex items-center gap-1 whitespace-nowrap",children:[e.jsx(Ae,{className:"w-3 h-3"}),t?.phone]})]})]});case"contact":return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t?.email})]}),t?.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ae,{className:"w-4 h-4 text-default-400"}),e.jsx("span",{className:"text-foreground",children:t?.phone})]})]});case"department":return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(he,{children:[e.jsx(ue,{children:e.jsx(b,{variant:"bordered",size:"sm",className:"justify-between backdrop-blur-md border-white/20 min-w-[150px] bg-white/10 hover:bg-white/15 transition-all duration-300",startContent:e.jsx(ae,{className:"w-4 h-4"}),endContent:e.jsx(pe,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:t.department_name||"Select Department"})})}),e.jsx(ge,{"aria-label":"Department options",children:d?.map(m=>e.jsx(se,{onPress:()=>J(t.id,m.id),children:m.name},m.id.toString()))})]})});case"designation":const C=t.department_id,Ee=S?.filter(m=>m.department_id===parseInt(C))||[];return e.jsx("div",{className:"flex flex-col gap-2 min-w-[150px]",children:e.jsxs(he,{isDisabled:!C,children:[e.jsx(ue,{children:e.jsx(b,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[150px] transition-all duration-300 ${C?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,isDisabled:!C,startContent:e.jsx(ne,{className:"w-4 h-4"}),endContent:C&&e.jsx(pe,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{children:C?t.designation_name||"Select Designation":"Select Department First"})})}),e.jsx(ge,{"aria-label":"Designation options",children:Ee.map(m=>e.jsx(se,{onPress:()=>Ne(t.id,m.id),children:m.title},m.id.toString()))})]})});case"report_to":const A=t.reports_to,ze=!!A,ce=t.report_to,Je=De(t,ce),G=[];Je.sort((m,W)=>(m.designation_hierarchy_level??999)-(W.designation_hierarchy_level??999)).forEach(m=>{G.push({id:m.id,name:m.name,profile_image_url:m.profile_image_url,designation_name:m.designation_name||"",description:m.designation_name||"",isCurrent:ce&&m.id===ce})}),ze&&!G.some(m=>m.id===A.id)&&G.unshift({id:A.id,name:A.name,profile_image_url:A.profile_image_url,designation_name:A.designation_name||"",description:A.designation_name||"Current manager",isCurrent:!0});const Te=ce,Qe=Te&&G.some(m=>m.id===Te);return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsx(ye,{size:"sm",variant:"bordered",placeholder:"Select manager",isDisabled:G.length===0,selectedKeys:Qe?[String(Te)]:[],onSelectionChange:m=>{const W=Array.from(m)[0],B=W?parseInt(W,10):null;B!==t.report_to&&Re(t.id,B)},classNames:{trigger:"min-h-unit-10 h-unit-10 backdrop-blur-md border-white/20 bg-white/10 hover:bg-white/15",value:"text-small"},renderValue:m=>m.length===0||!ze?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:"Select manager"})}):m.map(W=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{src:A.profile_image_url,size:"sm",className:"w-6 h-6 flex-shrink-0",name:A.name,showBorder:!0}),e.jsx("span",{className:"text-sm font-medium truncate",children:A.name})]},W.key)),children:G.length===0?e.jsx(ie,{isDisabled:!0,textValue:"No eligible managers",children:e.jsx("span",{className:"text-default-400",children:"No eligible managers in department"})},"no-managers"):G.map(m=>e.jsx(ie,{textValue:m.name,children:e.jsx(kt,{name:m.name,description:m.description,avatarProps:{src:m.profile_image_url,size:"sm",name:m.name,...nt({name:m.name,size:"sm"})}})},String(m.id)))})});case"attendance_type":const me=X.length>0;return e.jsx("div",{className:"flex flex-col gap-2 min-w-[180px]",children:e.jsxs(he,{isDisabled:!me,children:[e.jsx(ue,{children:e.jsx(b,{variant:"bordered",size:"sm",className:`justify-between backdrop-blur-md border-white/20 min-w-[180px] transition-all duration-300 ${me?"bg-white/10 hover:bg-white/15":"bg-gray-500/20 border-gray-400/40 opacity-50"}`,startContent:e.jsx(je,{className:"w-4 h-4"}),endContent:me&&e.jsx(pe,{className:"w-4 h-4 rotate-90"}),children:e.jsx("span",{className:"truncate",children:me?t.attendance_type_name||"Select Type":"No Types Configured"})})}),e.jsx(ge,{"aria-label":"Attendance Type options",className:"min-w-[200px]",children:X.map((m,W)=>(m.icon,e.jsx(at,{title:m.title,showDivider:W<X.length-1,classNames:{heading:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-default-500 px-2 py-1"},children:m.types.map(B=>e.jsx(se,{onPress:()=>_e(t.id,B.id),startContent:e.jsx("span",{className:"text-base",children:B.icon||"ðŸ“"}),description:B.description?.substring(0,30)||null,children:B.name},B.id.toString()))},m.slug)))})]})});case"actions":return e.jsx("div",{className:"relative flex justify-center items-center",children:e.jsxs(he,{children:[e.jsx(ue,{children:e.jsx(b,{isIconOnly:!0,variant:"light",className:"text-default-400 hover:text-foreground transition-all duration-300",children:e.jsx(pe,{className:"w-5 h-5"})})}),e.jsxs(ge,{"aria-label":"Employee Actions",children:[e.jsx(se,{startContent:e.jsx(He,{className:"w-4 h-4"}),href:route("profile",{user:t.id}),as:et,children:"Edit Profile"},"edit"),e.jsx(se,{className:"text-danger",color:"danger",startContent:e.jsx($e,{className:"w-4 h-4"}),onPress:()=>ke(t),children:"Delete"},"delete")]})]})});default:return i}},D=()=>!p||R?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(p.currentPage-1)*p.perPage+1," to ",Math.min(p.currentPage*p.perPage,p.total)," of ",p.total," employees"]}),e.jsx(Xe,{total:Math.ceil(p.total/p.perPage),initialPage:p.currentPage,page:p.currentPage,onChange:F,size:_?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]});return e.jsxs("div",{className:"w-full overflow-hidden flex flex-col relative",style:{maxHeight:"calc(100vh - 200px)",background:"color-mix(in srgb, var(--theme-content1) 85%, transparent)",backdropFilter:"blur(16px)",border:"1px solid color-mix(in srgb, var(--theme-content2) 50%, transparent)",borderRadius:x()},children:[R&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-50",style:{background:"color-mix(in srgb, var(--theme-content1) 20%, transparent)",backdropFilter:"blur(8px)",borderRadius:x()},children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-6",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:x(),backdropFilter:"blur(16px)"},children:[e.jsx(q,{size:"lg",color:"primary"}),e.jsx("span",{className:"text-sm",style:{color:"var(--theme-foreground)"},children:"Loading employees..."})]})}),e.jsx("div",{className:"overflow-auto grow",children:e.jsxs(ft,{"aria-label":"Employees table",removeWrapper:!0,classNames:{base:"bg-transparent min-w-[800px]",th:"backdrop-blur-md font-medium text-xs sticky top-0 z-10 whitespace-nowrap",td:"py-3 whitespace-nowrap",table:"border-collapse table-auto",thead:"",tr:"hover:opacity-80 transition-all duration-200"},style:{"--table-header-bg":"color-mix(in srgb, var(--theme-content2) 60%, transparent)","--table-row-hover":"color-mix(in srgb, var(--theme-content2) 30%, transparent)","--table-border":"color-mix(in srgb, var(--theme-content3) 30%, transparent)"},isHeaderSticky:!0,isCompact:_,children:[e.jsx(yt,{columns:r,children:t=>e.jsx(wt,{align:t.uid==="actions"||t.uid==="sl"?"center":"start",width:t.width,minWidth:t.minWidth,className:`backdrop-blur-md ${t.uid==="employee"?"whitespace-nowrap":""}`,style:{backgroundColor:"color-mix(in srgb, var(--theme-content2) 60%, transparent)",color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)"},children:t.name},t.uid)}),e.jsx(bt,{items:$||[],emptyContent:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(Ye,{className:"w-12 h-12 mb-4 opacity-40",style:{color:"var(--theme-foreground)"}}),e.jsx("h6",{className:"text-lg font-semibold mb-2",style:{color:"var(--theme-foreground)"},children:"No employees found"}),e.jsx("p",{className:"text-sm opacity-70",style:{color:"var(--theme-foreground)"},children:"Try adjusting your search or filter criteria"})]}),loadingContent:e.jsx(q,{}),isLoading:R,children:(t,s)=>{const c=$?$.findIndex(i=>i.id===t.id):s;return e.jsx(vt,{className:"transition-all duration-200",style:{color:"var(--theme-foreground)",borderBottom:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)"},children:i=>e.jsx(jt,{className:"transition-all duration-300",children:e.jsx("div",{className:"transition-all duration-200",children:a(t,i,c)})})},t.id)}})]})}),D(),e.jsx(St,{open:ee,onClose:de,employee:E,onConfirm:Pe,loading:T}),e.jsx(Rt,{isOpen:l.isOpen,onClose:Ce,employee:l.employee,onImageUpdate:Se})]})},Et=({title:$,departments:P,designations:d,attendanceTypes:S})=>{const[f,k]=n.useState(!1),[_,M]=n.useState(!1),[p,F]=n.useState(!1),[U,oe]=n.useState(!1);n.useEffect(()=>{const r=()=>{k(window.innerWidth<640),M(window.innerWidth<768),F(window.innerWidth>=1025),oe(window.innerWidth>=641&&window.innerWidth<=1024)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const[R,v]=n.useState([]),[j,Q]=n.useState([]),[Z,O]=n.useState(!0),[V,H]=n.useState(0),[we,ee]=n.useState(1),[h,E]=n.useState({search:"",department:"all",designation:"all",attendanceType:"all"}),[y,T]=n.useState("table"),[u,l]=n.useState(!1),[o,x]=n.useState({currentPage:1,perPage:10,total:0}),w=()=>{if(typeof window>"u")return"lg";const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",D=parseInt(a);return D===0?"none":D<=4?"sm":D<=8?"md":D<=16?"lg":"full"},[g,te]=n.useState({overview:{total_employees:0,active_employees:0,inactive_employees:0,total_departments:0,total_designations:0,total_attendance_types:0},distribution:{by_department:[],by_designation:[],by_attendance_type:[]},hiring_trends:{recent_hires:{last_30_days:0,last_90_days:0,last_year:0},monthly_growth_rate:0,current_month_hires:0},workforce_health:{status_ratio:{active_percentage:0,inactive_percentage:0,retention_rate:0},retention_rate:0,turnover_rate:0},quick_metrics:{headcount:0,active_ratio:0,department_diversity:0,role_diversity:0,recent_activity:0}}),X=n.useCallback(async()=>{O(!0);try{const{data:r}=await K.get(route("employees.paginate"),{params:{page:o.currentPage,perPage:o.perPage,search:h.search,department:h.department,designation:h.designation,attendanceType:h.attendanceType}});v(r.employees.data),H(r.employees.total),ee(r.employees.last_page),x(a=>({...a,total:r.employees.total})),r.allManagers&&Q(r.allManagers),r.stats&&te(r.stats)}catch(r){console.error("Error fetching employees:",r),L.error("Failed to load employees. Please try again.")}finally{O(!1)}},[o.currentPage,o.perPage,h]),J=n.useCallback(async()=>{try{const{data:r}=await K.get(route("employees.stats"));r.stats&&te(r.stats)}catch(r){console.error("Error fetching employee stats:",r)}},[]);n.useEffect(()=>{X(),J()},[X,J]);const Ne=n.useCallback(r=>{E(a=>({...a,search:r})),x(a=>({...a,currentPage:1}))},[]),_e=n.useCallback(r=>{E(a=>({...a,department:r,designation:r!=="all"?"all":a.designation})),x(a=>({...a,currentPage:1}))},[]),ke=n.useCallback(r=>{E(a=>({...a,designation:r})),x(a=>({...a,currentPage:1}))},[]),Pe=n.useCallback(r=>{E(a=>({...a,attendanceType:r})),x(a=>({...a,currentPage:1}))},[]),de=n.useCallback(r=>{x(a=>({...a,currentPage:r}))},[]),Fe=n.useCallback(r=>{x(a=>({...a,perPage:r,currentPage:1}))},[]),Ce=n.useCallback((r,a)=>{v(D=>D.map(t=>t.id===r?{...t,...a}:t))},[]),Se=n.useCallback(r=>{v(a=>a.filter(D=>D.id!==r)),H(a=>a-1),x(a=>({...a,total:a.total-1})),J()},[J]),re=n.useMemo(()=>h.department==="all"?d:d.filter(r=>r.department_id===parseInt(h.department)),[d,h.department]),Re=n.useMemo(()=>[{title:"Total Employees",value:g.overview?.total_employees||0,icon:e.jsx(xe,{}),color:"text-blue-400",iconBg:"bg-blue-500/20",description:"Total Headcount"},{title:"Active Employees",value:g.overview?.active_employees||0,icon:e.jsx(Ke,{}),color:"text-green-400",iconBg:"bg-green-500/20",description:`${g.workforce_health?.status_ratio?.active_percentage||0}% Active`},{title:"Departments",value:g.overview?.total_departments||0,icon:e.jsx(ae,{}),color:"text-purple-400",iconBg:"bg-purple-500/20",description:"Department Diversity"},{title:"Designations",value:g.overview?.total_designations||0,icon:e.jsx(ne,{}),color:"text-orange-400",iconBg:"bg-orange-500/20",description:"Role Diversity"},{title:"Retention Rate",value:`${g.workforce_health?.retention_rate||0}%`,icon:e.jsx(lt,{}),color:"text-emerald-400",iconBg:"bg-emerald-500/20",description:"Employee Retention"},{title:"Recent Hires",value:g.hiring_trends?.recent_hires?.last_30_days||0,icon:e.jsx(Oe,{}),color:"text-cyan-400",iconBg:"bg-cyan-500/20",description:"Last 30 Days"},{title:"Growth Rate",value:`${g.hiring_trends?.monthly_growth_rate||0}%`,icon:e.jsx(Nt,{}),color:"text-pink-400",iconBg:"bg-pink-500/20",description:"Monthly Growth"},{title:"Attendance Types",value:g.overview?.total_attendance_types||0,icon:e.jsx(je,{}),color:"text-indigo-400",iconBg:"bg-indigo-500/20",description:"Available Types"}],[g]),De=({user:r,index:a})=>{const D=P?.find(c=>c.id===r.department_id),t=d?.find(c=>c.id===r.designation_id),s=S?.find(c=>c.id===r.attendance_type_id);return e.jsx(be,{className:"bg-white/10 backdrop-blur-md border-white/20 hover:bg-white/15 transition-all duration-200 cursor-pointer h-full",onPress:()=>Le.visit(route("profile",{user:r.id})),children:e.jsxs(ve,{className:"p-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3 pb-3 border-b border-white/10",children:[e.jsx("div",{className:"shrink-0",children:e.jsx(le,{src:r?.profile_image_url||r?.profile_image,name:r?.name,size:"md",fallback:e.jsx(Ye,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-semibold text-foreground text-left text-sm",children:r?.name}),e.jsxs("span",{className:"text-default-500 text-left text-xs",children:["ID: ",r?.employee_id||"N/A"]})]}),e.jsx("div",{className:"flex-1 min-w-0 flex justify-end",children:e.jsx(b,{isIconOnly:!0,size:"sm",variant:"light",className:"text-default-400 hover:text-foreground",onPress:c=>{c.stopPropagation(),Le.visit(route("profile",{user:r.id}))},children:e.jsx(He,{className:"w-4 h-4"})})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs truncate",children:r?.email})]}),r?.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ae,{className:"w-4 h-4 text-default-400 shrink-0"}),e.jsx("span",{className:"text-default-600 text-xs",children:r?.phone})]})]})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10 flex flex-wrap gap-2",children:[D&&e.jsx(Y,{size:"sm",variant:"flat",color:"primary",className:"text-xs",startContent:e.jsx(ae,{className:"w-3 h-3"}),children:D.name}),t&&e.jsx(Y,{size:"sm",variant:"flat",color:"secondary",className:"text-xs",startContent:e.jsx(ne,{className:"w-3 h-3"}),children:t.title}),s&&e.jsx(Y,{size:"sm",variant:"bordered",className:"text-xs",startContent:e.jsx(je,{className:"w-3 h-3"}),children:s.name})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(tt,{title:$||"Employee Directory"}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Employee Directory Management",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full",children:e.jsx(Ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(be,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                    var(--theme-content1, #FAFAFA) 20%, 
                    var(--theme-content2, #F4F4F5) 10%, 
                    var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Be,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                      color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                      color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${p?"p-6":U?"p-4":"p-3"} w-full`,children:e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:`
                              ${p?"p-3":U?"p-2.5":"p-2"} 
                              rounded-xl flex items-center justify-center
                            `,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(xe,{className:`
                                ${p?"w-8 h-8":U?"w-6 h-6":"w-5 h-5"}
                              `,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`
                                ${p?"text-2xl":U?"text-xl":"text-lg"}
                                font-bold text-foreground
                                ${p?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"}),e.jsx("p",{className:`
                                ${p?"text-sm":"text-xs"} 
                                text-default-500
                                ${p?"":"truncate"}
                              `,style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Manage employee information and organizational structure"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(b,{as:Link,href:route("users"),className:"text-white font-medium",style:{background:"linear-gradient(135deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))",borderRadius:w()},startContent:e.jsx(Oe,{className:"w-4 h-4"}),children:f?"Go to Users":"Add from User List"})})]})})})}),e.jsxs(ve,{className:"p-6",children:[e.jsx(mt,{stats:Re,className:"mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Department Distribution"}),e.jsx("div",{className:"space-y-3",children:g.distribution?.by_department?.slice(0,5).map((r,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 rounded-full overflow-hidden",style:{background:"color-mix(in srgb, var(--theme-content3) 40%, transparent)"},children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${r.percentage}%`,background:"linear-gradient(90deg, var(--theme-primary), color-mix(in srgb, var(--theme-primary) 80%, var(--theme-secondary)))"}})}),e.jsx("span",{className:"text-xs w-8 opacity-70",style:{color:"var(--theme-foreground)"},children:r.count})]})]},a))})]}),e.jsxs("div",{className:"p-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w(),backdropFilter:"blur(16px)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--theme-foreground)"},children:"Hiring Trends"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 30 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:g.hiring_trends?.recent_hires?.last_30_days||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm opacity-80",style:{color:"var(--theme-foreground)"},children:"Last 90 Days"}),e.jsx("span",{className:"text-sm font-medium",style:{color:"var(--theme-foreground)"},children:g.hiring_trends?.recent_hires?.last_90_days||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"This Year"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:g.hiring_trends?.recent_hires?.last_year||0})]}),e.jsx("div",{className:"pt-2 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Monthly Growth"}),e.jsxs("span",{className:`text-sm font-medium ${(g.hiring_trends?.monthly_growth_rate||0)>=0?"text-green-400":"text-red-400"}`,children:[g.hiring_trends?.monthly_growth_rate||0,"%"]})]})})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Workforce Health"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Retention Rate"}),e.jsxs("span",{className:"text-sm font-medium text-green-400",children:[g.workforce_health?.retention_rate||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Turnover Rate"}),e.jsxs("span",{className:"text-sm font-medium text-orange-400",children:[g.workforce_health?.turnover_rate||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:"Active Employees"}),e.jsxs("span",{className:"text-sm font-medium text-blue-400",children:[g.workforce_health?.status_ratio?.active_percentage||0,"%"]})]})]})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-lg border border-white/10 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Attendance Types"}),e.jsx("div",{className:"space-y-3",children:g.distribution?.by_attendance_type?.map((r,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-default-600",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-linear-to-r from-green-500 to-emerald-500 rounded-full",style:{width:`${r.percentage}%`}})}),e.jsx("span",{className:"text-xs text-default-500 w-8",children:r.count})]})]},a))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ft,{label:"Search Employees",placeholder:"Search by name, email, or employee ID...",value:h.search,onChange:r=>Ne(r.target.value),startContent:e.jsx(Pt,{className:"w-4 h-4 text-default-400"}),variant:"bordered",size:"sm",radius:w(),classNames:{input:"text-sm"},style:{fontFamily:'var(--fontFamily, "Inter")'},"aria-label":"Search employees"})}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs(Ct,{variant:"bordered",style:{background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w()},children:[e.jsxs(b,{isIconOnly:f,color:y==="table"?"primary":"default",onPress:()=>T("table"),style:{background:y==="table"?"var(--theme-primary)":"transparent",color:y==="table"?"white":"var(--theme-foreground)"},children:[e.jsx(ot,{className:"w-4 h-4"}),!f&&e.jsx("span",{className:"ml-1",children:"Table"})]}),e.jsxs(b,{isIconOnly:f,color:y==="grid"?"primary":"default",onPress:()=>T("grid"),style:{background:y==="grid"?"var(--theme-primary)":"transparent",color:y==="grid"?"white":"var(--theme-foreground)"},children:[e.jsx(dt,{className:"w-4 h-4"}),!f&&e.jsx("span",{className:"ml-1",children:"Grid"})]})]}),e.jsx(b,{isIconOnly:!0,variant:"bordered",onPress:()=>l(!u),style:{background:u?"color-mix(in srgb, var(--theme-primary) 20%, transparent)":"color-mix(in srgb, var(--theme-content2) 30%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",color:u?"var(--theme-primary)":"var(--theme-foreground)",borderRadius:w()},children:e.jsx(_t,{className:"w-4 h-4"})})]})]}),u&&e.jsx(Ue.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-4",children:e.jsxs("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",style:{background:"color-mix(in srgb, var(--theme-content2) 50%, transparent)",border:"1px solid color-mix(in srgb, var(--theme-content3) 50%, transparent)",borderRadius:w(),backdropFilter:"blur(16px)"},children:[e.jsx(ye,{label:"Department",placeholder:"All Departments",selectedKeys:h.department!=="all"?[h.department]:[],onSelectionChange:r=>{const a=Array.from(r)[0];_e(a||"all")},variant:"bordered",size:"sm",radius:w(),startContent:e.jsx(ae,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:P?.map(r=>e.jsx(ie,{textValue:r.name,children:r.name},String(r.id)))}),e.jsx(ye,{label:"Designation",placeholder:"All Designations",selectedKeys:h.designation!=="all"?[h.designation]:[],onSelectionChange:r=>{const a=Array.from(r)[0];ke(a||"all")},variant:"bordered",size:"sm",radius:w(),isDisabled:h.department==="all",startContent:e.jsx(ne,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:re?.map(r=>e.jsx(ie,{textValue:r.title,children:r.title},String(r.id)))}),e.jsx(ye,{label:"Attendance Type",placeholder:"All Attendance Types",selectedKeys:h.attendanceType!=="all"?[h.attendanceType]:[],onSelectionChange:r=>{const a=Array.from(r)[0];Pe(a||"all")},variant:"bordered",size:"sm",radius:w(),startContent:e.jsx(je,{className:"w-4 h-4 text-default-400"}),classNames:{trigger:"bg-white/10 backdrop-blur-md border-white/20"},children:S?.map(r=>e.jsx(ie,{textValue:r.name,children:r.name},String(r.id)))}),e.jsx("div",{className:"flex items-end",children:e.jsx(b,{variant:"flat",size:"sm",className:"w-full",onPress:()=>{E({search:"",department:"all",designation:"all",attendanceType:"all"}),x(r=>({...r,currentPage:1}))},isDisabled:h.search===""&&h.department==="all"&&h.designation==="all"&&h.attendanceType==="all",style:{background:"color-mix(in srgb, var(--theme-danger) 20%, transparent)",color:"var(--theme-danger)",borderRadius:w()},children:"Clear Filters"})})]})})]}),e.jsxs(be,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',background:`linear-gradient(135deg, 
                      var(--theme-content1, #FAFAFA) 20%, 
                      var(--theme-content2, #F4F4F5) 10%, 
                      var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(Be,{className:"border-b pb-2",style:{borderColor:"var(--theme-divider, #E4E4E7)"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)"},children:e.jsx(xe,{className:"w-6 h-6",style:{color:"var(--theme-primary)"}})}),e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-foreground",style:{fontFamily:'var(--fontFamily, "Inter")'},children:"Employee Directory"})]})}),e.jsx(ve,{children:e.jsx("div",{className:"max-h-[84vh] overflow-y-auto",children:Z?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(q,{size:"lg",color:"primary"}),e.jsx("p",{className:"mt-4 text-default-500",children:"Loading employees data..."})]}):y==="table"?e.jsx(Dt,{allUsers:R,allManagers:j,departments:P,designations:d,attendanceTypes:S,setUsers:v,isMobile:f,isTablet:_,pagination:o,onPageChange:de,onRowsPerPageChange:Fe,totalUsers:V,loading:Z,updateEmployeeOptimized:Ce,deleteEmployeeOptimized:Se}):e.jsxs("div",{className:"p-4",children:[R.length>0?e.jsx("div",{className:`grid gap-4 ${f?"grid-cols-1":_?"grid-cols-2":"grid-cols-3 xl:grid-cols-4"}`,children:R.map((r,a)=>e.jsx(De,{user:r,index:a},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xe,{className:"w-12 h-12 mx-auto text-default-300 mb-2"}),e.jsx("p",{className:"text-base text-default-500",children:"No employees found"}),e.jsx("p",{className:"text-sm text-default-500",children:"Try adjusting your search or filters"})]}),R.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 py-2",style:{borderTop:"1px solid color-mix(in srgb, var(--theme-content3) 30%, transparent)",background:"color-mix(in srgb, var(--theme-content2) 30%, transparent)",backdropFilter:"blur(16px)"},children:[e.jsxs("span",{className:"text-xs mb-3 sm:mb-0 opacity-70",style:{color:"var(--theme-foreground)"},children:["Showing ",(o.currentPage-1)*o.perPage+1," to ",Math.min(o.currentPage*o.perPage,o.total)," of ",o.total," employees"]}),e.jsx(Xe,{total:Math.ceil(o.total/o.perPage),initialPage:o.currentPage,page:o.currentPage,onChange:de,size:f?"sm":"md",variant:"bordered",showControls:!0,style:{"--pagination-item-bg":"color-mix(in srgb, var(--theme-content2) 50%, transparent)","--pagination-item-border":"color-mix(in srgb, var(--theme-content3) 50%, transparent)"}})]})]})})})]})]})]})})})})})]})};Et.layout=$=>e.jsx(ct,{children:$});export{Et as default};
