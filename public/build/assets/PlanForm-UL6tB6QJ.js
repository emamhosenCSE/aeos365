import{u as V,r as h,o as E,j as e,H as I,m as R,c as o,b as f,h as _,a as c,d as $,l as M,e as v}from"./app-DLWZL5EI.js";import{s as k}from"./toastUtils-CQ8tPw7l.js";import{Q as T,A as z}from"./App-CPiN04Y0.js";import{F as K}from"./ArrowLeftIcon-a6q7R3tQ.js";import{c as m}from"./chunk-C6WKGNND-Dq1nEPC1.js";import{i as p}from"./chunk-SQIAVXJX-C5zDfxFa.js";import{t as U}from"./chunk-WEIB4WXA-BkR_II6X.js";import{s as x}from"./chunk-C3QHEOC2-Bmp2Jpe_.js";import{l}from"./chunk-Y5DMIIWQ-zhqLBGLU.js";import{s as L}from"./chunk-4MPZBIMX-C-0XXrsR.js";import{d as W}from"./chunk-IHO36JMK-DYeauZfe.js";import{s as b}from"./chunk-I3A4XRYQ-CbmreU5k.js";import{c as g}from"./chunk-PMMJMDBI-DH4qNxn7.js";import"./app-BI-xrU3s.js";import"./index-lAyyVki8.js";/* empty css                      */import"./routeUtils-C6MiLID5.js";import"./chunk-CV4BWJDJ-C645uC3W.js";import"./index-DD7PnbC4.js";import"./index-Dz459_my.js";import"./UserIcon-DiPxEy9e.js";import"./PlusIcon-CgcHryUb.js";import"./Item-hnCJOaQ5.js";import"./SelectionManager-UhxaObWG.js";import"./keyboard-CSKkBtIV.js";import"./index-B5MKI_DQ.js";import"./useDialog-LKdJQ55I.js";import"./getScrollParent-B27hviGV.js";import"./useLabels-CKC_NELL.js";import"./VisuallyHidden-Dslt4DE9.js";import"./chunk-WQVQ7P2I-BXEU6rr0.js";import"./number-CB4zbwAz.js";import"./index-D3fxkw17.js";import"./useSelectableItem-Qild1lMf.js";import"./useTreeState-CsNDLaZy.js";import"./useMenuTriggerState-CpMESG3a.js";import"./chunk-LGMZDQT5-BbUrfslF.js";import"./Cog6ToothIcon-CI3NiAkm.js";import"./GlobeAltIcon-CFAl4tmE.js";import"./useBranding-C98uB2bk.js";import"./XMarkIcon-C9tv-sqJ.js";import"./MagnifyingGlassIcon-C9l2NPQE.js";import"./chunk-AUA5GDXN-DgHZKZnK.js";import"./useMediaQuery-CZ_V8brP.js";import"./ShieldCheckIcon-BxwQA0uM.js";import"./AcademicCapIcon-Bs9t2qow.js";import"./IdentificationIcon-6E2VOCK1.js";import"./ArrowRightIcon-BZNmx9ah.js";import"./UsersIcon-CpsA-xGl.js";import"./BoltIcon-BRTqiOqL.js";import"./BriefcaseIcon-CunjT5yU.js";import"./BuildingOfficeIcon-BJoAl2gF.js";import"./CalendarDaysIcon-BR4QgBq8.js";import"./CalendarIcon-BTj7Nn7B.js";import"./ChartBarIcon-CnSK0enl.js";import"./CheckCircleIcon-CaJShsm_.js";import"./CircleStackIcon-20fpj2M5.js";import"./ClipboardDocumentCheckIcon-Bwahsg1t.js";import"./CogIcon-CQIGGanJ.js";import"./DeviceTabletIcon-CR6eyvHQ.js";import"./CpuChipIcon-Dkmm6hKt.js";import"./CurrencyDollarIcon-DK6JNn4H.js";import"./DevicePhoneMobileIcon-DzKKUXAD.js";import"./DocumentArrowUpIcon-CdnT1l-_.js";import"./PencilIcon-Da-ZoIco.js";import"./TrashIcon-C6DesZfk.js";import"./DocumentIcon-YVJ_odhG.js";import"./EnvelopeIcon-BNQywoLu.js";import"./ExclamationCircleIcon-D-5waelr.js";import"./EyeSlashIcon-C7uJqcIF.js";import"./EyeIcon-Ds6DAjR7.js";import"./FunnelIcon-D8WHt0li.js";import"./InformationCircleIcon-2sIUPx4E.js";import"./KeyIcon-Dl6jmBIi.js";import"./LockClosedIcon-DWSbAAT6.js";import"./MapPinIcon-CoSq0ZKP.js";import"./PlusCircleIcon-borTRmVT.js";import"./PrinterIcon-jsVlFWpL.js";import"./RocketLaunchIcon-C1ofXZeY.js";import"./ShoppingCartIcon-DijpYrUE.js";import"./UserCircleIcon-D9Bl7hMN.js";import"./UserGroupIcon-DLyCB4U6.js";import"./chunk-TW2E3XVA-dNGvEz5r.js";import"./MaintenanceModeBanner-CpiCdC4n.js";import"./chunk-KQW2TNLT-BxZBj3py.js";import"./useField-CN4URFK6.js";import"./useLabel-BC4q2FsI.js";import"./chunk-ICU6NNET-BuoRM2Mj.js";import"./chunk-7F3ZLNJ6-BH294qJ7.js";import"./index-CGn2JJsk.js";import"./useNumberFormatter-DOVyNCK1.js";import"./NumberFormatter-DNR9MAW-.js";import"./useToggleState-C1tJJPv7.js";import"./index-BJ8QHXMy.js";const q=({plan:s=null,currencies:N=[],modules:j=[],features:w=[],title:C})=>{const{auth:H}=V().props,d=!!s,i=()=>{if(typeof window>"u")return"lg";const n=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",t=parseInt(n);return t===0?"none":t<=4?"sm":t<=8?"md":t<=16?"lg":"full"},[u,D]=h.useState(!1),[Q,P]=h.useState(!1);h.useEffect(()=>{const a=()=>{D(window.innerWidth<640),P(window.innerWidth<768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const r=E({name:s?.name||"",description:s?.description||"",tier:s?.tier||"starter",status:s?.status||"active",visibility:s?.visibility||"public",currency:s?.currency||"USD",monthly_price:s?.monthly_price||0,annual_price:s?.annual_price||0,annual_discount:s?.annual_discount||20,multi_currency_enabled:s?.multi_currency_enabled||!1,volume_discounts_enabled:s?.volume_discounts_enabled||!1,trial_enabled:s?.trial_enabled||!1,trial_days:s?.trial_days||14,trial_features:s?.trial_features||"same",quotas:s?.quotas||{users:{limit:10,unlimited:!1},storage:{limit:10,unlimited:!1},api_calls:{limit:1e4,unlimited:!1},employees:{limit:10,unlimited:!1},projects:{limit:5,unlimited:!1}},modules:s?.modules||[],enabled_features:s?.enabled_features||[],stripe_product_id:s?.stripe_product_id||"",stripe_monthly_price_id:s?.stripe_monthly_price_id||"",stripe_annual_price_id:s?.stripe_annual_price_id||"",auto_renewal:s?.auto_renewal!==!1,grace_period:s?.grace_period||7,downgrade_behavior:s?.downgrade_behavior||"keep_data",upgrade_behavior:s?.upgrade_behavior||"prorated",cancellation_policy:s?.cancellation_policy||"end_of_period",refund_policy:s?.refund_policy||"no_refunds"});h.useEffect(()=>{},[]),h.useEffect(()=>{if(r.data.monthly_price&&!d){const a=r.data.monthly_price*12*(1-r.data.annual_discount/100);r.setData("annual_price",Math.round(a))}},[r.data.monthly_price,r.data.annual_discount]);const F=a=>{a.preventDefault();const n=d?v.put(route("admin.plans.update",s.id),r.data):v.post(route("admin.plans.store"),r.data);k.promise(n,{loading:d?"Updating plan...":"Creating plan...",success:t=>(_.visit(route("admin.plans.index")),d?"Plan updated successfully":"Plan created successfully"),error:t=>(r.setErrors(t.response?.data?.errors||{}),t.response?.data?.message||"Failed to save plan")})},S=a=>{const n=r.data.modules.includes(a)?r.data.modules.filter(t=>t!==a):[...r.data.modules,a];r.setData("modules",n)},A=a=>{const n=r.data.enabled_features.includes(a)?r.data.enabled_features.filter(t=>t!==a):[...r.data.enabled_features,a];r.setData("enabled_features",n)},y=(a,n,t)=>{r.setData("quotas",{...r.data.quotas,[a]:{...r.data.quotas[a],[n]:t}})};return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:C||(d?`Edit Plan: ${s.name}`:"Create New Plan")}),e.jsx("div",{className:"flex flex-col w-full h-full p-4",role:"main","aria-label":"Plan Form",children:e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"w-full max-w-5xl mx-auto",children:e.jsx(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(o,{className:"transition-all duration-200",style:{border:"var(--borderWidth, 2px) solid transparent",borderRadius:"var(--borderRadius, 12px)",fontFamily:'var(--fontFamily, "Inter")',transform:"scale(var(--scale, 1))",background:`linear-gradient(135deg, 
                                        var(--theme-content1, #FAFAFA) 20%, 
                                        var(--theme-content2, #F4F4F5) 10%, 
                                        var(--theme-content3, #F1F3F4) 20%)`},children:[e.jsx(m,{className:"border-b p-0",style:{borderColor:"var(--theme-divider, #E4E4E7)",background:`linear-gradient(135deg, 
                                            color-mix(in srgb, var(--theme-content1) 50%, transparent) 20%, 
                                            color-mix(in srgb, var(--theme-content2) 30%, transparent) 10%)`},children:e.jsx("div",{className:`${u?"p-4":"p-6"} w-full`,children:e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 lg:gap-4",children:[e.jsx(f,{isIconOnly:!0,variant:"light",radius:i(),onPress:()=>_.visit(route("admin.plans.index")),className:"shrink-0",children:e.jsx(K,{className:"w-5 h-5"})}),e.jsx("div",{className:`${u?"p-2":"p-3"} rounded-xl flex items-center justify-center`,style:{background:"color-mix(in srgb, var(--theme-primary) 15%, transparent)",borderColor:"color-mix(in srgb, var(--theme-primary) 25%, transparent)",borderWidth:"var(--borderWidth, 2px)",borderRadius:"var(--borderRadius, 12px)"},children:e.jsx(T,{className:`${u?"w-6 h-6":"w-8 h-8"}`,style:{color:"var(--theme-primary)"}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:`${u?"text-xl":"text-2xl"} font-bold text-foreground ${u?"truncate":""}`,style:{fontFamily:'var(--fontFamily, "Inter")'},children:d?`Edit Plan: ${s.name}`:"Create New Plan"}),e.jsx("p",{className:`${u?"text-xs":"text-sm"} text-default-500 ${u?"truncate":""}`,style:{fontFamily:'var(--fontFamily, "Inter")'},children:d?"Update plan details and configuration":"Configure pricing, quotas, and features"})]})]})})})}),e.jsx(c,{className:"p-6",children:e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs(o,{radius:i(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Basic Information"})}),e.jsxs(c,{className:"p-4 space-y-4",children:[e.jsx(p,{label:"Plan Name",placeholder:"e.g., Professional Plan",value:r.data.name,onValueChange:a=>r.setData("name",a),isInvalid:!!r.errors.name,errorMessage:r.errors.name,isRequired:!0,radius:i()}),e.jsx(U,{label:"Description",placeholder:"Describe the plan and its benefits",value:r.data.description,onValueChange:a=>r.setData("description",a),isInvalid:!!r.errors.description,errorMessage:r.errors.description,radius:i(),minRows:3}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(x,{label:"Plan Tier",selectedKeys:[r.data.tier],onSelectionChange:a=>r.setData("tier",Array.from(a)[0]),radius:i(),isRequired:!0,children:[e.jsx(l,{children:"Free"},"free"),e.jsx(l,{children:"Starter"},"starter"),e.jsx(l,{children:"Professional"},"professional"),e.jsx(l,{children:"Enterprise"},"enterprise")]}),e.jsxs(x,{label:"Status",selectedKeys:[r.data.status],onSelectionChange:a=>r.setData("status",Array.from(a)[0]),radius:i(),children:[e.jsx(l,{children:"Active"},"active"),e.jsx(l,{children:"Archived"},"archived")]}),e.jsxs(x,{label:"Visibility",selectedKeys:[r.data.visibility],onSelectionChange:a=>r.setData("visibility",Array.from(a)[0]),radius:i(),children:[e.jsx(l,{children:"Public"},"public"),e.jsx(l,{children:"Private"},"private"),e.jsx(l,{children:"Hidden"},"hidden")]})]})]})]}),e.jsxs(o,{radius:i(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Pricing Configuration"})}),e.jsxs(c,{className:"p-4 space-y-4",children:[e.jsx(x,{label:"Base Currency",selectedKeys:[r.data.currency],onSelectionChange:a=>r.setData("currency",Array.from(a)[0]),radius:i(),isRequired:!0,children:N.map(a=>e.jsxs(l,{children:[a.name," (",a.symbol,")"]},a.code))}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(p,{type:"number",label:"Monthly Price",placeholder:"0.00",value:r.data.monthly_price,onValueChange:a=>r.setData("monthly_price",parseFloat(a)||0),startContent:e.jsx("span",{className:"text-default-400",children:"$"}),isInvalid:!!r.errors.monthly_price,errorMessage:r.errors.monthly_price,radius:i(),isRequired:!0}),e.jsx(p,{type:"number",label:"Annual Price",placeholder:"0.00",value:r.data.annual_price,onValueChange:a=>r.setData("annual_price",parseFloat(a)||0),startContent:e.jsx("span",{className:"text-default-400",children:"$"}),isInvalid:!!r.errors.annual_price,errorMessage:r.errors.annual_price,radius:i()})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground mb-2 block",children:["Annual Discount: ",r.data.annual_discount,"%"]}),e.jsx(L,{value:r.data.annual_discount,onChange:a=>r.setData("annual_discount",a),minValue:0,maxValue:50,step:5,marks:[{value:0,label:"0%"},{value:20,label:"20%"},{value:50,label:"50%"}],className:"max-w-md"})]}),e.jsx(W,{className:"my-2"}),e.jsx(b,{isSelected:r.data.multi_currency_enabled,onValueChange:a=>r.setData("multi_currency_enabled",a),children:"Enable Multi-Currency Pricing"}),e.jsx(b,{isSelected:r.data.volume_discounts_enabled,onValueChange:a=>r.setData("volume_discounts_enabled",a),children:"Enable Volume Discounts (10%@50, 15%@100, 20%@200+ users)"})]})]}),e.jsxs(o,{radius:i(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Quota Limits"})}),e.jsx(c,{className:"p-4 space-y-4",children:Object.entries(r.data.quotas).map(([a,n])=>e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx(p,{label:a.charAt(0).toUpperCase()+a.slice(1).replace("_"," "),type:"number",value:n.limit,onValueChange:t=>y(a,"limit",parseInt(t)||0),isDisabled:n.unlimited,radius:i(),className:"flex-1"}),e.jsx(g,{isSelected:n.unlimited,onValueChange:t=>y(a,"unlimited",t),children:"Unlimited"})]},a))})]}),e.jsxs(o,{radius:i(),children:[e.jsxs(m,{className:"border-b border-divider p-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Module Access"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"flat",radius:i(),onPress:()=>r.setData("modules",j.map(a=>a.code)),children:"Select All"}),e.jsx(f,{size:"sm",variant:"flat",radius:i(),onPress:()=>r.setData("modules",[]),children:"Clear All"})]})]}),e.jsx(c,{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:j.map(a=>e.jsx(g,{isSelected:r.data.modules.includes(a.code),onValueChange:()=>S(a.code),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-xs text-default-500",children:a.description})]})},a.code))})})]}),e.jsxs(o,{radius:i(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Feature Toggles"})}),e.jsx(c,{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:w.map(a=>e.jsx(g,{isSelected:r.data.enabled_features.includes(a.code),onValueChange:()=>A(a.code),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsx($,{size:"sm",variant:"flat",radius:i(),children:a.category})]})},a.code))})})]}),e.jsxs(o,{radius:i(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Trial Period"})}),e.jsxs(c,{className:"p-4 space-y-4",children:[e.jsx(b,{isSelected:r.data.trial_enabled,onValueChange:a=>r.setData("trial_enabled",a),children:"Enable Trial Period"}),r.data.trial_enabled&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{label:"Trial Duration",selectedKeys:[String(r.data.trial_days)],onSelectionChange:a=>r.setData("trial_days",parseInt(Array.from(a)[0])),radius:i(),children:[e.jsx(l,{children:"7 days"},"7"),e.jsx(l,{children:"14 days"},"14"),e.jsx(l,{children:"30 days"},"30")]}),e.jsxs(x,{label:"Trial Features",selectedKeys:[r.data.trial_features],onSelectionChange:a=>r.setData("trial_features",Array.from(a)[0]),radius:i(),children:[e.jsx(l,{children:"Same as paid plan"},"same"),e.jsx(l,{children:"Limited features"},"limited")]})]})]})]}),e.jsxs(o,{radius:i(),children:[e.jsx(m,{className:"border-b border-divider p-4",children:e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Stripe Integration"})}),e.jsxs(c,{className:"p-4 space-y-4",children:[e.jsx(p,{label:"Stripe Product ID",placeholder:"prod_xxxxx",value:r.data.stripe_product_id,onValueChange:a=>r.setData("stripe_product_id",a),radius:i()}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(p,{label:"Monthly Price ID",placeholder:"price_xxxxx",value:r.data.stripe_monthly_price_id,onValueChange:a=>r.setData("stripe_monthly_price_id",a),radius:i()}),e.jsx(p,{label:"Annual Price ID",placeholder:"price_xxxxx",value:r.data.stripe_annual_price_id,onValueChange:a=>r.setData("stripe_annual_price_id",a),radius:i()})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(f,{variant:"flat",radius:i(),onPress:()=>_.visit(route("admin.plans.index")),children:"Cancel"}),e.jsx(f,{type:"submit",color:"primary",radius:i(),isLoading:r.processing,startContent:!r.processing&&e.jsx(M,{className:"w-5 h-5"}),children:d?"Update Plan":"Create Plan"})]})]})})]})})})})})]})};q.layout=s=>e.jsx(z,{children:s});export{q as default};
