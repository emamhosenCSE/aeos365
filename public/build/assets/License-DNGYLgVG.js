import{r as o,j as e,H as F,c as R,a as _,b as f,e as V}from"./app-DInl32dX.js";import{s as h}from"./routeUtils-C1ntbTNy.js";import{s as E}from"./toastUtils-Dk6tac5H.js";import{F as L}from"./ShieldCheckIcon-DvFPoteO.js";import{F as S}from"./BuildingOfficeIcon-B3NavyzP.js";import{F as I}from"./ShoppingCartIcon-uZ3xP94w.js";import{F as y}from"./GlobeAltIcon-GWZbt4C2.js";import{F as C}from"./ExclamationCircleIcon-DwrHwjxW.js";import{F as P}from"./CheckCircleIcon-CBemRlBB.js";import{c as T}from"./chunk-C6WKGNND-BNiYL7Dh.js";import{i as p}from"./chunk-SQIAVXJX-D14i8yCn.js";import"./app-Bq-q9uAS.js";import"./index-DPMKIREV.js";import"./chunk-KQW2TNLT-BWWZAnNV.js";import"./index-CSng9BnJ.js";import"./chunk-ICU6NNET-DqkKT8ny.js";import"./useLabel-CkOStKP1.js";import"./useLabels-DRQXF7iz.js";function ae({title:j,providers:g,products:$}){const[d,b]=o.useState("lg"),[v,N]=o.useState(""),[l,w]=o.useState({license_key:"",email:"",domain:window.location.origin}),[i,c]=o.useState({}),[m,x]=o.useState(!1);o.useEffect(()=>{b((()=>{const a=getComputedStyle(document.documentElement).getPropertyValue("--borderRadius")?.trim()||"12px",t=parseInt(a);return t===0?"none":t<=4?"sm":t<=8?"md":t<=12?"lg":"xl"})())},[]);const k={aero:y,codecanyon:I,enterprise:S},u=(s,n)=>{w(a=>({...a,[s]:n})),i[s]&&c(a=>({...a,[s]:""}))},X=async()=>{c({});const s={};if(l.license_key||(s.license_key="License key is required"),l.email||(s.email="Email is required"),Object.keys(s).length>0){c(s);return}const n=new Promise(async(a,t)=>{try{x(!0);const r=await V.post(route("install.validate-license"),l);r.data.success?(a([r.data.message]),setTimeout(()=>{h("install.requirements")},1e3)):t([r.data.message])}catch(r){r.response?.data?.errors&&c(r.response.data.errors),t(r.response?.data?.message?[r.response.data.message]:["License validation failed"])}finally{x(!1)}});E.promise(n,{loading:"Validating license...",success:a=>a.join(", "),error:a=>Array.isArray(a)?a.join(", "):a})};return e.jsxs(e.Fragment,{children:[e.jsx(F,{title:j}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-content1 to-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-primary font-semibold",children:"Step 1 of 6"}),e.jsx("span",{className:"text-default-500",children:"License Validation"})]}),e.jsx("div",{className:"mt-2 h-2 bg-default-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:"16.66%"}})})]}),e.jsxs(R,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"License Validation"}),e.jsx("p",{className:"text-sm text-default-600 mt-1",children:"Enter your license key to continue"})]})]})}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",children:"Select License Provider"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:g?.map(s=>{const n=k[s.id]||y;return e.jsxs("button",{onClick:()=>N(s.id),className:`p-4 border-2 rounded-lg transition-all text-left ${v===s.id?"border-primary bg-primary/5":"border-divider hover:border-primary/50"}`,children:[e.jsx(n,{className:"w-8 h-8 mb-2 text-primary"}),e.jsx("h3",{className:"font-semibold mb-1",children:s.name}),e.jsx("p",{className:"text-xs text-default-600",children:s.description})]},s.id)})})]}),e.jsx(p,{label:"License Key",placeholder:"Enter your license key",value:l.license_key,onValueChange:s=>u("license_key",s),isInvalid:!!i.license_key,errorMessage:i.license_key,isRequired:!0,radius:d,classNames:{inputWrapper:"bg-default-100"},description:"Format: XX-XXX-XXX-XXXXX-XXXXX"}),e.jsx(p,{type:"email",label:"License Email",placeholder:"email@example.com",value:l.email,onValueChange:s=>u("email",s),isInvalid:!!i.email,errorMessage:i.email,isRequired:!0,radius:d,classNames:{inputWrapper:"bg-default-100"},description:"Email address used during purchase"}),e.jsx(p,{type:"url",label:"Domain (Optional)",placeholder:"https://yourdomain.com",value:l.domain,onValueChange:s=>u("domain",s),isInvalid:!!i.domain,errorMessage:i.domain,radius:d,classNames:{inputWrapper:"bg-default-100"},description:"Leave as default or enter your custom domain"}),e.jsx("div",{className:"p-4 bg-primary/10 border border-primary/20 rounded-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-semibold text-primary mb-1",children:"License Information"}),e.jsxs("ul",{className:"space-y-1 text-default-700 dark:text-default-300",children:[e.jsx("li",{children:"• Your license will be validated with the provider's server"}),e.jsx("li",{children:"• Make sure you have an active internet connection"}),e.jsx("li",{children:"• The email should match your purchase email"}),e.jsx("li",{children:"• Each license can be activated on one domain only"})]})]})]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(f,{variant:"flat",radius:d,onPress:()=>h("install.index"),isDisabled:m,children:"Back"}),e.jsx(f,{color:"primary",radius:d,onPress:X,isLoading:m,endContent:!m&&e.jsx(P,{className:"w-5 h-5"}),children:m?"Validating...":"Validate & Continue"})]})]})})]})]})})]})}export{ae as default};
