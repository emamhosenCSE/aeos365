import{j as e,R as V,b as k,f as de,a9 as me,r as d,o as xe,n as q,H as pe,c as o,e as m,l as U,J as he,i as be,F as f,m as ue}from"./app-BrpQ0UwM.js";import{t as ge,f as w,i as H,o as K,p as je,K as Q,R as ye,a6 as ve,ar as fe,an as we,A as Ne}from"./App-BzZwRIf3.js";import{d as _e}from"./chunk-IHO36JMK-xRSFIery.js";import{s as z}from"./toastUtils-DmXWeOL1.js";import{F as M}from"./DeviceTabletIcon-B_IoiQm8.js";import{F as W}from"./CircleStackIcon-CrHNZK6m.js";import{F as Te}from"./PlusIcon-CA_x2Or_.js";import{F as D}from"./ShieldCheckIcon-bFtvfWXE.js";import{F as X}from"./CheckCircleIcon-BURezXLP.js";import{F as Y}from"./LockClosedIcon-CDMX3egb.js";import{F as Ce}from"./KeyIcon-DBJJhxUd.js";import{R as Re,X as ke,Y as Se,T as Fe}from"./generateCategoricalChart-BNKVTsbs.js";import{A as Ae,a as Ee}from"./AreaChart-CbE4cTxd.js";import{C as Pe}from"./CartesianGrid-Cx4nV4Kz.js";import{F as $e}from"./InformationCircleIcon-B-LSZjy2.js";import{s as ze}from"./chunk-I3A4XRYQ-CfGUc_10.js";import{s as J}from"./chunk-C3QHEOC2-D4QcJqup.js";import{l as g}from"./chunk-Y5DMIIWQ-ilm6UE0q.js";import{c as x}from"./chunk-C6WKGNND-CkI8tRvQ.js";import{t as L,b as j,c as a,a as G}from"./chunk-F3UDT23P-Ct2uUAEU.js";import"./app-Dxe9AM1M.js";import"./index-DGjdlXV7.js";/* empty css                      */import"./chunk-CV4BWJDJ-C96VZW1N.js";import"./index-CQwslooR.js";import"./index-DRhHtkcR.js";import"./UserIcon-D8kY1ZwS.js";import"./Cog6ToothIcon-BMMbAZpA.js";import"./GlobeAltIcon-DxtqcOi2.js";import"./useBranding-qv63WW7j.js";import"./useDialog-fti0_t2P.js";import"./VisuallyHidden-DwXjZBP5.js";import"./keyboard-BhtLdWlC.js";import"./useLabels-DLWWaVRl.js";import"./index-CpUThtir.js";import"./XMarkIcon-C1WIqP6o.js";import"./chunk-SQIAVXJX-d0efAK_x.js";import"./chunk-KQW2TNLT-Ex180OOD.js";import"./chunk-ICU6NNET-JgRCpHuB.js";import"./useLabel-CGwDFWJ-.js";import"./MagnifyingGlassIcon-DhzJZJr3.js";import"./chunk-AUA5GDXN-BodSRBst.js";import"./chunk-WQVQ7P2I-hHnQawC0.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-CSsa5DzI.js";import"./useMediaQuery-CFaF2uqM.js";import"./AcademicCapIcon-D20Gi9a_.js";import"./IdentificationIcon-BGfsu79d.js";import"./ArrowLeftIcon-Cdc1HrjB.js";import"./ArrowRightIcon-Cz66Tf3s.js";import"./BriefcaseIcon-BCesjFgA.js";import"./BuildingOfficeIcon-CoZNcGsq.js";import"./CalendarDaysIcon-BkAEztIS.js";import"./CalendarIcon-DNQOCB8b.js";import"./ClipboardDocumentCheckIcon-BxDTls2I.js";import"./CpuChipIcon-CSICtRFQ.js";import"./CurrencyDollarIcon-DhjPgWHi.js";import"./DevicePhoneMobileIcon-j_Cw2KiO.js";import"./DocumentArrowUpIcon-Is7TjkFb.js";import"./DocumentIcon-CqhqrUyF.js";import"./EnvelopeIcon-CF1Xt110.js";import"./EyeIcon-DHXN5WDi.js";import"./MapPinIcon-D1Pi-EC7.js";import"./PlusCircleIcon-BYeJHQrD.js";import"./PrinterIcon-Cxf-38ZP.js";import"./UserCircleIcon-CUGyxbk3.js";import"./UserGroupIcon-h979AJVu.js";import"./chunk-TW2E3XVA-Cq0DGGbI.js";import"./useHasTabbableChild-BCB9SlDy.js";import"./useSelectableItem-xFnwZFq2.js";import"./SelectionManager-BDqxcBRc.js";import"./Item-Bz9nEl3J.js";import"./MaintenanceModeBanner-Cxhu4lEL.js";import"./index-DPUAKS60.js";import"./useTreeState-SZseE4UO.js";import"./useMenuTriggerState-C8Me9E6c.js";import"./index-CiHZ6AIJ.js";import"./useToggleState-B-2VEJIj.js";import"./chunk-7F3ZLNJ6-DliCQ3uz.js";import"./index-CTla63m4.js";import"./chunk-PMMJMDBI-DQ2xIUcD.js";import"./index-CCfM7oky.js";const Me=({title:y,subtitle:N,icon:v,actionButtons:S=[],actions:_,children:F,variant:T="default"})=>{const n=window.innerWidth<640,A=()=>{switch(T){case"minimal":return"bg-white/10 backdrop-blur-md border-b border-white/10";case"gradient":return"bg-linear-to-br from-white/20 via-white/10 to-transparent backdrop-blur-xl border-b border-white/20";default:return"bg-background/80 backdrop-blur-md border-b border-divider"}};return e.jsxs("div",{className:"overflow-hidden theme-aware-header",children:[e.jsx("div",{className:A(),children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[v&&e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 backdrop-blur-sm",children:V.cloneElement(v,{className:`${v.props.className||""} text-primary`,...v.props})}),e.jsxs("div",{children:[e.jsx("h4",{className:`${n?"text-xl":"text-2xl"} font-bold text-foreground`,children:y}),N&&e.jsx("p",{className:"text-sm text-default-500 mt-1",style:{fontFamily:"var(--font-current)",transition:"all var(--transition)"},children:N})]})]}),_?e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:_}):S.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:S.map((p,b)=>e.jsx(k,{color:p.color||"primary",variant:p.variant||"solid",startContent:p.icon,onPress:p.onPress,isDisabled:p.isDisabled,isLoading:p.isLoading,size:n?"sm":"md",children:p.label},b))})]})})}),e.jsx(_e,{className:"border-[rgba(var(--theme-primary-rgb),0.1)]",style:{transition:"all var(--transition)"}}),F&&e.jsx("div",{className:"theme-aware-content",style:{transition:"all var(--transition)"},children:F})]})},De=({title:y,initialData:N})=>{const{isDark:v}=de();me();const[S,_]=d.useState(!1);d.useEffect(()=>{const r=()=>{_(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const{auth:F,app:T}=xe().props,[n,A]=d.useState(N||{}),[p,b]=d.useState(!1),[C,Z]=d.useState(!0),[E,ee]=d.useState("30"),[R,re]=d.useState("overview"),[P,se]=d.useState("24h"),[Le,Ge]=d.useState("database");d.useEffect(()=>{if(!C)return;const r=setInterval(()=>{$()},parseInt(E)*1e3);return()=>clearInterval(r)},[C,E]);const $=d.useCallback(async()=>{b(!0);try{const r=await q.get("/api/system-monitoring/metrics",{params:{type:R,period:P}});A(r.data)}catch(r){console.error("Failed to fetch monitoring data:",r),z.error("Failed to refresh system data")}finally{b(!1)}},[R,P]),ae=r=>{switch(r){case"healthy":case"compliant":case"good":return"success";case"warning":case"partial":return"warning";case"critical":case"unhealthy":case"non_compliant":return"error";default:return"default"}},te=r=>{switch(r){case"healthy":case"compliant":return e.jsx(X,{className:"w-5 h-5"});case"warning":case"partial":return e.jsx(f,{className:"w-5 h-5"});case"critical":case"unhealthy":return e.jsx(we,{className:"w-5 h-5"});default:return e.jsx($e,{className:"w-5 h-5"})}},I={primary:theme.palette.primary.main,secondary:theme.palette.secondary.main,success:theme.palette.success.main,warning:theme.palette.warning.main,error:theme.palette.error.main,info:theme.palette.info.main},O=d.useCallback(async()=>{try{b(!0);const r=await q.get("/admin/system-report",{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([r.data])),i=document.createElement("a");i.href=t,i.setAttribute("download",`system-report-${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(t),z.success("System report exported successfully")}catch(r){console.error("Failed to export report:",r),z.error("Failed to export system report")}finally{b(!1)}},[]),B=()=>{const r=[{title:"System Health",value:n.system_health?.overall_status||"Unknown",icon:e.jsx(he,{}),color:n.system_health?.overall_status==="healthy"?"success":"error",description:"Overall system status"},{title:"Response Time",value:`${Math.round(n.performance_summary?.avg_response_time||0)}ms`,icon:e.jsx(be,{}),color:(n.performance_summary?.avg_response_time||0)<500?"success":"warning",description:"Average response time"},{title:"Active Users",value:n.user_activity?.active_users||0,icon:e.jsx(M,{}),color:"info",description:"Currently online"},{title:"Error Rate",value:`${((n.error_summary?.total_errors||0)/Math.max(n.performance_summary?.total_requests||1,1)*100).toFixed(2)}%`,icon:e.jsx(f,{}),color:(n.error_summary?.total_errors||0)<10?"success":"error",description:"System error rate"}];return e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,children:e.jsx(Grid,{container:!0,spacing:3,children:r.map((t,i)=>e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",p:2},children:e.jsx(CardContent,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"h4",className:"font-bold",children:t.value}),e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:t.title}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:t.description})]}),e.jsx("div",{className:`p-3 rounded-full bg-${t.color}-500/20`,children:V.cloneElement(t.icon,{className:`w-6 h-6 text-${t.color}-500`})})]})})})})},i))})}),e.jsx(Grid,{item:!0,xs:12,lg:8,children:e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"System Health Checks",avatar:e.jsx(X,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx("div",{className:"space-y-3",children:n.system_health?.checks&&Object.entries(n.system_health.checks).map(([t,i])=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/10 backdrop-blur-md border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[te(i.status),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",className:"capitalize font-medium",children:t.replace(/_/g," ")}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:i.message})]})]}),e.jsx(m,{label:i.status,color:ae(i.status),size:"small",variant:"outlined",className:"capitalize"})]},t))})})]})}),e.jsx(Grid,{item:!0,xs:12,lg:4,children:e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Quick Actions",avatar:e.jsx(je,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{startIcon:e.jsx(U,{className:"w-4 h-4"}),onClick:$,className:"w-full",variant:"bordered",children:"Refresh Data"}),e.jsx(k,{startIcon:e.jsx(K,{className:"w-4 h-4"}),onClick:O,className:"w-full",variant:"bordered",children:"Export Report"}),e.jsx(k,{startIcon:e.jsx(Q,{className:"w-4 h-4"}),className:"w-full",variant:"bordered",children:"Configure Alerts"})]})})]})})]})},ie=()=>{const[r,t]=d.useState(0),[i,s]=d.useState(10),c=n.database_stats?.table_analysis?.tables||[],u=n.database_stats?.table_analysis?.summary||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-blue-500",children:u.total_tables||0}),e.jsx(Typography,{variant:"subtitle2",children:"Total Tables"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsxs(Typography,{variant:"h4",className:"font-bold text-green-500",children:[u.total_size_mb?.toFixed(2)||0," MB"]}),e.jsx(Typography,{variant:"subtitle2",children:"Total Size"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-purple-500",children:u.total_rows?.toLocaleString()||0}),e.jsx(Typography,{variant:"subtitle2",children:"Total Rows"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-orange-500",children:u.engines_used?.length||0}),e.jsx(Typography,{variant:"subtitle2",children:"Storage Engines"})]})})})]}),e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Table Analysis",avatar:e.jsx(fe,{className:"w-6 h-6"}),action:e.jsx(m,{label:`${c.length} Tables`,color:"primary",variant:"outlined"})}),e.jsxs(CardContent,{children:[e.jsx(TableContainer,{children:e.jsxs(L,{children:[e.jsx(TableHead,{children:e.jsxs(j,{children:[e.jsx(a,{children:"Table Name"}),e.jsx(a,{align:"right",children:"Rows"}),e.jsx(a,{align:"right",children:"Size (MB)"}),e.jsx(a,{align:"right",children:"Data (MB)"}),e.jsx(a,{align:"right",children:"Index (MB)"}),e.jsx(a,{children:"Engine"}),e.jsx(a,{children:"Created"})]})}),e.jsx(G,{children:c.slice(r*i,r*i+i).map((l,h)=>e.jsxs(j,{hover:!0,children:[e.jsx(a,{children:e.jsx(Typography,{variant:"subtitle2",className:"font-medium",children:l.TABLE_NAME})}),e.jsx(a,{align:"right",children:l.TABLE_ROWS?.toLocaleString()||0}),e.jsx(a,{align:"right",children:e.jsx(m,{label:`${l.size_mb||0} MB`,size:"small",color:l.size_mb>10?"warning":"default"})}),e.jsx(a,{align:"right",children:l.data_mb||0}),e.jsx(a,{align:"right",children:l.index_mb||0}),e.jsx(a,{children:e.jsx(m,{label:l.ENGINE,size:"small",variant:"outlined"})}),e.jsx(a,{children:l.CREATE_TIME?new Date(l.CREATE_TIME).toLocaleDateString():"N/A"})]},l.TABLE_NAME))})]})}),e.jsx(TablePagination,{rowsPerPageOptions:[5,10,25,50],component:"div",count:c.length,rowsPerPage:i,page:r,onPageChange:(l,h)=>t(h),onRowsPerPageChange:l=>{s(parseInt(l.target.value,10)),t(0)}})]})]}),n.database_stats?.storage_analysis&&e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Storage Analysis",avatar:e.jsx(W,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"space-y-4",children:[n.database_stats.storage_analysis.by_engine?.map((l,h)=>e.jsx("div",{className:"p-3 rounded-lg bg-white/5",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(Typography,{variant:"subtitle2",className:"font-medium",children:[l.ENGINE," Engine"]}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:[l.table_count," tables"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(Typography,{variant:"subtitle2",className:"font-bold",children:[l.total_size_mb," MB"]}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["Avg: ",l.avg_size_mb," MB"]})]})]})},h)),n.database_stats.storage_analysis.fragmentation?.length>0&&e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"Fragmentation Issues"}),n.database_stats.storage_analysis.fragmentation.map((l,h)=>e.jsxs(Alert,{severity:l.fragmentation_percent>50?"error":"warning",className:"mb-2",children:["Table ",e.jsx("strong",{children:l.TABLE_NAME})," has ",l.fragmentation_percent,"% fragmentation (",l.fragmentation_mb," MB)"]},h))]}),n.database_stats.storage_analysis.recommendations?.length>0&&e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"Recommendations"}),n.database_stats.storage_analysis.recommendations.map((l,h)=>e.jsx(Alert,{severity:l.priority==="high"?"error":"info",className:"mb-2",children:l.message},h))]})]})})]})]})},ne=()=>{const r=n.performance_summary?.metrics||[],t=n.database_stats?.query_performance||{},i=r.length>0?r.map((s,c)=>({name:s.metric_type?s.metric_type.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase()):`Metric ${c+1}`,avgTime:Math.round(s.avg_time||s.average_time||0),requests:s.total_requests||s.count||0,maxTime:Math.round(s.max_time||0)})):[{name:"API Requests",avgTime:120,requests:150,maxTime:500},{name:"Database Queries",avgTime:80,requests:200,maxTime:300},{name:"Cache Operations",avgTime:15,requests:80,maxTime:45},{name:"File Operations",avgTime:250,requests:30,maxTime:800}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:8,children:e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Performance Metrics",avatar:e.jsx(ye,{className:"w-6 h-6"}),action:r.length===0&&e.jsx(m,{label:"Sample Data",size:"small",color:"warning"})}),e.jsx(CardContent,{children:e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Ae,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Pe,{strokeDasharray:"3 3",stroke:theme.palette.divider,opacity:.3}),e.jsx(ke,{dataKey:"name",stroke:theme.palette.text.secondary,fontSize:12}),e.jsx(Se,{stroke:theme.palette.text.secondary,fontSize:12,label:{value:"Response Time (ms)",angle:-90,position:"insideLeft"}}),"                                        ",e.jsx(Fe,{contentStyle:{backgroundColor:theme.palette.background.paper,border:`1px solid ${theme.palette.divider}`,borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(Ee,{type:"monotone",dataKey:"avgTime",stroke:I.primary,fill:`${I.primary}30`,strokeWidth:2})]})})})]})}),e.jsx(Grid,{item:!0,xs:12,md:4,children:e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Performance Summary",avatar:e.jsx(ve,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Typography,{variant:"h4",className:"font-bold text-blue-500",children:t.performance_summary?.total_queries_24h||0}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Queries (24h)"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(Typography,{variant:"h4",className:"font-bold text-green-500",children:[Math.round(t.performance_summary?.avg_execution_time||0),"ms"]}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Avg Execution Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs(Typography,{variant:"h4",className:"font-bold text-red-500",children:[Math.round(t.performance_summary?.slowest_query_time||0),"ms"]}),e.jsx(Typography,{variant:"caption",color:"text.secondary",children:"Slowest Query"})]})]})})]})})]}),t.slow_queries?.length>0&&e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Slow Queries",avatar:e.jsx(f,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx(TableContainer,{children:e.jsxs(L,{children:[e.jsx(TableHead,{children:e.jsxs(j,{children:[e.jsx(a,{children:"Query Type"}),e.jsx(a,{align:"right",children:"Execution Time (ms)"}),e.jsx(a,{align:"right",children:"Memory Usage"}),e.jsx(a,{children:"Timestamp"})]})}),e.jsx(G,{children:t.slow_queries.slice(0,10).map((s,c)=>e.jsxs(j,{hover:!0,children:[e.jsx(a,{children:s.metric_type}),e.jsx(a,{align:"right",children:e.jsx(m,{label:`${s.execution_time_ms}ms`,color:s.execution_time_ms>2e3?"error":"warning",size:"small"})}),e.jsx(a,{align:"right",children:s.memory_usage||"N/A"}),e.jsx(a,{children:new Date(s.created_at).toLocaleString()})]},c))})]})})})]})]})},le=()=>{const r=n.security_metrics||{},t=r.authentication||{},i=r.suspicious_activities||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(D,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-green-500",children:t.successful_logins_24h||0}),e.jsx(Typography,{variant:"subtitle2",children:"Successful Logins (24h)"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(f,{className:"w-8 h-8 mx-auto mb-2 text-red-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-red-500",children:r.failed_attempts?.length||0}),e.jsx(Typography,{variant:"subtitle2",children:"Failed Login Attempts"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Y,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-blue-500",children:t.unique_users_24h||0}),e.jsx(Typography,{variant:"subtitle2",children:"Unique Users (24h)"})]})})}),e.jsx(Grid,{item:!0,xs:12,sm:6,md:3,children:e.jsx(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:e.jsxs(CardContent,{className:"text-center",children:[e.jsx(Q,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx(Typography,{variant:"h4",className:"font-bold text-orange-500",children:i.high_frequency_ips?.length||0}),e.jsx(Typography,{variant:"subtitle2",children:"Suspicious IPs"})]})})})]}),r.security_events?.length>0&&e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Recent Security Events",avatar:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx("div",{className:"space-y-3",children:r.security_events.slice(0,10).map((s,c)=>e.jsx("div",{className:"p-3 rounded-lg bg-white/5 border border-white/10",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",className:"font-medium",children:s.description}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["User: ",s.causer_id," | ",new Date(s.created_at).toLocaleString()]})]}),e.jsx(m,{label:"Security Event",size:"small",color:"warning",variant:"outlined"})]})},c))})})]}),r.failed_attempts?.length>0&&e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Failed Login Attempts",avatar:e.jsx(f,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsx(TableContainer,{children:e.jsxs(L,{children:[e.jsx(TableHead,{children:e.jsxs(j,{children:[e.jsx(a,{children:"Error Type"}),e.jsx(a,{children:"Message"}),e.jsx(a,{children:"IP Address"}),e.jsx(a,{children:"Timestamp"})]})}),e.jsx(G,{children:r.failed_attempts.slice(0,10).map((s,c)=>e.jsxs(j,{hover:!0,children:[e.jsx(a,{children:e.jsx(m,{label:s.error_type,size:"small",color:"error"})}),e.jsx(a,{children:s.message}),e.jsx(a,{children:s.ip_address||"Unknown"}),e.jsx(a,{children:new Date(s.created_at).toLocaleString()})]},c))})]})})})]})]})},oe=()=>{const r=n.compliance_metrics||{},t=r.iso_27001||{},i=r.data_protection||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Grid,{container:!0,spacing:3,children:[e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"ISO 27001 Compliance",avatar:e.jsx(D,{className:"w-6 h-6"})}),e.jsxs(CardContent,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs(Typography,{variant:"h3",className:"font-bold text-blue-500",children:[t.compliance_score||0,"%"]}),e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Compliance Score"})]}),t.checks&&Object.entries(t.checks).map(([s,c])=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 mb-2",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",className:"capitalize",children:s.replace(/_/g," ")}),e.jsxs(Typography,{variant:"caption",color:"text.secondary",children:["Score: ",c.score,"%"]})]}),e.jsx(m,{label:c.compliant?"Compliant":"Non-Compliant",color:c.compliant?"success":"error",size:"small"})]},s))]})]})}),e.jsx(Grid,{item:!0,xs:12,md:6,children:e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Data Protection Compliance",avatar:e.jsx(Y,{className:"w-6 h-6"})}),e.jsxs(CardContent,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs(Typography,{variant:"h3",className:"font-bold text-green-500",children:[i.gdpr_compliance_score||0,"%"]}),e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"GDPR Compliance Score"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Data Retention"}),e.jsx(m,{label:`${i.data_retention?.score||0}%`,size:"small",color:"info"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Data Anonymization"}),e.jsx(m,{label:`${i.data_anonymization?.score||0}%`,size:"small",color:"warning"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Consent Management"}),e.jsx(m,{label:`${i.consent_management?.score||0}%`,size:"small",color:"success"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 rounded-lg bg-white/5",children:[e.jsx(Typography,{variant:"subtitle2",children:"Breach Procedures"}),e.jsx(m,{label:`${i.data_breach_procedures?.score||0}%`,size:"small",color:"info"})]})]})]})]})})]}),e.jsxs(o,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px"},children:[e.jsx(x,{title:"Compliance Recommendations",avatar:e.jsx(H,{className:"w-6 h-6"})}),e.jsx(CardContent,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"ISO 27001 Recommendations"}),t.recommendations?.map((s,c)=>e.jsx(Alert,{severity:"info",className:"mb-2",children:s},c))]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"h6",className:"mb-3",children:"Data Protection Recommendations"}),i.recommendations?.map((s,c)=>e.jsx(Alert,{severity:"warning",className:"mb-2",children:s},c))]})]})})]})]})},ce=()=>{switch(R){case"overview":return e.jsx(B,{});case"database":return e.jsx(ie,{});case"performance":return e.jsx(ne,{});case"security":return e.jsx(le,{});case"compliance":return e.jsx(oe,{});default:return e.jsx(B,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(pe,{title:y}),e.jsx(Box,{className:"min-h-screen p-2 sm:p-4 md:p-6",sx:{background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%)"},children:e.jsx(Grow,{in:!0,timeout:800,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(o,{className:"shadow-lg",children:e.jsx(Me,{title:"Enterprise System Monitoring",subtitle:"ISO-compliant comprehensive system monitoring and analysis dashboard",icon:e.jsx(M,{className:"w-8 h-8"}),variant:"default",actionButtons:[{label:"Export Report",icon:e.jsx(K,{className:"w-4 h-4"}),onPress:O,className:"bg-linear-to-r from-[rgba(var(--theme-primary-rgb),0.2)] to-[rgba(var(--theme-secondary-rgb),0.2)] hover:from-[rgba(var(--theme-primary-rgb),0.3)] hover:to-[rgba(var(--theme-secondary-rgb),0.3)] border border-[rgba(var(--theme-primary-rgb),0.3)]"},{label:"Refresh Data",icon:e.jsx(U,{className:"w-4 h-4"}),onPress:$,loading:p}],children:e.jsxs("div",{className:"p-6",children:[e.jsx(Paper,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",p:3,mb:4},children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{checked:C,onChange:r=>Z(r.target.checked),size:"sm"}),e.jsx(Typography,{variant:"body2",children:"Auto Refresh"})]}),e.jsxs(J,{size:"sm",selectedKeys:[E],onSelectionChange:r=>ee(Array.from(r)[0]),className:"w-24",isDisabled:!C,"aria-label":"Refresh interval",children:[e.jsx(g,{value:"30",children:"30s"},"30"),e.jsx(g,{value:"60",children:"1m"},"60"),e.jsx(g,{value:"300",children:"5m"},"300")]})]}),e.jsxs(J,{size:"sm",selectedKeys:[P],onSelectionChange:r=>se(Array.from(r)[0]),className:"w-32","aria-label":"Time period",children:[e.jsx(g,{value:"1h",children:"Last Hour"},"1h"),e.jsx(g,{value:"24h",children:"Last 24h"},"24h"),e.jsx(g,{value:"7d",children:"Last 7 days"},"7d")]})]})}),e.jsx(Paper,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",mb:4},children:e.jsxs(ge,{selectedKey:R,onSelectionChange:re,"aria-label":"System monitoring sections",className:"p-4",children:[e.jsx(w,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Overview"]})},"overview"),e.jsx(w,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Database"]})},"database"),e.jsx(w,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"Performance"]})},"performance"),e.jsx(w,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),"Security"]})},"security"),e.jsx(w,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Compliance"]})},"compliance")]})}),e.jsx("div",{className:"min-h-[600px]",children:ce()}),e.jsx(Paper,{elevation:0,sx:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"16px",p:3,mt:4},children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Last Updated"}),e.jsx(Typography,{variant:"body2",className:"font-medium",children:n.system_health?.last_check?new Date(n.system_health.last_check).toLocaleString():new Date().toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Monitoring Since"}),e.jsx(Typography,{variant:"body2",className:"font-medium",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"System Version"}),e.jsxs(Typography,{variant:"body2",className:"font-medium",children:[T?.name||"ERP System"," v",T?.version||"2.0"]})]}),e.jsxs("div",{children:[e.jsx(Typography,{variant:"subtitle2",color:"text.secondary",children:"Compliance Status"}),e.jsx(m,{label:"ISO Compliant",color:"success",size:"small",variant:"outlined"})]})]})})]})})})})})})]})};De.layout=y=>e.jsx(Ne,{children:y});export{De as default};
