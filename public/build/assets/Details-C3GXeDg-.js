import{o as z,r as p,n as _,e as $,j as e,H as B,s as L,g as M,b as T}from"./app-wtupjOeZ.js";import{h as I,c as P}from"./routeUtils-bS7ZO8bY.js";import{S as D}from"./SafeLink-VmPX-7ik.js";import{A as F}from"./AuthCard-CW4hS1Dj.js";import{R as q}from"./RegisterLayout-D7rvGfZ1.js";import{u as A}from"./useBranding-CgsdMei2.js";import{P as E}from"./ProgressSteps-i6gJ5D4P.js";import{F as W}from"./CheckCircleIcon-D351HXit.js";import{i as r}from"./chunk-SQIAVXJX-CLoGEUuy.js";import"./app-Bq-q9uAS.js";import"./toastUtils-Cf6YTa-g.js";import"./index-B1JbDCkm.js";import"./chunk-AUA5GDXN-CVZTx3-f.js";import"./index-DcltEvQy.js";import"./index-DHsHUiX1.js";import"./chunk-WQVQ7P2I-1AqTFqjN.js";import"./number-CB4zbwAz.js";import"./chunk-LGMZDQT5-n6fUnwu5.js";/* empty css                      */import"./MaintenanceModeBanner-CS2oR-VA.js";import"./ArrowLeftIcon-BCcMd-G6.js";import"./chunk-KQW2TNLT-CXRUek2G.js";import"./chunk-ICU6NNET-DFjgFNJm.js";import"./useLabel-C8LV2AA2.js";import"./useLabels-B3MIxEPi.js";function xe({steps:g=[],currentStep:h,savedData:f={},accountType:x="company",baseDomain:v="platform.test"}){const o=f?.details??{},{data:t,setData:l,post:j,processing:y,errors:s}=z({name:o.name??"",email:o.email??"",phone:o.phone??"",subdomain:o.subdomain??"",team_size:o.team_size??""}),[i,m]=p.useState({checking:!1,available:null,message:""}),[b,k]=p.useState(null),{themeSettings:N}=_(),n=N?.mode==="dark",{siteName:w}=A(),c={heading:n?"text-white":"text-slate-900",copy:n?"text-slate-300":"text-slate-600",badge:n?"text-slate-300":"text-slate-500",link:n?"text-white/80 hover:text-white":"text-slate-600 hover:text-slate-900"};p.useEffect(()=>{b&&clearTimeout(b);const a=t.subdomain.trim().toLowerCase();if(!a||a.length<3||!/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(a)){m({checking:!1,available:null,message:""});return}const d=setTimeout(async()=>{m({checking:!0,available:null,message:""});try{const u=await $.post("/api/platform/v1/check-subdomain",{subdomain:a});m({checking:!1,available:u.data.available,message:u.data.message||(u.data.available?"Subdomain is available":"Subdomain is taken")})}catch{m({checking:!1,available:null,message:""})}},500);return k(d),()=>clearTimeout(d)},[t.subdomain]);const S=a=>{if(a.preventDefault(),!I("platform.register.details.store")){console.error("Registration route not available");return}j(P("platform.register.details.store"))},C=x==="individual"?"Your name":"Organization name",R=a=>a.replace(/[^\d+]/g,"");return e.jsxs(q,{children:[e.jsx(B,{title:`Workspace details - ${w}`}),e.jsxs("section",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-12 space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4 text-center",children:[e.jsx("p",{className:`text-[10px] sm:text-sm uppercase tracking-[0.3em] ${c.badge}`,children:"Step 2"}),e.jsxs("h1",{className:`text-2xl sm:text-4xl font-semibold ${c.heading} px-2`,children:["Tell us about ",x==="individual"?"you":"your company","."]}),e.jsx("p",{className:`${c.copy} text-sm sm:text-base px-2`,children:"We will use this to pre-configure branding, subdomain, and trial communications."})]}),e.jsx(E,{steps:g,currentStep:h}),e.jsx(F,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4 sm:space-y-5",children:[e.jsx(r,{label:C,placeholder:"Acme Manufacturing",value:t.name,onChange:a=>l("name",a.target.value),isInvalid:!!s.name,errorMessage:s.name,isRequired:!0,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2",children:[e.jsx(r,{type:"email",label:"Work email",placeholder:"ops@acme.com",value:t.email,onChange:a=>l("email",a.target.value),isInvalid:!!s.email,errorMessage:s.email,isRequired:!0,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}}),e.jsx(r,{label:"Phone (optional)",placeholder:"+1 415 555 0110",value:t.phone,onChange:a=>l("phone",R(a.target.value)),isInvalid:!!s.phone,errorMessage:s.phone,description:"International format recommended (e.g., +1 234 567 8900)",classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base",description:"text-xs sm:text-sm"}})]}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-[2fr,1fr]",children:[e.jsx(r,{label:"Preferred subdomain",placeholder:"acme",value:t.subdomain,onChange:a=>l("subdomain",a.target.value.toLowerCase()),isInvalid:!!s.subdomain||i.available===!1,errorMessage:s.subdomain||(i.available===!1?i.message:""),description:`Your workspace URL will be https://${t.subdomain||"team"}.${v}`,isRequired:!0,endContent:i.checking?e.jsx(L,{size:"sm"}):i.available===!0?e.jsx(W,{className:"w-5 h-5 text-success"}):i.available===!1?e.jsx(M,{className:"w-5 h-5 text-danger"}):null,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base",description:"text-xs sm:text-sm"}}),e.jsx(r,{type:"number",label:"Team size",placeholder:"120",value:t.team_size,onChange:a=>l("team_size",a.target.value),isInvalid:!!s.team_size,errorMessage:s.team_size,min:1,classNames:{label:"text-sm sm:text-base",input:"text-sm sm:text-base"}})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsx(D,{route:"platform.register.index",className:`text-xs sm:text-sm transition-colors text-center sm:text-left ${c.link}`,children:"‚Üê Back to account type"}),e.jsx(T,{color:"primary",className:"bg-gradient-to-r from-blue-500 to-purple-600 w-full sm:w-auto",type:"submit",isLoading:y,children:"Continue to modules"})]})]})})]})]})}export{xe as default};
